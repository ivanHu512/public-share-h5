/*! For license information please see videoAdvPageV3.f5e3d5bc.js.LICENSE.txt */
!function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);h.length;)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={17:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../";var s=this["webpackJsonpstardust-h5"]=this["webpackJsonpstardust-h5"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([939,0,1]),n()}([,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){(function(t){e.exports=function(){var e=e||function(e,r){var i;if("undefined"!==typeof window&&window.crypto&&(i=window.crypto),"undefined"!==typeof self&&self.crypto&&(i=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!==typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&"undefined"!==typeof t&&t.crypto&&(i=t.crypto),!i)try{i=n(212)}catch(v){}var o=function(){if(i){if("function"===typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(v){}if("function"===typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(v){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},c=s.lib={},l=c.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=c.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new u.init(t,e)}}),d=s.enc={},h=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},f=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},p=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},g=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,o);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(i,d);n=i.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(c.Hasher=g.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new y.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math);return e}()}).call(this,n(20))},function(e,t,n){e.exports=n(195)()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(72),n(213),n(214),n(41),n(215),n(42),n(136),n(92),n(216),n(137),n(217),n(218),n(219),n(93),n(220),n(33),n(15),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),o)}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(139);var i=n(99);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"i",(function(){return h}));var r=n(82),i=!1,o=function(){return Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"test"}).REACT_APP_ENV||"dev"},a=function(){return Object(r.parse)(window.location.href.split("?")[1])},s=function(){var e={};if(window.location.search.length>1)for(var t,n=0,r=window.location.search.substr(1).split("&");n<r.length;n++)t=r[n].split("="),e[decodeURIComponent(t[0])]=t.length>1?decodeURIComponent(t[1]):"";return e},c=function(e){var t=[],n=function(n){var r=e[n];(null===r||void 0===r?void 0:r.constructor)===Array?r.forEach((function(e){t.push(n+"="+e)})):t.push(n+"="+r)};for(var r in e)n(r);return t.join("&")},l=function(){var e,t={},n=navigator.userAgent.toLowerCase();return t.ie=!!(e=n.match(/(msie\s|trident.*rv:)([\d.]+)/))&&parseInt(e[2]),t.firefox=!!(e=n.match(/firefox\/([\d.]+)/))&&parseInt(e[1]),t.chrome=!!(e=n.match(/chrome\/([\d.]+)/))&&parseInt(e[1]),t.opera=!!(e=n.match(/opera.([\d.]+)/))&&parseInt(e[1]),t.safari=!!(e=n.match(/version\/([\d.]+).*safari/))&&parseInt(e[1]),t.android=!!(e=n.match(/android/))&&e,t.iphone=!!(e=n.match(/iphone os/))&&e,t.ipad=!!(e=n.match(/ipad/))&&e,t.ios=t.ipad||t.iphone,t.mac=/mac/i.test(n),t.appleWatch=/applewatch/i.test(n),t.isWin32=/win32/i.test(window.navigator.platform),t.isWeixin=!!(e=n.match(/MicroMessenger/i))&&!!e,t.isUcweb=!!(e=n.match(/ucbrowser/))&&!!e,t.isMqq=!!(e=n.match(/mqqbrowser/))&&!!e,t.isWeiBo=!!(e=n.match(/__weibo__/))&&!!e,t},u=function(e){for(var t="AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789",n="",r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n},d=function(e,t){var n="";return(t||document.cookie).split("; ").forEach((function(t){var r=t.split("=");if(r[0]===e)return n=r[1],r[1]})),n||""},h=function(e){var t=new URLSearchParams(window.location.search);return Object.keys(e).forEach((function(n){t.set(n,e[n])})),"".concat(location.origin).concat(location.pathname,"?").concat(t.toString())}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return u}));var r=n(16),i=n(115),o=n(60),a=n(88);function s(){var e=Object(o.a)();return Object(i.a)(e).getCurrentScope()}function c(){var e=Object(o.a)();return Object(i.a)(e).getIsolationScope()}function l(){return Object(r.b)("globalScope",(function(){return new a.a}))}function u(){for(var e=Object(o.a)(),t=Object(i.a)(e),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(2===r.length){var s=r[0],c=r[1];return s?t.withSetScope(s,c):t.withScope(c)}return t.withScope(r[0])}function d(){for(var e=Object(o.a)(),t=Object(i.a)(e),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(2===r.length){var s=r[0],c=r[1];return s?t.withSetIsolationScope(s,c):t.withIsolationScope(c)}return t.withIsolationScope(r[0])}function h(){return s().getClient()}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return $})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return T})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return _})),n.d(t,"k",(function(){return E})),n.d(t,"l",(function(){return v})),n.d(t,"m",(function(){return m})),n.d(t,"n",(function(){return y}));var r=n(21),i=n(44),o=n(364),a=n(74),s=n(115),c=n(60),l=n(8),u=n(157),d=n(23),h=n(71),f=n(62),p=0,g=1;function y(e){var t=e.spanContext(),n=t.spanId,r=t.traceId,o=E(e),a=o.data,s=o.op,c=o.parent_span_id,l=o.status,u=o.origin;return Object(i.c)({parent_span_id:c,span_id:n,trace_id:r,data:a,op:s,status:l,origin:u})}function v(e){var t=e.spanContext(),n=t.spanId,r=t.traceId,o=E(e).parent_span_id;return Object(i.c)({parent_span_id:o,span_id:n,trace_id:r})}function m(e){var t=e.spanContext(),n=t.traceId,r=t.spanId,i=S(e);return Object(o.a)(n,r,i)}function _(e){return"number"===typeof e?b(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?b(e.getTime()):Object(a.c)()}function b(e){return e>9999999999?e/1e3:e}function E(e){if(function(e){return"function"===typeof e.getSpanJSON}(e))return e.getSpanJSON();try{var t=e.spanContext(),n=t.spanId,r=t.traceId;if(function(e){var t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}(e)){var o=e.attributes,a=e.startTime,s=e.name,c=e.endTime,l=e.parentSpanId,h=e.status;return Object(i.c)({span_id:n,trace_id:r,data:o,description:s,parent_span_id:l,start_timestamp:_(a),timestamp:_(c)||void 0,status:T(h),op:o[d.f],origin:o[d.g],_metrics_summary:Object(u.a)(e)})}return{span_id:n,trace_id:r}}catch(f){return{}}}function S(e){return e.spanContext().traceFlags===g}function T(e){if(e&&e.code!==h.c)return e.code===h.b?"ok":e.message||"unknown_error"}function w(e,t){var n=e._sentryRootSpan||e;Object(i.a)(t,"_sentryRootSpan",n),e._sentryChildSpans?e._sentryChildSpans.add(t):Object(i.a)(e,"_sentryChildSpans",new Set([t]))}function O(e,t){e._sentryChildSpans&&e._sentryChildSpans.delete(t)}function k(e){var t=new Set;return function e(n){if(!t.has(n)&&S(n)){t.add(n);var i,o=n._sentryChildSpans?Array.from(n._sentryChildSpans):[],a=Object(r.a)(o);try{for(a.s();!(i=a.n()).done;){e(i.value)}}catch(s){a.e(s)}finally{a.f()}}}(e),Array.from(t)}function C(e){return e._sentryRootSpan||e}function $(){var e=Object(c.a)(),t=Object(s.a)(e);return t.getActiveSpan?t.getActiveSpan():Object(f.a)(Object(l.b)())}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(33),void(o.lib.Cipher||function(e){var t=o,n=t.lib,r=n.Base,i=n.WordArray,a=n.BufferedBlockAlgorithm,s=t.enc,c=(s.Utf8,s.Base64),l=t.algo.EvpKDF,u=n.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:v}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),d=(n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),h=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=d.CBC=function(){var e=h.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=o}}),e}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(o);var c=i.create(a,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:p}),reset:function(){var e;u.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=i.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},v=n.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return g.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),m=(t.kdf={}).OpenSSL={execute:function(e,t,n,r,o){if(r||(r=i.random(8)),o)a=l.create({keySize:t+n,hasher:o}).compute(e,r);else var a=l.create({keySize:t+n}).compute(e,r);var s=i.create(a.words.slice(t),4*n);return a.sigBytes=4*t,g.create({key:a,iv:s,salt:r})}},_=n.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:m}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=i.iv;var o=v.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=i.iv,v.decrypt.call(this,e,t,i.key,r)}})}()))}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(158),i=globalThis;function o(e,t,n){var o=n||i,a=o.__SENTRY__=o.__SENTRY__||{},s=a[r.a]=a[r.a]||{};return s[e]||(s[e]=t())}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(99);function i(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(r.a)(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(81),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,o.default)(t))&&"function"!==typeof t?e:t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return r}));var r="sentry.source",i="sentry.sample_rate",o="sentry.op",a="sentry.origin",s="sentry.idle_span_finish_reason",c="sentry.measurement_unit",l="sentry.measurement_value",u="sentry.profile_id",d="sentry.exclusive_time"},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return _}));var r=Object.prototype.toString;function i(e){switch(r.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return m(e,Error)}}function o(e,t){return r.call(e)==="[object ".concat(t,"]")}function a(e){return o(e,"ErrorEvent")}function s(e){return o(e,"DOMError")}function c(e){return o(e,"DOMException")}function l(e){return o(e,"String")}function u(e){return"object"===typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function d(e){return null===e||u(e)||"object"!==typeof e&&"function"!==typeof e}function h(e){return o(e,"Object")}function f(e){return"undefined"!==typeof Event&&m(e,Event)}function p(e){return"undefined"!==typeof Element&&m(e,Element)}function g(e){return o(e,"RegExp")}function y(e){return Boolean(e&&e.then&&"function"===typeof e.then)}function v(e){return h(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function m(e,t){try{return e instanceof t}catch(n){return!1}}function _(e){return!("object"!==typeof e||null===e||!e.__isVue&&!e._isVue)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(141),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return a}));var r=n(73),i=n(16),o=["debug","info","warn","error","log","assert","trace"],a={};function s(e){if(!("console"in i.a))return e();var t=i.a.console,n={},r=Object.keys(a);r.forEach((function(e){var r=a[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((function(e){t[e]=n[e]}))}}var c=function(){var e=!1,t={enable:function(){e=!0},disable:function(){e=!1},isEnabled:function(){return e}};return r.a?o.forEach((function(n){t[n]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e&&s((function(){var e;(e=i.a.console)[n].apply(e,["".concat("Sentry Logger ","[").concat(n,"]:")].concat(r))}))}})):o.forEach((function(e){t[e]=function(){}})),t}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(11),i=n.n(r),o=n(18),a=n(1),s=n(17),c=n(25),l=n(6),u=n(129),d=n.n(u),h={dev:"https://dev-public-dta.stardustworld.cn/dt/api/event/log",test:"https://dev-public-dta.stardustworld.cn/dt/api/event/log",gray:"https://public-dta.stardustgod.com/dt/api/event/log",prod:"https://public-dta.stardustgod.com/dt/api/event/log"}[Object(l.c)()];function f(e){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),e.next=3,d.a.deflateSync(n);case 3:return r=e.sent,e.abrupt("return",new Promise((function(e,t){fetch("".concat(h),{method:"POST",keepalive:!0,body:r.toString("base64")}).then((function(t){t.json().then((function(t){e({res:t})}))})).catch((function(t){e({error:t})}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(117),y=new(function(){function e(){var t=this;Object(s.a)(this,e),this.VERSION="v1.0.0",this.CHANNEL_ID="WEB41001",this.LANGUAGE="",this.OS_VERSION="",this.DEVICE_ID="",this.errorLog=function(e){t.reportHandle({_event_name:"m_error_log",properties:Object(a.a)({},e)})}}return Object(c.a)(e,[{key:"setPublicParams",value:function(e){var t,n=e.VERSION,r=void 0===n?"v1.0.0":n,i=e.CHANNEL_ID,o=void 0===i?"WEB41001":i,a=e.LANGUAGE,s=void 0===a?"":a,c=e.OS_VERSION,l=void 0===c?"":c,u=e.DEVICE_ID,d=void 0===u?"":u;this.VERSION=r,this.CHANNEL_ID=o,this.LANGUAGE=s,this.OS_VERSION=(null===l||void 0===l||null===(t=l.replace(/(ios|android)/gi,""))||void 0===t?void 0:t.trim())||"",this.DEVICE_ID=d}},{key:"eventReport",value:function(e){var t=e.event_name,n=e.sub_event_name,r={_event_name:t,_sub_event_name:n,properties:e.properties};!n&&delete r._sub_event_name,this.reportHandle(r)}},{key:"clickReport",value:function(e){var t=e.eventName,n=e.properties;this.reportHandle({_event_name:"m_custom_event",_sub_event_name:t,properties:n})}},{key:"report",value:function(e){this.reportHandle(e)}},{key:"reportHandle",value:function(e){var t=this.getBaseInfo(),n=Object(a.a)(Object(a.a)({},t),e);console.log("\u4e0a\u62a5\u4fe1\u606f",e,n),this.reportInfoHandle(n)}},{key:"getBaseInfo",value:function(){var e,t,n={_app_id:"cm1009",_package_name:"h5",_app_channel_id:this.CHANNEL_ID,_app_version:this.VERSION,_app_game_version:"",_app_res_version:"",_app_install_id:localStorage.getItem("_app_install_id")||"",_app_activate_id:sessionStorage.getItem("_app_activate_id")||"",_device_id:this.DEVICE_ID,_ad_id:"",_androidid:"",_idfv:"",_os_type:Object(g.a)(),_os_version:this.OS_VERSION,_os_timezone_offset:"utc_offset=-8:00",_os_timestamp:Math.floor((new Date).getTime()),_device_network_type:0,_app_user_id:localStorage.getItem("uid")||"",_app_lang:this.LANGUAGE||(null===(e=navigator)||void 0===e?void 0:e.language)||(null===(t=navigator)||void 0===t?void 0:t.userLanguage)||"",_event_name:"",_sub_event_name:"",properties:{}},r=(new Date).getTimezoneOffset()/60,i=((new Date).getTimezoneOffset()%60).toString().padStart(2,"0");if(n._os_timezone_offset="utc_offset=".concat(r,":").concat(i),!localStorage.getItem("_app_install_id")){var o=String(Math.floor(1e7*(9*Math.random()+1)));n._app_install_id=o,localStorage.setItem("_app_install_id",o.toString())}if(!sessionStorage.getItem("_app_activate_id")){var a=String(Math.floor(1e7*(9*Math.random()+1)));n._app_activate_id=a,sessionStorage.setItem("_app_activate_id",a.toString())}return n}},{key:"reportInfoHandle",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,o,a,s,c,l,u=this,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"",r=n||String((new Date).getTime()),e.next=4,f([t]);case 4:if(o=e.sent,a=o.res,s=o.error,console.log("\u4e0a\u62a5\u7ed3\u679c",a,s),!s&&a&&1e4===(null===a||void 0===a?void 0:a.code)){e.next=18;break}if(c=JSON.parse(sessionStorage.getItem(r)||"{}"),!((l=c.step||1)>3)){e.next=14;break}return sessionStorage.removeItem(r),e.abrupt("return",0);case 14:sessionStorage.setItem(r,JSON.stringify({data:t,step:l})),setTimeout((function(){u.reportInfoHandle(JSON.parse(sessionStorage.getItem(r)).data,r),sessionStorage.setItem(r,JSON.stringify({data:t,step:l+1}))}),1e3*Math.pow(2,l)),e.next=19;break;case 18:sessionStorage.removeItem(r);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}())},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(141),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(281)),i=a(n(285)),o=a(n(81));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(136),n(93),function(){var e=o,t=e.lib,n=t.Base,r=t.WordArray,i=e.algo,a=i.MD5,s=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,o=i.hasher.create(),a=r.create(),s=a.words,c=i.keySize,l=i.iterations;s.length<c;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var u=1;u<l;u++)n=o.finalize(n),o.reset();a.concat(n)}return a.sigBytes=4*c,a}});e.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),o.EvpKDF)}()},function(e,t,n){"use strict";var r=n(69),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var o=Object.create(n(50));o.inherits=n(46);var a=n(120),s=n(86);o.inherits(d,a);for(var c=i(s.prototype),l=0;l<c.length;l++){var u=c[l];d.prototype[u]||(d.prototype[u]=s.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var a=i.apply(null,r);a&&e.push(a)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},,function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(68)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return I}));var r="function"===typeof atob,i="function"===typeof btoa,o="function"===typeof Buffer,a="function"===typeof TextDecoder?new TextDecoder:void 0,s="function"===typeof TextEncoder?new TextEncoder:void 0,c=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),l=function(e){var t={};return e.forEach((function(e,n){return t[e]=n})),t}(c),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),h="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return new Uint8Array(Array.prototype.slice.call(e,0).map(t))},f=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))},p=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},g=function(e){for(var t,n,r,i,o="",a=e.length%3,s=0;s<e.length;){if((n=e.charCodeAt(s++))>255||(r=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");o+=c[(t=n<<16|r<<8|i)>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}return a?o.slice(0,a-3)+"===".substring(a):o},y=i?function(e){return btoa(e)}:o?function(e){return Buffer.from(e,"binary").toString("base64")}:g,v=o?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=[],n=0,r=e.length;n<r;n+=4096)t.push(d.apply(null,e.subarray(n,n+4096)));return y(t.join(""))},m=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?d(192|t>>>6)+d(128|63&t):d(224|t>>>12&15)+d(128|t>>>6&63)+d(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return d(240|t>>>18&7)+d(128|t>>>12&63)+d(128|t>>>6&63)+d(128|63&t)},_=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b=function(e){return e.replace(_,m)},E=o?function(e){return Buffer.from(e,"utf8").toString("base64")}:s?function(e){return v(s.encode(e))}:function(e){return y(b(e))},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?f(E(e)):E(e)},T=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return d(55296+(t>>>10))+d(56320+(1023&t));case 3:return d((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return d((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},O=function(e){return e.replace(T,w)},k=function(e){if(e=e.replace(/\s+/g,""),!u.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,n,r,i="",o=0;o<e.length;)t=l[e.charAt(o++)]<<18|l[e.charAt(o++)]<<12|(n=l[e.charAt(o++)])<<6|(r=l[e.charAt(o++)]),i+=64===n?d(t>>16&255):64===r?d(t>>16&255,t>>8&255):d(t>>16&255,t>>8&255,255&t);return i},C=r?function(e){return atob(p(e))}:o?function(e){return Buffer.from(e,"base64").toString("binary")}:k,$=o?function(e){return h(Buffer.from(e,"base64"))}:function(e){return h(C(e),(function(e){return e.charCodeAt(0)}))},A=o?function(e){return Buffer.from(e,"base64").toString("utf8")}:a?function(e){return a.decode($(e))}:function(e){return O(C(e))},P=function(e){return p(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})))},I=function(e){return A(P(e))}},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(){var e=i,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var n=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(n=s)}return function(e,n,r){for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2,c=r[e.charCodeAt(a)]>>>6-a%4*2,l=s|c;i[o>>>2]|=l<<24-o%4*8,o++}return t.create(i,o)}(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),i.enc.Base64)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],g=e[t+4],y=e[t+5],v=e[t+6],m=e[t+7],_=e[t+8],b=e[t+9],E=e[t+10],S=e[t+11],T=e[t+12],w=e[t+13],O=e[t+14],k=e[t+15],C=o[0],$=o[1],A=o[2],P=o[3];C=l(C,$,A,P,a,7,s[0]),P=l(P,C,$,A,c,12,s[1]),A=l(A,P,C,$,f,17,s[2]),$=l($,A,P,C,p,22,s[3]),C=l(C,$,A,P,g,7,s[4]),P=l(P,C,$,A,y,12,s[5]),A=l(A,P,C,$,v,17,s[6]),$=l($,A,P,C,m,22,s[7]),C=l(C,$,A,P,_,7,s[8]),P=l(P,C,$,A,b,12,s[9]),A=l(A,P,C,$,E,17,s[10]),$=l($,A,P,C,S,22,s[11]),C=l(C,$,A,P,T,7,s[12]),P=l(P,C,$,A,w,12,s[13]),A=l(A,P,C,$,O,17,s[14]),C=u(C,$=l($,A,P,C,k,22,s[15]),A,P,c,5,s[16]),P=u(P,C,$,A,v,9,s[17]),A=u(A,P,C,$,S,14,s[18]),$=u($,A,P,C,a,20,s[19]),C=u(C,$,A,P,y,5,s[20]),P=u(P,C,$,A,E,9,s[21]),A=u(A,P,C,$,k,14,s[22]),$=u($,A,P,C,g,20,s[23]),C=u(C,$,A,P,b,5,s[24]),P=u(P,C,$,A,O,9,s[25]),A=u(A,P,C,$,p,14,s[26]),$=u($,A,P,C,_,20,s[27]),C=u(C,$,A,P,w,5,s[28]),P=u(P,C,$,A,f,9,s[29]),A=u(A,P,C,$,m,14,s[30]),C=d(C,$=u($,A,P,C,T,20,s[31]),A,P,y,4,s[32]),P=d(P,C,$,A,_,11,s[33]),A=d(A,P,C,$,S,16,s[34]),$=d($,A,P,C,O,23,s[35]),C=d(C,$,A,P,c,4,s[36]),P=d(P,C,$,A,g,11,s[37]),A=d(A,P,C,$,m,16,s[38]),$=d($,A,P,C,E,23,s[39]),C=d(C,$,A,P,w,4,s[40]),P=d(P,C,$,A,a,11,s[41]),A=d(A,P,C,$,p,16,s[42]),$=d($,A,P,C,v,23,s[43]),C=d(C,$,A,P,b,4,s[44]),P=d(P,C,$,A,T,11,s[45]),A=d(A,P,C,$,k,16,s[46]),C=h(C,$=d($,A,P,C,f,23,s[47]),A,P,a,6,s[48]),P=h(P,C,$,A,m,10,s[49]),A=h(A,P,C,$,O,15,s[50]),$=h($,A,P,C,y,21,s[51]),C=h(C,$,A,P,T,6,s[52]),P=h(P,C,$,A,p,10,s[53]),A=h(A,P,C,$,E,15,s[54]),$=h($,A,P,C,c,21,s[55]),C=h(C,$,A,P,_,6,s[56]),P=h(P,C,$,A,k,10,s[57]),A=h(A,P,C,$,v,15,s[58]),$=h($,A,P,C,w,21,s[59]),C=h(C,$,A,P,g,6,s[60]),P=h(P,C,$,A,S,10,s[61]),A=h(A,P,C,$,f,15,s[62]),$=h($,A,P,C,b,21,s[63]),o[0]=o[0]+C|0,o[1]=o[1]+$|0,o[2]=o[2]+A|0,o[3]=o[3]+P|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function u(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function d(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function h(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),i.MD5)}()},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return f}));var r=n(1),i=n(324),o=n(73),a=n(24),s=n(28),c=n(113);function l(e,t,n){if(t in e){var r=e[t],i=n(r);"function"===typeof i&&d(i,r),e[t]=i}}function u(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(r){o.a&&s.c.log('Failed to add non-enumerable property "'.concat(t,'" to object'),e)}}function d(e,t){try{var n=t.prototype||{};e.prototype=t.prototype=n,u(e,"__sentry_original__",t)}catch(r){}}function h(e){return e.__sentry_original__}function f(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}function p(e){if(Object(a.d)(e))return Object(r.a)({message:e.message,name:e.name,stack:e.stack},y(e));if(Object(a.f)(e)){var t=Object(r.a)({type:e.type,target:g(e.target),currentTarget:g(e.currentTarget)},y(e));return"undefined"!==typeof CustomEvent&&Object(a.g)(e,CustomEvent)&&(t.detail=e.detail),t}return e}function g(e){try{return Object(a.c)(e)?Object(i.d)(e):Object.prototype.toString.call(e)}catch(t){return"<unknown>"}}function y(e){if("object"===typeof e&&null!==e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=Object.keys(p(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Object(c.d)(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:Object(c.d)(i,t)}return""}function m(e){return function e(t,n){if(function(e){if(!Object(a.i)(e))return!1;try{var t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(n){return!0}}(t)){var r=n.get(t);if(void 0!==r)return r;var i={};n.set(t,i);for(var o=0,s=Object.keys(t);o<s.length;o++){var c=s[o];"undefined"!==typeof t[c]&&(i[c]=e(t[c],n))}return i}if(Array.isArray(t)){var l=n.get(t);if(void 0!==l)return l;var u=[];return n.set(t,u),t.forEach((function(t){u.push(e(t,n))})),u}return t}(e,new Map)}},function(e,t,n){"use strict";(function(e){var r=n(166),i=n(167),o=n(119);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return $(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return F(U(t,e.length-n),e,n,r)}function E(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return E(e,t,n,r)}function T(e,t,n,r){return F(G(t),e,n,r)}function w(e,t,n,r){return F(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,l=e[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128===(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?s(e,t):void 0!==n?"string"===typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),d=0;d<s;++d)if(l[d]!==u[d]){o=l[d],a=u[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function $(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,o){return o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,o){return o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||x(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||x(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);x(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);x(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:U(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function F(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(20))},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";n.d(t,"g",(function(){return X})),n.d(t,"i",(function(){return J})),n.d(t,"b",(function(){return Z})),n.d(t,"j",(function(){return Q})),n.d(t,"c",(function(){return te})),n.d(t,"e",(function(){return ne})),n.d(t,"k",(function(){return re})),n.d(t,"a",(function(){return ie})),n.d(t,"d",(function(){return oe})),n.d(t,"f",(function(){return ae})),n.d(t,"h",(function(){return se})),n.d(t,"l",(function(){return ce}));var r=n(5),i=n(95),o=n.n(i),a=n(4),s=n.n(a),c=n(40),l=Uint8Array,u=Uint16Array,d=Uint32Array,h=new l([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f=new l([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),p=new l([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=function(e,t){for(var n=new u(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new d(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},y=g(h,2),v=y[0],m=y[1];v[28]=258,m[258]=28;for(var _=g(f,0),b=_[0],E=(_[1],new u(32768)),S=0;S<32768;++S){var T=(43690&S)>>>1|(21845&S)<<1;T=(61680&(T=(52428&T)>>>2|(13107&T)<<2))>>>4|(3855&T)<<4,E[S]=((65280&T)>>>8|(255&T)<<8)>>>1}var w=function(e,t,n){for(var r=e.length,i=0,o=new u(t);i<r;++i)++o[e[i]-1];var a,s=new u(t);for(i=0;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new u(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var l=i<<4|e[i],d=t-e[i],h=s[e[i]-1]++<<d,f=h|(1<<d)-1;h<=f;++h)a[E[h]>>>c]=l}else for(a=new u(r),i=0;i<r;++i)e[i]&&(a[i]=E[s[e[i]-1]++]>>>15-e[i]);return a},O=new l(288);for(S=0;S<144;++S)O[S]=8;for(S=144;S<256;++S)O[S]=9;for(S=256;S<280;++S)O[S]=7;for(S=280;S<288;++S)O[S]=8;var k=new l(32);for(S=0;S<32;++S)k[S]=5;var C=w(O,9,1),$=w(k,5,1),A=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},P=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},I=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},x=function(e){return(e+7)/8|0},R=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof u?u:e instanceof d?d:l)(n-t);return r.set(e.subarray(t,n)),r},D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function e(t,n,r){var i=new Error(n||D[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,e),!r)throw i;return i},M=function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new l(0);var i=!t||n,o=!n||n.i;n||(n={}),t||(t=new l(3*r));var a=function(e){var n=t.length;if(e>n){var r=new l(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,c=n.p||0,u=n.b||0,d=n.l,g=n.d,y=n.m,m=n.n,_=8*r;do{if(!d){s=P(e,c,1);var E=P(e,c+1,3);if(c+=3,!E){var S=e[(F=x(c)+4)-4]|e[F-3]<<8,T=F+S;if(T>r){o&&L(0);break}i&&a(u+S),t.set(e.subarray(F,T),u),n.b=u+=S,n.p=c=8*T,n.f=s;continue}if(1==E)d=C,g=$,y=9,m=5;else if(2==E){var O=P(e,c,31)+257,k=P(e,c+10,15)+4,D=O+P(e,c+5,31)+1;c+=14;for(var M=new l(D),N=new l(19),j=0;j<k;++j)N[p[j]]=P(e,c+3*j,7);c+=3*k;var B=A(N),U=(1<<B)-1,G=w(N,B,1);for(j=0;j<D;){var F,V=G[P(e,c,U)];if(c+=15&V,(F=V>>>4)<16)M[j++]=F;else{var H=0,z=0;for(16==F?(z=3+P(e,c,3),c+=2,H=M[j-1]):17==F?(z=3+P(e,c,7),c+=3):18==F&&(z=11+P(e,c,127),c+=7);z--;)M[j++]=H}}var K=M.subarray(0,O),W=M.subarray(O);y=A(K),m=A(W),d=w(K,y,1),g=w(W,m,1)}else L(1);if(c>_){o&&L(0);break}}i&&a(u+131072);for(var Y=(1<<y)-1,q=(1<<m)-1,X=c;;X=c){var J=(H=d[I(e,c)&Y])>>>4;if((c+=15&H)>_){o&&L(0);break}if(H||L(2),J<256)t[u++]=J;else{if(256==J){X=c,d=null;break}var Z=J-254;if(J>264){var Q=h[j=J-257];Z=P(e,c,(1<<Q)-1)+v[j],c+=Q}var ee=g[I(e,c)&q],te=ee>>>4;ee||L(3),c+=15&ee;W=b[te];if(te>3){Q=f[te];W+=I(e,c)&(1<<Q)-1,c+=Q}if(c>_){o&&L(0);break}i&&a(u+131072);for(var ne=u+Z;u<ne;u+=4)t[u]=t[u-W],t[u+1]=t[u+1-W],t[u+2]=t[u+2-W],t[u+3]=t[u+3-W];u=ne}}n.l=d,n.p=X,n.b=u,n.f=s,d&&(s=1,n.m=y,n.d=g,n.n=m)}while(!s);return u==t.length?t:R(t,0,u)},N=new l(0),j=function(e){31==e[0]&&139==e[1]&&8==e[2]||L(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},B=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},U=function(e){(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&L(6,"invalid zlib data"),32&e[1]&&L(6,"invalid zlib data: preset dictionaries not supported")};function G(e,t){return M(e,t)}function F(e,t){return M(e.subarray(j(e),-8),t||new l(B(e)))}function V(e,t){return M((U(e),e.subarray(2,-4)),t)}function H(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?F(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?G(e,t):V(e,t)}var z="undefined"!=typeof TextDecoder&&new TextDecoder;try{z.decode(N,{stream:!0}),1}catch(le){}var K=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,R(e,n-1)];i?3==i?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&i?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}};function W(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(z)return z.decode(e);var i=K(e),o=i[0];return i[1].length&&L(8),o}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var Y="VvRSNGFynLBW7aCP",q="gLn8sxqpzyNjehDP";var X=function(e){if(!e)return{};var t={};try{e.split("?")[1].split("&").forEach((function(e){var n=e.split("=");t[n[0]]=n[1]}))}catch(n){return{}}return t};function J(e){var t=e.clientToken,n=void 0===t?"":t,r=e.time,i=void 0===r?0:r;return o()(o()("".concat(n).concat(n.split("").reverse().join("")).concat(i)).split("").reverse().join(""))}var Z=function(e){var t,n,r,i,o=document.createElement("input");o.value=e,o.setAttribute("readonly","readonly"),o.setSelectionRange(0,o.value.length),document.body.appendChild(o),o.select();var a=document.createRange();a.selectNode(o),(null===(t=window)||void 0===t?void 0:t.getSelection)&&(null===(n=window.getSelection())||void 0===n||n.addRange(a)),o.select(),o.setSelectionRange(0,o.value.length),document.execCommand("Copy"),(null===(r=window)||void 0===r?void 0:r.getSelection)&&(null===(i=window.getSelection())||void 0===i||i.removeAllRanges()),o.className="oInput",o.style.display="none",console.log("success",e),document.body.removeChild(o)},Q=function(){var e=navigator.userAgent;return e.indexOf("FB_I")>-1||e.indexOf("FBAV")>-1||e.indexOf("FBAN")>-1||e.indexOf("FBIOS")>-1},ee="zj8N6zKEdrK8d1MxwHSvExdgQ868q1yT",te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee,n=Object(r.a)(Object.keys(e).map((function(t){return{key:t,value:"object"===typeof e[t]?JSON.stringify(e[t]):e[t]}})).filter((function(e){e.key;var t=e.value;return!(""===t||null===t||void 0===t||"null"===t)}))).sort((function(e,t){var n=e.key.toUpperCase(),r=t.key.toUpperCase();return n<r?-1:n>r?1:0})),i=n.map((function(e){var t=e.key,n=e.value;return"".concat(t,"=").concat(n)})).join("&"),o=s.a.HmacSHA256(i,t).toString();return o},ne=function(e){for(var t="AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789",n="",r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n},re=function(e){if("string"!==typeof e)throw new Error("str is not a string");try{var t=JSON.parse(e);return!("object"!==typeof t||!t)}catch(le){return!1}};function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e||e.indexOf("Error")>-1||"string"!==typeof e)return{};var t=s.a.enc.Utf8.parse("VvRSNGFynLBW7aCP"),n=s.a.enc.Utf8.parse("gLn8sxqpzyNjehDP"),r=s.a.AES.decrypt(e,t,{mode:s.a.mode.CBC,iv:n}),i=r.toString(s.a.enc.Base64),o=Object(c.a)(i),a=atob(o),l=a,u=l.split("").map((function(e){return e.charCodeAt(0)})),d=new Uint8Array(u),h=H(d),f=W(h);return JSON.parse(f)}var oe=function(e){try{var t=e;if(t){var n=s.a.AES.decrypt(t,"reelshort-web-password").toString(s.a.enc.Utf8);return JSON.parse(n)}return null}catch(r){return console.error("Error getting decrypted item:",r),null}};function ae(){var e=0,t=window.screen,n=navigator.userAgent.toLowerCase();return void 0!==window.devicePixelRatio?e=window.devicePixelRatio:-1!==n.indexOf("msie")?(null===t||void 0===t?void 0:t.deviceXDPI)&&(null===t||void 0===t?void 0:t.logicalXDPI)&&(e=(null===t||void 0===t?void 0:t.deviceXDPI)/(null===t||void 0===t?void 0:t.logicalXDPI)):void 0!==window.outerWidth&&void 0!==window.innerWidth&&(e=window.outerWidth/window.innerWidth),e&&(e=Math.round(100*e)),e}var se=function(){return{ct:function(e){try{var t=s.a.AES.encrypt(e,s.a.enc.Utf8.parse(Y),{iv:s.a.enc.Utf8.parse(q),mode:s.a.mode.CBC});return Object(c.b)(t.toString())}catch(n){return console.error("\u52a0\u5bc6\u5931\u8d25:",n),""}}(Intl.DateTimeFormat().resolvedOptions().timeZone),domain:window.location.hostname}};function ce(e){var t=e,n="";try{for(;(n=decodeURIComponent(t))!==t;)t=n}catch(le){}return t}},function(e,t,n){var r=n(67),i=n(143),o=n(100),a=Object.defineProperty;t.f=n(39)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"===typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"===typeof e},t.isString=function(e){return"string"===typeof e},t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"===typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"===typeof e},t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(45).Buffer.isBuffer},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return a}));var r=n(1),i=n(44),o=(n(113),n(16));function a(){var e=o.a,t=e.crypto||e.msCrypto,n=function(){return 16*Math.random()};try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=function(){var e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(r){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(function(e){return(e^(15&n())>>e/4).toString(16)}))}function s(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function c(e){var t=e.message,n=e.event_id;if(t)return t;var r=s(e);return r?r.type&&r.value?"".concat(r.type,": ").concat(r.value):r.type||r.value||n||"<unknown>":n||"<unknown>"}function l(e,t,n){var r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function u(e,t){var n=s(e);if(n){var i=n.mechanism;if(n.mechanism=Object(r.a)(Object(r.a)(Object(r.a)({},{type:"generic",handled:!0}),i),t),t&&"data"in t){var o=Object(r.a)(Object(r.a)({},i&&i.data),t.data);n.mechanism.data=o}}}function d(e){if(e&&e.__sentry_captured__)return!0;try{Object(i.a)(e,"__sentry_captured__",!0)}catch(t){}return!1}function h(e){return Array.isArray(e)?e:[e]}},function(e,t,n){var r=n(37),i=n(38),o=n(142),a=n(53),s=n(49),c=function e(t,n,c){var l,u,d,h=t&e.F,f=t&e.G,p=t&e.S,g=t&e.P,y=t&e.B,v=t&e.W,m=f?i:i[n]||(i[n]={}),_=m.prototype,b=f?r:p?r[n]:(r[n]||{}).prototype;for(l in f&&(c=n),c)(u=!h&&b&&void 0!==b[l])&&s(m,l)||(d=u?b[l]:c[l],m[l]=f&&"function"!=typeof b[l]?c[l]:y&&u?o(d,r):v&&b[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):g&&"function"==typeof d?o(Function.call,d):d,g&&((m.virtual||(m.virtual={}))[l]=d,t&e.R&&_&&!_[l]&&a(_,l,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(48),i=n(76);e.exports=n(39)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var r=n(146),i=n(101);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(104)("wks"),i=n(79),o=n(37).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(252),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(16),i=n(158);function o(){return a(r.a),r.a}function a(e){var t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||i.a,t[i.a]=t[i.a]||{}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(44),i=(n(304),n(156)),o=n(8),a=n(23),s=n(10);function c(e,t){var n=e;Object(r.a)(n,"_frozenDsc",t)}function l(e,t){var n=t.getOptions(),o=(t.getDsn()||{}).publicKey,a=Object(r.c)({environment:n.environment||i.a,release:n.release,public_key:o,trace_id:e});return t.emit("createDsc",a),a}function u(e){var t=Object(o.a)();if(!t)return{};var n=l(Object(s.k)(e).trace_id||"",t),r=Object(s.e)(e);if(!r)return n;var i=r._frozenDsc;if(i)return i;var c=Object(s.k)(r),u=c.data||{},d=u[a.h];null!=d&&(n.sample_rate="".concat(d));var h=u[a.i];return h&&"url"!==h&&(n.transaction=c.description),n.sampled=String(Object(s.i)(r)),t.emit("createDsc",n),n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(44);function i(e,t){t?Object(r.a)(e,"_sentrySpan",t):delete e._sentrySpan}function o(e){return e._sentrySpan}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(63);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(43),i=n(75),o=n(96);function a(e){return function(){var t,n=Object(r.a)(e);if(Object(i.a)()){var a=Object(r.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(o.a)(this,t)}}},,function(e,t,n){var r=n(54);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){"use strict";(function(t){"undefined"===typeof t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,n(27))},function(e,t,n){"use strict";var r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},a={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a}));var r=0,i=1,o=2;function a(e,t){e.setAttribute("http.response.status_code",t);var n=function(e){if(e<400&&e>=100)return{code:i};if(e>=400&&e<500)switch(e){case 401:return{code:o,message:"unauthenticated"};case 403:return{code:o,message:"permission_denied"};case 404:return{code:o,message:"not_found"};case 409:return{code:o,message:"already_exists"};case 413:return{code:o,message:"failed_precondition"};case 429:return{code:o,message:"resource_exhausted"};case 499:return{code:o,message:"cancelled"};default:return{code:o,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:o,message:"unimplemented"};case 503:return{code:o,message:"unavailable"};case 504:return{code:o,message:"deadline_exceeded"};default:return{code:o,message:"internal_error"}}return{code:o,message:"unknown_error"}}(t);"unknown_error"!==n.message&&e.setStatus(n)}},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(e){var t=i,n=t.lib,r=n.Base,o=n.WordArray,a=t.x64={};a.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),i)}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n(16);function i(){return Date.now()/1e3}var o=function(){var e=r.a.performance;if(!e||!e.now)return i;var t=Date.now()-e.now(),n=void 0==e.timeOrigin?t:e.timeOrigin;return function(){return(n+e.now())/1e3}}(),a=function(){var e=r.a.performance;if(e&&e.now){var t=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+t-n):36e5,o=i<36e5,a=e.timing&&e.timing.navigationStart,s="number"===typeof a?Math.abs(a+t-n):36e5;return o||s<36e5?i<=s?("timeOrigin",e.timeOrigin):("navigationStart",a):("dateNow",n)}"none"}()},function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(145),i=n(105);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(259)),i=a(n(271)),o="function"===typeof i.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===o(r.default)?function(e){return"undefined"===typeof e?"undefined":o(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":o(e)}},,function(e,t,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&v(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,a,s;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"===typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):y(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"===typeof c)o(c,this,t);else{var l=c.length,u=y(c,l);for(n=0;n<l;++n)o(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){(t=e.exports=n(120)).Stream=t,t.Readable=t,t.Writable=n(86),t.Duplex=n(34),t.Transform=n(124),t.PassThrough=n(176)},function(e,t,n){var r=n(45),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t,r,i){var o=n(69);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=m;var s,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:o.nextTick;m.WritableState=v;var l=Object.create(n(50));l.inherits=n(46);var u={deprecate:n(174)},d=n(121),h=n(85).Buffer,f=i.Uint8Array||function(){};var p,g=n(122);function y(){}function v(e,t){s=s||n(34),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,l=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick(w,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),w(e,t))}(e,n,r,t,i);else{var a=S(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),r?c(b,e,n,a,i):b(e,n,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function m(e){if(s=s||n(34),!p.call(m,this)&&!(this instanceof s))return new m(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),d.call(this)}function _(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function b(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),w(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0,c=!0;n;)i[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;i.allBuffers=c,_(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(_(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),w(e,t)}))}function w(e,t){var n=S(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(T,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(m,d),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===m&&(e&&e._writableState instanceof v)}})):p=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=e,h.isBuffer(r)||r instanceof f);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"===typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!==typeof n&&(n=y),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,e,n))&&(i.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=h.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,s,r,i,o);return c}(this,i,s,e,t,n)),a},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,n){var r=this._writableState;"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=g.destroy,m.prototype._undestroy=g.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(27),n(172).setImmediate,n(20))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(26)),i=c(n(35)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=c(n(290)),s=c(n(288));function c(e){return e&&e.__esModule?e:{default:e}}var l={duration:3,mask:!0},u=void 0,d=void 0;function h(e,t){var n;a.default.newInstance({prefixCls:"am-toast",style:{},transitionName:"am-fade",className:(0,i.default)((n={},(0,r.default)(n,"am-toast-mask",e),(0,r.default)(n,"am-toast-nomask",!e),n))},(function(e){return t&&t(e)}))}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.duration,r=arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.mask,a={info:"",success:"success",fail:"fail",offline:"dislike",loading:"loading"},c=a[t];d=!1,h(i,(function(t){if(t){if(u&&(u.destroy(),u=null),d)return t.destroy(),void(d=!1);u=t,t.notice({duration:n,style:{},content:c?o.createElement("div",{className:"am-toast-text am-toast-text-icon",role:"alert","aria-live":"assertive"},o.createElement(s.default,{type:c,size:"lg"}),o.createElement("div",{className:"am-toast-text-info"},e)):o.createElement("div",{className:"am-toast-text",role:"alert","aria-live":"assertive"},o.createElement("div",null,e)),closable:!0,onClose:function(){r&&r(),t.destroy(),t=null,u=null}})}}))}t.default={SHORT:3,LONG:8,show:function(e,t,n){return f(e,"info",t,(function(){}),n)},info:function(e,t,n,r){return f(e,"info",t,n,r)},success:function(e,t,n,r){return f(e,"success",t,n,r)},fail:function(e,t,n,r){return f(e,"fail",t,n,r)},offline:function(e,t,n,r){return f(e,"offline",t,n,r)},loading:function(e,t,n,r){return f(e,"loading",t,n,r)},hide:function(){u?(u.destroy(),u=null):d=!0},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?3:t,r=e.mask;l.duration=n,!1===r&&(l.mask=!1)}},e.exports=t.default},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(7),i=n(14),o=n(1),a=n(5),s=n(17),c=n(25),l=n(328),u=n(24),d=n(74),h=n(51),f=n(28),p=n(114),g=n(62),y=function(){function e(){Object(s.a)(this,e),this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Object(l.a)()}return Object(c.a)(e,[{key:"clone",value:function(){var t=new e;return t._breadcrumbs=Object(a.a)(this._breadcrumbs),t._tags=Object(o.a)({},this._tags),t._extra=Object(o.a)({},this._extra),t._contexts=Object(o.a)({},this._contexts),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=Object(a.a)(this._eventProcessors),t._requestSession=this._requestSession,t._attachments=Object(a.a)(this._attachments),t._sdkProcessingMetadata=Object(o.a)({},this._sdkProcessingMetadata),t._propagationContext=Object(o.a)({},this._propagationContext),t._client=this._client,t._lastEventId=this._lastEventId,Object(g.b)(t,Object(g.a)(this)),t}},{key:"setClient",value:function(e){this._client=e}},{key:"setLastEventId",value:function(e){this._lastEventId=e}},{key:"getClient",value:function(){return this._client}},{key:"lastEventId",value:function(){return this._lastEventId}},{key:"addScopeListener",value:function(e){this._scopeListeners.push(e)}},{key:"addEventProcessor",value:function(e){return this._eventProcessors.push(e),this}},{key:"setUser",value:function(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Object(p.c)(this._session,{user:e}),this._notifyScopeListeners(),this}},{key:"getUser",value:function(){return this._user}},{key:"getRequestSession",value:function(){return this._requestSession}},{key:"setRequestSession",value:function(e){return this._requestSession=e,this}},{key:"setTags",value:function(e){return this._tags=Object(o.a)(Object(o.a)({},this._tags),e),this._notifyScopeListeners(),this}},{key:"setTag",value:function(e,t){return this._tags=Object(o.a)(Object(o.a)({},this._tags),{},Object(i.a)({},e,t)),this._notifyScopeListeners(),this}},{key:"setExtras",value:function(e){return this._extra=Object(o.a)(Object(o.a)({},this._extra),e),this._notifyScopeListeners(),this}},{key:"setExtra",value:function(e,t){return this._extra=Object(o.a)(Object(o.a)({},this._extra),{},Object(i.a)({},e,t)),this._notifyScopeListeners(),this}},{key:"setFingerprint",value:function(e){return this._fingerprint=e,this._notifyScopeListeners(),this}},{key:"setLevel",value:function(e){return this._level=e,this._notifyScopeListeners(),this}},{key:"setTransactionName",value:function(e){return this._transactionName=e,this._notifyScopeListeners(),this}},{key:"setContext",value:function(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}},{key:"setSession",value:function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}},{key:"getSession",value:function(){return this._session}},{key:"update",value:function(e){if(!e)return this;var t="function"===typeof e?e(this):e,n=t instanceof y?[t.getScopeData(),t.getRequestSession()]:Object(u.i)(t)?[e,e.requestSession]:[],i=Object(r.a)(n,2),a=i[0],s=i[1],c=a||{},l=c.tags,d=c.extra,h=c.user,f=c.contexts,p=c.level,g=c.fingerprint,v=void 0===g?[]:g,m=c.propagationContext;return this._tags=Object(o.a)(Object(o.a)({},this._tags),l),this._extra=Object(o.a)(Object(o.a)({},this._extra),d),this._contexts=Object(o.a)(Object(o.a)({},this._contexts),f),h&&Object.keys(h).length&&(this._user=h),p&&(this._level=p),v.length&&(this._fingerprint=v),m&&(this._propagationContext=m),s&&(this._requestSession=s),this}},{key:"clear",value:function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Object(g.b)(this,void 0),this._attachments=[],this._propagationContext=Object(l.a)(),this._notifyScopeListeners(),this}},{key:"addBreadcrumb",value:function(e,t){var n="number"===typeof t?t:100;if(n<=0)return this;var r=Object(o.a)({timestamp:Object(d.b)()},e),i=this._breadcrumbs;return i.push(r),this._breadcrumbs=i.length>n?i.slice(-n):i,this._notifyScopeListeners(),this}},{key:"getLastBreadcrumb",value:function(){return this._breadcrumbs[this._breadcrumbs.length-1]}},{key:"clearBreadcrumbs",value:function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}},{key:"addAttachment",value:function(e){return this._attachments.push(e),this}},{key:"clearAttachments",value:function(){return this._attachments=[],this}},{key:"getScopeData",value:function(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Object(g.a)(this)}}},{key:"setSDKProcessingMetadata",value:function(e){return this._sdkProcessingMetadata=Object(o.a)(Object(o.a)({},this._sdkProcessingMetadata),e),this}},{key:"setPropagationContext",value:function(e){return this._propagationContext=e,this}},{key:"getPropagationContext",value:function(){return this._propagationContext}},{key:"captureException",value:function(e,t){var n=t&&t.event_id?t.event_id:Object(h.f)();if(!this._client)return f.c.warn("No client configured on scope - will not capture exception!"),n;var r=new Error("Sentry syntheticException");return this._client.captureException(e,Object(o.a)(Object(o.a)({originalException:e,syntheticException:r},t),{},{event_id:n}),this),n}},{key:"captureMessage",value:function(e,t,n){var r=n&&n.event_id?n.event_id:Object(h.f)();if(!this._client)return f.c.warn("No client configured on scope - will not capture message!"),r;var i=new Error(e);return this._client.captureMessage(e,t,Object(o.a)(Object(o.a)({originalException:e,syntheticException:i},n),{},{event_id:r}),this),r}},{key:"captureEvent",value:function(e,t){var n=t&&t.event_id?t.event_id:Object(h.f)();return this._client?(this._client.captureEvent(e,Object(o.a)(Object(o.a)({},t),{},{event_id:n}),this),n):(f.c.warn("No client configured on scope - will not capture event!"),n)}},{key:"_notifyScopeListeners",value:function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)}}]),e}()},function(e,t,n){"use strict";var r=SyntaxError,i=Function,o=TypeError,a=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(t){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(k){s=null}var c=function(){throw new o},l=s?function(){try{return c}catch(e){try{return s(arguments,"callee").get}catch(t){return c}}}():c,u=n(199)(),d=Object.getPrototypeOf||function(e){return e.__proto__},h={},f="undefined"===typeof Uint8Array?void 0:d(Uint8Array),p={"%AggregateError%":"undefined"===typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":u?d([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"===typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?d(d([][Symbol.iterator]())):void 0,"%JSON%":"object"===typeof JSON?JSON:void 0,"%Map%":"undefined"===typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&u?d((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?void 0:Promise,"%Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&u?d((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?d(""[Symbol.iterator]()):void 0,"%Symbol%":u?Symbol:void 0,"%SyntaxError%":r,"%ThrowTypeError%":l,"%TypedArray%":f,"%TypeError%":o,"%Uint8Array%":"undefined"===typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(90),v=n(202),m=y.call(Function.call,Array.prototype.concat),_=y.call(Function.apply,Array.prototype.splice),b=y.call(Function.call,String.prototype.replace),E=y.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,w=function(e){var t=E(e,0,1),n=E(e,-1);if("%"===t&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return b(e,S,(function(e,t,n,r){i[i.length]=n?b(r,T,"$1"):t||e})),i},O=function(e,t){var n,i=e;if(v(g,i)&&(i="%"+(n=g[i])[0]+"%"),v(p,i)){var s=p[i];if(s===h&&(s=function e(t){var n;if("%AsyncFunction%"===t)n=a("async function () {}");else if("%GeneratorFunction%"===t)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=a("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=d(i.prototype))}return p[t]=n,n}(i)),"undefined"===typeof s&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new r("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new o('"allowMissing" argument must be a boolean');var n=w(e),i=n.length>0?n[0]:"",a=O("%"+i+"%",t),c=a.name,l=a.value,u=!1,d=a.alias;d&&(i=d[0],_(n,m([0,1],d)));for(var h=1,f=!0;h<n.length;h+=1){var g=n[h],y=E(g,0,1),b=E(g,-1);if(('"'===y||"'"===y||"`"===y||'"'===b||"'"===b||"`"===b)&&y!==b)throw new r("property names with quotes must have matching quotes");if("constructor"!==g&&f||(u=!0),v(p,c="%"+(i+="."+g)+"%"))l=p[c];else if(null!=l){if(!(g in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(s&&h+1>=n.length){var S=s(l,g);l=(f=!!S)&&"get"in S&&!("originalValue"in S.get)?S.get:l[g]}else f=v(l,g),l=l[g];f&&!u&&(p[c]=l)}}return l}},function(e,t,n){"use strict";var r=n(201);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g,o="RFC1738",a="RFC3986";e.exports={default:a,formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return String(e)}},RFC1738:o,RFC3986:a}},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var l=[],u=a.SHA256=o.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],d=n[6],h=n[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var p=l[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=l[f-2],v=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=g+l[f-7]+v+l[f-16]}var m=r&i^r&o^i&o,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+c[f]+l[f];h=d,d=u,u=s,s=a+b|0,a=o,o=i,i=r,r=b+(_+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u)}(Math),i.SHA256)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),void function(){var e=i,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,c=a.words,l=0;l<r;l++)s[l]^=1549556828,c[l]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())}()},function(e,t,n){"use strict";var r=n(197),i=n(207),o=n(91);e.exports={formats:o,parse:i,stringify:r}},function(e,t,n){!function(){var t=n(210),r=n(135).utf8,i=n(211),o=n(135).bin,a=function e(n,a){n.constructor==String?n=a&&"binary"===a.encoding?o.stringToBytes(n):r.stringToBytes(n):i(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||n.constructor===Uint8Array||(n=n.toString());for(var s=t.bytesToWords(n),c=8*n.length,l=1732584193,u=-271733879,d=-1732584194,h=271733878,f=0;f<s.length;f++)s[f]=16711935&(s[f]<<8|s[f]>>>24)|4278255360&(s[f]<<24|s[f]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var p=e._ff,g=e._gg,y=e._hh,v=e._ii;for(f=0;f<s.length;f+=16){var m=l,_=u,b=d,E=h;l=p(l,u,d,h,s[f+0],7,-680876936),h=p(h,l,u,d,s[f+1],12,-389564586),d=p(d,h,l,u,s[f+2],17,606105819),u=p(u,d,h,l,s[f+3],22,-1044525330),l=p(l,u,d,h,s[f+4],7,-176418897),h=p(h,l,u,d,s[f+5],12,1200080426),d=p(d,h,l,u,s[f+6],17,-1473231341),u=p(u,d,h,l,s[f+7],22,-45705983),l=p(l,u,d,h,s[f+8],7,1770035416),h=p(h,l,u,d,s[f+9],12,-1958414417),d=p(d,h,l,u,s[f+10],17,-42063),u=p(u,d,h,l,s[f+11],22,-1990404162),l=p(l,u,d,h,s[f+12],7,1804603682),h=p(h,l,u,d,s[f+13],12,-40341101),d=p(d,h,l,u,s[f+14],17,-1502002290),l=g(l,u=p(u,d,h,l,s[f+15],22,1236535329),d,h,s[f+1],5,-165796510),h=g(h,l,u,d,s[f+6],9,-1069501632),d=g(d,h,l,u,s[f+11],14,643717713),u=g(u,d,h,l,s[f+0],20,-373897302),l=g(l,u,d,h,s[f+5],5,-701558691),h=g(h,l,u,d,s[f+10],9,38016083),d=g(d,h,l,u,s[f+15],14,-660478335),u=g(u,d,h,l,s[f+4],20,-405537848),l=g(l,u,d,h,s[f+9],5,568446438),h=g(h,l,u,d,s[f+14],9,-1019803690),d=g(d,h,l,u,s[f+3],14,-187363961),u=g(u,d,h,l,s[f+8],20,1163531501),l=g(l,u,d,h,s[f+13],5,-1444681467),h=g(h,l,u,d,s[f+2],9,-51403784),d=g(d,h,l,u,s[f+7],14,1735328473),l=y(l,u=g(u,d,h,l,s[f+12],20,-1926607734),d,h,s[f+5],4,-378558),h=y(h,l,u,d,s[f+8],11,-2022574463),d=y(d,h,l,u,s[f+11],16,1839030562),u=y(u,d,h,l,s[f+14],23,-35309556),l=y(l,u,d,h,s[f+1],4,-1530992060),h=y(h,l,u,d,s[f+4],11,1272893353),d=y(d,h,l,u,s[f+7],16,-155497632),u=y(u,d,h,l,s[f+10],23,-1094730640),l=y(l,u,d,h,s[f+13],4,681279174),h=y(h,l,u,d,s[f+0],11,-358537222),d=y(d,h,l,u,s[f+3],16,-722521979),u=y(u,d,h,l,s[f+6],23,76029189),l=y(l,u,d,h,s[f+9],4,-640364487),h=y(h,l,u,d,s[f+12],11,-421815835),d=y(d,h,l,u,s[f+15],16,530742520),l=v(l,u=y(u,d,h,l,s[f+2],23,-995338651),d,h,s[f+0],6,-198630844),h=v(h,l,u,d,s[f+7],10,1126891415),d=v(d,h,l,u,s[f+14],15,-1416354905),u=v(u,d,h,l,s[f+5],21,-57434055),l=v(l,u,d,h,s[f+12],6,1700485571),h=v(h,l,u,d,s[f+3],10,-1894986606),d=v(d,h,l,u,s[f+10],15,-1051523),u=v(u,d,h,l,s[f+1],21,-2054922799),l=v(l,u,d,h,s[f+8],6,1873313359),h=v(h,l,u,d,s[f+15],10,-30611744),d=v(d,h,l,u,s[f+6],15,-1560198380),u=v(u,d,h,l,s[f+13],21,1309151649),l=v(l,u,d,h,s[f+4],6,-145523070),h=v(h,l,u,d,s[f+11],10,-1120210379),d=v(d,h,l,u,s[f+2],15,718787259),u=v(u,d,h,l,s[f+9],21,-343485551),l=l+m>>>0,u=u+_>>>0,d=d+b>>>0,h=h+E>>>0}return t.endian([l,u,d,h])};a._ff=function(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._gg=function(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._hh=function(e,t,n,r,i,o,a){var s=e+(t^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._ii=function(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(a(e,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):t.bytesToHex(r)}}()},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return o}));var i=n(58);function o(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?Object(i.a)(e):t}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Y}));var r=n(94);n(208);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function g(e,t,n){return(g=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function y(e){var t="function"===typeof Map?new Map:void 0;return(y=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return g(e,arguments,h(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)})(e)}function v(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){var t=p();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function _(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e){if(!Array.isArray(e))throw new TypeError("Middlewares must be an array!");for(var t=e.length,n=0;n<t;n++)if("function"!==typeof e[n])throw new TypeError("Middleware must be componsed of function");return function(t,n){var r=-1;return function i(o){if(o<=r)return Promise.reject(new Error("next() should not be called multiple times in one middleware!"));r=o;var a=e[o]||n;if(!a)return Promise.resolve();try{return Promise.resolve(a(t,(function(){return i(o+1)})))}catch(s){return Promise.reject(s)}}(0)}}var S=function(){function t(e){if(s(this,t),!Array.isArray(e))throw new TypeError("Default middlewares must be an array!");this.defaultMiddlewares=_(e),this.middlewares=[]}return l(t,[{key:"use",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!1,core:!1,defaultInstance:!1},i=!1,o=!1,s=!1;"number"===typeof r?(e&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"test"}),i=!0,o=!1):"object"===a(r)&&r&&(o=r.global||!1,i=r.core||!1,s=r.defaultInstance||!1),o?t.globalMiddlewares.splice(t.globalMiddlewares.length-t.defaultGlobalMiddlewaresLength,0,n):i?t.coreMiddlewares.splice(t.coreMiddlewares.length-t.defaultCoreMiddlewaresLength,0,n):s?this.defaultMiddlewares.push(n):this.middlewares.push(n)}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=E([].concat(_(this.middlewares),_(this.defaultMiddlewares),_(t.globalMiddlewares),_(t.coreMiddlewares)));return n(e)}}]),t}();S.globalMiddlewares=[],S.defaultGlobalMiddlewaresLength=0,S.coreMiddlewares=[],S.defaultCoreMiddlewaresLength=0;var T=function(){function e(t){s(this,e),this.cache=new Map,this.timer={},this.extendOptions(t)}return l(e,[{key:"extendOptions",value:function(e){this.maxCache=e.maxCache||0}},{key:"get",value:function(e){return this.cache.get(JSON.stringify(e))}},{key:"set",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;if(this.maxCache>0&&this.cache.size>=this.maxCache){var i=_(this.cache.keys())[0];this.cache.delete(i),this.timer[i]&&clearTimeout(this.timer[i])}var o=JSON.stringify(e);this.cache.set(o,t),r>0&&(this.timer[o]=setTimeout((function(){n.cache.delete(o),delete n.timer[o]}),r))}},{key:"delete",value:function(e){var t=JSON.stringify(e);return delete this.timer[t],this.cache.delete(t)}},{key:"clear",value:function(){return this.timer={},this.cache.clear()}}]),e}(),w=function(e){d(n,e);var t=m(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RequestError";return s(this,n),(i=t.call(this,e)).name="RequestError",i.request=r,i.type=o,i}return n}(y(Error)),O=function(e){d(n,e);var t=m(n);function n(e,r,i,o){var a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ResponseError";return s(this,n),(a=t.call(this,r||e.statusText)).name="ResponseError",a.data=i,a.response=e,a.request=o,a.type=c,a}return n}(y(Error));function k(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsText(e,"GBK")}))}function C(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{return JSON.parse(e)}catch(i){if(t)throw new O(n,"JSON.parse fail",e,r,"ParseError")}return e}function $(e,t,n){return new Promise((function(r,i){setTimeout((function(){i(new w(t||"timeout of ".concat(e,"ms exceeded"),n,"Timeout"))}),e)}))}function A(e){return new Promise((function(t,n){e.cancelToken&&e.cancelToken.promise.then((function(e){n(e)}))}))}var P=Object.prototype.toString;function I(){var t;return"undefined"!==typeof e&&"[object process]"===P.call(e)&&(t="NODE"),"undefined"!==typeof XMLHttpRequest&&(t="BROWSER"),t}function x(e){return"object"===a(e)&&"[object Array]"===Object.prototype.toString.call(e)}function R(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function D(e){return null!==e&&"object"===a(e)}function L(e,t){if(e)if("object"!==a(e)&&(e=[e]),x(e))for(var n=0;n<e.length;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function M(e){return R(e)?Object(r.parse)(e.toString(),{strictNullHandling:!0}):"string"===typeof e?[e]:e}function N(e){return Object(r.stringify)(e,{arrayFormat:"repeat",strictNullHandling:!0})}function j(e,t){return o(o(o({},e),t),{},{headers:o(o({},e.headers),t.headers),params:o(o({},M(e.params)),M(t.params)),method:(t.method||e.method||"get").toLowerCase()})}function B(e,t){var n=t.method;return"get"===(void 0===n?"get":n).toLowerCase()}function U(e,t){var n,r;if(e)if(t)n=t(e);else if(R(e))n=e.toString();else{if(x(e))r=[],L(e,(function(e){null===e||"undefined"===typeof e?r.push(e):r.push(D(e)?JSON.stringify(e):e)})),n=N(r);else r={},L(e,(function(e,t){var n,i=e;null===e||"undefined"===typeof e?r[t]=e:"object"===a(n=e)&&"[object Date]"===Object.prototype.toString.call(n)?i=e.toISOString():x(e)?i=e:D(e)&&(i=JSON.stringify(e)),r[t]=i})),n=N(r)}return n}var G=[function(e,t){if(!e)return t();var n=e.req,r=(n=void 0===n?{}:n).options,i=void 0===r?{}:r,a=i.method;if(-1===["post","put","patch","delete"].indexOf((void 0===a?"get":a).toLowerCase()))return t();var s=i.requestType,c=void 0===s?"json":s,l=i.data;if(l){var u=Object.prototype.toString.call(l);"[object Object]"===u||"[object Array]"===u?"json"===c?(i.headers=o({Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},i.headers),i.body=JSON.stringify(l)):"form"===c&&(i.headers=o({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},i.headers),i.body=N(l)):(i.headers=o({Accept:"application/json"},i.headers),i.body=l)}return e.req.options=i,t()},function(e,t){if(!e)return t();var n=e.req,r=(n=void 0===n?{}:n).options,i=void 0===r?{}:r,o=i.paramsSerializer,a=i.params,s=e.req,c=(s=void 0===s?{}:s).url,l=void 0===c?"":c;i.method=i.method?i.method.toUpperCase():"GET",i.credentials=i.credentials||"same-origin";var u=U(a,o);if(e.req.originUrl=l,u){var d=-1!==l.indexOf("?")?"&":"?";e.req.url="".concat(l).concat(d).concat(u)}return e.req.options=i,t()},function(e,t){var n;return t().then((function(){if(e){var t=e.res,r=void 0===t?{}:t,i=e.req,o=void 0===i?{}:i,a=(o||{}).options,s=(a=void 0===a?{}:a).responseType,c=void 0===s?"json":s,l=a.charset,u=void 0===l?"utf8":l,d=(a.getResponse,a.throwErrIfParseFail),h=void 0!==d&&d,f=a.parseResponse;if((void 0===f||f)&&r&&r.clone){if((n="BROWSER"===I()?r.clone():r).useCache=r.useCache||!1,"gbk"===u)try{return r.blob().then(k).then((function(e){return C(e,!1,n,o)}))}catch(p){throw new O(n,p.message,null,o,"ParseError")}else if("json"===c)return r.text().then((function(e){return C(e,h,n,o)}));try{return r[c]()}catch(p){throw new O(n,"responseType not support",null,o,"ParseError")}}}})).then((function(t){if(e){e.res;var r=e.req,i=void 0===r?{}:r,o=(i||{}).options,a=(o=void 0===o?{}:o).getResponse,s=void 0!==a&&a;if(n){if(n.status>=200&&n.status<300)return s?void(e.res={data:t,response:n}):void(e.res=t);throw new O(n,"http error",t,i,"HttpError")}}})).catch((function(t){if(t instanceof w||t instanceof O)throw t;var n=e.req,r=e.res;throw t.request=t.request||n,t.response=t.response||r,t.type=t.type||t.name,t.data=t.data||void 0,t}))}],F=[function(t,n){if(!t)return n();var r=t.req,i=(r=void 0===r?{}:r).options,o=void 0===i?{}:i,a=r.url,s=void 0===a?"":a,c=t.cache,l=t.responseInterceptors,u=o.timeout,d=void 0===u?0:u,h=o.timeoutMessage,f=o.__umiRequestCoreType__,p=void 0===f?"normal":f,g=o.useCache,y=void 0!==g&&g,v=o.method,m=void 0===v?"get":v,_=o.params,b=o.ttl,E=o.validateCache,S=void 0===E?B:E;if("normal"!==p)return e&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"test"}),n();var T=fetch;if(!T)throw new Error("Global fetch not exist!");var w,O="BROWSER"===I(),k=S(s,o)&&y&&O;if(k){var C=c.get({url:s,params:_,method:m});if(C)return(C=C.clone()).useCache=!0,t.res=C,n()}return w=d>0?Promise.race([A(o),T(s,o),$(d,h,t.req)]):Promise.race([A(o),T(s,o)]),l.forEach((function(e){w=w.then((function(t){var n="function"===typeof t.clone?t.clone():t;return e(n,o)}))})),w.then((function(e){if(k&&200===e.status){var r=e.clone();r.useCache=!0,c.set({url:s,params:_,method:m},r,b)}return t.res=e,n()}))}];S.globalMiddlewares=G,S.defaultGlobalMiddlewaresLength=G.length,S.coreMiddlewares=F,S.defaultCoreMiddlewaresLength=F.length;var V=function(){function e(t){s(this,e),this.onion=new S([]),this.fetchIndex=0,this.mapCache=new T(t),this.initOptions=t,this.instanceRequestInterceptors=[],this.instanceResponseInterceptors=[]}return l(e,[{key:"use",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!1,core:!1};return this.onion.use(e,t),this}},{key:"extendOptions",value:function(e){this.initOptions=j(this.initOptions,e),this.mapCache.extendOptions(e)}},{key:"dealRequestInterceptors",value:function(t){return[].concat(_(e.requestInterceptors),_(this.instanceRequestInterceptors)).reduce((function(e,n){return e.then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.req.url=e.url||t.req.url,t.req.options=e.options||t.req.options,n(t.req.url,t.req.options)}))}),Promise.resolve()).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.req.url=e.url||t.req.url,t.req.options=e.options||t.req.options,Promise.resolve()}))}},{key:"request",value:function(t,n){var r=this,i=this.onion,a={req:{url:t,options:o(o({},n),{},{url:t})},res:null,cache:this.mapCache,responseInterceptors:[].concat(_(e.responseInterceptors),_(this.instanceResponseInterceptors))};if("string"!==typeof t)throw new Error("url MUST be a string");return new Promise((function(e,t){r.dealRequestInterceptors(a).then((function(){return i.execute(a)})).then((function(){e(a.res)})).catch((function(n){var r=a.req.options.errorHandler;if(r)try{var i=r(n);e(i)}catch(o){t(o)}else t(n)}))}))}}],[{key:"requestUse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!0};if("function"!==typeof t)throw new TypeError("Interceptor must be function!");n.global?e.requestInterceptors.push(t):this.instanceRequestInterceptors.push(t)}},{key:"responseUse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!0};if("function"!==typeof t)throw new TypeError("Interceptor must be function!");n.global?e.responseInterceptors.push(t):this.instanceResponseInterceptors.push(t)}}]),e}();function H(e){this.message=e}function z(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new H(e),t(n.reason))}))}function K(e){return!(!e||!e.__CANCEL__)}V.requestInterceptors=[function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.prefix,r=t.suffix;return n&&(e="".concat(n).concat(e)),r&&(e="".concat(e).concat(r)),{url:e,options:t}}],V.responseInterceptors=[],H.prototype.toString=function(){return this.message?"Cancel: ".concat(this.message):"Cancel"},H.prototype.__CANCEL__=!0,z.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},z.source=function(){var e;return{token:new z((function(t){e=t})),cancel:e}};var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new V(e),n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=j(t.initOptions,n);return t.request(e,r)};n.use=t.use.bind(t),n.fetchIndex=t.fetchIndex,n.interceptors={request:{use:V.requestUse.bind(t)},response:{use:V.responseUse.bind(t)}};var r=["get","post","delete","put","patch","head","options","rpc"];return r.forEach((function(e){n[e]=function(t,r){return n(t,o(o({},r),{},{method:e}))}})),n.Cancel=H,n.CancelToken=z,n.isCancel=K,n.extendOptions=t.extendOptions.bind(t),n.middlewares={instance:t.onion.middlewares,defaultInstance:t.onion.defaultMiddlewares,global:S.globalMiddlewares,core:S.coreMiddlewares},n},Y=function(e){return W(e)};W({parseResponse:!1}),W({})}).call(this,n(27))},,,function(e,t,n){var r=n(54);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(104)("keys"),i=n(79);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(38),i=n(37),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(78)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(101);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports={}},function(e,t,n){var r=n(67),i=n(264),o=n(105),a=n(103)("IE_PROTO"),s=function(){},c=function(){var e,t=n(144)("iframe"),r=o.length;for(t.style.display="none",n(265).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(48).f,i=n(49),o=n(56)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(56)},function(e,t,n){var r=n(37),i=n(38),o=n(78),a=n(111),s=n(48).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return i}));var r=n(24);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!==typeof e||0===t||e.length<=t?e:"".concat(e.slice(0,t),"...")}function o(e,t){var n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);var i=Math.max(t-60,0);i<5&&(i=0);var o=Math.min(i+140,r);return o>r-5&&(o=r),o===r&&(i=Math.max(o-140,0)),n=n.slice(i,o),i>0&&(n="'{snip} ".concat(n)),o<r&&(n+=" {snip}"),n}function a(e,t){if(!Array.isArray(e))return"";for(var n=[],i=0;i<e.length;i++){var o=e[i];try{Object(r.o)(o)?n.push("[VueViewModel]"):n.push(String(o))}catch(a){n.push("[value cannot be serialized]")}}return n.join(t)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!Object(r.l)(e)&&(Object(r.k)(t)?t.test(e):!!Object(r.l)(t)&&(n?e===t:e.includes(t)))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.some((function(t){return s(e,t,n)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n(74),i=n(51),o=n(44);function a(e){var t=Object(r.c)(),n={sid:Object(i.f)(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:function(){return function(e){return Object(o.c)({sid:"".concat(e.sid),init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"===typeof e.did||"string"===typeof e.did?"".concat(e.did):void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)}};return e&&s(n,e),n}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Object(r.c)(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Object(i.f)()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did="".concat(t.did)),"number"===typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"===typeof t.duration)e.duration=t.duration;else{var n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"===typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function c(e,t){var n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),s(e,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(60),i=n(17),o=n(25),a=n(24),s=n(16),c=n(88);var l=function(){function e(t,n){var r,o;Object(i.a)(this,e),r=t||new c.a,o=n||new c.a,this._stack=[{scope:r}],this._isolationScope=o}return Object(o.a)(e,[{key:"withScope",value:function(e){var t,n=this,r=this._pushScope();try{t=e(r)}catch(i){throw this._popScope(),i}return Object(a.n)(t)?t.then((function(e){return n._popScope(),e}),(function(e){throw n._popScope(),e})):(this._popScope(),t)}},{key:"getClient",value:function(){return this.getStackTop().client}},{key:"getScope",value:function(){return this.getStackTop().scope}},{key:"getIsolationScope",value:function(){return this._isolationScope}},{key:"getStack",value:function(){return this._stack}},{key:"getStackTop",value:function(){return this._stack[this._stack.length-1]}},{key:"_pushScope",value:function(){var e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}},{key:"_popScope",value:function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}}]),e}();function u(){var e=Object(r.a)(),t=Object(r.b)(e);return t.stack=t.stack||new l(Object(s.b)("defaultCurrentScope",(function(){return new c.a})),Object(s.b)("defaultIsolationScope",(function(){return new c.a})))}function d(e){return u().withScope(e)}function h(e,t){var n=u();return n.withScope((function(){return n.getStackTop().scope=e,t(e)}))}function f(e){return u().withScope((function(){return e(u().getIsolationScope())}))}function p(e){var t=Object(r.b)(e);return t.acs?t.acs:{withIsolationScope:f,withScope:d,withSetScope:h,withSetIsolationScope:function(e,t){return f(t)},getCurrentScope:function(){return u().getScope()},getIsolationScope:function(){return u().getIsolationScope()}}}},function(e,t,n){"use strict";var r=n(11),i=n.n(r),o=n(18),a=n(1),s=(n(159),n(87)),c=n.n(s),l=n(97),u=n(6),d=Object(l.a)({errorHandler:function(e){var t=e.response;throw console.log(t,"response",e),(void 0!==(null===e||void 0===e?void 0:e.data)&&null!==(null===e||void 0===e?void 0:e.response)||e.toString().indexOf("timeout"))&&(c.a.info("Network connection error. Please check your network settings and try again."),localStorage.removeItem("cToken")),e},useCache:!0,timeout:2e4});d.interceptors.request.use((function(e,t){console.log("\u73af\u5883",Object(u.c)(),e,u.h);var n=u.h?e:e.replace("/api","/v"),r={uid:localStorage.getItem("uid")||""};return{url:n,options:Object(a.a)(Object(a.a)({},t),{},{headers:r})}}),{global:!1}),d.interceptors.response.use(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("blob"!==n.responseType){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.clone().json();case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{global:!1}),t.a=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e="";switch(function(){var e="",t={},n=navigator.userAgent.toLowerCase();for(var r in t.Windows="Win32"===navigator.platform||"Windows"===navigator.platform,t.Mac="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform,t.IOS=n.indexOf("iphone")>-1||n.indexOf("ipod")>-1||n.indexOf("ipad")>-1,t.Android=n.indexOf("android")>-1,t)t[r]&&(e=r);return e}()){case"Windows":e="windows";break;case"Mac":e="mac os";break;case"Android":e="android";break;case"IOS":e="ios"}return e}},,function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(t,r){var i=n(69);e.exports=_;var o,a=n(119);_.ReadableState=m;n(83).EventEmitter;var s=function(e,t){return e.listeners(t).length},c=n(121),l=n(85).Buffer,u=t.Uint8Array||function(){};var d=Object.create(n(50));d.inherits=n(46);var h=n(169),f=void 0;f=h&&h.debuglog?h.debuglog("stream"):function(){};var p,g=n(170),y=n(122);d.inherits(_,c);var v=["error","close","destroy","pause","resume"];function m(e,t){e=e||{};var r=t instanceof(o=o||n(34));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(123).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function _(e){if(o=o||n(34),!(this instanceof _))return new _(e);this._readableState=new m(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function b(e,t,n,r,i){var o,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,T(e)}(e,a)):(i||(o=function(e,t){var n;r=t,l.isBuffer(r)||r instanceof u||"string"===typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):E(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?E(e,a,t,!1):O(e,a)):E(e,a,t,!1))):r||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function E(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),O(e,t)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},_.prototype.unshift=function(e){return b(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return p||(p=n(123).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(w,e):w(e))}function w(e){f("emit readable"),e.emit("readable"),A(e)}function O(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(k,e,t))}function k(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function C(e){f("readable nexttick read 0"),e.read(0)}function $(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):T(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&I(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(r=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,t);var c=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:_;function l(t,r){f("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),e.removeListener("close",v),e.removeListener("finish",m),e.removeListener("drain",d),e.removeListener("error",y),e.removeListener("unpipe",l),n.removeListener("end",u),n.removeListener("end",_),n.removeListener("data",g),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function u(){f("onend"),e.end()}o.endEmitted?i.nextTick(c):n.once("end",c),e.on("unpipe",l);var d=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,A(e))}}(n);e.on("drain",d);var h=!1;var p=!1;function g(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==R(o.pipes,e))&&!h&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function y(t){f("onerror",t),_(),e.removeListener("error",y),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",m),_()}function m(){f("onfinish"),e.removeListener("close",v),_()}function _(){f("unpipe"),n.unpipe(e)}return n.on("data",g),function(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",y),e.once("close",v),e.once("finish",m),e.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=R(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},_.prototype.on=function(e,t){var n=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&T(this):i.nextTick(C,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick($,e,t))}(this,e)),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<v.length;o++)e.on(v[o],this.emit.bind(this,v[o]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=P}).call(this,n(20),n(27))},function(e,t,n){e.exports=n(83).EventEmitter},function(e,t,n){"use strict";var r=n(69);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var r=n(175).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=a;var r=n(34),i=Object.create(n(50));function o(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"===typeof this._flush?this._flush((function(t,n){c(e,t,n)})):c(this,null,null)}function c(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(46),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){"use strict";(function(t){var r=n(305);function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function o(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=n(126),s=Object.prototype.hasOwnProperty,c=Array.prototype.slice,l="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function d(e){return!o(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var h=e.exports=m,f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(a.isFunction(e)){if(l)return e.name;var t=e.toString().match(f);return t&&t[1]}}function g(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function y(e){if(l||!a.isFunction(e))return a.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,r,i){throw new h.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function m(e,t){e||v(e,!0,t,"==",h.ok)}function _(e,t,n,r){if(e===t)return!0;if(o(e)&&o(t))return 0===i(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(d(e)&&d(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=b(e),o=b(t);if(i&&!o||!i&&o)return!1;if(i)return e=c.call(e),t=c.call(t),_(e,t,n);var s,l,u=T(e),d=T(t);if(u.length!==d.length)return!1;for(u.sort(),d.sort(),l=u.length-1;l>=0;l--)if(u[l]!==d[l])return!1;for(l=u.length-1;l>=0;l--)if(s=u[l],!_(e[s],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function E(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function S(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&v(i,n,"Missing expected exception"+r);var o="string"===typeof r,s=!e&&i&&!n;if((!e&&a.isError(i)&&o&&E(i,n)||s)&&v(i,n,"Got unwanted exception"+r),e&&i&&n&&!E(i,n)||!e&&i)throw i}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return g(y(e.actual),128)+" "+e.operator+" "+g(y(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=p(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},a.inherits(h.AssertionError,Error),h.fail=v,h.ok=m,h.equal=function(e,t,n){e!=t&&v(e,t,n,"==",h.equal)},h.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",h.notEqual)},h.deepEqual=function(e,t,n){_(e,t,!1)||v(e,t,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,n){_(e,t,!0)||v(e,t,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,n){_(e,t,!1)&&v(e,t,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,n,r){_(t,n,!0)&&v(t,n,r,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",h.strictEqual)},h.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",h.notStrictEqual)},h.throws=function(e,t,n){S(!0,e,t,n)},h.doesNotThrow=function(e,t,n){S(!1,e,t,n)},h.ifError=function(e){if(e)throw e},h.strict=r((function e(t,n){t||v(t,!0,n,"==",e)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var T=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this,n(20))},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),c=r[n];n<o;c=r[++n])g(c)||!b(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(n,r){if("undefined"!==typeof e&&!0===e.noDeprecation)return n;if("undefined"===typeof e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,a={};function s(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),u(r,e,r.depth)}function c(e,t){var n=s.styles[t];return n?"\x1b["+s.colors[n][0]+"m"+e+"\x1b["+s.colors[n][1]+"m":e}function l(e,t){return e}function u(e,n,r){if(e.customInspect&&n&&T(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return v(i)||(i=u(e,i,r)),i}var o=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(T(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(_(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return d(n)}var l,b="",w=!1,O=["{","}"];(f(n)&&(w=!0,O=["[","]"]),T(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return _(n)&&(b=" "+RegExp.prototype.toString.call(n)),E(n)&&(b=" "+Date.prototype.toUTCString.call(n)),S(n)&&(b=" "+d(n)),0!==a.length||w&&0!=n.length?r<0?_(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=w?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)$(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return h(e,n,r,s,t,w)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,b,O)):O[0]+b+O[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),$(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?u(e,c.value,null):u(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function p(e){return"boolean"===typeof e}function g(e){return null===e}function y(e){return"number"===typeof e}function v(e){return"string"===typeof e}function m(e){return void 0===e}function _(e){return b(e)&&"[object RegExp]"===w(e)}function b(e){return"object"===typeof e&&null!==e}function E(e){return b(e)&&"[object Date]"===w(e)}function S(e){return b(e)&&("[object Error]"===w(e)||e instanceof Error)}function T(e){return"function"===typeof e}function w(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(m(o)&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"test"}).NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=p,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=v,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=m,t.isRegExp=_,t.isObject=b,t.isDate=E,t.isError=S,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(182);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=n(183),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var A="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(A&&e[A]){var t;if("function"!==typeof(t=e[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(a){n(a)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),A&&Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=A,t.callbackify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(P,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(27))},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";(function(e){var r=n(45).Buffer,i=n(168).Transform,o=n(181),a=n(126),s=n(125).ok,c=n(45).kMaxLength,l="Cannot create final Buffer. It would be larger than 0x"+c.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(o),d=0;d<u.length;d++){var h=u[d];h.match(/^Z/)&&Object.defineProperty(t,h,{enumerable:!0,value:o[h],writable:!1})}for(var f={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},p=Object.keys(f),g=0;g<p.length;g++){var y=p[g];f[f[y]]=y}function v(e,t,n){var i=[],o=0;function a(){for(var t;null!==(t=e.read());)i.push(t),o+=t.length;e.once("readable",a)}function s(){var t,a=null;o>=c?a=new RangeError(l):t=r.concat(i,o),i=[],e.close(),n(a,t)}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",a),n(t)})),e.on("end",s),e.end(t),a()}function m(e,t){if("string"===typeof t&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function _(e){if(!(this instanceof _))return new _(e);C.call(this,e,o.DEFLATE)}function b(e){if(!(this instanceof b))return new b(e);C.call(this,e,o.INFLATE)}function E(e){if(!(this instanceof E))return new E(e);C.call(this,e,o.GZIP)}function S(e){if(!(this instanceof S))return new S(e);C.call(this,e,o.GUNZIP)}function T(e){if(!(this instanceof T))return new T(e);C.call(this,e,o.DEFLATERAW)}function w(e){if(!(this instanceof w))return new w(e);C.call(this,e,o.INFLATERAW)}function O(e){if(!(this instanceof O))return new O(e);C.call(this,e,o.UNZIP)}function k(e){return e===o.Z_NO_FLUSH||e===o.Z_PARTIAL_FLUSH||e===o.Z_SYNC_FLUSH||e===o.Z_FULL_FLUSH||e===o.Z_FINISH||e===o.Z_BLOCK}function C(e,n){var a=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!k(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!k(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||o.Z_NO_FLUSH,this._finishFlushFlag="undefined"!==typeof e.finishFlush?e.finishFlush:o.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(e,n){$(s),s._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],s.emit("error",r)};var c=t.Z_DEFAULT_COMPRESSION;"number"===typeof e.level&&(c=e.level);var l=t.Z_DEFAULT_STRATEGY;"number"===typeof e.strategy&&(l=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,c,e.memLevel||t.Z_DEFAULT_MEMLEVEL,l,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=c,this._strategy=l,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!a._handle},configurable:!0,enumerable:!0})}function $(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function A(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),t.Deflate=_,t.Inflate=b,t.Gzip=E,t.Gunzip=S,t.DeflateRaw=T,t.InflateRaw=w,t.Unzip=O,t.createDeflate=function(e){return new _(e)},t.createInflate=function(e){return new b(e)},t.createDeflateRaw=function(e){return new T(e)},t.createInflateRaw=function(e){return new w(e)},t.createGzip=function(e){return new E(e)},t.createGunzip=function(e){return new S(e)},t.createUnzip=function(e){return new O(e)},t.deflate=function(e,t,n){return"function"===typeof t&&(n=t,t={}),v(new _(t),e,n)},t.deflateSync=function(e,t){return m(new _(t),e)},t.gzip=function(e,t,n){return"function"===typeof t&&(n=t,t={}),v(new E(t),e,n)},t.gzipSync=function(e,t){return m(new E(t),e)},t.deflateRaw=function(e,t,n){return"function"===typeof t&&(n=t,t={}),v(new T(t),e,n)},t.deflateRawSync=function(e,t){return m(new T(t),e)},t.unzip=function(e,t,n){return"function"===typeof t&&(n=t,t={}),v(new O(t),e,n)},t.unzipSync=function(e,t){return m(new O(t),e)},t.inflate=function(e,t,n){return"function"===typeof t&&(n=t,t={}),v(new b(t),e,n)},t.inflateSync=function(e,t){return m(new b(t),e)},t.gunzip=function(e,t,n){return"function"===typeof t&&(n=t,t={}),v(new S(t),e,n)},t.gunzipSync=function(e,t){return m(new S(t),e)},t.inflateRaw=function(e,t,n){return"function"===typeof t&&(n=t,t={}),v(new w(t),e,n)},t.inflateRawSync=function(e,t){return m(new w(t),e)},a.inherits(C,i),C.prototype.params=function(n,r,i){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var a=this;this.flush(o.Z_SYNC_FLUSH,(function(){s(a._handle,"zlib binding closed"),a._handle.params(n,r),a._hadError||(a._level=n,a._strategy=r,i&&i())}))}else e.nextTick(i)},C.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},C.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},C.prototype.flush=function(t,n){var i=this,a=this._writableState;("function"===typeof t||void 0===t&&!n)&&(n=t,t=o.Z_FULL_FLUSH),a.ended?n&&e.nextTick(n):a.ending?n&&this.once("end",n):a.needDrain?n&&this.once("drain",(function(){return i.flush(t,n)})):(this._flushFlag=t,this.write(r.alloc(0),"",n))},C.prototype.close=function(t){$(this,t),e.nextTick(A,this)},C.prototype._transform=function(e,t,n){var i,a=this._writableState,s=(a.ending||a.ended)&&(!e||a.length===e.length);return null===e||r.isBuffer(e)?this._handle?(s?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),void this._processChunk(e,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},C.prototype._processChunk=function(e,t,n){var i=e&&e.length,o=this._chunkSize-this._offset,a=0,u=this,d="function"===typeof n;if(!d){var h,f=[],p=0;this.on("error",(function(e){h=e})),s(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(t,e,a,i,this._buffer,this._offset,o)}while(!this._hadError&&m(g[0],g[1]));if(this._hadError)throw h;if(p>=c)throw $(this),new RangeError(l);var y=r.concat(f,p);return $(this),y}s(this._handle,"zlib binding closed");var v=this._handle.write(t,e,a,i,this._buffer,this._offset,o);function m(c,l){if(this&&(this.buffer=null,this.callback=null),!u._hadError){var h=o-l;if(s(h>=0,"have should not go down"),h>0){var g=u._buffer.slice(u._offset,u._offset+h);u._offset+=h,d?u.push(g):(f.push(g),p+=g.length)}if((0===l||u._offset>=u._chunkSize)&&(o=u._chunkSize,u._offset=0,u._buffer=r.allocUnsafe(u._chunkSize)),0===l){if(a+=i-c,i=c,!d)return!0;var y=u._handle.write(t,e,a,i,u._buffer,u._offset,u._chunkSize);return y.callback=m,void(y.buffer=e)}if(!d)return!1;n()}}v.buffer=e,v.callback=m},a.inherits(_,C),a.inherits(b,C),a.inherits(E,C),a.inherits(S,C),a.inherits(T,C),a.inherits(w,C),a.inherits(O,C)}).call(this,n(27))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(6),i=(r.h||Object(r.c)(),"https://play.google.com/store/apps/details?id=com.newleaf.app.android.victor"),o=Object(r.g)().ios||Object(r.g)().mac||Object(r.g)().appleWatch,a=function(e){var t=encodeURIComponent("cmsvictor://?".concat(Object(r.a)(e)));return"https://realshortapp.onelink.me/Zof7?af_xp=custom&pid=test&c=CMS_APP_EXCHANGE_REELSHORT&deep_link_value=".concat(t,"&af_dp=").concat(encodeURIComponent("cmsvictor://"))};var s=function(){var e=navigator.userAgent;return/Snapchat/.test(e)},c=function(){var e,t=navigator.userAgent,n=t.includes("Twitter")||t.includes("Twitter for iPhone")||t.includes("TwitterAndroid"),r=(null===(e=document)||void 0===e?void 0:e.referrer).includes("twitter");return n||r},l=function(e){var t=e.offAfDp,n=e.urlQueryParams,a=(e.mediaType,n.book_type),c=void 0===a?1:a,l=n.ad_type,u=void 0===l?"":l,d=n.pushType,h=void 0===d?2:d,f=Object(r.d)().af_ios_url,p=void 0===f?"":f,g="",y=function(){var e=navigator.userAgent;return e.indexOf("FB_I")>-1||e.indexOf("FBAV")>-1||e.indexOf("FBAN")>-1||e.indexOf("FBIOS")>-1}(),v=Object(r.a)({fromType:4,type:2===h?1001:1e3,parm1:n.bookId,book_type:c,chapterId:n.chapterId,ad_type:u}),m="&af_dp=".concat(encodeURIComponent("cmsvictor://?".concat(v))),_="https://realshortapp.onelink.me/Zof7?af_xp=custom&pid=fb-w2a-h5&c=RS-W2A-H5&deep_link_value=".concat(encodeURIComponent("cmsvictor://?".concat(v))).concat(p?"&af_ios_url=".concat(p):"");return g=navigator.userAgent.toLowerCase().includes("cros")?i:y?o?t?_:_+m:"https://play.app.goo.gl/?link=".concat(i):s()&&!o?"https://play.app.goo.gl/?link=".concat(i):_+m,console.log("%c [ link ]-110","font-size:13px; background:pink; color:#bf2c9f;",g),g}},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";var r=n(91),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],s=Object.keys(a),c=0;c<s.length;++c){var l=s[c],u=a[l];"object"===typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:a,prop:l}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},encode:function(e,t,n,i,o){if(0===e.length)return e;var s=e;if("symbol"===typeof e?s=Symbol.prototype.toString.call(e):"string"!==typeof e&&(s=String(e)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",l=0;l<s.length;++l){var u=s.charCodeAt(l);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===r.RFC1738&&(40===u||41===u)?c+=s.charAt(l):u<128?c+=a[u]:u<2048?c+=a[192|u>>6]+a[128|63&u]:u<55296||u>=57344?c+=a[224|u>>12]+a[128|u>>6&63]+a[128|63&u]:(l+=1,u=65536+((1023&u)<<10|1023&s.charCodeAt(l)),c+=a[240|u>>18]+a[128|u>>12&63]+a[128|u>>6&63]+a[128|63&u])}return c},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==typeof n){if(o(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(n);var a=t;return o(t)&&!o(n)&&(a=s(t,r)),o(t)&&o(n)?(n.forEach((function(n,o){if(i.call(t,o)){var a=t[o];a&&"object"===typeof a&&n&&"object"===typeof n?t[o]=e(a,n,r):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var a=n[o];return i.call(t,o)?t[o]=e(t[o],a,r):t[o]=a,t}),a)}}},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(){var e=i,t=e.lib,n=t.WordArray,r=t.Hasher,o=e.algo,a=[],s=o.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],l=0;l<80;l++){if(l<16)a[l]=0|e[t+l];else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}var d=(r<<5|r>>>27)+c+a[l];d+=l<20?1518500249+(i&o|~i&s):l<40?1859775393+(i^o^s):l<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,c=s,s=o,o=i<<30|i>>>2,i=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(s),e.HmacSHA1=r._createHmacHelper(s)}(),i.SHA1)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(72),function(){var e=o,t=e.lib.Hasher,n=e.x64,r=n.Word,i=n.WordArray,a=e.algo;function s(){return r.create.apply(r,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var u=a.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],d=n[6],h=n[7],f=r.high,p=r.low,g=i.high,y=i.low,v=o.high,m=o.low,_=a.high,b=a.low,E=s.high,S=s.low,T=u.high,w=u.low,O=d.high,k=d.low,C=h.high,$=h.low,A=f,P=p,I=g,x=y,R=v,D=m,L=_,M=b,N=E,j=S,B=T,U=w,G=O,F=k,V=C,H=$,z=0;z<80;z++){var K,W,Y=l[z];if(z<16)W=Y.high=0|e[t+2*z],K=Y.low=0|e[t+2*z+1];else{var q=l[z-15],X=q.high,J=q.low,Z=(X>>>1|J<<31)^(X>>>8|J<<24)^X>>>7,Q=(J>>>1|X<<31)^(J>>>8|X<<24)^(J>>>7|X<<25),ee=l[z-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=l[z-7],ae=oe.high,se=oe.low,ce=l[z-16],le=ce.high,ue=ce.low;W=(W=(W=Z+ae+((K=Q+se)>>>0<Q>>>0?1:0))+re+((K+=ie)>>>0<ie>>>0?1:0))+le+((K+=ue)>>>0<ue>>>0?1:0),Y.high=W,Y.low=K}var de,he=N&B^~N&G,fe=j&U^~j&F,pe=A&I^A&R^I&R,ge=P&x^P&D^x&D,ye=(A>>>28|P<<4)^(A<<30|P>>>2)^(A<<25|P>>>7),ve=(P>>>28|A<<4)^(P<<30|A>>>2)^(P<<25|A>>>7),me=(N>>>14|j<<18)^(N>>>18|j<<14)^(N<<23|j>>>9),_e=(j>>>14|N<<18)^(j>>>18|N<<14)^(j<<23|N>>>9),be=c[z],Ee=be.high,Se=be.low,Te=V+me+((de=H+_e)>>>0<H>>>0?1:0),we=ve+ge;V=G,H=F,G=B,F=U,B=N,U=j,N=L+(Te=(Te=(Te=Te+he+((de+=fe)>>>0<fe>>>0?1:0))+Ee+((de+=Se)>>>0<Se>>>0?1:0))+W+((de+=K)>>>0<K>>>0?1:0))+((j=M+de|0)>>>0<M>>>0?1:0)|0,L=R,M=D,R=I,D=x,I=A,x=P,A=Te+(ye+pe+(we>>>0<ve>>>0?1:0))+((P=de+we|0)>>>0<de>>>0?1:0)|0}p=r.low=p+P,r.high=f+A+(p>>>0<P>>>0?1:0),y=i.low=y+x,i.high=g+I+(y>>>0<x>>>0?1:0),m=o.low=m+D,o.high=v+R+(m>>>0<D>>>0?1:0),b=a.low=b+M,a.high=_+L+(b>>>0<M>>>0?1:0),S=s.low=S+j,s.high=E+N+(S>>>0<j>>>0?1:0),w=u.low=w+U,u.high=T+B+(w>>>0<U>>>0?1:0),k=d.low=k+F,d.high=O+G+(k>>>0<F>>>0?1:0),$=h.low=$+H,h.high=C+V+($>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),o.SHA512)}()},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,d=Math.max,h=Math.min,f=function(){return l.Date.now()};function p(e,t,n){var r,i,o,a,s,c,l=0,u=!1,p=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function _(e){return l=e,s=setTimeout(E,t),u?m(e):a}function b(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-l>=o}function E(){var e=f();if(b(e))return S(e);s=setTimeout(E,function(e){var n=t-(e-c);return p?h(n,o-(e-l)):n}(e))}function S(e){return s=void 0,v&&r?m(e):(r=i=void 0,a)}function T(){var e=f(),n=b(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return _(c);if(p)return s=setTimeout(E,t),m(c)}return void 0===s&&(s=setTimeout(E,t)),a}return t=y(t)||0,g(n)&&(u=!!n.leading,o=(p="maxWait"in n)?d(y(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),T.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},T.flush=function(){return void 0===s?a:S(f())},T}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return g(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),p(e,t,{leading:r,maxWait:t,trailing:i})}}).call(this,n(20))},,,function(e,t,n){e.exports={default:n(249),__esModule:!0}},function(e,t,n){var r=n(251);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=!n(39)&&!n(68)((function(){return 7!=Object.defineProperty(n(144)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(54),i=n(37).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(49),i=n(55),o=n(256)(!1),a=n(103)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var r=n(147);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";var r=n(78),i=n(52),o=n(149),a=n(53),s=n(108),c=n(263),l=n(110),u=n(266),d=n(56)("iterator"),h=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,p,g,y,v){c(n,t,p);var m,_,b,E=function(e){if(!h&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",T="values"==g,w=!1,O=e.prototype,k=O[d]||O["@@iterator"]||g&&O[g],C=k||E(g),$=g?T?E("entries"):C:void 0,A="Array"==t&&O.entries||k;if(A&&(b=u(A.call(new e)))!==Object.prototype&&b.next&&(l(b,S,!0),r||"function"==typeof b[d]||a(b,d,f)),T&&k&&"values"!==k.name&&(w=!0,C=function(){return k.call(this)}),r&&!v||!h&&!w&&O[d]||a(O,d,C),s[t]=C,s[S]=f,g)if(m={values:T?C:E("values"),keys:y?C:E("keys"),entries:$},v)for(_ in m)_ in O||o(O,_,m[_]);else i(i.P+i.F*(h||w),t,m);return m}},function(e,t,n){e.exports=n(53)},function(e,t,n){var r=n(145),i=n(105).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(80),i=n(76),o=n(55),a=n(100),s=n(49),c=n(143),l=Object.getOwnPropertyDescriptor;t.f=n(39)?l:function(e,t){if(e=o(e),t=a(t,!0),c)try{return l(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){try{var r=n(152)}catch(s){r=n(152)}var i=/\s+/,o=Object.prototype.toString;function a(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}e.exports=function(e){return new a(e)},a.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~r(t,e)||t.push(e),this.el.className=t.join(" "),this},a.prototype.remove=function(e){if("[object RegExp]"==o.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},a.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},a.prototype.toggle=function(e,t){return this.list?("undefined"!==typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!==typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},a.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(i);return""===e[0]&&e.shift(),e},a.prototype.has=a.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}},function(e,t){!function(e,t){var n,r=e.document,i=r.documentElement,o=r.querySelector('meta[name="viewport"]'),a=r.querySelector('meta[name="flexible"]'),s=0,c=0,l=t.flexible||(t.flexible={});if(o){console.warn("\u5c06\u6839\u636e\u5df2\u6709\u7684meta\u6807\u7b7e\u6765\u8bbe\u7f6e\u7f29\u653e\u6bd4\u4f8b");var u=o.getAttribute("content").match(/initial\-scale=([\d\.]+)/);u&&(c=parseFloat(u[1]),s=parseInt(1/c))}else if(a){var d=a.getAttribute("content");if(d){var h=d.match(/initial\-dpr=([\d\.]+)/),f=d.match(/maximum\-dpr=([\d\.]+)/);h&&(s=parseFloat(h[1]),c=parseFloat((1/s).toFixed(2))),f&&(s=parseFloat(f[1]),c=parseFloat((1/s).toFixed(2)))}}if(!s&&!c){e.navigator.appVersion.match(/android/gi);var p=e.navigator.appVersion.match(/iphone/gi),g=e.devicePixelRatio;c=1/(s=p?g>=3&&(!s||s>=3)?3:g>=2&&(!s||s>=2)?2:1:1)}if(i.setAttribute("data-dpr",s),!o)if((o=r.createElement("meta")).setAttribute("name","viewport"),o.setAttribute("content","initial-scale="+c+", maximum-scale="+c+", minimum-scale="+c+", user-scalable=no"),i.firstElementChild)i.firstElementChild.appendChild(o);else{var y=r.createElement("div");y.appendChild(o),r.write(y.innerHTML)}function v(){var t=i.getBoundingClientRect().width;t/s>540&&(t=540*s);var n=t/10;i.style.fontSize=n+"px",l.rem=e.rem=n}e.addEventListener("resize",(function(){clearTimeout(n),n=setTimeout(v,300)}),!1),e.addEventListener("pageshow",(function(e){e.persisted&&(clearTimeout(n),n=setTimeout(v,300))}),!1),"complete"===r.readyState?r.body.style.fontSize=12*s+"px":r.addEventListener("DOMContentLoaded",(function(e){r.body.style.fontSize=12*s+"px"}),!1),v(),l.dpr=e.dpr=s,l.refreshRem=v,l.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"===typeof e&&e.match(/rem$/)&&(t+="px"),t},l.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"===typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="production"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(7),i=n(21),o=n(44);function a(e){var t=e._sentryMetrics;if(t){var n,a={},s=Object(i.a)(t);try{for(s.s();!(n=s.n()).done;){var c=Object(r.a)(n.value,2),l=Object(r.a)(c[1],2),u=l[0],d=l[1];a[u]||(a[u]=[]),a[u].push(Object(o.c)(d))}}catch(h){s.e(h)}finally{s.f()}return a}}function s(e,t,n,i,o,a,s){var c=e._sentryMetrics||(e._sentryMetrics=new Map),l="".concat(t,":").concat(n,"@").concat(o),u=c.get(s);if(u){var d=Object(r.a)(u,2)[1];c.set(s,[l,{min:Math.min(d.min,i),max:Math.max(d.max,i),count:d.count+=1,sum:d.sum+=i,tags:d.tags}])}else c.set(s,[l,{min:i,max:i,count:1,sum:i,tags:a}])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="8.7.0"},function(e,t,n){"use strict";n(243),n(246),n(248)},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return g}));var r=n(1),i=n(116),o=n(11),a=n.n(o),s=n(18),c=n(97),l=n(6),u=Object(c.a)({errorHandler:function(e){var t=e.response;throw console.log(t,"response",e),void 0!==(null===e||void 0===e?void 0:e.data)&&null!==(null===e||void 0===e?void 0:e.response)||e.toString().indexOf("timeout"),e},useCache:!0,timeout:2e4});u.interceptors.request.use((function(e,t){console.log("\u73af\u5883",Object(l.c)(),e,l.h);var n="https://dev-project-v-api.stardustworld.cn"+e,i={uid:localStorage.getItem("uid")||""};return{url:n,options:Object(r.a)(Object(r.a)({},t),{},{headers:i})}}),{global:!1}),u.interceptors.response.use(function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("blob"!==n.responseType){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.clone().json();case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{global:!1});var d=u,h=n(47),f=function(){return d("/api/comm/apLink/ip",{method:"post"})},p=function(e){return d("/api/comm/apLink/send",{method:"post",data:Object(r.a)(Object(r.a)({},e),{},{ts:(new Date).getTime()})})},g=function(e){return Object(i.a)("/api/video/book/drainage",{method:"post",data:Object(r.a)({id:e},Object(h.h)())})}},,,,function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),u=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(u(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+f]=255&a,f+=p,a/=256,l-=8);e[n+f-p]|=128*g}},function(e,t,n){e.exports=i;var r=n(83).EventEmitter;function i(){r.call(this)}n(46)(i,r),i.Readable=n(84),i.Writable=n(177),i.Duplex=n(178),i.Transform=n(179),i.PassThrough=n(180),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",c));var a=!1;function s(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function l(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},function(e,t){},function(e,t,n){"use strict";var r=n(85).Buffer,i=n(171);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,o=r.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,i=s,t.copy(n,i),s+=a.data.length,a=a.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(173),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(20))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},a=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(u,0,e)},c.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[i]=a,r(i),i++},c.clearImmediate=l}function l(e){delete o[e]}function u(e){if(a)setTimeout(u,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{l(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(20),n(27))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(r){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(20))},function(e,t,n){var r=n(45),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";e.exports=o;var r=n(124),i=Object.create(n(50));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n(46),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(86)},function(e,t,n){e.exports=n(34)},function(e,t,n){e.exports=n(84).Transform},function(e,t,n){e.exports=n(84).PassThrough},function(e,t,n){"use strict";(function(e,r){var i=n(125),o=n(184),a=n(185),s=n(188),c=n(191);for(var l in c)t[l]=c[l];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;function u(e){if("number"!==typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}u.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||s.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},u.prototype.write=function(e,t,n,r,i,o,a){return this._write(!0,e,t,n,r,i,o,a)},u.prototype.writeSync=function(e,t,n,r,i,o,a){return this._write(!1,e,t,n,r,i,o,a)},u.prototype._write=function(n,o,a,s,c,l,u,d){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==t.Z_NO_FLUSH&&o!==t.Z_PARTIAL_FLUSH&&o!==t.Z_SYNC_FLUSH&&o!==t.Z_FULL_FLUSH&&o!==t.Z_FINISH&&o!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=e.alloc(0),c=0,s=0),this.strm.avail_in=c,this.strm.input=a,this.strm.next_in=s,this.strm.avail_out=d,this.strm.output=l,this.strm.next_out=u,this.flush=o,!n)return this._process(),this._checkError()?this._afterSync():void 0;var h=this;return r.nextTick((function(){h._process(),h._after()})),this},u.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},u.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},u.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(e,n,r,o,a){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(n>=-1&&n<=9,"invalid compression level"),i(r>=1&&r<=9,"invalid memlevel"),i(o===t.Z_FILTERED||o===t.Z_HUFFMAN_ONLY||o===t.Z_RLE||o===t.Z_FIXED||o===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,o,a),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(e,n,r,i,c){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=i,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=c,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=a.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=u}).call(this,n(45).Buffer,n(27))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";var r,i=n(70),o=n(186),a=n(127),s=n(128),c=n(187);function l(e,t){return e.msg=c[t],t}function u(e){return(e<<1)-(e>4?9:0)}function d(e){for(var t=e.length;--t>=0;)e[t]=0}function h(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function f(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,h(e.strm)}function p(e,t){e.pending_buf[e.pending++]=t}function g(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function y(e,t,n,r){var o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,i.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=a(e.adler,t,o,n):2===e.state.wrap&&(e.adler=s(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}function v(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258,f=l[o+a-1],p=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+a]===p&&l[n+a-1]===f&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=258-(h-o),o=h-258,r>a){if(e.match_start=t,a=r,r>=s)break;f=l[o+a-1],p=l[o+a]}}}while((t=d[t&u])>c&&0!==--i);return a<=e.lookahead?a:e.lookahead}function m(e){var t,n,r,o,a,s=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-262)){i.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=s?r-s:0}while(--n);t=n=s;do{r=e.prev[--t],e.prev[t]=r>=s?r-s:0}while(--n);o+=s}if(0===e.strm.avail_in)break;if(n=y(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+3-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function _(e,t){for(var n,r;;){if(e.lookahead<262){if(m(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=v(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}function b(e,t){for(var n,r,i;;){if(e.lookahead<262){if(m(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=v(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(f(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&f(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}function E(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),d(this.dyn_ltree),d(this.dyn_dtree),d(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),d(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),d(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function T(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):l(e,-2)}function w(e){var t,n=T(e);return 0===n&&((t=e.state).window_size=2*t.w_size,d(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function O(e,t,n,r,o,a){if(!e)return-2;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>9||8!==n||r<8||r>15||t<0||t>9||a<0||a>4)return l(e,-2);8===r&&(r=9);var c=new S;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=n,w(e)}r=[new E(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(m(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,f(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(f(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(f(e,!1),e.strm.avail_out),1)})),new E(4,4,8,4,_),new E(4,5,16,8,_),new E(4,6,32,32,_),new E(4,4,16,16,b),new E(8,16,32,32,b),new E(8,16,128,128,b),new E(8,32,128,256,b),new E(32,128,258,1024,b),new E(32,258,258,4096,b)],t.deflateInit=function(e,t){return O(e,t,8,15,8,0)},t.deflateInit2=O,t.deflateReset=w,t.deflateResetKeep=T,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},t.deflate=function(e,t){var n,i,a,c;if(!e||!e.state||t>5||t<0)return e?l(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return l(e,0===e.avail_out?-5:-2);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,p(i,31),p(i,139),p(i,8),i.gzhead?(p(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),p(i,255&i.gzhead.time),p(i,i.gzhead.time>>8&255),p(i,i.gzhead.time>>16&255),p(i,i.gzhead.time>>24&255),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(p(i,255&i.gzhead.extra.length),p(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(p(i,0),p(i,0),p(i,0),p(i,0),p(i,0),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,3),i.status=113);else{var y=8+(i.w_bits-8<<4)<<8;y|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=32),y+=31-y%31,i.status=113,g(i,y),0!==i.strstart&&(g(i,e.adler>>>16),g(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),h(e),a=i.pending,i.pending!==i.pending_buf_size));)p(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),h(e),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,p(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),h(e),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,p(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&h(e),i.pending+2<=i.pending_buf_size&&(p(i,255&e.adler),p(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(h(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&u(t)<=u(n)&&4!==t)return l(e,-5);if(666===i.status&&0!==e.avail_in)return l(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var v=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(m(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=258){if(m(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+258;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=258-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(f(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(f(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(f(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(d(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),h(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(p(i,255&e.adler),p(i,e.adler>>8&255),p(i,e.adler>>16&255),p(i,e.adler>>24&255),p(i,255&e.total_in),p(i,e.total_in>>8&255),p(i,e.total_in>>16&255),p(i,e.total_in>>24&255)):(g(i,e.adler>>>16),g(i,65535&e.adler)),h(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?l(e,-2):(e.state=null,113===t?l(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var n,r,o,s,c,l,u,h,f=t.length;if(!e||!e.state)return-2;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(e.adler=a(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(d(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,f-n.w_size,n.w_size,0),t=h,f=n.w_size),c=e.avail_in,l=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,m(n);n.lookahead>=3;){r=n.strstart,o=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=2,m(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=c,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(70);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var u=new Array(60);i(u);var d=new Array(512);i(d);var h=new Array(256);i(h);var f=new Array(29);i(f);var p,g,y,v=new Array(30);function m(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function b(e){return e<256?d[e]:d[256+(e>>>7)]}function E(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function S(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,E(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function T(e,t,n){S(e,n[2*t],n[2*t+1])}function w(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function O(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=15;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=w(o[s]++,s))}}function k(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function C(e){e.bi_valid>8?E(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function $(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function A(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&$(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!$(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function P(e,t,n){var r,i,s,c,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?T(e,i,t):(T(e,(s=h[i])+256+1,t),0!==(c=o[s])&&S(e,i-=f[s],c),T(e,s=b(--r),n),0!==(c=a[s])&&S(e,r-=v[s],c))}while(l<e.last_lit);T(e,256,t)}function I(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)A(e,o,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,A(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,g++),c[2*r+1]=o,r>l||(e.bl_count[o]++,a=0,r>=f&&(a=h[r-f]),s=c[2*r],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(u[2*r+1]+a)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>l||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),O(o,l,e.bl_count)}function x(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))}function R(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<l)do{T(e,i,e.bl_tree)}while(0!==--s);else 0!==i?(i!==o&&(T(e,i,e.bl_tree),s--),T(e,16,e.bl_tree),S(e,s-3,2)):s<=10?(T(e,17,e.bl_tree),S(e,s-3,3)):(T(e,18,e.bl_tree),S(e,s-11,7));s=0,o=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}}i(v);var D=!1;function L(e,t,n,i){S(e,0+(i?1:0),3),function(e,t,n,i){C(e),i&&(E(e,n),E(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){D||(!function(){var e,t,n,r,i,c=new Array(16);for(n=0,r=0;r<28;r++)for(f[r]=n,e=0;e<1<<o[r];e++)h[n++]=r;for(h[n-1]=r,i=0,r=0;r<16;r++)for(v[r]=i,e=0;e<1<<a[r];e++)d[i++]=r;for(i>>=7;r<30;r++)for(v[r]=i<<7,e=0;e<1<<a[r]-7;e++)d[256+i++]=r;for(t=0;t<=15;t++)c[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,c[8]++;for(;e<=255;)l[2*e+1]=9,e++,c[9]++;for(;e<=279;)l[2*e+1]=7,e++,c[7]++;for(;e<=287;)l[2*e+1]=8,e++,c[8]++;for(O(l,287,c),e=0;e<30;e++)u[2*e+1]=5,u[2*e]=w(e,5);p=new m(l,o,257,286,15),g=new m(u,a,0,30,15),y=new m(new Array(0),s,0,19,7)}(),D=!0),e.l_desc=new _(e.dyn_ltree,p),e.d_desc=new _(e.dyn_dtree,g),e.bl_desc=new _(e.bl_tree,y),e.bi_buf=0,e.bi_valid=0,k(e)},t._tr_stored_block=L,t._tr_flush_block=function(e,t,n,r){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),I(e,e.l_desc),I(e,e.d_desc),a=function(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),I(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?L(e,t,n,r):4===e.strategy||o===i?(S(e,2+(r?1:0),3),P(e,l,u)):(S(e,4+(r?1:0),3),function(e,t,n,r){var i;for(S(e,t-257,5),S(e,n-1,5),S(e,r-4,4),i=0;i<r;i++)S(e,e.bl_tree[2*c[i]+1],3);R(e,e.dyn_ltree,t-1),R(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),P(e,e.dyn_ltree,e.dyn_dtree)),k(e),r&&C(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(h[n]+256+1)]++,e.dyn_dtree[2*b(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){S(e,2,3),T(e,256,l),function(e){16===e.bi_valid?(E(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";var r=n(70),i=n(127),o=n(128),a=n(189),s=n(190);function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):-2}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,u(e)):-2}function h(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,d(e))):-2}function f(e,t){var n,r;return e?(r=new l,e.state=r,r.window=null,0!==(n=h(e,t))&&(e.state=null),n):-2}var p,g,y=!0;function v(e){if(y){var t;for(p=new r.Buf32(512),g=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,g,0,e.work,{bits:5}),y=!1}e.lencode=p,e.lenbits=9,e.distcode=g,e.distbits=5}function m(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=d,t.inflateReset2=h,t.inflateResetKeep=u,t.inflateInit=function(e){return f(e,15)},t.inflateInit2=f,t.inflate=function(e,t){var n,l,u,d,h,f,p,g,y,_,b,E,S,T,w,O,k,C,$,A,P,I,x,R,D=0,L=new r.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),h=e.next_out,u=e.output,p=e.avail_out,d=e.next_in,l=e.input,f=e.avail_in,g=n.hold,y=n.bits,_=f,b=p,I=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(2&n.wrap&&35615===g){n.check=0,L[0]=255&g,L[1]=g>>>8&255,n.check=o(n.check,L,2,0),g=0,y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!==(15&g)){e.msg="unknown compression method",n.mode=30;break}if(y-=4,P=8+(15&(g>>>=4)),0===n.wbits)n.wbits=P;else if(P>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<P,e.adler=n.check=1,n.mode=512&g?10:12,g=0,y=0;break;case 2:for(;y<16;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(n.flags=g,8!==(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(L[0]=255&g,L[1]=g>>>8&255,n.check=o(n.check,L,2,0)),g=0,y=0,n.mode=3;case 3:for(;y<32;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}n.head&&(n.head.time=g),512&n.flags&&(L[0]=255&g,L[1]=g>>>8&255,L[2]=g>>>16&255,L[3]=g>>>24&255,n.check=o(n.check,L,4,0)),g=0,y=0,n.mode=4;case 4:for(;y<16;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(L[0]=255&g,L[1]=g>>>8&255,n.check=o(n.check,L,2,0)),g=0,y=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(L[0]=255&g,L[1]=g>>>8&255,n.check=o(n.check,L,2,0)),g=0,y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((E=n.length)>f&&(E=f),E&&(n.head&&(P=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,l,d,E,P)),512&n.flags&&(n.check=o(n.check,l,E,d)),f-=E,d+=E,n.length-=E),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===f)break e;E=0;do{P=l[d+E++],n.head&&P&&n.length<65536&&(n.head.name+=String.fromCharCode(P))}while(P&&E<f);if(512&n.flags&&(n.check=o(n.check,l,E,d)),f-=E,d+=E,P)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===f)break e;E=0;do{P=l[d+E++],n.head&&P&&n.length<65536&&(n.head.comment+=String.fromCharCode(P))}while(P&&E<f);if(512&n.flags&&(n.check=o(n.check,l,E,d)),f-=E,d+=E,P)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(g!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}g=0,y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;y<32;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}e.adler=n.check=c(g),g=0,y=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=h,e.avail_out=p,e.next_in=d,e.avail_in=f,n.hold=g,n.bits=y,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){g>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}switch(n.last=1&g,y-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(v(n),n.mode=20,6===t){g>>>=2,y-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}g>>>=2,y-=2;break;case 14:for(g>>>=7&y,y-=7&y;y<32;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if((65535&g)!==(g>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,g=0,y=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(E=n.length){if(E>f&&(E=f),E>p&&(E=p),0===E)break e;r.arraySet(u,l,d,E,h),f-=E,d+=E,p-=E,h+=E,n.length-=E;break}n.mode=12;break;case 17:for(;y<14;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(n.nlen=257+(31&g),g>>>=5,y-=5,n.ndist=1+(31&g),g>>>=5,y-=5,n.ncode=4+(15&g),g>>>=4,y-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}n.lens[M[n.have++]]=7&g,g>>>=3,y-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},I=s(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,I){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(D=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,k=65535&D,!((w=D>>>24)<=y);){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(k<16)g>>>=w,y-=w,n.lens[n.have++]=k;else{if(16===k){for(R=w+2;y<R;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(g>>>=w,y-=w,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}P=n.lens[n.have-1],E=3+(3&g),g>>>=2,y-=2}else if(17===k){for(R=w+3;y<R;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}y-=w,P=0,E=3+(7&(g>>>=w)),g>>>=3,y-=3}else{for(R=w+7;y<R;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}y-=w,P=0,E=11+(127&(g>>>=w)),g>>>=7,y-=7}if(n.have+E>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;E--;)n.lens[n.have++]=P}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,x={bits:n.lenbits},I=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,I){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},I=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,I){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(f>=6&&p>=258){e.next_out=h,e.avail_out=p,e.next_in=d,e.avail_in=f,n.hold=g,n.bits=y,a(e,b),h=e.next_out,u=e.output,p=e.avail_out,d=e.next_in,l=e.input,f=e.avail_in,g=n.hold,y=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;O=(D=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,k=65535&D,!((w=D>>>24)<=y);){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(O&&0===(240&O)){for(C=w,$=O,A=k;O=(D=n.lencode[A+((g&(1<<C+$)-1)>>C)])>>>16&255,k=65535&D,!(C+(w=D>>>24)<=y);){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}g>>>=C,y-=C,n.back+=C}if(g>>>=w,y-=w,n.back+=w,n.length=k,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=12;break}if(64&O){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(R=n.extra;y<R;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(D=n.distcode[g&(1<<n.distbits)-1])>>>16&255,k=65535&D,!((w=D>>>24)<=y);){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(0===(240&O)){for(C=w,$=O,A=k;O=(D=n.distcode[A+((g&(1<<C+$)-1)>>C)])>>>16&255,k=65535&D,!(C+(w=D>>>24)<=y);){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}g>>>=C,y-=C,n.back+=C}if(g>>>=w,y-=w,n.back+=w,64&O){e.msg="invalid distance code",n.mode=30;break}n.offset=k,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(R=n.extra;y<R;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===p)break e;if(E=b-p,n.offset>E){if((E=n.offset-E)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}E>n.wnext?(E-=n.wnext,S=n.wsize-E):S=n.wnext-E,E>n.length&&(E=n.length),T=n.window}else T=u,S=h-n.offset,E=n.length;E>p&&(E=p),p-=E,n.length-=E;do{u[h++]=T[S++]}while(--E);0===n.length&&(n.mode=21);break;case 26:if(0===p)break e;u[h++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===f)break e;f--,g|=l[d++]<<y,y+=8}if(b-=p,e.total_out+=b,n.total+=b,b&&(e.adler=n.check=n.flags?o(n.check,u,b,h-b):i(n.check,u,b,h-b)),b=p,(n.flags?g:c(g))!==n.check){e.msg="incorrect data check",n.mode=30;break}g=0,y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===f)break e;f--,g+=l[d++]<<y,y+=8}if(g!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}g=0,y=0}n.mode=29;case 29:I=1;break e;case 30:I=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=h,e.avail_out=p,e.next_in=d,e.avail_in=f,n.hold=g,n.bits=y,(n.wsize||b!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&m(e,e.output,e.next_out,b-e.avail_out)?(n.mode=31,-4):(_-=e.avail_in,b-=e.avail_out,e.total_in+=_,e.total_out+=b,n.total+=b,n.wrap&&b&&(e.adler=n.check=n.flags?o(n.check,u,b,e.next_out-b):i(n.check,u,b,e.next_out-b)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===_&&0===b||4===t)&&0===I&&(I=-5),I)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0===(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,r,0)!==n.check?-3:m(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,c,l,u,d,h,f,p,g,y,v,m,_,b,E,S,T,w,O,k;n=e.state,r=e.next_in,O=e.input,i=r+(e.avail_in-5),o=e.next_out,k=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,g=n.lencode,y=n.distcode,v=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;e:do{p<15&&(f+=O[r++]<<p,p+=8,f+=O[r++]<<p,p+=8),_=g[f&v];t:for(;;){if(f>>>=b=_>>>24,p-=b,0===(b=_>>>16&255))k[o++]=65535&_;else{if(!(16&b)){if(0===(64&b)){_=g[(65535&_)+(f&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}E=65535&_,(b&=15)&&(p<b&&(f+=O[r++]<<p,p+=8),E+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=O[r++]<<p,p+=8,f+=O[r++]<<p,p+=8),_=y[f&m];n:for(;;){if(f>>>=b=_>>>24,p-=b,!(16&(b=_>>>16&255))){if(0===(64&b)){_=y[(65535&_)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(S=65535&_,p<(b&=15)&&(f+=O[r++]<<p,(p+=8)<b&&(f+=O[r++]<<p,p+=8)),(S+=f&(1<<b)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=b,p-=b,S>(b=o-a)){if((b=S-b)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(T=0,w=h,0===d){if(T+=l-b,b<E){E-=b;do{k[o++]=h[T++]}while(--b);T=o-S,w=k}}else if(d<b){if(T+=l+d-b,(b-=d)<E){E-=b;do{k[o++]=h[T++]}while(--b);if(T=0,d<E){E-=b=d;do{k[o++]=h[T++]}while(--b);T=o-S,w=k}}}else if(T+=d-b,b<E){E-=b;do{k[o++]=h[T++]}while(--b);T=o-S,w=k}for(;E>2;)k[o++]=w[T++],k[o++]=w[T++],k[o++]=w[T++],E-=3;E&&(k[o++]=w[T++],E>1&&(k[o++]=w[T++]))}else{T=o-S;do{k[o++]=k[T++],k[o++]=k[T++],k[o++]=k[T++],E-=3}while(E>2);E&&(k[o++]=k[T++],E>1&&(k[o++]=k[T++]))}break}}break}}while(r<i&&o<s);r-=E=p>>3,f&=(1<<(p-=E<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=p}},function(e,t,n){"use strict";var r=n(70),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,c,l,u,d,h){var f,p,g,y,v,m,_,b,E,S=h.bits,T=0,w=0,O=0,k=0,C=0,$=0,A=0,P=0,I=0,x=0,R=null,D=0,L=new r.Buf16(16),M=new r.Buf16(16),N=null,j=0;for(T=0;T<=15;T++)L[T]=0;for(w=0;w<c;w++)L[t[n+w]]++;for(C=S,k=15;k>=1&&0===L[k];k--);if(C>k&&(C=k),0===k)return l[u++]=20971520,l[u++]=20971520,h.bits=1,0;for(O=1;O<k&&0===L[O];O++);for(C<O&&(C=O),P=1,T=1;T<=15;T++)if(P<<=1,(P-=L[T])<0)return-1;if(P>0&&(0===e||1!==k))return-1;for(M[1]=0,T=1;T<15;T++)M[T+1]=M[T]+L[T];for(w=0;w<c;w++)0!==t[n+w]&&(d[M[t[n+w]]++]=w);if(0===e?(R=N=d,m=19):1===e?(R=i,D-=257,N=o,j-=257,m=256):(R=a,N=s,m=-1),x=0,w=0,T=O,v=u,$=C,A=0,g=-1,y=(I=1<<C)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){_=T-A,d[w]<m?(b=0,E=d[w]):d[w]>m?(b=N[j+d[w]],E=R[D+d[w]]):(b=96,E=0),f=1<<T-A,O=p=1<<$;do{l[v+(x>>A)+(p-=f)]=_<<24|b<<16|E|0}while(0!==p);for(f=1<<T-1;x&f;)f>>=1;if(0!==f?(x&=f-1,x+=f):x=0,w++,0===--L[T]){if(T===k)break;T=t[n+d[w]]}if(T>C&&(x&y)!==g){for(0===A&&(A=C),v+=O,P=1<<($=T-A);$+A<k&&!((P-=L[$+A])<=0);)$++,P<<=1;if(I+=1<<$,1===e&&I>852||2===e&&I>592)return 1;l[g=x&y]=C<<24|$<<16|v-u|0}}return 0!==x&&(l[v+x]=T-A<<24|64<<16|0),h.bits=C,0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(322);e.exports=f,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var d=n[0],h=n[1],f=n.index;if(s+=e.slice(a,f),a=f+d.length,h)s+=h[1];else{var p=e[a],g=n[2],y=n[3],v=n[4],m=n[5],_=n[6],b=n[7];s&&(r.push(s),s="");var E=null!=g&&null!=p&&p!==g,S="+"===_||"*"===_,T="?"===_||"*"===_,w=n[2]||u,O=v||m;r.push({name:y||o++,prefix:g||"",delimiter:w,optional:T,repeat:S,partial:E,asterisk:!!b,pattern:O?l(O):b?".*":"[^"+c(w)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var o="",s=t||{},c=(i||{}).pretty?a:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!==typeof u){var d,h=s[u.name];if(null==h){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(h)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=c(h[f]),!n[l].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===f?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(h),!n[l].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');o+=u.prefix+d}}else o+=u}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var l=e[s];if("string"===typeof l)a+=c(l);else{var h=c(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+h+f+")*"),a+=f=l.optional?l.partial?h+"("+f+")?":"(?:"+h+"("+f+"))?":h+"("+f+")"}}var p=c(n.delimiter||"/"),g=a.slice(-p.length)===p;return i||(a=(g?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&g?"":"(?="+p+"|$)",u(new RegExp("^"+a,d(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return h(o(e,n),t,n)}(e,t,n)}},,function(e,t,n){"use strict";var r=n(196);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(198),i=n(134),o=n(91),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,l=Array.prototype.push,u=function(e,t){l.apply(e,c(t)?t:[t])},d=Date.prototype.toISOString,h=o.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:h,formatter:o.formatters[h],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,n,o,a,s,l,d,h,p,g,y,v,m,_,b){var E,S=t;if(b.has(t))throw new RangeError("Cyclic object value");if("function"===typeof d?S=d(n,S):S instanceof Date?S=g(S):"comma"===o&&c(S)&&(S=i.maybeMap(S,(function(e){return e instanceof Date?g(e):e}))),null===S){if(a)return l&&!m?l(n,f.encoder,_,"key",y):n;S=""}if("string"===typeof(E=S)||"number"===typeof E||"boolean"===typeof E||"symbol"===typeof E||"bigint"===typeof E||i.isBuffer(S))return l?[v(m?n:l(n,f.encoder,_,"key",y))+"="+v(l(S,f.encoder,_,"value",y))]:[v(n)+"="+v(String(S))];var T,w=[];if("undefined"===typeof S)return w;if("comma"===o&&c(S))T=[{value:S.length>0?S.join(",")||null:void 0}];else if(c(d))T=d;else{var O=Object.keys(S);T=h?O.sort(h):O}for(var k=0;k<T.length;++k){var C=T[k],$="object"===typeof C&&void 0!==C.value?C.value:S[C];if(!s||null!==$){var A=c(S)?"function"===typeof o?o(n,C):n:n+(p?"."+C:"["+C+"]");b.set(t,!0);var P=r();u(w,e($,A,o,a,s,l,d,h,p,g,y,v,m,_,P))}}return w};e.exports=function(e,t){var n,i=e,l=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if("undefined"!==typeof e.format){if(!a.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=o.formatters[n],i=f.filter;return("function"===typeof e.filter||c(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?f.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:f.encode,encoder:"function"===typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"===typeof l.filter?i=(0,l.filter)("",i):c(l.filter)&&(n=l.filter);var d,h=[];if("object"!==typeof i||null===i)return"";d=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var g=s[d];n||(n=Object.keys(i)),l.sort&&n.sort(l.sort);for(var y=r(),v=0;v<n.length;++v){var m=n[v];l.skipNulls&&null===i[m]||u(h,p(i[m],m,g,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,y))}var _=h.join(l.delimiter),b=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),_.length>0?b+_:""}},function(e,t,n){"use strict";var r=n(89),i=n(203),o=n(205),a=r("%TypeError%"),s=r("%WeakMap%",!0),c=r("%Map%",!0),l=i("WeakMap.prototype.get",!0),u=i("WeakMap.prototype.set",!0),d=i("WeakMap.prototype.has",!0),h=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),g=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new a("Side channel does not contain "+o(e))},get:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(e)return l(e,r)}else if(c){if(t)return h(t,r)}else if(n)return function(e,t){var n=g(e,t);return n&&n.value}(n,r)},has:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(e)return d(e,r)}else if(c){if(t)return p(t,r)}else if(n)return function(e,t){return!!g(e,t)}(n,r);return!1},set:function(r,i){s&&r&&("object"===typeof r||"function"===typeof r)?(e||(e=new s),u(e,r,i)):c?(t||(t=new c),f(t,r,i)):(n||(n={key:{},next:null}),function(e,t,n){var r=g(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,i))}};return r}},function(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(200);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},function(e,t,n){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!==typeof t||"[object Function]"!==o.call(t))throw new TypeError(r+t);for(var n,a=i.call(arguments,1),s=function(){if(this instanceof n){var r=t.apply(this,a.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,a.concat(i.call(arguments)))},c=Math.max(0,t.length-a.length),l=[],u=0;u<c;u++)l.push("$"+u);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var d=function(){};d.prototype=t.prototype,n.prototype=new d,d.prototype=null}return n}},function(e,t,n){"use strict";var r=n(90);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=n(89),i=n(204),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&o(e,".prototype.")>-1?i(n):n}},function(e,t,n){"use strict";var r=n(90),i=n(89),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),c=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(h){l=null}e.exports=function(e){var t=s(r,a,arguments);if(c&&l){var n=c(t,"length");n.configurable&&l(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var d=function(){return s(r,o,arguments)};l?l(e.exports,"apply",{value:d}):e.exports.apply=d},function(e,t,n){var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"===typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"===typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&c&&"function"===typeof c.get?c.get:null,u=s&&Set.prototype.forEach,d="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,g=Object.prototype.toString,y=Function.prototype.toString,v=String.prototype.match,m="function"===typeof BigInt?BigInt.prototype.valueOf:null,_=Object.getOwnPropertySymbols,b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,E="function"===typeof Symbol&&"object"===typeof Symbol.iterator,S=Object.prototype.propertyIsEnumerable,T=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),w=n(206).custom,O=w&&P(w)?w:null,k="function"===typeof Symbol&&"undefined"!==typeof Symbol.toStringTag?Symbol.toStringTag:null;function C(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function $(e){return String(e).replace(/"/g,"&quot;")}function A(e){return"[object Array]"===R(e)&&(!k||!("object"===typeof e&&k in e))}function P(e){if(E)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!b)return!1;try{return b.call(e),!0}catch(t){}return!1}e.exports=function e(t,n,r,i){var s=n||{};if(x(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(x(s,"maxStringLength")&&("number"===typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!x(s,"customInspect")||s.customInspect;if("boolean"!==typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(x(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return e(t.slice(0,n.maxStringLength),n)+i}return C(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,L),"single",n)}(t,s);if("number"===typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"===typeof t)return String(t)+"n";var g="undefined"===typeof s.depth?5:s.depth;if("undefined"===typeof r&&(r=0),r>=g&&g>0&&"object"===typeof t)return A(t)?"[Array]":"[Object]";var _=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;n=Array(e.indent+1).join(" ")}return{base:n,prev:Array(t+1).join(n)}}(s,r);if("undefined"===typeof i)i=[];else if(D(i,t)>=0)return"[Circular]";function S(t,n,o){if(n&&(i=i.slice()).push(n),o){var a={depth:s.depth};return x(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,r+1,i)}return e(t,s,r+1,i)}if("function"===typeof t){var w=function(e){if(e.name)return e.name;var t=v.call(y.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),I=U(t,S);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(I.length>0?" { "+I.join(", ")+" }":"")}if(P(t)){var G=E?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):b.call(t);return"object"!==typeof t||E?G:M(G)}if(function(e){if(!e||"object"!==typeof e)return!1;if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"===typeof e.nodeName&&"function"===typeof e.getAttribute}(t)){for(var F="<"+String(t.nodeName).toLowerCase(),V=t.attributes||[],H=0;H<V.length;H++)F+=" "+V[H].name+"="+C($(V[H].value),"double",s);return F+=">",t.childNodes&&t.childNodes.length&&(F+="..."),F+="</"+String(t.nodeName).toLowerCase()+">"}if(A(t)){if(0===t.length)return"[]";var z=U(t,S);return _&&!function(e){for(var t=0;t<e.length;t++)if(D(e[t],"\n")>=0)return!1;return!0}(z)?"["+B(z,_)+"]":"[ "+z.join(", ")+" ]"}if(function(e){return"[object Error]"===R(e)&&(!k||!("object"===typeof e&&k in e))}(t)){var K=U(t,S);return 0===K.length?"["+String(t)+"]":"{ ["+String(t)+"] "+K.join(", ")+" }"}if("object"===typeof t&&c){if(O&&"function"===typeof t[O])return t[O]();if("symbol"!==c&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!==typeof e)return!1;try{o.call(e);try{l.call(e)}catch(F){return!0}return e instanceof Map}catch(t){}return!1}(t)){var W=[];return a.call(t,(function(e,n){W.push(S(n,t,!0)+" => "+S(e,t))})),j("Map",o.call(t),W,_)}if(function(e){if(!l||!e||"object"!==typeof e)return!1;try{l.call(e);try{o.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var Y=[];return u.call(t,(function(e){Y.push(S(e,t))})),j("Set",l.call(t),Y,_)}if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(F){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return N("WeakMap");if(function(e){if(!h||!e||"object"!==typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(F){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return N("WeakSet");if(function(e){if(!f||!e||"object"!==typeof e)return!1;try{return f.call(e),!0}catch(t){}return!1}(t))return N("WeakRef");if(function(e){return"[object Number]"===R(e)&&(!k||!("object"===typeof e&&k in e))}(t))return M(S(Number(t)));if(function(e){if(!e||"object"!==typeof e||!m)return!1;try{return m.call(e),!0}catch(t){}return!1}(t))return M(S(m.call(t)));if(function(e){return"[object Boolean]"===R(e)&&(!k||!("object"===typeof e&&k in e))}(t))return M(p.call(t));if(function(e){return"[object String]"===R(e)&&(!k||!("object"===typeof e&&k in e))}(t))return M(S(String(t)));if(!function(e){return"[object Date]"===R(e)&&(!k||!("object"===typeof e&&k in e))}(t)&&!function(e){return"[object RegExp]"===R(e)&&(!k||!("object"===typeof e&&k in e))}(t)){var q=U(t,S),X=T?T(t)===Object.prototype:t instanceof Object||t.constructor===Object,J=t instanceof Object?"":"null prototype",Z=!X&&k&&Object(t)===t&&k in t?R(t).slice(8,-1):J?"Object":"",Q=(X||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(Z||J?"["+[].concat(Z||[],J||[]).join(": ")+"] ":"");return 0===q.length?Q+"{}":_?Q+"{"+B(q,_)+"}":Q+"{ "+q.join(", ")+" }"}return String(t)};var I=Object.prototype.hasOwnProperty||function(e){return e in this};function x(e,t){return I.call(e,t)}function R(e){return g.call(e)}function D(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function L(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function M(e){return"Object("+e+")"}function N(e){return e+" { ? }"}function j(e,t,n,r){return e+" ("+t+") {"+(r?B(n,r):n.join(", "))+"}"}function B(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+e.join(","+n)+"\n"+t.prev}function U(e,t){var n=A(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=x(e,i)?t(e[i],e):""}var o,a="function"===typeof _?_(e):[];if(E){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var c in e)x(e,c)&&(n&&String(Number(c))===c&&c<e.length||E&&o["$"+c]instanceof Symbol||(/[^\w$]/.test(c)?r.push(t(c,e)+": "+t(e[c],e)):r.push(c+": "+t(e[c],e))));if("function"===typeof _)for(var l=0;l<a.length;l++)S.call(e,a[l])&&r.push("["+t(a[l])+"]: "+t(e[a[l]],e));return r}},function(e,t){},function(e,t,n){"use strict";var r=n(134),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(o),l=s?o.slice(0,s.index):o,u=[];if(l){if(!n.plainObjects&&i.call(Object.prototype,l)&&!n.allowPrototypes)return;u.push(l)}for(var d=0;n.depth>0&&null!==(s=a.exec(o))&&d<n.depth;){if(d+=1,!n.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+o.slice(s.index)+"]"),function(e,t,n,r){for(var i=r?t:c(t,n),o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=parseInt(l,10);n.parseArrays||""!==l?!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(a=[])[u]=i:a[l]=i:a={0:i}}i=a}return i}(u,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var u="string"===typeof e?function(e,t){var n,l={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,h=u.split(t.delimiter,d),f=-1,p=t.charset;if(t.charsetSentinel)for(n=0;n<h.length;++n)0===h[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[n]?p="utf-8":"utf8=%26%2310003%3B"===h[n]&&(p="iso-8859-1"),f=n,n=h.length);for(n=0;n<h.length;++n)if(n!==f){var g,y,v=h[n],m=v.indexOf("]="),_=-1===m?v.indexOf("="):m+1;-1===_?(g=t.decoder(v,a.decoder,p,"key"),y=t.strictNullHandling?null:""):(g=t.decoder(v.slice(0,_),a.decoder,p,"key"),y=r.maybeMap(c(v.slice(_+1),t),(function(e){return t.decoder(e,a.decoder,p,"value")}))),y&&t.interpretNumericEntities&&"iso-8859-1"===p&&(y=s(y)),v.indexOf("[]=")>-1&&(y=o(y)?[y]:y),i.call(l,g)?l[g]=r.combine(l[g],y):l[g]=y}return l}(e,n):e,d=n.plainObjects?Object.create(null):{},h=Object.keys(u),f=0;f<h.length;++f){var p=h[f],g=l(p,u[p],n,"string"===typeof e);d=r.merge(d,g,n)}return!0===n.allowSparse?d:r.compact(d)}},function(e,t,n){n(209),e.exports=self.fetch.bind(self)},function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",(function(){return p})),n.d(t,"Request",(function(){return E})),n.d(t,"Response",(function(){return w})),n.d(t,"DOMException",(function(){return k})),n.d(t,"fetch",(function(){return C}));var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in r,c="ArrayBuffer"in r;if(c)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function h(e){return"string"!==typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function y(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function v(e){var t=new FileReader,n=y(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=g(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(v)}),this.text=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=y(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=d(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=h(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=function(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function S(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function T(e){var t=new p;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},_.call(E.prototype),_.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];w.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var k=r.DOMException;try{new k}catch($){(k=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),k.prototype.constructor=k}function C(e,t){return new Promise((function(n,i){var o=new E(e,t);if(o.signal&&o.signal.aborted)return i(new k("Aborted","AbortError"));var s=new XMLHttpRequest;function l(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:T(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;setTimeout((function(){n(new w(t,e))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){i(new k("Aborted","AbortError"))}),0)},s.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":c&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!==typeof t.headers||t.headers instanceof p?o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,h(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",l),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",l)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}C.polyfill=!0,r.fetch||(r.fetch=C,r.Headers=p,r.Request=E,r.Response=w)},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}};e.exports=n}()},function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t){},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(){if("function"==typeof ArrayBuffer){var e=i.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),i.lib.WordArray)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(){var e=i,t=e.lib.WordArray,n=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var a=r(t[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var n=e.length,i=[],o=0;o<n;o++)i[o>>>1]|=r(e.charCodeAt(o)<<16-o%2*16);return t.create(i,2*n)}}}(),i.enc.Utf16)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(){var e=i,t=e.lib.WordArray;e.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],a=0;a<r;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<r;c++)o.push(i.charAt(s>>>6*(3-c)&63));var l=i.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e,n){void 0===n&&(n=!0);var r=e.length,i=n?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<i.length;a++)o[i.charCodeAt(a)]=a}var s=i.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(r=c)}return function(e,n,r){for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2,c=r[e.charCodeAt(a)]>>>6-a%4*2,l=s|c;i[o>>>2]|=l<<24-o%4*8,o++}return t.create(i,o)}(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),i.enc.Base64url)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(92),function(){var e=o,t=e.lib.WordArray,n=e.algo,r=n.SHA256,i=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(i),e.HmacSHA224=r._createHmacHelper(i)}(),o.SHA224)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(72),n(137),function(){var e=o,t=e.x64,n=t.Word,r=t.WordArray,i=e.algo,a=i.SHA512,s=i.SHA384=a.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=a._createHelper(s),e.HmacSHA384=a._createHmacHelper(s)}(),o.SHA384)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(72),function(e){var t=o,n=t.lib,r=n.WordArray,i=n.Hasher,a=t.x64.Word,s=t.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,d=0,h=0;h<7;h++){if(1&i){var f=(1<<h)-1;f<32?d^=1<<f:s^=1<<f-32}128&i?i=i<<1^113:i<<=1}u[o]=a.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var h=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),($=n[i]).high^=a,$.low^=o}for(var s=0;s<24;s++){for(var h=0;h<5;h++){for(var f=0,p=0,g=0;g<5;g++)f^=($=n[h+5*g]).high,p^=$.low;var y=d[h];y.high=f,y.low=p}for(h=0;h<5;h++){var v=d[(h+4)%5],m=d[(h+1)%5],_=m.high,b=m.low;for(f=v.high^(_<<1|b>>>31),p=v.low^(b<<1|_>>>31),g=0;g<5;g++)($=n[h+5*g]).high^=f,$.low^=p}for(var E=1;E<25;E++){var S=($=n[E]).high,T=$.low,w=c[E];w<32?(f=S<<w|T>>>32-w,p=T<<w|S>>>32-w):(f=T<<w-32|S>>>64-w,p=S<<w-32|T>>>64-w);var O=d[l[E]];O.high=f,O.low=p}var k=d[0],C=n[0];for(k.high=C.high,k.low=C.low,h=0;h<5;h++)for(g=0;g<5;g++){var $=n[E=h+5*g],A=d[E],P=d[(h+1)%5+5*g],I=d[(h+2)%5+5*g];$.high=A.high^~P.high&I.high,$.low=A.low^~P.low&I.low}$=n[0];var x=u[s];$.high^=x.high,$.low^=x.low}},_doFinalize:function(){var t=this._data,n=t.words,i=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var d=a[u],h=d.high,f=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(h)}return new r.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=i._createHelper(h),t.HmacSHA3=i._createHmacHelper(h)}(Math),o.SHA3)}()},function(e,t,n){!function(t,r){var i;e.exports=(i=n(2),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=r.create([0,1518500249,1859775393,2400959708,2840853838]),h=r.create([1352829926,1548603684,1836072691,2053994217,0]),f=a.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,a,f,b,E,S,T,w,O,k,C,$=this._hash.words,A=d.words,P=h.words,I=s.words,x=c.words,R=l.words,D=u.words;for(S=o=$[0],T=a=$[1],w=f=$[2],O=b=$[3],k=E=$[4],n=0;n<80;n+=1)C=o+e[t+I[n]]|0,C+=n<16?p(a,f,b)+A[0]:n<32?g(a,f,b)+A[1]:n<48?y(a,f,b)+A[2]:n<64?v(a,f,b)+A[3]:m(a,f,b)+A[4],C=(C=_(C|=0,R[n]))+E|0,o=E,E=b,b=_(f,10),f=a,a=C,C=S+e[t+x[n]]|0,C+=n<16?m(T,w,O)+P[0]:n<32?v(T,w,O)+P[1]:n<48?y(T,w,O)+P[2]:n<64?g(T,w,O)+P[3]:p(T,w,O)+P[4],C=(C=_(C|=0,D[n]))+k|0,S=k,k=O,O=_(w,10),w=T,T=C;C=$[1]+f+O|0,$[1]=$[2]+b+k|0,$[2]=$[3]+E+S|0,$[3]=$[4]+o+T|0,$[4]=$[0]+a+w|0,$[0]=C},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function y(e,t,n){return(e|~t)^n}function v(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(f),t.HmacRIPEMD160=o._createHmacHelper(f)}(Math),i.RIPEMD160)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(92),n(93),function(){var e=o,t=e.lib,n=t.Base,r=t.WordArray,i=e.algo,a=i.SHA256,s=i.HMAC,c=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=s.create(n.hasher,e),o=r.create(),a=r.create([1]),c=o.words,l=a.words,u=n.keySize,d=n.iterations;c.length<u;){var h=i.update(t).finalize(a);i.reset();for(var f=h.words,p=f.length,g=h,y=1;y<d;y++){g=i.finalize(g),i.reset();for(var v=g.words,m=0;m<p;m++)f[m]^=v[m]}o.concat(h),l[0]++}return o.sigBytes=4*u,o}});e.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),o.PBKDF2)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.mode.CFB=function(){var e=o.lib.BlockCipherMode.extend();function t(e,t,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i,r),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);t.call(this,e,n,i,r),this._prevBlock=o}}),e}(),o.mode.CFB)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.mode.CTR=function(){var e=o.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}});return e.Decryptor=t,e}(),o.mode.CTR)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.mode.CTRGladman=function(){var e=o.lib.BlockCipherMode.extend();function t(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var n=e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(a);var s=a.slice(0);r.encryptBlock(s,0);for(var c=0;c<i;c++)e[n+c]^=s[c]}});return e.Decryptor=n,e}(),o.mode.CTRGladman)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.mode.OFB=function(){var e=o.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)e[t+a]^=o[a]}});return e.Decryptor=t,e}(),o.mode.OFB)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.mode.ECB=function(){var e=o.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),o.mode.ECB)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.pad.Ansix923)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.pad.Iso10126={pad:function(e,t){var n=4*t,r=n-e.sigBytes%n;e.concat(o.lib.WordArray.random(r-1)).concat(o.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.pad.Iso10126)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.pad.Iso97971={pad:function(e,t){e.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(e,t)},unpad:function(e){o.pad.ZeroPadding.unpad(e),e.sigBytes--}},o.pad.Iso97971)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},o.pad.ZeroPadding)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(15),function(e){var t=o,n=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),o.format.Hex)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(41),n(42),n(33),n(15),function(){var e=o,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],a=[],s=[],c=[],l=[],u=[],d=[],h=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var p=o^o<<1^o<<2^o<<3^o<<4;p=p>>>8^255&p^99,r[n]=p,i[p]=n;var g=e[n],y=e[g],v=e[y],m=257*e[p]^16843008*p;a[n]=m<<24|m>>>8,s[n]=m<<16|m>>>16,c[n]=m<<8|m>>>24,l[n]=m,m=16843009*v^65537*y^257*g^16843008*n,u[p]=m<<24|m>>>8,d[p]=m<<16|m>>>16,h[p]=m<<8|m>>>24,f[p]=m,n?(n=g^e[e[e[v^g]]],o^=e[e[o]]):n=o=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<i;a++)a<n?o[a]=t[a]:(l=o[a-1],a%n?n>6&&a%n==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=p[a/n|0]<<24),o[a]=o[a-n]^l);for(var s=this._invKeySchedule=[],c=0;c<i;c++){if(a=i-c,c%4)var l=o[a];else l=o[a-4];s[c]=c<4||a<=4?l:u[r[l>>>24]]^d[r[l>>>16&255]]^h[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,l,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],f=4,p=1;p<c;p++){var g=r[l>>>24]^i[u>>>16&255]^o[d>>>8&255]^a[255&h]^n[f++],y=r[u>>>24]^i[d>>>16&255]^o[h>>>8&255]^a[255&l]^n[f++],v=r[d>>>24]^i[h>>>16&255]^o[l>>>8&255]^a[255&u]^n[f++],m=r[h>>>24]^i[l>>>16&255]^o[u>>>8&255]^a[255&d]^n[f++];l=g,u=y,d=v,h=m}g=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^n[f++],y=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&l])^n[f++],v=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[f++],m=(s[h>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[f++],e[t]=g,e[t+1]=y,e[t+2]=v,e[t+3]=m},keySize:8});e.AES=t._createHelper(g)}(),o.AES)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(41),n(42),n(33),n(15),function(){var e=o,t=e.lib,n=t.WordArray,r=t.BlockCipher,i=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var l=i[o]=[],u=c[o];for(n=0;n<24;n++)l[n/6|0]|=t[(s[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(s[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((a^i[c])&u[c])>>>0];this._lBlock=a,this._rBlock=o^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,h.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function f(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=r._createHelper(d);var p=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(n.create(t)),this._des2=d.createEncryptor(n.create(r)),this._des3=d.createEncryptor(n.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(p)}(),o.TripleDES)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(41),n(42),n(33),n(15),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=t[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var c=r[i];r[i]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}e.RC4=t._createHelper(r);var a=n.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(a)}(),o.RC4)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(41),n(42),n(33),n(15),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=[],i=[],a=[],s=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var o=t.words,a=o[0],s=o[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,h=u<<16|65535&l;for(i[0]^=l,i[1]^=d,i[2]^=u,i[3]^=h,i[4]^=l,i[5]^=d,i[6]^=u,i[7]^=h,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),e[t+i]^=r[i]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,l=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(s)}(),o.Rabbit)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(41),n(42),n(33),n(15),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,r=[],i=[],a=[],s=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,a=o[0],s=o[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,h=u<<16|65535&l;for(r[0]^=l,r[1]^=d,r[2]^=u,r[3]^=h,r[4]^=l,r[5]^=d,r[6]^=u,r[7]^=h,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),e[t+i]^=r[i]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,l=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(s)}(),o.RabbitLegacy)}()},function(e,t,n){!function(t,r,i){var o;e.exports=(o=n(2),n(41),n(42),n(33),n(15),function(){var e=o,t=e.lib.BlockCipher,n=e.algo,r=16,i=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],s={pbox:[],sbox:[]};function c(e,t){var n=t>>24&255,r=t>>16&255,i=t>>8&255,o=255&t,a=e.sbox[0][n]+e.sbox[1][r];return a^=e.sbox[2][i],a+=e.sbox[3][o]}function l(e,t,n){for(var i,o=t,a=n,s=0;s<r;++s)i=o^=e.pbox[s],o=a=c(e,o)^a,a=i;return i=o,o=a,a=i,a^=e.pbox[r],{left:o^=e.pbox[17],right:a}}var u=n.Blowfish=t.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;!function(e,t,n){for(var r=0;r<4;r++){e.sbox[r]=[];for(var o=0;o<256;o++)e.sbox[r][o]=a[r][o]}for(var s=0,c=0;c<18;c++)e.pbox[c]=i[c]^t[s],++s>=n&&(s=0);for(var u=0,d=0,h=0,f=0;f<18;f+=2)u=(h=l(e,u,d)).left,d=h.right,e.pbox[f]=u,e.pbox[f+1]=d;for(var p=0;p<4;p++)for(var g=0;g<256;g+=2)u=(h=l(e,u,d)).left,d=h.right,e.sbox[p][g]=u,e.sbox[p][g+1]=d}(s,t,n)}},encryptBlock:function(e,t){var n=l(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=function(e,t,n){for(var r,i=t,o=n,a=17;a>1;--a)r=i^=e.pbox[a],i=o=c(e,i)^o,o=r;return r=i,i=o,o=r,o^=e.pbox[1],{left:i^=e.pbox[0],right:o}}(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});e.Blowfish=t._createHelper(u)}(),o.Blowfish)}()},,function(e,t,n){"use strict";function r(){var e=document.documentElement;function t(){var t=e.clientWidth||window.innerWidth;t>=750&&(t=750),t<=320&&(t=320);var n=t/7.5;e.style.fontSize=n.toFixed(3)+"px"}t(),window.addEventListener("resize",t)}n.d(t,"a",(function(){return r}))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,d=Math.max,h=Math.min,f=function(){return l.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,c,l=0,u=!1,y=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function _(e){return l=e,s=setTimeout(E,t),u?m(e):a}function b(e){var n=e-c;return void 0===c||n>=t||n<0||y&&e-l>=o}function E(){var e=f();if(b(e))return S(e);s=setTimeout(E,function(e){var n=t-(e-c);return y?h(n,o-(e-l)):n}(e))}function S(e){return s=void 0,v&&r?m(e):(r=i=void 0,a)}function T(){var e=f(),n=b(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return _(c);if(y)return s=setTimeout(E,t),m(c)}return void 0===s&&(s=setTimeout(E,t)),a}return t=g(t)||0,p(n)&&(u=!!n.leading,o=(y="maxWait"in n)?d(g(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),T.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},T.flush=function(){return void 0===s?a:S(f())},T}}).call(this,n(20))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(43),i=n(63);var o=n(75);function a(e,t,n){return(a=Object(o.a)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Object(i.a)(o,n.prototype),o}).apply(null,arguments)}function s(e){var t="function"===typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return a(e,arguments,Object(r.a)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(o,e)})(e)}},,function(e,t,n){"use strict";n(244),n(245)},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n(247)},function(e,t,n){},function(e,t,n){},function(e,t,n){n(250);var r=n(38).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(52);r(r.S+r.F*!n(39),"Object",{defineProperty:n(48).f})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports={default:n(253),__esModule:!0}},function(e,t,n){n(254),e.exports=n(38).Object.assign},function(e,t,n){var r=n(52);r(r.S+r.F,"Object",{assign:n(255)})},function(e,t,n){"use strict";var r=n(39),i=n(77),o=n(106),a=n(80),s=n(107),c=n(146),l=Object.assign;e.exports=!l||n(68)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=s(e),l=arguments.length,u=1,d=o.f,h=a.f;l>u;)for(var f,p=c(arguments[u++]),g=d?i(p).concat(d(p)):i(p),y=g.length,v=0;y>v;)f=g[v++],r&&!h.call(p,f)||(n[f]=p[f]);return n}:l},function(e,t,n){var r=n(55),i=n(257),o=n(258);e.exports=function(e){return function(t,n,a){var s,c=r(t),l=i(c.length),u=o(a,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(102),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(102),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){e.exports={default:n(260),__esModule:!0}},function(e,t,n){n(261),n(267),e.exports=n(111).f("iterator")},function(e,t,n){"use strict";var r=n(262)(!0);n(148)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(102),i=n(101);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(109),i=n(76),o=n(110),a={};n(53)(a,n(56)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(48),i=n(67),o=n(77);e.exports=n(39)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){var r=n(37).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(49),i=n(107),o=n(103)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){n(268);for(var r=n(37),i=n(53),o=n(108),a=n(56)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],u=r[l],d=u&&u.prototype;d&&!d[a]&&i(d,a,l),o[l]=o.Array}},function(e,t,n){"use strict";var r=n(269),i=n(270),o=n(108),a=n(55);e.exports=n(148)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(272),__esModule:!0}},function(e,t,n){n(273),n(278),n(279),n(280),e.exports=n(38).Symbol},function(e,t,n){"use strict";var r=n(37),i=n(49),o=n(39),a=n(52),s=n(149),c=n(274).KEY,l=n(68),u=n(104),d=n(110),h=n(79),f=n(56),p=n(111),g=n(112),y=n(275),v=n(276),m=n(67),_=n(54),b=n(107),E=n(55),S=n(100),T=n(76),w=n(109),O=n(277),k=n(151),C=n(106),$=n(48),A=n(77),P=k.f,I=$.f,x=O.f,R=r.Symbol,D=r.JSON,L=D&&D.stringify,M=f("_hidden"),N=f("toPrimitive"),j={}.propertyIsEnumerable,B=u("symbol-registry"),U=u("symbols"),G=u("op-symbols"),F=Object.prototype,V="function"==typeof R&&!!C.f,H=r.QObject,z=!H||!H.prototype||!H.prototype.findChild,K=o&&l((function(){return 7!=w(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=P(F,t);r&&delete F[t],I(e,t,n),r&&e!==F&&I(F,t,r)}:I,W=function(e){var t=U[e]=w(R.prototype);return t._k=e,t},Y=V&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},q=function(e,t,n){return e===F&&q(G,t,n),m(e),t=S(t,!0),m(n),i(U,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=w(n,{enumerable:T(0,!1)})):(i(e,M)||I(e,M,T(1,{})),e[M][t]=!0),K(e,t,n)):I(e,t,n)},X=function(e,t){m(e);for(var n,r=y(t=E(t)),i=0,o=r.length;o>i;)q(e,n=r[i++],t[n]);return e},J=function(e){var t=j.call(this,e=S(e,!0));return!(this===F&&i(U,e)&&!i(G,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,M)&&this[M][e])||t)},Z=function(e,t){if(e=E(e),t=S(t,!0),e!==F||!i(U,t)||i(G,t)){var n=P(e,t);return!n||!i(U,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=x(E(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==M||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===F,r=x(n?G:E(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(F,t)||o.push(U[t]);return o};V||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function t(n){this===F&&t.call(G,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),K(this,e,T(1,n))};return o&&z&&K(F,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),k.f=Z,$.f=q,n(150).f=O.f=Q,n(80).f=J,C.f=ee,o&&!n(78)&&s(F,"propertyIsEnumerable",J,!0),p.f=function(e){return W(f(e))}),a(a.G+a.W+a.F*!V,{Symbol:R});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var re=A(f.store),ie=0;re.length>ie;)g(re[ie++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=R(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,t){return void 0===t?w(e):X(w(e),t)},defineProperty:q,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var oe=l((function(){C.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return C.f(b(e))}}),D&&a(a.S+a.F*(!V||l((function(){var e=R();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!Y(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,L.apply(D,r)}}),R.prototype[N]||n(53)(R.prototype,N,R.prototype.valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(79)("meta"),i=n(54),o=n(49),a=n(48).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(68)((function(){return c(Object.preventExtensions({}))})),u=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!o(e,r)&&u(e),e}}},function(e,t,n){var r=n(77),i=n(106),o=n(80);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,l=0;s.length>l;)c.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var r=n(147);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(55),i=n(150).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},function(e,t){},function(e,t,n){n(112)("asyncIterator")},function(e,t,n){n(112)("observable")},function(e,t,n){e.exports={default:n(282),__esModule:!0}},function(e,t,n){n(283),e.exports=n(38).Object.setPrototypeOf},function(e,t,n){var r=n(52);r(r.S,"Object",{setPrototypeOf:n(284).set})},function(e,t,n){var r=n(54),i=n(67),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(142)(Function.call,n(151).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(286),__esModule:!0}},function(e,t,n){n(287);var r=n(38).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(52);r(r.S,"Object",{create:n(109)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(57)),i=d(n(30)),o=d(n(31)),a=d(n(22)),s=d(n(32)),c=d(n(35)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),u=d(n(289));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){(0,u.default)()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.className,i=e.size,o=h(e,["type","className","size"]),a=(0,c.default)(n,"am-icon","am-icon-"+t,"am-icon-"+i);return l.createElement("svg",(0,r.default)({className:a},o),l.createElement("use",{xlinkHref:"#"+t}))}}]),t}(l.Component);t.default=f,f.defaultProps={size:"md"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={check:'<svg viewBox="0 0 44 44"><path fill-rule="evenodd" d="M34.538 8L38 11.518 17.808 32 8 22.033l3.462-3.518 6.346 6.45z"/></svg>',"check-circle":'<svg viewBox="0 0 48 48"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zM13.1 23.2l-2.2 2.1 10 9.9L38.1 15l-2.2-2-15.2 17.8-7.6-7.6z" fill-rule="evenodd"/></svg>',"check-circle-o":'<svg viewBox="0 0 48 48"><g fill-rule="evenodd"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm0-3c11.598 0 21-9.402 21-21S35.598 3 24 3 3 12.402 3 24s9.402 21 21 21z"/><path d="M12.2 23.2L10 25.3l10 9.9L37.2 15 35 13 19.8 30.8z"/></g></svg>',cross:'<svg viewBox="0 0 44 44"><path fill-rule="evenodd" d="M24.008 21.852l8.97-8.968L31.092 11l-8.97 8.968L13.157 11l-1.884 1.884 8.968 8.968-9.24 9.24 1.884 1.885 9.24-9.24 9.24 9.24 1.885-1.884-9.24-9.24z"/></svg>',"cross-circle":'<svg viewBox="0 0 48 48"><g fill-rule="evenodd"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm0-3c11.598 0 21-9.402 21-21S35.598 3 24 3 3 12.402 3 24s9.402 21 21 21z"/><path d="M24.34 22.22l-7.775-7.775a1.5 1.5 0 1 0-2.12 2.12l7.773 7.775-7.774 7.775a1.5 1.5 0 1 0 2.12 2.12l7.775-7.773 7.774 7.774a1.5 1.5 0 1 0 2.12-2.12L26.46 24.34l7.774-7.774a1.5 1.5 0 1 0-2.12-2.12l-7.776 7.773z"/></g></svg>',"cross-circle-o":'<svg viewBox="0 0 48 48"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm.353-25.77l-7.593-7.593c-.797-.8-1.538-.822-2.263-.207-.724.614-.56 1.617-.124 2.067l7.852 7.847-7.72 7.723c-.727.728-.56 1.646-.066 2.177.493.532 1.553.683 2.31-.174l7.588-7.584 7.644 7.623c.796.798 1.608.724 2.21.145.605-.58.72-1.442-.074-2.24l-7.657-7.67 7.545-7.52c.81-.697.9-1.76.297-2.34-.92-.885-1.85-.338-2.264.078l-7.685 7.667z" fill-rule="evenodd"/></svg>',left:'<svg viewBox="0 0 44 44"><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M16.247 21.4L28.48 9.165l2.12 2.12-10.117 10.12L30.6 31.524l-2.12 2.12-12.233-12.232.007-.006z"/></svg>',right:'<svg viewBox="0 0 44 44"><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M30.6 21.4L18.37 9.165l-2.12 2.12 10.117 10.12-10.118 10.118 2.12 2.12 12.234-12.232-.005-.006z"/></svg>',down:'<svg viewBox="0 0 44 44"><path d="M22.355 28.237l-11.483-10.9c-.607-.576-1.714-.396-2.48.41l.674-.71c-.763.802-.73 2.07-.282 2.496l11.37 10.793-.04.04 2.088 2.195L23.3 31.52l12.308-11.682c.447-.425.48-1.694-.282-2.496l.674.71c-.766-.806-1.873-.986-2.48-.41L22.355 28.237z" fill-rule="evenodd"/></svg>',up:'<svg viewBox="0 0 44 44"><path fill="none" d="M-1-1h46v46H-1z"/><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M23.417 14.23L11.184 26.46l2.12 2.12 10.12-10.117 10.118 10.118 2.12-2.12L23.43 14.228l-.006.005z"/></svg>',loading:'<svg viewBox="0 -2 59.75 60.25"><path fill="#ccc" d="M29.69-.527C14.044-.527 1.36 12.158 1.36 27.806S14.043 56.14 29.69 56.14c15.65 0 28.334-12.686 28.334-28.334S45.34-.527 29.69-.527zm.185 53.75c-14.037 0-25.417-11.38-25.417-25.417S15.838 2.39 29.875 2.39s25.417 11.38 25.417 25.417-11.38 25.416-25.417 25.416z"/><path fill="none" stroke="#108ee9" stroke-width="3" stroke-linecap="round" stroke-miterlimit="10" d="M56.587 29.766c.37-7.438-1.658-14.7-6.393-19.552"/></svg>',search:'<svg viewBox="0 0 44 44"><path d="M32.98 29.255l8.915 8.293L39.603 40l-8.86-8.242a15.952 15.952 0 0 1-10.753 4.147C11.16 35.905 4 28.763 4 19.952 4 11.142 11.16 4 19.99 4s15.99 7.142 15.99 15.952c0 3.472-1.112 6.685-3 9.303zm.05-9.21c0 7.123-5.7 12.918-12.88 12.918-7.176 0-13.015-5.795-13.015-12.918 0-7.12 5.84-12.917 13.017-12.917 7.178 0 12.88 5.797 12.88 12.917z" fill-rule="evenodd"/></svg>',ellipsis:'<svg viewBox="0 0 44 44"><circle cx="21.888" cy="22" r="4.045"/><circle cx="5.913" cy="22" r="4.045"/><circle cx="37.863" cy="22" r="4.045"/></svg>',"ellipsis-circle":'<svg viewBox="0 0 44 44"><g fill-rule="evenodd"><path d="M22.13.11C10.05.11.255 9.902.255 21.983S10.05 43.86 22.13 43.86s21.875-9.795 21.875-21.876S34.21.11 22.13.11zm0 40.7c-10.396 0-18.825-8.43-18.825-18.826S11.735 3.16 22.13 3.16c10.396 0 18.825 8.428 18.825 18.824S32.525 40.81 22.13 40.81z"/><circle cx="21.888" cy="22.701" r="2.445"/><circle cx="12.23" cy="22.701" r="2.445"/><circle cx="31.546" cy="22.701" r="2.445"/></g></svg>',"exclamation-circle":'<svg viewBox="0 0 64 64"><path d="M59.58 40.89L41.193 9.11C39.135 5.382 35.723 3 31.387 3c-3.11 0-6.52 2.382-8.58 6.11L4.42 40.89c-2.788 4.635-3.126 8.81-1.225 12.22C5.015 56.208 7.572 58 13 58h36.773c5.428 0 9.21-1.792 11.03-4.89 1.9-3.41 1.565-7.583-1.224-12.22zm-2.452 11c-.635 1.694-3.802 2.443-7.354 2.443H13c-3.59 0-5.493-.75-6.13-2.444-1.71-2.41-1.374-5.263 0-8.557l18.387-31.777c2.116-3.168 4.394-4.89 6.13-4.89 2.96 0 5.238 1.722 7.354 4.89l18.387 31.777c1.374 3.294 1.713 6.146 0 8.556zm-25.74-33c-.405 0-1.227.835-1.227 2.443v15.89c0 1.608.823 2.444 1.227 2.444 1.628 0 2.452-.836 2.452-2.445v-15.89c0-1.607-.825-2.443-2.453-2.443zm0 23.22c-.405 0-1.227.79-1.227 1.223v2.445c0 .434.823 1.222 1.227 1.222 1.628 0 2.452-.788 2.452-1.222v-2.445c0-.434-.825-1.222-2.453-1.222z" fill-rule="evenodd"/></svg>',"info-circle":'<svg viewBox="0 0 44 44"><circle cx="13.828" cy="19.63" r="1.938"/><circle cx="21.767" cy="19.63" r="1.938"/><circle cx="29.767" cy="19.63" r="1.938"/><path d="M22.102 4.16c-9.918 0-17.958 7.147-17.958 15.962 0 4.935 2.522 9.345 6.48 12.273v5.667l.04.012a2.627 2.627 0 1 0 4.5 1.455h.002l5.026-3.54c.628.06 1.265.094 1.91.094 9.92 0 17.96-7.146 17.96-15.96C40.06 11.306 32.02 4.16 22.1 4.16zm-.04 29.902c-.902 0-1.78-.08-2.642-.207l-5.882 4.234c-.024.024-.055.04-.083.06l-.008.005a.51.51 0 0 1-.284.095.525.525 0 0 1-.525-.525l.005-6.375c-3.91-2.516-6.456-6.544-6.456-11.1 0-7.628 7.107-13.812 15.875-13.812s15.875 6.184 15.875 13.812-7.107 13.812-15.875 13.812z"/></svg>',"question-circle":'<svg viewBox="0 0 44 44"><g fill-rule="evenodd"><path d="M21.186 3c-10.853 0-19.36 8.506-19.36 19.358C1.827 32.494 10.334 41 21.187 41c10.133 0 18.64-8.506 18.64-18.642C39.827 11.506 31.32 3 21.187 3m15.64 19c0 8.823-7.178 16-16 16s-16-7.177-16-16 7.178-16 16-16 16 7.177 16 16z"/><path d="M22.827 31.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m4-15.48c0 .957-.203 1.822-.61 2.593-.427.792-1.117 1.612-2.073 2.457-.867.734-1.453 1.435-1.754 2.096-.302.7-.453 1.693-.453 2.98a.828.828 0 0 1-.823.854.828.828 0 0 1-.584-.22.877.877 0 0 1-.24-.635c0-1.305.168-2.38.506-3.227.336-.883.93-1.682 1.78-2.4 1.01-.883 1.71-1.692 2.1-2.428.336-.645.503-1.38.503-2.21-.02-.935-.3-1.7-.85-2.288-.655-.717-1.62-1.075-2.897-1.075-1.506 0-2.596.535-3.27 1.6-.46.754-.688 1.645-.688 2.677a.92.92 0 0 1-.266.66.747.747 0 0 1-.56.25.73.73 0 0 1-.584-.194c-.16-.164-.24-.393-.24-.69 0-1.82.585-3.272 1.755-4.357C18.645 11.486 19.928 11 21.434 11h.293c1.452 0 2.638.414 3.56 1.24 1.028.903 1.54 2.163 1.54 3.78z"/></g></svg>',voice:'<svg viewBox="0 0 38 33"><g fill-rule="evenodd"><path d="M17.838 28.8c-.564-.468-1.192-.983-1.836-1.496-4.244-3.385-5.294-3.67-6.006-3.67-.014 0-.027.005-.04.005-.015 0-.028-.006-.042-.006H3.562c-.734 0-.903-.203-.903-.928v-12.62c0-.49.057-.8.66-.8H9.1c.694 0 1.76-.28 6.4-3.63.83-.596 1.638-1.196 2.337-1.722V28.8zM19.682.19c-.463-.22-1.014-.158-1.417.157-.02.016-1.983 1.552-4.152 3.125C10.34 6.21 9.243 6.664 9.02 6.737H3.676c-.027 0-.053.003-.08.004H1.183c-.608 0-1.1.487-1.1 1.086V25.14c0 .598.492 1.084 1.1 1.084h8.71c.22.08 1.257.55 4.605 3.24 1.947 1.562 3.694 3.088 3.712 3.103.25.22.568.333.89.333.186 0 .373-.038.55-.116.48-.213.79-.684.79-1.204V1.38c0-.506-.294-.968-.758-1.19z" mask="url(#mask-2)"/><path d="M31.42 16.475c0-3.363-1.854-6.297-4.606-7.876-.125-.067-.42-.193-.625-.193-.613 0-1.11.488-1.11 1.09 0 .404.22.764.55.952 2.13 1.19 3.566 3.44 3.566 6.024 0 2.627-1.486 4.913-3.677 6.087-.32.19-.53.54-.53.935 0 .602.495 1.09 1.106 1.09.26.002.568-.15.568-.15 2.835-1.556 4.754-4.538 4.754-7.96" mask="url(#mask-4)"/><path d="M30.14 3.057c-.205-.122-.41-.22-.658-.22-.608 0-1.1.485-1.1 1.084 0 .434.26.78.627.978 4.042 2.323 6.76 6.636 6.76 11.578 0 4.938-2.715 9.248-6.754 11.572-.354.19-.66.55-.66.993 0 .6.494 1.085 1.102 1.085.243 0 .438-.092.65-.213 4.692-2.695 7.848-7.7 7.848-13.435 0-5.723-3.142-10.718-7.817-13.418" mask="url(#mask-6)"/></g></svg>',plus:'<svg viewBox="0 0 30 30"><path d="M14 14H0v2h14v14h2V16h14v-2H16V0h-2v14z" fill-rule="evenodd"/></svg>',minus:'<svg viewBox="0 0 30 2"><path d="M0 0h30v2H0z" fill-rule="evenodd"/></svg>',dislike:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path fill="#FFF" d="M47 22h2v6h-2zm-24 0h2v6h-2z"/><path d="M21 51s4.6-7 15-7 15 7 15 7" stroke="#FFF" stroke-width="2"/></g></svg>',fail:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path d="M22 22l28.304 28.304m-28.304 0L50.304 22" stroke="#FFF" stroke-width="2"/></g></svg>',success:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path stroke="#FFF" stroke-width="2" d="M19 34.54l11.545 11.923L52.815 24"/></g></svg>'};t.default=function(){if(document){var e=document.getElementById("__ANTD_MOBILE_SVG_SPRITE_NODE__"),t=document.body;e||t.insertAdjacentHTML("afterbegin",function(){var e=Object.keys(r).map((function(e){return"<symbol id="+e+r[e].split("svg")[1]+"symbol>"})).join("");return'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    id="__ANTD_MOBILE_SVG_SPRITE_NODE__"\n    style="display:none;overflow:hidden;width:0;height:0"\n  >\n    <defs>\n      '+e+"\n    </defs>\n  </svg>\n"}())}},e.exports=t.default},function(e,t,n){"use strict";n.r(t);var r=n(153),i=n.n(r),o=n(26),a=n.n(o),s=n(57),c=n.n(s),l=n(30),u=n.n(l),d=n(31),h=n.n(d),f=n(22),p=n.n(f),g=n(32),y=n.n(g),v=n(0),m=n.n(v),_=n(3),b=n.n(_),E=n(36),S=n.n(E),T=function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");return"function"!==typeof t.componentWillReceiveProps?e:m.a.Profiler?(t.UNSAFE_componentWillReceiveProps=t.componentWillReceiveProps,delete t.componentWillReceiveProps,e):e};function w(e){var t=[];return m.a.Children.forEach(e,(function(e){t.push(e)})),t}function O(e,t){var n=null;return e&&e.forEach((function(e){n||e&&e.key===t&&(n=e)})),n}function k(e,t,n){var r=null;return e&&e.forEach((function(e){if(e&&e.key===t&&e.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=e}})),r}var C=n(81),$=n.n(C),A={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},P={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},I=[],x=[];function R(e,t,n){e.addEventListener(t,n,!1)}function D(e,t,n){e.removeEventListener(t,n,!1)}"undefined"!==typeof window&&"undefined"!==typeof document&&function(){var e=document.createElement("div").style;function t(t,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];for(var o in i)if(o in e){n.push(i[o]);break}}}"AnimationEvent"in window||(delete A.animationstart.animation,delete P.animationend.animation),"TransitionEvent"in window||(delete A.transitionstart.transition,delete P.transitionend.transition),t(A,I),t(P,x)}();var L={startEvents:I,addStartEventListener:function(e,t){0!==I.length?I.forEach((function(n){R(e,n,t)})):window.setTimeout(t,0)},removeStartEventListener:function(e,t){0!==I.length&&I.forEach((function(n){D(e,n,t)}))},endEvents:x,addEndEventListener:function(e,t){0!==x.length?x.forEach((function(n){R(e,n,t)})):window.setTimeout(t,0)},removeEndEventListener:function(e,t){0!==x.length&&x.forEach((function(n){D(e,n,t)}))}},M=n(154),N=n.n(M),j=0!==L.endEvents.length,B=["Webkit","Moz","O","ms"],U=["-webkit-","-moz-","-o-","ms-",""];function G(e,t){for(var n=window.getComputedStyle(e,null),r="",i=0;i<U.length&&!(r=n.getPropertyValue(U[i]+t));i++);return r}function F(e){if(j){var t=parseFloat(G(e,"transition-delay"))||0,n=parseFloat(G(e,"transition-duration"))||0,r=parseFloat(G(e,"animation-delay"))||0,i=parseFloat(G(e,"animation-duration"))||0,o=Math.max(n+t,i+r);e.rcEndAnimTimeout=setTimeout((function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()}),1e3*o+200)}}function V(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}var H=function(e,t,n){var r="object"===("undefined"===typeof t?"undefined":$()(t)),i=r?t.name:t,o=r?t.active:t+"-active",a=n,s=void 0,c=void 0,l=N()(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(a=n.end,s=n.start,c=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),V(e),l.remove(i),l.remove(o),L.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,a&&a())},L.addEndEventListener(e,e.rcEndListener),s&&s(),l.add(i),e.rcAnimTimeout=setTimeout((function(){e.rcAnimTimeout=null,l.add(o),c&&setTimeout(c,0),F(e)}),30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};H.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),V(e),L.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},L.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout((function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,F(e)}),0)},H.setTransition=function(e,t,n){var r=t,i=n;void 0===n&&(i=r,r=""),r=r||"",B.forEach((function(t){e.style[t+"Transition"+r]=i}))},H.isCssAnimationSupported=j;var z=H,K={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}},W={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},Y=function(e){function t(){return u()(this,t),p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y()(t,e),h()(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){K.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){K.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){K.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,r=S.a.findDOMNode(this),i=this.props,o=i.transitionName,a="object"===typeof o;this.stop();var s=function(){n.stopper=null,t()};if((j||!i.animation[e])&&o&&i[W[e]]){var c=a?o[e]:o+"-"+e,l=c+"-active";a&&o[e+"Active"]&&(l=o[e+"Active"]),this.stopper=z(r,{name:c,active:l},s)}else this.stopper=i.animation[e](r,s)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(m.a.Component);Y.propTypes={children:b.a.any,animation:b.a.any,transitionName:b.a.any};var q=Y,X="rc_animate_"+Date.now();function J(e){var t=e.children;return m.a.isValidElement(t)&&!t.key?m.a.cloneElement(t,{key:X}):t}function Z(){}var Q=function(e){function t(e){u()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return ee.call(n),n.currentlyAnimatingKeys={},n.keysToEnter=[],n.keysToLeave=[],n.state={children:w(J(e))},n.childrenRefs={},n}return y()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter((function(e){return!!e.props[t]}))),n.forEach((function(t){t&&e.performAppear(t.key)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.nextProps=e;var n=w(J(e)),r=this.props;r.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach((function(e){t.stop(e)}));var i=r.showProp,o=this.currentlyAnimatingKeys,s=r.exclusive?w(J(r)):this.state.children,c=[];i?(s.forEach((function(e){var t=e&&O(n,e.key),r=void 0;(r=t&&t.props[i]||!e.props[i]?t:m.a.cloneElement(t||e,a()({},i,!0)))&&c.push(r)})),n.forEach((function(e){e&&O(s,e.key)||c.push(e)}))):c=function(e,t){var n=[],r={},i=[];return e.forEach((function(e){e&&O(t,e.key)?i.length&&(r[e.key]=i,i=[]):i.push(e)})),t.forEach((function(e){e&&Object.prototype.hasOwnProperty.call(r,e.key)&&(n=n.concat(r[e.key])),n.push(e)})),n=n.concat(i)}(s,n),this.setState({children:c}),n.forEach((function(e){var n=e&&e.key;if(!e||!o[n]){var r=e&&O(s,n);if(i){var a=e.props[i];if(r)!k(s,n,i)&&a&&t.keysToEnter.push(n);else a&&t.keysToEnter.push(n)}else r||t.keysToEnter.push(n)}})),s.forEach((function(e){var r=e&&e.key;if(!e||!o[r]){var a=e&&O(n,r);if(i){var s=e.props[i];if(a)!k(n,r,i)&&s&&t.keysToLeave.push(r);else s&&t.keysToLeave.push(r)}else a||t.keysToLeave.push(r)}}))}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?k(e,t,n):O(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var e=this,t=this.props;this.nextProps=t;var n=this.state.children,r=null;n&&(r=n.map((function(n){if(null===n||void 0===n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return m.a.createElement(q,{key:n.key,ref:function(t){e.childrenRefs[n.key]=t},animation:t.animation,transitionName:t.transitionName,transitionEnter:t.transitionEnter,transitionAppear:t.transitionAppear,transitionLeave:t.transitionLeave},n)})));var i=t.component;if(i){var o=t;return"string"===typeof i&&(o=c()({className:t.className,style:t.style},t.componentProps)),m.a.createElement(i,o,r)}return r[0]||null}}]),t}(m.a.Component);Q.isAnimate=!0,Q.propTypes={className:b.a.string,style:b.a.object,component:b.a.any,componentProps:b.a.object,animation:b.a.object,transitionName:b.a.oneOfType([b.a.string,b.a.object]),transitionEnter:b.a.bool,transitionAppear:b.a.bool,exclusive:b.a.bool,transitionLeave:b.a.bool,onEnd:b.a.func,onEnter:b.a.func,onLeave:b.a.func,onAppear:b.a.func,showProp:b.a.string,children:b.a.node},Q.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:Z,onEnter:Z,onLeave:Z,onAppear:Z};var ee=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var r=e.props;if(delete e.currentlyAnimatingKeys[t],!r.exclusive||r===e.nextProps){var i=w(J(r));e.isValidChildByKey(i,t)?"appear"===n?K.allowAppearCallback(r)&&(r.onAppear(t),r.onEnd(t,!0)):K.allowEnterCallback(r)&&(r.onEnter(t),r.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var r=w(J(n));if(e.isValidChildByKey(r,t))e.performEnter(t);else{var i=function(){K.allowLeaveCallback(n)&&(n.onLeave(t),n.onEnd(t,!1))};!function(e,t,n){var r=e.length===t.length;return r&&e.forEach((function(e,i){var o=t[i];e&&o&&(e&&!o||!e&&o||e.key!==o.key||n&&e.props[n]!==o.props[n])&&(r=!1)})),r}(e.state.children,r,n.showProp)?e.setState({children:r},i):i()}}}},te=T(Q);var ne=n(35),re=n.n(ne),ie=function(e){function t(){var e,n,r,i;u()(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=p()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.close=function(){r.clearCloseTimer(),r.props.onClose()},r.startCloseTimer=function(){r.props.duration&&(r.closeTimer=setTimeout((function(){r.close()}),1e3*r.props.duration))},r.clearCloseTimer=function(){r.closeTimer&&(clearTimeout(r.closeTimer),r.closeTimer=null)},i=n,p()(r,i)}return y()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls+"-notice",r=(e={},a()(e,""+n,1),a()(e,n+"-closable",t.closable),a()(e,t.className,!!t.className),e);return m.a.createElement("div",{className:re()(r),style:t.style},m.a.createElement("div",{className:n+"-content"},t.children),t.closable?m.a.createElement("a",{tabIndex:"0",onClick:this.close,className:n+"-close"},m.a.createElement("span",{className:n+"-close-x"})):null)}}]),t}(v.Component);ie.propTypes={duration:b.a.number,onClose:b.a.func,children:b.a.any},ie.defaultProps={onEnd:function(){},onClose:function(){},duration:1.5,style:{right:"50%"}};var oe=ie,ae=0,se=Date.now();function ce(){return"rcNotification_"+se+"_"+ae++}var le=function(e){function t(){var e,n,r,i;u()(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=p()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={notices:[]},r.add=function(e){var t=e.key=e.key||ce();r.setState((function(n){var r=n.notices;if(!r.filter((function(e){return e.key===t})).length)return{notices:r.concat(e)}}))},r.remove=function(e){r.setState((function(t){return{notices:t.notices.filter((function(t){return t.key!==e}))}}))},i=n,p()(r,i)}return y()(t,e),h()(t,[{key:"getTransitionName",value:function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t}},{key:"render",value:function(){var e,t=this,n=this.props,r=this.state.notices.map((function(e){var r=function(){var e=[].slice.call(arguments,0);return 1===e.length?e[0]:function(){for(var t=0;t<e.length;t++)e[t]&&e[t].apply&&e[t].apply(this,arguments)}}(t.remove.bind(t,e.key),e.onClose);return m.a.createElement(oe,c()({prefixCls:n.prefixCls},e,{onClose:r}),e.content)})),i=(e={},a()(e,n.prefixCls,1),a()(e,n.className,!!n.className),e);return m.a.createElement("div",{className:re()(i),style:n.style},m.a.createElement(te,{transitionName:this.getTransitionName()},r))}}]),t}(v.Component);le.propTypes={prefixCls:b.a.string,transitionName:b.a.string,animation:b.a.oneOfType([b.a.string,b.a.object]),style:b.a.object},le.defaultProps={prefixCls:"rmc-notification",animation:"fade",style:{top:65,left:"50%"}},le.newInstance=function(e,t){var n=e||{},r=n.getContainer,o=i()(n,["getContainer"]),a=void 0;r?a=r():(a=document.createElement("div"),document.body.appendChild(a));var s=!1;S.a.render(m.a.createElement(le,c()({},o,{ref:function(e){s||(s=!0,t({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){S.a.unmountComponentAtNode(a),r||document.body.removeChild(a)}}))}})),a)};var ue=le;t.default=ue},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return u}));var r=n(1),i=n(5),o=n(21),a="?",s=/\(error: (.*)\)/,c=/captureMessage|captureException/;function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[],a=e.split("\n"),c=t;c<a.length;c++){var l=a[c];if(!(l.length>1024)){var u=s.test(l)?l.replace(s,"$1"):l;if(!u.match(/\S*Error: /)){var h,f=Object(o.a)(r);try{for(f.s();!(h=f.n()).done;){var p=h.value,g=p(u);if(g){i.push(g);break}}}catch(y){f.e(y)}finally{f.f()}if(i.length>=50+n)break}}}return d(i.slice(n))}}function u(e){return Array.isArray(e)?l.apply(void 0,Object(i.a)(e)):e}function d(e){if(!e.length)return[];var t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),c.test(t[t.length-1].function||"")&&(t.pop(),c.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((function(e){return Object(r.a)(Object(r.a)({},e),{},{filename:e.filename||t[t.length-1].filename,function:e.function||a})}))}function h(e){try{return e&&"function"===typeof e&&e.name||"<anonymous>"}catch(t){return"<anonymous>"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return T}));var r=n(5),i=n(1),o=n(51),a=n(74),s=n(113),c=n(16),l=n(325),u=n(156),d=n(8),h=n(293),f=n(28),p=n(24),g=n(13);var y=n(88),v=n(44),m=n(61),_=n(10);function b(e,t){var n=t.fingerprint,a=t.span,s=t.breadcrumbs,c=t.sdkProcessingMetadata;!function(e,t){var n=t.extra,r=t.tags,o=t.user,a=t.contexts,s=t.level,c=t.transactionName,l=Object(v.c)(n);l&&Object.keys(l).length&&(e.extra=Object(i.a)(Object(i.a)({},l),e.extra));var u=Object(v.c)(r);u&&Object.keys(u).length&&(e.tags=Object(i.a)(Object(i.a)({},u),e.tags));var d=Object(v.c)(o);d&&Object.keys(d).length&&(e.user=Object(i.a)(Object(i.a)({},d),e.user));var h=Object(v.c)(a);h&&Object.keys(h).length&&(e.contexts=Object(i.a)(Object(i.a)({},h),e.contexts));s&&(e.level=s);c&&"transaction"!==e.type&&(e.transaction=c)}(e,t),a&&function(e,t){e.contexts=Object(i.a)({trace:Object(_.l)(t)},e.contexts),e.sdkProcessingMetadata=Object(i.a)({dynamicSamplingContext:Object(m.c)(t)},e.sdkProcessingMetadata);var n=Object(_.e)(t),r=Object(_.k)(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,a),function(e,t){e.fingerprint=e.fingerprint?Object(o.c)(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){var n=[].concat(Object(r.a)(e.breadcrumbs||[]),Object(r.a)(t));e.breadcrumbs=n.length?n:void 0}(e,s),function(e,t){e.sdkProcessingMetadata=Object(i.a)(Object(i.a)({},e.sdkProcessingMetadata),t)}(e,c)}function E(e,t){var n=t.extra,o=t.tags,a=t.user,s=t.contexts,c=t.level,l=t.sdkProcessingMetadata,u=t.breadcrumbs,d=t.fingerprint,h=t.eventProcessors,f=t.attachments,p=t.propagationContext,g=t.transactionName,y=t.span;S(e,"extra",n),S(e,"tags",o),S(e,"user",a),S(e,"contexts",s),S(e,"sdkProcessingMetadata",l),c&&(e.level=c),g&&(e.transactionName=g),y&&(e.span=y),u.length&&(e.breadcrumbs=[].concat(Object(r.a)(e.breadcrumbs),Object(r.a)(u))),d.length&&(e.fingerprint=[].concat(Object(r.a)(e.fingerprint),Object(r.a)(d))),h.length&&(e.eventProcessors=[].concat(Object(r.a)(e.eventProcessors),Object(r.a)(h))),f.length&&(e.attachments=[].concat(Object(r.a)(e.attachments),Object(r.a)(f))),e.propagationContext=Object(i.a)(Object(i.a)({},e.propagationContext),p)}function S(e,t,n){if(n&&Object.keys(n).length)for(var r in e[t]=Object(i.a)({},e[t]),n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}function T(e,t,n,v,m,_){var S=e.normalizeDepth,T=void 0===S?3:S,O=e.normalizeMaxBreadth,k=void 0===O?1e3:O,C=Object(i.a)(Object(i.a)({},t),{},{event_id:t.event_id||n.event_id||Object(o.f)(),timestamp:t.timestamp||Object(a.b)()}),$=n.integrations||e.integrations.map((function(e){return e.name}));!function(e,t){var n=t.environment,r=t.release,i=t.dist,o=t.maxValueLength,a=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?n:u.a);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==i&&(e.dist=i);e.message&&(e.message=Object(s.d)(e.message,a));var c=e.exception&&e.exception.values&&e.exception.values[0];c&&c.value&&(c.value=Object(s.d)(c.value,a));var l=e.request;l&&l.url&&(l.url=Object(s.d)(l.url,a))}(C,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[].concat(Object(r.a)(e.sdk.integrations||[]),Object(r.a)(t)))}(C,$),void 0===t.type&&function(e,t){var n,r=c.a._sentryDebugIds;if(!r)return;var i=w.get(t);i?n=i:(n=new Map,w.set(t,n));var o=Object.keys(r).reduce((function(e,i){var o,a=n.get(i);a?o=a:(o=t(i),n.set(i,o));for(var s=o.length-1;s>=0;s--){var c=o[s];if(c.filename){e[c.filename]=r[i];break}}return e}),{});try{e.exception.values.forEach((function(e){e.stacktrace.frames.forEach((function(e){e.filename&&(e.debug_id=o[e.filename])}))}))}catch(a){}}(C,e.stackParser);var A=function(e,t){if(!t)return e;var n=e?e.clone():new y.a;return n.update(t),n}(v,n.captureContext);n.mechanism&&Object(o.a)(C,n.mechanism);var P=m?m.getEventProcessors():[],I=Object(d.c)().getScopeData();_&&E(I,_.getScopeData());A&&E(I,A.getScopeData());var x=[].concat(Object(r.a)(n.attachments||[]),Object(r.a)(I.attachments));return x.length&&(n.attachments=x),b(C,I),function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new h.a((function(a,s){var c=t[o];if(null===n||"function"!==typeof c)a(n);else{var l=c(Object(i.a)({},n),r);g.a&&c.id&&null===l&&f.c.log('Event processor "'.concat(c.id,'" dropped event')),Object(p.n)(l)?l.then((function(n){return e(t,n,r,o+1).then(a)})).then(null,s):e(t,l,r,o+1).then(a).then(null,s)}}))}([].concat(Object(r.a)(P),Object(r.a)(I.eventProcessors)),C,n).then((function(e){return e&&function(e){var t={};try{e.exception.values.forEach((function(e){e.stacktrace.frames.forEach((function(e){e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(r){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];var n=e.debug_meta.images;Object.keys(t).forEach((function(e){n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"===typeof T&&T>0?function(e,t,n){if(!e)return null;var r=Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return Object(i.a)(Object(i.a)({},e),e.data&&{data:Object(l.a)(e.data,t,n)})}))}),e.user&&{user:Object(l.a)(e.user,t,n)}),e.contexts&&{contexts:Object(l.a)(e.contexts,t,n)}),e.extra&&{extra:Object(l.a)(e.extra,t,n)});e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Object(l.a)(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((function(e){return Object(i.a)(Object(i.a)({},e),e.data&&{data:Object(l.a)(e.data,t,n)})})));return r}(e,T,k):e}))}var w=new WeakMap;function O(e){if(e)return function(e){return e instanceof y.a||"function"===typeof e}(e)||function(e){return Object.keys(e).some((function(e){return k.includes(e)}))}(e)?{captureContext:e}:e}var k=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));var r,i=n(17),o=n(25),a=n(24);function s(e){return new l((function(t){t(e)}))}function c(e){return new l((function(t,n){n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(r||(r={}));var l=function(){function e(t){Object(i.a)(this,e),e.prototype.__init.call(this),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),this._state=r.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}return Object(o.a)(e,[{key:"then",value:function(t,n){var r=this;return new e((function(e,i){r._handlers.push([!1,function(n){if(t)try{e(t(n))}catch(r){i(r)}else e(n)},function(t){if(n)try{e(n(t))}catch(r){i(r)}else i(t)}]),r._executeHandlers()}))}},{key:"catch",value:function(e){return this.then((function(e){return e}),e)}},{key:"finally",value:function(t){var n=this;return new e((function(e,r){var i,o;return n.then((function(e){o=!1,i=e,t&&t()}),(function(e){o=!0,i=e,t&&t()})).then((function(){o?r(i):e(i)}))}))}},{key:"__init",value:function(){var e=this;this._resolve=function(t){e._setResult(r.RESOLVED,t)}}},{key:"__init2",value:function(){var e=this;this._reject=function(t){e._setResult(r.REJECTED,t)}}},{key:"__init3",value:function(){var e=this;this._setResult=function(t,n){e._state===r.PENDING&&(Object(a.n)(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))}}},{key:"__init4",value:function(){var e=this;this._executeHandlers=function(){if(e._state!==r.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t[0]||(e._state===r.RESOLVED&&t[1](e._value),e._state===r.REJECTED&&t[2](e._value),t[0]=!0)}))}}}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(43);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}},,function(e,t,n){"use strict";e.exports=n(323)},function(e,t,n){"use strict";(function(e){var r=n(0),i=n.n(r),o=n(192),a=n(3),s=n.n(a),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function l(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var u=i.a.createContext||function(e,t){var n,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",u=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=l(t.props.value),t}Object(o.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(a=i)?0!==o||1/o===1/a:o!==o&&a!==a)?n=0:(n="function"===typeof t?t(r,i):1073741823,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,a},r.render=function(){return this.props.children},n}(r.Component);u.childContextTypes=((n={})[a]=s.a.object.isRequired,n);var d=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(o.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return d.contextTypes=((i={})[a]=s.a.object,i),{Provider:u,Consumer:d}};t.a=u}).call(this,n(20))},function(e,t,n){"use strict";var r=n(297),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=c(t),g=c(n),y=0;y<a.length;++y){var v=a[y];if(!o[v]&&(!r||!r[v])&&(!g||!g[v])&&(!s||!s[v])){var m=h(n,v);try{l(t,v,m)}catch(_){}}}}return t}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,"a",(function(){return J}));var o=n(0),a=n.n(o),s=(n(3),n(131));function c(e){return"/"===e.charAt(0)}function l(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var u=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&c(e),a=t&&c(t),s=o||a;if(e&&c(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var d=0,h=i.length;h>=0;h--){var f=i[h];"."===f?l(i,h):".."===f?(l(i,h),d++):d&&(l(i,h),d--)}if(!s)for(;d--;d)i.unshift("..");!s||""===i[0]||i[0]&&c(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};var d=function(e,t){if(!e)throw new Error("Invariant failed")};function h(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function p(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function g(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function y(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function v(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=Object(s.a)({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=u(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function m(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var _=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}function E(){try{return window.history.state||{}}catch(e){return{}}}function S(e){void 0===e&&(e={}),_||d(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,a=void 0!==o&&o,c=i.getUserConfirmation,l=void 0===c?b:c,u=i.keyLength,f=void 0===u?6:u,S=e.basename?g(h(e.basename)):"";function T(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return S&&(o=p(o,S)),v(o,r,n)}function w(){return Math.random().toString(36).substr(2,f)}var O=m();function k(e){Object(s.a)(j,e),j.length=t.length,O.notifyListeners(j.location,j.action)}function C(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(T(e.state))}function $(){P(T(E()))}var A=!1;function P(e){if(A)A=!1,k();else{O.confirmTransitionTo(e,"POP",l,(function(t){t?k({action:"POP",location:e}):function(e){var t=j.location,n=x.indexOf(t.key);-1===n&&(n=0);var r=x.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(A=!0,D(i))}(e)}))}}var I=T(E()),x=[I.key];function R(e){return S+y(e)}function D(e){t.go(e)}var L=0;function M(e){1===(L+=e)&&1===e?(window.addEventListener("popstate",C),r&&window.addEventListener("hashchange",$)):0===L&&(window.removeEventListener("popstate",C),r&&window.removeEventListener("hashchange",$))}var N=!1;var j={length:t.length,action:"POP",location:I,createHref:R,push:function(e,r){var i=v(e,r,w(),j.location);O.confirmTransitionTo(i,"PUSH",l,(function(e){if(e){var r=R(i),o=i.key,s=i.state;if(n)if(t.pushState({key:o,state:s},null,r),a)window.location.href=r;else{var c=x.indexOf(j.location.key),l=x.slice(0,c+1);l.push(i.key),x=l,k({action:"PUSH",location:i})}else window.location.href=r}}))},replace:function(e,r){var i=v(e,r,w(),j.location);O.confirmTransitionTo(i,"REPLACE",l,(function(e){if(e){var r=R(i),o=i.key,s=i.state;if(n)if(t.replaceState({key:o,state:s},null,r),a)window.location.replace(r);else{var c=x.indexOf(j.location.key);-1!==c&&(x[c]=i.key),k({action:"REPLACE",location:i})}else window.location.replace(r)}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(e){void 0===e&&(e=!1);var t=O.setPrompt(e);return N||(M(1),N=!0),function(){return N&&(N=!1,M(-1)),t()}},listen:function(e){var t=O.appendListener(e);return M(1),function(){M(-1),t()}}};return j}var T={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:h},slash:{encodePath:h,decodePath:h}};function w(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function k(e){window.location.replace(w(window.location.href)+"#"+e)}function C(e){void 0===e&&(e={}),_||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?b:r,o=n.hashType,a=void 0===o?"slash":o,c=e.basename?g(h(e.basename)):"",l=T[a],u=l.encodePath,f=l.decodePath;function E(){var e=f(O());return c&&(e=p(e,c)),v(e)}var S=m();function C(e){Object(s.a)(B,e),B.length=t.length,S.notifyListeners(B.location,B.action)}var $=!1,A=null;function P(){var e,t,n=O(),r=u(n);if(n!==r)k(r);else{var o=E(),a=B.location;if(!$&&(t=o,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(A===y(o))return;A=null,function(e){if($)$=!1,C();else{S.confirmTransitionTo(e,"POP",i,(function(t){t?C({action:"POP",location:e}):function(e){var t=B.location,n=D.lastIndexOf(y(t));-1===n&&(n=0);var r=D.lastIndexOf(y(e));-1===r&&(r=0);var i=n-r;i&&($=!0,L(i))}(e)}))}}(o)}}var I=O(),x=u(I);I!==x&&k(x);var R=E(),D=[y(R)];function L(e){t.go(e)}var M=0;function N(e){1===(M+=e)&&1===e?window.addEventListener("hashchange",P):0===M&&window.removeEventListener("hashchange",P)}var j=!1;var B={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=w(window.location.href)),n+"#"+u(c+y(e))},push:function(e,t){var n=v(e,void 0,void 0,B.location);S.confirmTransitionTo(n,"PUSH",i,(function(e){if(e){var t=y(n),r=u(c+t);if(O()!==r){A=t,function(e){window.location.hash=e}(r);var i=D.lastIndexOf(y(B.location)),o=D.slice(0,i+1);o.push(t),D=o,C({action:"PUSH",location:n})}else C()}}))},replace:function(e,t){var n=v(e,void 0,void 0,B.location);S.confirmTransitionTo(n,"REPLACE",i,(function(e){if(e){var t=y(n),r=u(c+t);O()!==r&&(A=t,k(r));var i=D.indexOf(y(B.location));-1!==i&&(D[i]=t),C({action:"REPLACE",location:n})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=S.setPrompt(e);return j||(N(1),j=!0),function(){return j&&(j=!1,N(-1)),t()}},listen:function(e){var t=S.appendListener(e);return N(1),function(){N(-1),t()}}};return B}function $(e,t,n){return Math.min(Math.max(e,t),n)}function A(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,o=t.initialIndex,a=void 0===o?0:o,c=t.keyLength,l=void 0===c?6:c,u=m();function d(e){Object(s.a)(b,e),b.length=b.entries.length,u.notifyListeners(b.location,b.action)}function h(){return Math.random().toString(36).substr(2,l)}var f=$(a,0,i.length-1),p=i.map((function(e){return v(e,void 0,"string"===typeof e?h():e.key||h())})),g=y;function _(e){var t=$(b.index+e,0,b.entries.length-1),r=b.entries[t];u.confirmTransitionTo(r,"POP",n,(function(e){e?d({action:"POP",location:r,index:t}):d()}))}var b={length:p.length,action:"POP",location:p[f],index:f,entries:p,createHref:g,push:function(e,t){var r=v(e,t,h(),b.location);u.confirmTransitionTo(r,"PUSH",n,(function(e){if(e){var t=b.index+1,n=b.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),d({action:"PUSH",location:r,index:t,entries:n})}}))},replace:function(e,t){var r=v(e,t,h(),b.location);u.confirmTransitionTo(r,"REPLACE",n,(function(e){e&&(b.entries[b.index]=r,d({action:"REPLACE",location:r}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return b}var P=n(298);function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=n(193),R=n.n(x);n(297);function D(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(299);var L=function(e){var t=Object(P.a)();return t.displayName=e,t},M=L("Router-History"),N=L("Router"),j=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}i(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return a.a.createElement(N.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(M.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.a.Component);a.a.Component;a.a.Component;var B={},U=0;function G(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=B[n]||(B[n]={});if(r[e])return r[e];var i=[],o={regexp:R()(e,i,t),keys:i};return U<1e4&&(r[e]=o,U++),o}(n,{end:o,strict:s,sensitive:l}),i=r.regexp,a=r.keys,c=i.exec(e);if(!c)return null;var u=c[0],d=c.slice(1),h=e===u;return o&&!h?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:h,params:a.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}a.a.Component;function F(e){return"/"===e.charAt(0)?e:"/"+e}function V(e,t){if(!e)return t;var n=F(e);return 0!==t.pathname.indexOf(n)?t:I({},t,{pathname:t.pathname.substr(n.length)})}function H(e){return"string"===typeof e?e:y(e)}function z(e){return function(){d(!1)}}function K(){}a.a.Component;a.a.Component;a.a.useContext;function W(e,t){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,W(e,t)}function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var J=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=S(t.props),t}return Y(t,e),t.prototype.render=function(){return a.a.createElement(j,{history:this.history,children:this.props.children})},t}(a.a.Component);a.a.Component;var Z=function(e,t){return"function"===typeof e?e(t):e},Q=function(e,t){return"string"===typeof e?v(e,null,null,t):e},ee=function(e){return e},te=a.a.forwardRef;"undefined"===typeof te&&(te=ee);var ne=te((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=X(e,["innerRef","navigate","onClick"]),s=o.target,c=q({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return c.ref=ee!==te&&t||n,a.a.createElement("a",c)}));var re=te((function(e,t){var n=e.component,r=void 0===n?ne:n,i=e.replace,o=e.to,s=e.innerRef,c=X(e,["component","replace","to","innerRef"]);return a.a.createElement(N.Consumer,null,(function(e){e||d(!1);var n=e.history,l=Q(Z(o,e.location),e.location),u=l?n.createHref(l):"",h=q({},c,{href:u,navigate:function(){var t=Z(o,e.location),r=y(e.location)===y(Q(t));(i||r?n.replace:n.push)(t)}});return ee!==te?h.ref=t||s:h.innerRef=s,a.a.createElement(r,h)}))})),ie=function(e){return e},oe=a.a.forwardRef;"undefined"===typeof oe&&(oe=ie);oe((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,o=void 0===i?"active":i,s=e.activeStyle,c=e.className,l=e.exact,u=e.isActive,h=e.location,f=e.sensitive,p=e.strict,g=e.style,y=e.to,v=e.innerRef,m=X(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(N.Consumer,null,(function(e){e||d(!1);var n=h||e.location,i=Q(Z(y,n),n),_=i.pathname,b=_&&_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=b?G(n.pathname,{path:b,exact:l,sensitive:f,strict:p}):null,S=!!(u?u(E,n):E),T="function"===typeof c?c(S):c,w="function"===typeof g?g(S):g;S&&(T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(T,o),w=q({},w,s));var O=q({"aria-current":S&&r||null,className:T,style:w,to:i},m);return ie!==oe?O.ref=t||v:O.innerRef=v,a.a.createElement(re,O)}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(11),i=n.n(r),o=n(18),a=n(6),s=n(47),c=function(e){var t,n=e.mediaType,r=e.callback,i=e.success;if("fb"===n){var o=Object(a.d)().fbclid,s=void 0===o?"":o,c=function(){var e;return!s||(null===(e=(Object(a.b)("_fbc")||"").split(".").reverse())||void 0===e?void 0:e[0])===s};if(!Object(a.b)("_fbp")||!c())return void(t=setInterval((function(){Object(a.b)("_fbp")&&c()&&(clearInterval(t),r({_fbc:Object(a.b)("_fbc"),_fbp:Object(a.b)("_fbp")}))}),50))}if("sc"===n&&!Object(a.b)("_scid"))return console.log("%c [ \u7f3a\u5c11snapchat\u5e7f\u544a\u53c2\u6570 ]-17","font-size:13px; background:pink; color:#bf2c9f;"),void(t=setInterval((function(){Object(a.b)("_scid")&&(clearInterval(t),r({sc_cookie1:Object(a.b)("_scid")}))}),50));i()},l=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var n,r;"undefined"===typeof(null===(n=navigator)||void 0===n||null===(r=n.userAgentData)||void 0===r?void 0:r.getHighEntropyValues)&&e(null),navigator.userAgentData.getHighEntropyValues(["model","platformVersion","fullVersionList"]).then((function(t){var n,r;e({platform:t.platform,model:t.model,platformVersion:(null===(n=t.platformVersion)||void 0===n||null===(r=n.split("."))||void 0===r?void 0:r[0])||""})})).catch((function(t){e(null)}))}));case 2:return t=e.sent,n=navigator.userAgent,console.log("%c [ UAData?.platform ]-100","font-size:13px; background:pink; color:#bf2c9f;",null===t||void 0===t?void 0:t.platformVersion,null===t||void 0===t?void 0:t.platform),t&&(null===t||void 0===t?void 0:t.platformVersion)&&(null===t||void 0===t?void 0:t.platform)&&(n=n.replace(/Android\s+\d+;/,"".concat(null===t||void 0===t?void 0:t.platform," ").concat(null===t||void 0===t?void 0:t.platformVersion,";"))),r=Math.max(Math.floor(window.screen.width*Object(s.f)()/100),Math.floor(window.screen.height*Object(s.f)()/100)),o=Math.min(Math.floor(window.screen.width*Object(s.f)()/100),Math.floor(window.screen.height*Object(s.f)()/100)),e.abrupt("return",{ua:n,did:{w:o,h:r}});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(7),i=n(73),o=n(24),a=n(28),s="baggage",c=/^sentry-/;function l(e){var t=function(e){if(!e||!Object(o.l)(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((function(e,t){for(var n=d(t),r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];e[o]=n[o]}return e}),{});return d(e)}(e);if(t){var n=Object.entries(t).reduce((function(e,t){var n=Object(r.a)(t,2),i=n[0],o=n[1];i.match(c)&&(e[i.slice("sentry-".length)]=o);return e}),{});return Object.keys(n).length>0?n:void 0}}function u(e){if(e)return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce((function(e,t,n){var o=Object(r.a)(t,2),s=o[0],c=o[1],l="".concat(encodeURIComponent(s),"=").concat(encodeURIComponent(c)),u=0===n?l:"".concat(e,",").concat(l);return u.length>8192?(i.a&&a.c.warn("Not adding key: ".concat(s," with val: ").concat(c," to baggage header due to exceeding baggage size limits.")),e):u}),"")}(Object.entries(e).reduce((function(e,t){var n=Object(r.a)(t,2),i=n[0],o=n[1];return o&&(e["".concat("sentry-").concat(i)]=o),e}),{}))}function d(e){return e.split(",").map((function(e){return e.split("=").map((function(e){return decodeURIComponent(e.trim())}))})).reduce((function(e,t){var n=Object(r.a)(t,2),i=n[0],o=n[1];return e[i]=o,e}),{})}},,,,,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,,,,,,function(e,t,n){e.exports={content_box:"videoImageContainer_content_box__1rbss",video_box:"videoImageContainer_video_box__1xgeJ",image_box:"videoImageContainer_image_box__uzyto",footer_box:"videoImageContainer_footer_box__3UY1c",banner_box:"videoImageContainer_banner_box__3iqXM",swiper_slide:"videoImageContainer_swiper_slide__3fSpR",play_btn:"videoImageContainer_play_btn__3QceV",swiper_active:"videoImageContainer_swiper_active__2WoWk",swiper_video:"videoImageContainer_swiper_video__2fxL-",is_footer_box:"videoImageContainer_is_footer_box__11PuN","bottom-btn":"videoImageContainer_bottom-btn__3hX6i",btnChange:"videoImageContainer_btnChange__3lTkV",fingerMove:"videoImageContainer_fingerMove__2kcR8",roundChange:"videoImageContainer_roundChange__3voVD"}},,,,,,function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case d:case h:case a:case c:case s:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case v:case y:case l:return e;default:return t}}case o:return t}}}function T(e){return S(e)===h}t.AsyncMode=d,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=i,t.ForwardRef=f,t.Fragment=a,t.Lazy=v,t.Memo=y,t.Portal=o,t.Profiler=c,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return T(e)||S(e)===d},t.isConcurrentMode=T,t.isContextConsumer=function(e){return S(e)===u},t.isContextProvider=function(e){return S(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return S(e)===f},t.isFragment=function(e){return S(e)===a},t.isLazy=function(e){return S(e)===v},t.isMemo=function(e){return S(e)===y},t.isPortal=function(e){return S(e)===o},t.isProfiler=function(e){return S(e)===c},t.isStrictMode=function(e){return S(e)===s},t.isSuspense=function(e){return S(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===c||e===s||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===l||e.$$typeof===u||e.$$typeof===f||e.$$typeof===_||e.$$typeof===b||e.$$typeof===E||e.$$typeof===m)},t.typeOf=S},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o}));var r=n(24),i=n(16).a;function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"<unknown>";try{for(var n,r=e,i=5,o=[],s=0,c=0,l=" > ",u=l.length,d=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||80;r&&s++<i&&!("html"===(n=a(r,d))||s>1&&c+o.length*u+n.length>=h);)o.push(n),c+=n.length,r=r.parentNode;return o.reverse().join(l)}catch(f){return"<unknown>"}}function a(e,t){var n,o,a,s,c,l=e,u=[];if(!l||!l.tagName)return"";if(i.HTMLElement&&l instanceof HTMLElement&&l.dataset){if(l.dataset.sentryComponent)return l.dataset.sentryComponent;if(l.dataset.sentryElement)return l.dataset.sentryElement}u.push(l.tagName.toLowerCase());var d=t&&t.length?t.filter((function(e){return l.getAttribute(e)})).map((function(e){return[e,l.getAttribute(e)]})):null;if(d&&d.length)d.forEach((function(e){u.push("[".concat(e[0],'="').concat(e[1],'"]'))}));else if(l.id&&u.push("#".concat(l.id)),(n=l.className)&&Object(r.l)(n))for(o=n.split(/\s+/),c=0;c<o.length;c++)u.push(".".concat(o[c]));var h=["aria-label","type","name","title","alt"];for(c=0;c<h.length;c++)a=h[c],(s=l.getAttribute(a))&&u.push("[".concat(a,'="').concat(s,'"]'));return u.join("")}function s(){try{return i.document.location.href}catch(e){return""}}function c(e){return i.document&&i.document.querySelector?i.document.querySelector(e):null}function l(e){if(!i.HTMLElement)return null;for(var t=e,n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(7),i=n(24),o=n(326),a=n(44),s=n(291);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return u("",e,t,n)}catch(r){return{ERROR:"**non-serializable** (".concat(r,")")}}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400,r=c(e,t);return h(r)>n?l(e,t-1,n):r}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(o.a)(),c=Object(r.a)(s,2),l=c[0],h=c[1];if(null==t||["number","boolean","string"].includes(typeof t)&&!Number.isNaN(t))return t;var f=d(e,t);if(!f.startsWith("[object "))return f;if(t.__sentry_skip_normalization__)return t;var p="number"===typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===p)return f.replace("object ","");if(l(t))return"[Circular ~]";var g=t;if(g&&"function"===typeof g.toJSON)try{var y=g.toJSON();return u("",y,p-1,i,s)}catch(S){}var v=Array.isArray(t)?[]:{},m=0,_=Object(a.b)(t);for(var b in _)if(Object.prototype.hasOwnProperty.call(_,b)){if(m>=i){v[b]="[MaxProperties ~]";break}var E=_[b];v[b]=u(b,E,p-1,i,s),m++}return h(t),v}function d(t,n){try{if("domain"===t&&n&&"object"===typeof n&&n._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if("undefined"!==typeof e&&n===e)return"[Global]";if("undefined"!==typeof window&&n===window)return"[Window]";if("undefined"!==typeof document&&n===document)return"[Document]";if(Object(i.o)(n))return"[VueViewModel]";if(Object(i.m)(n))return"[SyntheticEvent]";if("number"===typeof n&&n!==n)return"[NaN]";if("function"===typeof n)return"[Function: ".concat(Object(s.c)(n),"]");if("symbol"===typeof n)return"[".concat(String(n),"]");if("bigint"===typeof n)return"[BigInt: ".concat(String(n),"]");var r=function(e){var t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(n);return/^HTML(\w*)Element$/.test(r)?"[HTMLElement: ".concat(r,"]"):"[object ".concat(r,"]")}catch(o){return"**non-serializable** (".concat(o,")")}}function h(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}}).call(this,n(20))},function(e,t,n){"use strict";function r(){var e="function"===typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(var r=0;r<t.length;r++){if(t[r]===n)return!0}return t.push(n),!1},function(n){if(e)t.delete(n);else for(var r=0;r<t.length;r++)if(t[r]===n){t.splice(r,1);break}}]}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(51);function i(){return{traceId:Object(r.f)(),spanId:Object(r.f)().substring(16)}}},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return ke})),n.d(t,"b",(function(){return Ae}));var r=n(7),i=n(132),o=n(0),a=n.n(o),s=n(5),c=n(17),l=n(25);function u(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:u(t[n])&&u(e[n])&&Object.keys(t[n]).length>0&&d(e[n],t[n])}))}var h={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function f(){var e="undefined"!==typeof document?document:{};return d(e,h),e}var p={document:h,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function g(){var e="undefined"!==typeof window?window:{};return d(e,p),e}var y=n(96),v=n(58),m=n(64),_=n(65),b=n(241);var E=function(e){Object(m.a)(n,e);var t=Object(_.a)(n);function n(e){var r;return Object(c.a)(this,n),"number"===typeof e?r=t.call(this,e):(r=t.call.apply(t,[this].concat(Object(s.a)(e||[]))),function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}(Object(v.a)(r))),Object(y.a)(r)}return n}(Object(b.a)(Array));function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,Object(s.a)(S(e))):t.push(e)})),t}function T(e,t){return Array.prototype.filter.call(e,t)}function w(e,t){var n=g(),r=f(),i=[];if(!t&&e instanceof E)return e;if(!e)return new E(i);if("string"===typeof e){var o=e.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var a="div";0===o.indexOf("<li")&&(a="ul"),0===o.indexOf("<tr")&&(a="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(a="tr"),0===o.indexOf("<tbody")&&(a="table"),0===o.indexOf("<option")&&(a="select");var s=r.createElement(a);s.innerHTML=o;for(var c=0;c<s.childNodes.length;c+=1)i.push(s.childNodes[c])}else i=function(e,t){if("string"!==typeof e)return[e];for(var n=[],r=t.querySelectorAll(e),i=0;i<r.length;i+=1)n.push(r[i]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof E)return e;i=e}return new E(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(i))}w.fn=E.prototype;var O="resize scroll".split(" ");function k(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("undefined"===typeof n[0]){for(var i=0;i<this.length;i+=1)O.indexOf(e)<0&&(e in this[i]?this[i][e]():w(this[i]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}k("click"),k("blur"),k("focus"),k("focusin"),k("focusout"),k("keyup"),k("keydown"),k("keypress"),k("submit"),k("change"),k("mousedown"),k("mousemove"),k("mouseup"),k("mouseenter"),k("mouseleave"),k("mouseout"),k("mouseover"),k("touchstart"),k("touchend"),k("touchmove"),k("resize"),k("scroll");var C={addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=S(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,Object(s.a)(r))})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=S(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,Object(s.a)(r))})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=S(t.map((function(e){return e.split(" ")})));return T(this,(function(e){return r.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=S(t.map((function(e){return e.split(" ")})));this.forEach((function(e){r.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"===typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!==typeof e?"".concat(e,"ms"):e;return this},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];function s(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),w(t).is(i))o.apply(t,n);else for(var r=w(t).parents(),a=0;a<r.length;a+=1)w(r[a]).is(i)&&o.apply(r[a],n)}}function c(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),o.apply(this,t)}"function"===typeof t[1]&&(r=t[0],o=t[1],a=t[2],i=void 0),a||(a=!1);for(var l,u=r.split(" "),d=0;d<this.length;d+=1){var h=this[d];if(i)for(l=0;l<u.length;l+=1){var f=u[l];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[f]||(h.dom7LiveListeners[f]=[]),h.dom7LiveListeners[f].push({listener:o,proxyListener:s}),h.addEventListener(f,s,a)}else for(l=0;l<u.length;l+=1){var p=u[l];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[p]||(h.dom7Listeners[p]=[]),h.dom7Listeners[p].push({listener:o,proxyListener:c}),h.addEventListener(p,c,a)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];"function"===typeof t[1]&&(r=t[0],o=t[1],a=t[2],i=void 0),a||(a=!1);for(var s=r.split(" "),c=0;c<s.length;c+=1)for(var l=s[c],u=0;u<this.length;u+=1){var d=this[u],h=void 0;if(!i&&d.dom7Listeners?h=d.dom7Listeners[l]:i&&d.dom7LiveListeners&&(h=d.dom7LiveListeners[l]),h&&h.length)for(var f=h.length-1;f>=0;f-=1){var p=h[f];o&&p.listener===o||o&&p.listener&&p.listener.dom7proxy&&p.listener.dom7proxy===o?(d.removeEventListener(l,p.proxyListener,a),h.splice(f,1)):o||(d.removeEventListener(l,p.proxyListener,a),h.splice(f,1))}}return this},trigger:function(){for(var e=g(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=n[0].split(" "),o=n[1],a=0;a<i.length;a+=1)for(var s=i[a],c=0;c<this.length;c+=1){var l=this[c];if(e.CustomEvent){var u=new e.CustomEvent(s,{detail:o,bubbles:!0,cancelable:!0});l.dom7EventData=n.filter((function(e,t){return t>0})),l.dispatchEvent(u),l.dom7EventData=[],delete l.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=g();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=g(),t=f(),n=this[0],r=n.getBoundingClientRect(),i=t.body,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,c=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-o,left:r.left+c-a}}return null},css:function(e,t){var n,r=g();if(1===arguments.length){if("string"!==typeof e){for(n=0;n<this.length;n+=1)for(var i in e)this[n].style[i]=e[i];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"===typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this},html:function(e){if("undefined"===typeof e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if("undefined"===typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,n,r=g(),i=f(),o=this[0];if(!o||"undefined"===typeof e)return!1;if("string"===typeof e){if(o.matches)return o.matches(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);for(t=w(e),n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}if(e===i)return o===i;if(e===r)return o===r;if(e.nodeType||e instanceof E){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if("undefined"===typeof e)return this;var t=this.length;if(e>t-1)return w([]);if(e<0){var n=t+e;return w(n<0?[]:[this[n]])}return w([this[e]])},append:function(){for(var e,t=f(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if("string"===typeof e){var i=t.createElement("div");for(i.innerHTML=e;i.firstChild;)this[r].appendChild(i.firstChild)}else if(e instanceof E)for(var o=0;o<e.length;o+=1)this[r].appendChild(e[o]);else this[r].appendChild(e)}return this},prepend:function(e){var t,n,r=f();for(t=0;t<this.length;t+=1)if("string"===typeof e){var i=r.createElement("div");for(i.innerHTML=e,n=i.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(i.childNodes[n],this[t].childNodes[0])}else if(e instanceof E)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&w(this[0].nextElementSibling).is(e)?w([this[0].nextElementSibling]):w([]):this[0].nextElementSibling?w([this[0].nextElementSibling]):w([]):w([])},nextAll:function(e){var t=[],n=this[0];if(!n)return w([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?w(r).is(e)&&t.push(r):t.push(r),n=r}return w(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&w(t.previousElementSibling).is(e)?w([t.previousElementSibling]):w([]):t.previousElementSibling?w([t.previousElementSibling]):w([])}return w([])},prevAll:function(e){var t=[],n=this[0];if(!n)return w([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?w(r).is(e)&&t.push(r):t.push(r),n=r}return w(t)},parent:function(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?w(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return w(t)},parents:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)e?w(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return w(t)},closest:function(e){var t=this;return"undefined"===typeof e?w([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),i=0;i<r.length;i+=1)t.push(r[i]);return w(t)},children:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].children,i=0;i<r.length;i+=1)e&&!w(r[i]).is(e)||t.push(r[i]);return w(t)},filter:function(e){return w(T(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(C).forEach((function(e){Object.defineProperty(w.fn,e,{value:C[e],writable:!0})}));var $,A,P,I=w,x=n(14);function R(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(n){}try{delete t[e]}catch(n){}}))}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return setTimeout(e,t)}function L(){return Date.now()}function M(e){var t,n=g();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}function N(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",o=g(),a=M(e);return o.WebKitCSSMatrix?((n=a.transform||a.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new o.WebKitCSSMatrix("none"===n?"":n)):t=(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(n=o.WebKitCSSMatrix?r.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===i&&(n=o.WebKitCSSMatrix?r.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5])),n||0}function j(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function B(e){return"undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function U(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],n=1;n<arguments.length;n+=1){var r=n<0||arguments.length<=n?void 0:arguments[n];if(void 0!==r&&null!==r&&!B(r))for(var i=Object.keys(Object(r)).filter((function(e){return t.indexOf(e)<0})),o=0,a=i.length;o<a;o+=1){var s=i[o],c=Object.getOwnPropertyDescriptor(r,s);void 0!==c&&c.enumerable&&(j(e[s])&&j(r[s])?r[s].__swiper__?e[s]=r[s]:U(e[s],r[s]):!j(e[s])&&j(r[s])?(e[s]={},r[s].__swiper__?e[s]=r[s]:U(e[s],r[s])):e[s]=r[s])}}return e}function G(e,t,n){e.style.setProperty(t,n)}function F(e){var t,n=e.swiper,r=e.targetPosition,i=e.side,o=g(),a=-n.translate,s=null,c=n.params.speed;n.wrapperEl.style.scrollSnapType="none",o.cancelAnimationFrame(n.cssModeFrameID);var l=r>a?"next":"prev",u=function(e,t){return"next"===l&&e>=t||"prev"===l&&e<=t};!function e(){t=(new Date).getTime(),null===s&&(s=t);var l=Math.max(Math.min((t-s)/c,1),0),d=.5-Math.cos(l*Math.PI)/2,h=a+d*(r-a);if(u(h,r)&&(h=r),n.wrapperEl.scrollTo(Object(x.a)({},i,h)),u(h,r))return n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout((function(){n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo(Object(x.a)({},i,h))})),void o.cancelAnimationFrame(n.cssModeFrameID);n.cssModeFrameID=o.requestAnimationFrame(e)}()}function V(){return $||($=function(){var e=g(),t=f();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(r){}return t}(),gestures:"ongesturestart"in e}}()),$}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userAgent,n=V(),r=g(),i=r.navigator.platform,o=t||r.navigator.userAgent,a={ios:!1,android:!1},s=r.screen.width,c=r.screen.height,l=o.match(/(Android);?[\s\/]+([\d.]+)?/),u=o.match(/(iPad).*OS\s([\d_]+)/),d=o.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===i,p="MacIntel"===i,y=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&p&&n.touch&&y.indexOf("".concat(s,"x").concat(c))>=0&&((u=o.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),p=!1),l&&!f&&(a.os="android",a.android=!0),(u||h||d)&&(a.os="ios",a.ios=!0),a}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A||(A=H(e)),A}function K(){return P||(P=function(){var e=g();return{isSafari:function(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),P}function W(e){var t=e.swiper,n=e.runCallbacks,r=e.direction,i=e.step,o=t.activeIndex,a=t.previousIndex,s=r;if(s||(s=o>a?"next":o<a?"prev":"reset"),t.emit("transition".concat(i)),n&&o!==a){if("reset"===s)return void t.emit("slideResetTransition".concat(i));t.emit("slideChangeTransition".concat(i)),"next"===s?t.emit("slideNextTransition".concat(i)):t.emit("slidePrevTransition".concat(i))}}function Y(e){var t=f(),n=g(),r=this.touchEventsData,i=this.params,o=this.touches;if(this.enabled&&(!this.animating||!i.preventInteractionOnTransition)){!this.animating&&i.cssMode&&i.loop&&this.loopFix();var a=e;a.originalEvent&&(a=a.originalEvent);var s=I(a.target);if(("wrapper"!==i.touchEventsTarget||s.closest(this.wrapperEl).length)&&(r.isTouchEvent="touchstart"===a.type,(r.isTouchEvent||!("which"in a)||3!==a.which)&&!(!r.isTouchEvent&&"button"in a&&a.button>0)&&(!r.isTouched||!r.isMoved))){var c=!!i.noSwipingClass&&""!==i.noSwipingClass,l=e.composedPath?e.composedPath():e.path;c&&a.target&&a.target.shadowRoot&&l&&(s=I(l[0]));var u=i.noSwipingSelector?i.noSwipingSelector:".".concat(i.noSwipingClass),d=!(!a.target||!a.target.shadowRoot);if(i.noSwiping&&(d?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;function n(t){if(!t||t===f()||t===g())return null;t.assignedSlot&&(t=t.assignedSlot);var r=t.closest(e);return r||t.getRootNode?r||n(t.getRootNode().host):null}return n(t)}(u,s[0]):s.closest(u)[0]))this.allowClick=!0;else if(!i.swipeHandler||s.closest(i.swipeHandler)[0]){o.currentX="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,o.currentY="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY;var h=o.currentX,p=o.currentY,y=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,v=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(y&&(h<=v||h>=n.innerWidth-v)){if("prevent"!==y)return;e.preventDefault()}if(Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=h,o.startY=p,r.touchStartTime=L(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,i.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==a.type){var m=!0;s.is(r.focusableElements)&&(m=!1,"SELECT"===s[0].nodeName&&(r.isTouched=!1)),t.activeElement&&I(t.activeElement).is(r.focusableElements)&&t.activeElement!==s[0]&&t.activeElement.blur();var _=m&&this.allowTouchMove&&i.touchStartPreventDefault;!i.touchStartForcePreventDefault&&!_||s[0].isContentEditable||a.preventDefault()}this.params.freeMode&&this.params.freeMode.enabled&&this.freeMode&&this.animating&&!i.cssMode&&this.freeMode.onTouchStart(),this.emit("touchStart",a)}}}}function q(e){var t=f(),n=this.touchEventsData,r=this.params,i=this.touches,o=this.rtlTranslate;if(this.enabled){var a=e;if(a.originalEvent&&(a=a.originalEvent),n.isTouched){if(!n.isTouchEvent||"touchmove"===a.type){var s="touchmove"===a.type&&a.targetTouches&&(a.targetTouches[0]||a.changedTouches[0]),c="touchmove"===a.type?s.pageX:a.pageX,l="touchmove"===a.type?s.pageY:a.pageY;if(a.preventedByNestedSwiper)return i.startX=c,void(i.startY=l);if(!this.allowTouchMove)return I(a.target).is(n.focusableElements)||(this.allowClick=!1),void(n.isTouched&&(Object.assign(i,{startX:c,startY:l,currentX:c,currentY:l}),n.touchStartTime=L()));if(n.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(this.isVertical()){if(l<i.startY&&this.translate<=this.maxTranslate()||l>i.startY&&this.translate>=this.minTranslate())return n.isTouched=!1,void(n.isMoved=!1)}else if(c<i.startX&&this.translate<=this.maxTranslate()||c>i.startX&&this.translate>=this.minTranslate())return;if(n.isTouchEvent&&t.activeElement&&a.target===t.activeElement&&I(a.target).is(n.focusableElements))return n.isMoved=!0,void(this.allowClick=!1);if(n.allowTouchCallbacks&&this.emit("touchMove",a),!(a.targetTouches&&a.targetTouches.length>1)){i.currentX=c,i.currentY=l;var u=i.currentX-i.startX,d=i.currentY-i.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(u,2)+Math.pow(d,2))<this.params.threshold)){var h;if("undefined"===typeof n.isScrolling)this.isHorizontal()&&i.currentY===i.startY||this.isVertical()&&i.currentX===i.startX?n.isScrolling=!1:u*u+d*d>=25&&(h=180*Math.atan2(Math.abs(d),Math.abs(u))/Math.PI,n.isScrolling=this.isHorizontal()?h>r.touchAngle:90-h>r.touchAngle);if(n.isScrolling&&this.emit("touchMoveOpposite",a),"undefined"===typeof n.startMoving&&(i.currentX===i.startX&&i.currentY===i.startY||(n.startMoving=!0)),n.isScrolling)n.isTouched=!1;else if(n.startMoving){this.allowClick=!1,!r.cssMode&&a.cancelable&&a.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&a.stopPropagation(),n.isMoved||(r.loop&&!r.cssMode&&this.loopFix(),n.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,!r.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",a)),this.emit("sliderMove",a),n.isMoved=!0;var p=this.isHorizontal()?u:d;i.diff=p,p*=r.touchRatio,o&&(p=-p),this.swipeDirection=p>0?"prev":"next",n.currentTranslate=p+n.startTranslate;var g=!0,y=r.resistanceRatio;if(r.touchReleaseOnEdges&&(y=0),p>0&&n.currentTranslate>this.minTranslate()?(g=!1,r.resistance&&(n.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+n.startTranslate+p,y))):p<0&&n.currentTranslate<this.maxTranslate()&&(g=!1,r.resistance&&(n.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-n.startTranslate-p,y))),g&&(a.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),this.allowSlidePrev||this.allowSlideNext||(n.currentTranslate=n.startTranslate),r.threshold>0){if(!(Math.abs(p)>r.threshold||n.allowThresholdMove))return void(n.currentTranslate=n.startTranslate);if(!n.allowThresholdMove)return n.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,n.currentTranslate=n.startTranslate,void(i.diff=this.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&this.freeMode||r.watchSlidesProgress)&&(this.updateActiveIndex(),this.updateSlidesClasses()),this.params.freeMode&&r.freeMode.enabled&&this.freeMode&&this.freeMode.onTouchMove(),this.updateProgress(n.currentTranslate),this.setTranslate(n.currentTranslate))}}}}}else n.startMoving&&n.isScrolling&&this.emit("touchMoveOpposite",a)}}function X(e){var t=this,n=t.touchEventsData,r=t.params,i=t.touches,o=t.rtlTranslate,a=t.slidesGrid;if(t.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var c,l=L(),u=l-n.touchStartTime;if(t.allowClick){var d=s.path||s.composedPath&&s.composedPath();t.updateClickedSlide(d&&d[0]||s.target),t.emit("tap click",s),u<300&&l-n.lastClickTime<300&&t.emit("doubleTap doubleClick",s)}if(n.lastClickTime=L(),D((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,c=r.followFinger?o?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(t.params.freeMode&&r.freeMode.enabled)t.freeMode.onTouchEnd({currentPos:c});else{for(var h=0,f=t.slidesSizesGrid[0],p=0;p<a.length;p+=p<r.slidesPerGroupSkip?1:r.slidesPerGroup){var g=p<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;"undefined"!==typeof a[p+g]?c>=a[p]&&c<a[p+g]&&(h=p,f=a[p+g]-a[p]):c>=a[p]&&(h=p,f=a[a.length-1]-a[a.length-2])}var y=null,v=null;r.rewind&&(t.isBeginning?v=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(y=0));var m=(c-a[h])/f,_=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(u>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(m>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?y:h+_):t.slideTo(h)),"prev"===t.swipeDirection&&(m>1-r.longSwipesRatio?t.slideTo(h+_):null!==v&&m<0&&Math.abs(m)>r.longSwipesRatio?t.slideTo(v):t.slideTo(h))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(s.target===t.navigation.nextEl||s.target===t.navigation.prevEl)?s.target===t.navigation.nextEl?t.slideTo(h+_):t.slideTo(h):("next"===t.swipeDirection&&t.slideTo(null!==y?y:h+_),"prev"===t.swipeDirection&&t.slideTo(null!==v?v:h))}}}}function J(){var e=this.params,t=this.el;if(!t||0!==t.offsetWidth){e.breakpoints&&this.setBreakpoint();var n=this.allowSlideNext,r=this.allowSlidePrev,i=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&this.isEnd&&!this.isBeginning&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=r,this.allowSlideNext=n,this.params.watchOverflow&&i!==this.snapGrid&&this.checkOverflow()}}function Z(e){this.enabled&&(this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Q(){var e=this.wrapperEl,t=this.rtlTranslate;if(this.enabled){this.previousTranslate=this.translate,this.isHorizontal()?this.translate=-e.scrollLeft:this.translate=-e.scrollTop,0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var n=this.maxTranslate()-this.minTranslate();(0===n?0:(this.translate-this.minTranslate())/n)!==this.progress&&this.updateProgress(t?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}}var ee=!1;function te(){}var ne=function(e,t){var n=f(),r=e.params,i=e.touchEvents,o=e.el,a=e.wrapperEl,s=e.device,c=e.support,l=!!r.nested,u="on"===t?"addEventListener":"removeEventListener",d=t;if(c.touch){var h=!("touchstart"!==i.start||!c.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};o[u](i.start,e.onTouchStart,h),o[u](i.move,e.onTouchMove,c.passiveListener?{passive:!1,capture:l}:l),o[u](i.end,e.onTouchEnd,h),i.cancel&&o[u](i.cancel,e.onTouchEnd,h)}else o[u](i.start,e.onTouchStart,!1),n[u](i.move,e.onTouchMove,l),n[u](i.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&o[u]("click",e.onClick,!0),r.cssMode&&a[u]("scroll",e.onScroll),r.updateOnWindowResize?e[d](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",J,!0):e[d]("observerUpdate",J,!0)};var re=function(e,t){return e.grid&&t.grid&&t.grid.rows>1};var ie={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function oe(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.keys(n)[0],i=n[r];"object"===typeof i&&null!==i?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in i?(!0===e[r]&&(e[r]={enabled:!0}),"object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),U(t,n)):U(t,n)):U(t,n)}}var ae={eventsEmitter:{on:function(e,t,n){var r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;var i=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once:function(e,t,n){var r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t.apply(r,o)}return i.__emitterProxy=t,r.on(e,i,n)},onAny:function(e,t){if(!this.eventsListeners||this.destroyed)return this;if("function"!==typeof e)return this;var n=t?"unshift":"push";return this.eventsAnyListeners.indexOf(e)<0&&this.eventsAnyListeners[n](e),this},offAny:function(e){if(!this.eventsListeners||this.destroyed)return this;if(!this.eventsAnyListeners)return this;var t=this.eventsAnyListeners.indexOf(e);return t>=0&&this.eventsAnyListeners.splice(t,1),this},off:function(e,t){var n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((function(e){"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,i){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit:function(){var e,t,n,r=this;if(!r.eventsListeners||r.destroyed)return r;if(!r.eventsListeners)return r;for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];"string"===typeof o[0]||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),n=r):(e=o[0].events,t=o[0].data,n=o[0].context||r),t.unshift(n);var c=Array.isArray(e)?e:e.split(" ");return c.forEach((function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach((function(r){r.apply(n,[e].concat(Object(s.a)(t)))})),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),r}},update:{updateSize:function(){var e,t,n=this.$el;e="undefined"!==typeof this.params.width&&null!==this.params.width?this.params.width:n[0].clientWidth,t="undefined"!==typeof this.params.height&&null!==this.params.height?this.params.height:n[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(n.css("padding-left")||0,10)-parseInt(n.css("padding-right")||0,10),t=t-parseInt(n.css("padding-top")||0,10)-parseInt(n.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var r=e.params,i=e.$wrapperEl,o=e.size,a=e.rtlTranslate,s=e.wrongRTL,c=e.virtual&&r.virtual.enabled,l=c?e.virtual.slides.length:e.slides.length,u=i.children(".".concat(e.params.slideClass)),d=c?e.virtual.slides.length:u.length,h=[],f=[],p=[],g=r.slidesOffsetBefore;"function"===typeof g&&(g=r.slidesOffsetBefore.call(e));var y=r.slidesOffsetAfter;"function"===typeof y&&(y=r.slidesOffsetAfter.call(e));var v=e.snapGrid.length,m=e.slidesGrid.length,_=r.spaceBetween,b=-g,E=0,S=0;if("undefined"!==typeof o){"string"===typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*o),e.virtualSize=-_,a?u.css({marginLeft:"",marginBottom:"",marginTop:""}):u.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(G(e.wrapperEl,"--swiper-centered-offset-before",""),G(e.wrapperEl,"--swiper-centered-offset-after",""));var T,w=r.grid&&r.grid.rows>1&&e.grid;w&&e.grid.initSlides(d);for(var O="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((function(e){return"undefined"!==typeof r.breakpoints[e].slidesPerView})).length>0,k=0;k<d;k+=1){T=0;var C=u.eq(k);if(w&&e.grid.updateSlide(k,C,d,t),"none"!==C.css("display")){if("auto"===r.slidesPerView){O&&(u[k].style[t("width")]="");var $=getComputedStyle(C[0]),A=C[0].style.transform,P=C[0].style.webkitTransform;if(A&&(C[0].style.transform="none"),P&&(C[0].style.webkitTransform="none"),r.roundLengths)T=e.isHorizontal()?C.outerWidth(!0):C.outerHeight(!0);else{var I=n($,"width"),R=n($,"padding-left"),D=n($,"padding-right"),L=n($,"margin-left"),M=n($,"margin-right"),N=$.getPropertyValue("box-sizing");if(N&&"border-box"===N)T=I+L+M;else{var j=C[0],B=j.clientWidth;T=I+R+D+L+M+(j.offsetWidth-B)}}A&&(C[0].style.transform=A),P&&(C[0].style.webkitTransform=P),r.roundLengths&&(T=Math.floor(T))}else T=(o-(r.slidesPerView-1)*_)/r.slidesPerView,r.roundLengths&&(T=Math.floor(T)),u[k]&&(u[k].style[t("width")]="".concat(T,"px"));u[k]&&(u[k].swiperSlideSize=T),p.push(T),r.centeredSlides?(b=b+T/2+E/2+_,0===E&&0!==k&&(b=b-o/2-_),0===k&&(b=b-o/2-_),Math.abs(b)<.001&&(b=0),r.roundLengths&&(b=Math.floor(b)),S%r.slidesPerGroup===0&&h.push(b),f.push(b)):(r.roundLengths&&(b=Math.floor(b)),(S-Math.min(e.params.slidesPerGroupSkip,S))%e.params.slidesPerGroup===0&&h.push(b),f.push(b),b=b+T+_),e.virtualSize+=T+_,E=T,S+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+y,a&&s&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:"".concat(e.virtualSize+r.spaceBetween,"px")}),r.setWrapperSize&&i.css(Object(x.a)({},t("width"),"".concat(e.virtualSize+r.spaceBetween,"px"))),w&&e.grid.updateWrapperSize(T,h,t),!r.centeredSlides){for(var U=[],F=0;F<h.length;F+=1){var V=h[F];r.roundLengths&&(V=Math.floor(V)),h[F]<=e.virtualSize-o&&U.push(V)}h=U,Math.floor(e.virtualSize-o)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-o)}if(0===h.length&&(h=[0]),0!==r.spaceBetween){var H=e.isHorizontal()&&a?"marginLeft":t("marginRight");u.filter((function(e,t){return!r.cssMode||t!==u.length-1})).css(Object(x.a)({},H,"".concat(_,"px")))}if(r.centeredSlides&&r.centeredSlidesBounds){var z=0;p.forEach((function(e){z+=e+(r.spaceBetween?r.spaceBetween:0)}));var K=(z-=r.spaceBetween)-o;h=h.map((function(e){return e<0?-g:e>K?K+y:e}))}if(r.centerInsufficientSlides){var W=0;if(p.forEach((function(e){W+=e+(r.spaceBetween?r.spaceBetween:0)})),(W-=r.spaceBetween)<o){var Y=(o-W)/2;h.forEach((function(e,t){h[t]=e-Y})),f.forEach((function(e,t){f[t]=e+Y}))}}if(Object.assign(e,{slides:u,snapGrid:h,slidesGrid:f,slidesSizesGrid:p}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){G(e.wrapperEl,"--swiper-centered-offset-before","".concat(-h[0],"px")),G(e.wrapperEl,"--swiper-centered-offset-after","".concat(e.size/2-p[p.length-1]/2,"px"));var q=-e.snapGrid[0],X=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((function(e){return e+q})),e.slidesGrid=e.slidesGrid.map((function(e){return e+X}))}if(d!==l&&e.emit("slidesLengthChange"),h.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==m&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!c&&!r.cssMode&&("slide"===r.effect||"fade"===r.effect)){var J="".concat(r.containerModifierClass,"backface-hidden"),Z=e.$el.hasClass(J);d<=r.maxBackfaceHiddenSlides?Z||e.$el.addClass(J):Z&&e.$el.removeClass(J)}}},updateAutoHeight:function(e){var t,n=this,r=[],i=n.virtual&&n.params.virtual.enabled,o=0;"number"===typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var a=function(e){return i?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)(n.visibleSlides||I([])).each((function(e){r.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!i)break;r.push(a(s))}else r.push(a(n.activeIndex));for(t=0;t<r.length;t+=1)if("undefined"!==typeof r[t]){var c=r[t].offsetHeight;o=c>o?c:o}(o||0===o)&&n.$wrapperEl.css("height","".concat(o,"px"))},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this&&this.translate||0,t=this,n=t.params,r=t.slides,i=t.rtlTranslate,o=t.snapGrid;if(0!==r.length){"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();var a=-e;i&&(a=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<r.length;s+=1){var c=r[s],l=c.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);var u=(a+(n.centeredSlides?t.minTranslate():0)-l)/(c.swiperSlideSize+n.spaceBetween),d=(a-o[0]+(n.centeredSlides?t.minTranslate():0)-l)/(c.swiperSlideSize+n.spaceBetween),h=-(a-l),f=h+t.slidesSizesGrid[s],p=h>=0&&h<t.size-1||f>1&&f<=t.size||h<=0&&f>=t.size;p&&(t.visibleSlides.push(c),t.visibleSlidesIndexes.push(s),r.eq(s).addClass(n.slideVisibleClass)),c.progress=i?-u:u,c.originalProgress=i?-d:d}t.visibleSlides=I(t.visibleSlides)}},updateProgress:function(e){if("undefined"===typeof e){var t=this.rtlTranslate?-1:1;e=this&&this.translate&&this.translate*t||0}var n=this.params,r=this.maxTranslate()-this.minTranslate(),i=this.progress,o=this.isBeginning,a=this.isEnd,s=o,c=a;0===r?(i=0,o=!0,a=!0):(o=(i=(e-this.minTranslate())/r)<=0,a=i>=1),Object.assign(this,{progress:i,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&this.updateSlidesProgress(e),o&&!s&&this.emit("reachBeginning toEdge"),a&&!c&&this.emit("reachEnd toEdge"),(s&&!o||c&&!a)&&this.emit("fromEdge"),this.emit("progress",i)},updateSlidesClasses:function(){var e,t=this.slides,n=this.params,r=this.$wrapperEl,i=this.activeIndex,o=this.realIndex,a=this.virtual&&n.virtual.enabled;t.removeClass("".concat(n.slideActiveClass," ").concat(n.slideNextClass," ").concat(n.slidePrevClass," ").concat(n.slideDuplicateActiveClass," ").concat(n.slideDuplicateNextClass," ").concat(n.slideDuplicatePrevClass)),(e=a?this.$wrapperEl.find(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(i,'"]')):t.eq(i)).addClass(n.slideActiveClass),n.loop&&(e.hasClass(n.slideDuplicateClass)?r.children(".".concat(n.slideClass,":not(.").concat(n.slideDuplicateClass,')[data-swiper-slide-index="').concat(o,'"]')).addClass(n.slideDuplicateActiveClass):r.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,'[data-swiper-slide-index="').concat(o,'"]')).addClass(n.slideDuplicateActiveClass));var s=e.nextAll(".".concat(n.slideClass)).eq(0).addClass(n.slideNextClass);n.loop&&0===s.length&&(s=t.eq(0)).addClass(n.slideNextClass);var c=e.prevAll(".".concat(n.slideClass)).eq(0).addClass(n.slidePrevClass);n.loop&&0===c.length&&(c=t.eq(-1)).addClass(n.slidePrevClass),n.loop&&(s.hasClass(n.slideDuplicateClass)?r.children(".".concat(n.slideClass,":not(.").concat(n.slideDuplicateClass,')[data-swiper-slide-index="').concat(s.attr("data-swiper-slide-index"),'"]')).addClass(n.slideDuplicateNextClass):r.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,'[data-swiper-slide-index="').concat(s.attr("data-swiper-slide-index"),'"]')).addClass(n.slideDuplicateNextClass),c.hasClass(n.slideDuplicateClass)?r.children(".".concat(n.slideClass,":not(.").concat(n.slideDuplicateClass,')[data-swiper-slide-index="').concat(c.attr("data-swiper-slide-index"),'"]')).addClass(n.slideDuplicatePrevClass):r.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,'[data-swiper-slide-index="').concat(c.attr("data-swiper-slide-index"),'"]')).addClass(n.slideDuplicatePrevClass)),this.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this.rtlTranslate?this.translate:-this.translate,r=this.slidesGrid,i=this.snapGrid,o=this.params,a=this.activeIndex,s=this.realIndex,c=this.snapIndex,l=e;if("undefined"===typeof l){for(var u=0;u<r.length;u+=1)"undefined"!==typeof r[u+1]?n>=r[u]&&n<r[u+1]-(r[u+1]-r[u])/2?l=u:n>=r[u]&&n<r[u+1]&&(l=u+1):n>=r[u]&&(l=u);o.normalizeSlideIndex&&(l<0||"undefined"===typeof l)&&(l=0)}if(i.indexOf(n)>=0)t=i.indexOf(n);else{var d=Math.min(o.slidesPerGroupSkip,l);t=d+Math.floor((l-d)/o.slidesPerGroup)}if(t>=i.length&&(t=i.length-1),l!==a){var h=parseInt(this.slides.eq(l).attr("data-swiper-slide-index")||l,10);Object.assign(this,{snapIndex:t,realIndex:h,previousIndex:a,activeIndex:l}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),s!==h&&this.emit("realIndexChange"),(this.initialized||this.params.runCallbacksOnInit)&&this.emit("slideChange")}else t!==c&&(this.snapIndex=t,this.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this.params,r=I(e).closest(".".concat(n.slideClass))[0],i=!1;if(r)for(var o=0;o<this.slides.length;o+=1)if(this.slides[o]===r){i=!0,t=o;break}if(!r||!i)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=r,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(I(r).attr("data-swiper-slide-index"),10):this.clickedIndex=t,n.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}},translate:{getTranslate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isHorizontal()?"x":"y",t=this,n=t.params,r=t.rtlTranslate,i=t.translate,o=t.$wrapperEl;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;var a=N(o[0],e);return r&&(a=-a),a||0},setTranslate:function(e,t){var n=this.rtlTranslate,r=this.params,i=this.$wrapperEl,o=this.wrapperEl,a=this.progress,s=0,c=0;this.isHorizontal()?s=n?-e:e:c=e,r.roundLengths&&(s=Math.floor(s),c=Math.floor(c)),r.cssMode?o[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-s:-c:r.virtualTranslate||i.transform("translate3d(".concat(s,"px, ").concat(c,"px, ").concat(0,"px)")),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?s:c;var l=this.maxTranslate()-this.minTranslate();(0===l?0:(e-this.minTranslate())/l)!==a&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,o=this,a=o.params,s=o.wrapperEl;if(o.animating&&a.preventInteractionOnTransition)return!1;var c,l=o.minTranslate(),u=o.maxTranslate();if(c=r&&e>l?l:r&&e<u?u:e,o.updateProgress(c),a.cssMode){var d=o.isHorizontal();if(0===t)s[d?"scrollLeft":"scrollTop"]=-c;else{var h;if(!o.support.smoothScroll)return F({swiper:o,targetPosition:-c,side:d?"left":"top"}),!0;s.scrollTo((h={},Object(x.a)(h,d?"left":"top",-c),Object(x.a)(h,"behavior","smooth"),h))}return!0}return 0===t?(o.setTransition(0),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",t,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){this.params.cssMode||this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,r=n.params;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),W({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,r=n.params;n.animating=!1,r.cssMode||(n.setTransition(0),W({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:{slideTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if("number"!==typeof e&&"string"!==typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. [".concat(typeof e,"] given."));if("string"===typeof e){var o=parseInt(e,10),a=isFinite(o);if(!a)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=o}var s=this,c=e;c<0&&(c=0);var l=s.params,u=s.snapGrid,d=s.slidesGrid,h=s.previousIndex,f=s.activeIndex,p=s.rtlTranslate,g=s.wrapperEl,y=s.enabled;if(s.animating&&l.preventInteractionOnTransition||!y&&!r&&!i)return!1;var v=Math.min(s.params.slidesPerGroupSkip,c),m=v+Math.floor((c-v)/s.params.slidesPerGroup);m>=u.length&&(m=u.length-1);var _,b=-u[m];if(l.normalizeSlideIndex)for(var E=0;E<d.length;E+=1){var S=-Math.floor(100*b),T=Math.floor(100*d[E]),w=Math.floor(100*d[E+1]);"undefined"!==typeof d[E+1]?S>=T&&S<w-(w-T)/2?c=E:S>=T&&S<w&&(c=E+1):S>=T&&(c=E)}if(s.initialized&&c!==f){if(!s.allowSlideNext&&b<s.translate&&b<s.minTranslate())return!1;if(!s.allowSlidePrev&&b>s.translate&&b>s.maxTranslate()&&(f||0)!==c)return!1}if(c!==(h||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(b),_=c>f?"next":c<f?"prev":"reset",p&&-b===s.translate||!p&&b===s.translate)return s.updateActiveIndex(c),l.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==l.effect&&s.setTranslate(b),"reset"!==_&&(s.transitionStart(n,_),s.transitionEnd(n,_)),!1;if(l.cssMode){var O=s.isHorizontal(),k=p?b:-b;if(0===t){var C=s.virtual&&s.params.virtual.enabled;C&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),g[O?"scrollLeft":"scrollTop"]=k,C&&requestAnimationFrame((function(){s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1}))}else{var $;if(!s.support.smoothScroll)return F({swiper:s,targetPosition:k,side:O?"left":"top"}),!0;g.scrollTo(($={},Object(x.a)($,O?"left":"top",k),Object(x.a)($,"behavior","smooth"),$))}return!0}return s.setTransition(t),s.setTranslate(b),s.updateActiveIndex(c),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,_),0===t?s.transitionEnd(n,_):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,_))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;if("string"===typeof e){var i=parseInt(e,10),o=isFinite(i);if(!o)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=i}var a=this,s=e;return a.params.loop&&(s+=a.loopedSlides),a.slideTo(s,t,n,r)},slideNext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this,i=r.animating,o=r.enabled,a=r.params;if(!o)return r;var s=a.slidesPerGroup;"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));var c=r.activeIndex<a.slidesPerGroupSkip?1:s;if(a.loop){if(i&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return a.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+c,e,t,n)},slidePrev:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this,i=r.params,o=r.animating,a=r.snapGrid,s=r.slidesGrid,c=r.rtlTranslate,l=r.enabled;if(!l)return r;if(i.loop){if(o&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}var u=c?r.translate:-r.translate;function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var h,f=d(u),p=a.map((function(e){return d(e)})),g=a[p.indexOf(f)-1];"undefined"===typeof g&&i.cssMode&&(a.forEach((function(e,t){f>=e&&(h=t)})),"undefined"!==typeof h&&(g=a[h>0?h-1:h]));var y=0;if("undefined"!==typeof g&&((y=s.indexOf(g))<0&&(y=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(y=y-r.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),i.rewind&&r.isBeginning){var v=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(v,e,t,n)}return r.slideTo(y,e,t,n)},slideReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this;return r.slideTo(r.activeIndex,e,t,n)},slideToClosest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=this,o=i.activeIndex,a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),c=i.rtlTranslate?i.translate:-i.translate;if(c>=i.snapGrid[s]){var l=i.snapGrid[s],u=i.snapGrid[s+1];c-l>(u-l)*r&&(o+=i.params.slidesPerGroup)}else{var d=i.snapGrid[s-1],h=i.snapGrid[s];c-d<=(h-d)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,r=t.$wrapperEl,i="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,o=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(I(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?o<t.loopedSlides-i/2||o>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),o=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),D((function(){t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-i?(t.loopFix(),o=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),D((function(){t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}},loop:{loopCreate:function(){var e=f(),t=this.params,n=this.$wrapperEl,r=n.children().length>0?I(n.children()[0].parentNode):n;r.children(".".concat(t.slideClass,".").concat(t.slideDuplicateClass)).remove();var i=r.children(".".concat(t.slideClass));if(t.loopFillGroupWithBlank){var o=t.slidesPerGroup-i.length%t.slidesPerGroup;if(o!==t.slidesPerGroup){for(var a=0;a<o;a+=1){var s=I(e.createElement("div")).addClass("".concat(t.slideClass," ").concat(t.slideBlankClass));r.append(s)}i=r.children(".".concat(t.slideClass))}}"auto"!==t.slidesPerView||t.loopedSlides||(t.loopedSlides=i.length),this.loopedSlides=Math.ceil(parseFloat(t.loopedSlides||t.slidesPerView,10)),this.loopedSlides+=t.loopAdditionalSlides,this.loopedSlides>i.length&&this.params.loopedSlidesLimit&&(this.loopedSlides=i.length);var c=[],l=[];i.each((function(e,t){I(e).attr("data-swiper-slide-index",t)}));for(var u=0;u<this.loopedSlides;u+=1){var d=u-Math.floor(u/i.length)*i.length;l.push(i.eq(d)[0]),c.unshift(i.eq(i.length-d-1)[0])}for(var h=0;h<l.length;h+=1)r.append(I(l[h].cloneNode(!0)).addClass(t.slideDuplicateClass));for(var p=c.length-1;p>=0;p-=1)r.prepend(I(c[p].cloneNode(!0)).addClass(t.slideDuplicateClass))},loopFix:function(){this.emit("beforeLoopFix");var e,t=this.activeIndex,n=this.slides,r=this.loopedSlides,i=this.allowSlidePrev,o=this.allowSlideNext,a=this.snapGrid,s=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var c=-a[t]-this.getTranslate();if(t<r)e=n.length-3*r+t,e+=r,this.slideTo(e,0,!1,!0)&&0!==c&&this.setTranslate((s?-this.translate:this.translate)-c);else if(t>=n.length-r){e=-n.length+t+r,e+=r,this.slideTo(e,0,!1,!0)&&0!==c&&this.setTranslate((s?-this.translate:this.translate)-c)}this.allowSlidePrev=i,this.allowSlideNext=o,this.emit("loopFix")},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,n=this.slides;e.children(".".concat(t.slideClass,".").concat(t.slideDuplicateClass,",.").concat(t.slideClass,".").concat(t.slideBlankClass)).remove(),n.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){if(!(this.support.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)){var t="container"===this.params.touchEventsTarget?this.el:this.wrapperEl;t.style.cursor="move",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){this.support.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this["container"===this.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:{attachEvents:function(){var e=f(),t=this.params,n=this.support;this.onTouchStart=Y.bind(this),this.onTouchMove=q.bind(this),this.onTouchEnd=X.bind(this),t.cssMode&&(this.onScroll=Q.bind(this)),this.onClick=Z.bind(this),n.touch&&!ee&&(e.addEventListener("touchstart",te),ee=!0),ne(this,"on")},detachEvents:function(){ne(this,"off")}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,r=e.loopedSlides,i=void 0===r?0:r,o=e.params,a=e.$el,s=o.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var c=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(c&&e.currentBreakpoint!==c){var l=(c in s?s[c]:void 0)||e.originalParams,u=re(e,o),d=re(e,l),h=o.enabled;u&&!d?(a.removeClass("".concat(o.containerModifierClass,"grid ").concat(o.containerModifierClass,"grid-column")),e.emitContainerClasses()):!u&&d&&(a.addClass("".concat(o.containerModifierClass,"grid")),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===o.grid.fill)&&a.addClass("".concat(o.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((function(t){var n=o[t]&&o[t].enabled,r=l[t]&&l[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()}));var f=l.direction&&l.direction!==o.direction,p=o.loop&&(l.slidesPerView!==o.slidesPerView||f);f&&n&&e.changeDirection(),U(e.params,l);var g=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),h&&!g?e.disable():!h&&g&&e.enable(),e.currentBreakpoint=c,e.emit("_beforeBreakpoint",l),p&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",l)}}},getBreakpoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"window",n=arguments.length>2?arguments[2]:void 0;if(e&&("container"!==t||n)){var r=!1,i=g(),o="window"===t?i.innerHeight:n.clientHeight,a=Object.keys(e).map((function(e){if("string"===typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));a.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<a.length;s+=1){var c=a[s],l=c.point,u=c.value;"window"===t?i.matchMedia("(min-width: ".concat(u,"px)")).matches&&(r=l):u<=n.clientWidth&&(r=l)}return r||"max"}}},checkOverflow:{checkOverflow:function(){var e=this.isLocked,t=this.params,n=t.slidesOffsetBefore;if(n){var r=this.slides.length-1,i=this.slidesGrid[r]+this.slidesSizesGrid[r]+2*n;this.isLocked=this.size>i}else this.isLocked=1===this.snapGrid.length;!0===t.allowSlideNext&&(this.allowSlideNext=!this.isLocked),!0===t.allowSlidePrev&&(this.allowSlidePrev=!this.isLocked),e&&e!==this.isLocked&&(this.isEnd=!1),e!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock")}},classes:{addClasses:function(){var e=this.classNames,t=this.params,n=this.rtl,r=this.$el,i=this.device,o=this.support,a=function(e,t){var n=[];return e.forEach((function(e){"object"===typeof e?Object.keys(e).forEach((function(r){e[r]&&n.push(t+r)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",t.direction,{"pointer-events":!o.touch},{"free-mode":this.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&"column"===t.grid.fill},{android:i.android},{ios:i.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push.apply(e,Object(s.a)(a)),r.addClass(Object(s.a)(e).join(" ")),this.emitContainerClasses()},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" ")),this.emitContainerClasses()}},images:{loadImage:function(e,t,n,r,i,o){var a,s=g();function c(){o&&o()}I(e).parent("picture")[0]||e.complete&&i?c():t?((a=new s.Image).onload=c,a.onerror=c,r&&(a.sizes=r),n&&(a.srcset=n),t&&(a.src=t)):c()},preloadImages:function(){var e=this;function t(){"undefined"!==typeof e&&null!==e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}}},se={},ce=function(){function e(){var t,n;Object(c.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?n=i[0]:(t=i[0],n=i[1]),n||(n={}),n=U({},n),t&&!n.el&&(n.el=t),n.el&&I(n.el).length>1){var a=[];return I(n.el).each((function(t){var r=U({},n,{el:t});a.push(new e(r))})),a}var l,u=this;(u.__swiper__=!0,u.support=V(),u.device=z({userAgent:n.userAgent}),u.browser=K(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=Object(s.a)(u.__modules__),n.modules&&Array.isArray(n.modules))&&(l=u.modules).push.apply(l,Object(s.a)(n.modules));var d={};u.modules.forEach((function(e){e({swiper:u,extendParams:oe(n,d),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})}));var h=U({},ie,d);return u.params=U({},h,se,n),u.originalParams=U({},u.params),u.passedParams=U({},n),u.params&&u.params.on&&Object.keys(u.params.on).forEach((function(e){u.on(e,u.params.on[e])})),u.params&&u.params.onAny&&u.onAny(u.params.onAny),u.$=I,Object.assign(u,{enabled:u.params.enabled,el:t,classNames:[],slides:I(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===u.params.direction},isVertical:function(){return"vertical"===u.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return u.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},u.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},u.support.touch||!u.params.simulateTouch?u.touchEventsTouch:u.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:L(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}return Object(l.a)(e,[{key:"enable",value:function(){this.enabled||(this.enabled=!0,this.params.grabCursor&&this.setGrabCursor(),this.emit("enable"))}},{key:"disable",value:function(){this.enabled&&(this.enabled=!1,this.params.grabCursor&&this.unsetGrabCursor(),this.emit("disable"))}},{key:"setProgress",value:function(e,t){e=Math.min(Math.max(e,0),1);var n=this.minTranslate(),r=(this.maxTranslate()-n)*e+n;this.translateTo(r,"undefined"===typeof t?0:t),this.updateActiveIndex(),this.updateSlidesClasses()}},{key:"emitContainerClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}}},{key:"getSlideClasses",value:function(e){var t=this;return t.destroyed?"":e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")}},{key:"emitSlidesClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}}},{key:"slidesPerViewDynamic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,r=n.params,i=n.slides,o=n.slidesGrid,a=n.slidesSizesGrid,s=n.size,c=n.activeIndex,l=1;if(r.centeredSlides){for(var u,d=i[c].swiperSlideSize,h=c+1;h<i.length;h+=1)i[h]&&!u&&(l+=1,(d+=i[h].swiperSlideSize)>s&&(u=!0));for(var f=c-1;f>=0;f-=1)i[f]&&!u&&(l+=1,(d+=i[f].swiperSlideSize)>s&&(u=!0))}else if("current"===e)for(var p=c+1;p<i.length;p+=1){var g=t?o[p]+a[p]-o[c]<s:o[p]-o[c]<s;g&&(l+=1)}else for(var y=c-1;y>=0;y-=1){var v=o[c]-o[y]<s;v&&(l+=1)}return l}},{key:"update",value:function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}}},{key:"changeDirection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass("".concat(n.params.containerModifierClass).concat(r)).addClass("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}},{key:"changeLanguageDirection",value:function(e){this.rtl&&"rtl"===e||!this.rtl&&"ltr"===e||(this.rtl="rtl"===e,this.rtlTranslate="horizontal"===this.params.direction&&this.rtl,this.rtl?(this.$el.addClass("".concat(this.params.containerModifierClass,"rtl")),this.el.dir="rtl"):(this.$el.removeClass("".concat(this.params.containerModifierClass,"rtl")),this.el.dir="ltr"),this.update())}},{key:"mount",value:function(e){var t=this;if(t.mounted)return!0;var n=I(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var r=function(){return".".concat((t.params.wrapperClass||"").trim().split(" ").join("."))},i=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=I(e.shadowRoot.querySelector(r()));return t.children=function(e){return n.children(e)},t}return n.children?n.children(r()):I(n).children(r())}();if(0===i.length&&t.params.createElements){var o=f().createElement("div");i=I(o),o.className=t.params.wrapperClass,n.append(o),n.children(".".concat(t.params.slideClass)).each((function(e){i.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0}},{key:"init",value:function(e){return this.initialized||!1===this.mount(e)||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.enabled&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit,!1,!0):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit,!1,!0),this.attachEvents(),this.initialized=!0,this.emit("init"),this.emit("afterInit")),this}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.params,i=n.$el,o=n.$wrapperEl,a=n.slides;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,R(n)),n.destroyed=!0),null}}],[{key:"extendDefaults",value:function(e){U(se,e)}},{key:"extendedDefaults",get:function(){return se}},{key:"defaults",get:function(){return ie}},{key:"installModule",value:function(t){e.prototype.__modules__||(e.prototype.__modules__=[]);var n=e.prototype.__modules__;"function"===typeof t&&n.indexOf(t)<0&&n.push(t)}},{key:"use",value:function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)}}]),e}();Object.keys(ae).forEach((function(e){Object.keys(ae[e]).forEach((function(t){ce.prototype[t]=ae[e][t]}))})),ce.use([function(e){var t=e.swiper,n=e.on,r=e.emit,i=g(),o=null,a=null,s=function(){t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},c=function(){t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(function(){t.params.resizeObserver&&"undefined"!==typeof i.ResizeObserver?t&&!t.destroyed&&t.initialized&&(o=new ResizeObserver((function(e){a=i.requestAnimationFrame((function(){var n=t.width,r=t.height,i=n,o=r;e.forEach((function(e){var n=e.contentBoxSize,r=e.contentRect,a=e.target;a&&a!==t.el||(i=r?r.width:(n[0]||n).inlineSize,o=r?r.height:(n[0]||n).blockSize)})),i===n&&o===r||s()}))}))).observe(t.el):(i.addEventListener("resize",s),i.addEventListener("orientationchange",c))})),n("destroy",(function(){a&&i.cancelAnimationFrame(a),o&&o.unobserve&&t.el&&(o.unobserve(t.el),o=null),i.removeEventListener("resize",s),i.removeEventListener("orientationchange",c)}))},function(e){var t=e.swiper,n=e.extendParams,r=e.on,i=e.emit,o=[],a=g(),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.MutationObserver||a.WebkitMutationObserver,r=new n((function(e){if(1!==e.length){var t=function(){i("observerUpdate",e[0])};a.requestAnimationFrame?a.requestAnimationFrame(t):a.setTimeout(t,0)}else i("observerUpdate",e[0])}));r.observe(e,{attributes:"undefined"===typeof t.attributes||t.attributes,childList:"undefined"===typeof t.childList||t.childList,characterData:"undefined"===typeof t.characterData||t.characterData}),o.push(r)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(function(){if(t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)s(e[n]);s(t.$el[0],{childList:t.params.observeSlideChildren}),s(t.$wrapperEl[0],{attributes:!1})}})),r("destroy",(function(){o.forEach((function(e){e.disconnect()})),o.splice(0,o.length)}))}]);var le=ce;function ue(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function de(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:ue(t[n])&&ue(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:de(e[n],t[n]):e[n]=t[n]}))}function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.pagination&&"undefined"===typeof e.pagination.el}function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scrollbar&&"undefined"===typeof e.scrollbar.el}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),n=[];return t.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n.join(" ")}var ye=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];var ve=function(e,t){var n=t.slidesPerView;if(t.breakpoints){var r=le.prototype.getBreakpoint(t.breakpoints),i=r in t.breakpoints?t.breakpoints[r]:void 0;i&&i.slidesPerView&&(n=i.slidesPerView)}var o=Math.ceil(parseFloat(t.loopedSlides||n,10));return(o+=t.loopAdditionalSlides)>e.length&&t.loopedSlidesLimit&&(o=e.length),o};function me(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function _e(e){var t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return a.a.Children.toArray(e).forEach((function(e){if(me(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){var r=function e(t){var n=[];return a.a.Children.toArray(t).forEach((function(t){me(t)?n.push(t):t.props&&t.props.children&&e(t.props.children).forEach((function(e){return n.push(e)}))})),n}(e.props.children);r.length>0?r.forEach((function(e){return t.push(e)})):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function be(e){var t,n,r,i,o,a=e.swiper,s=e.slides,c=e.passedParams,l=e.changedParams,u=e.nextEl,d=e.prevEl,h=e.scrollbarEl,f=e.paginationEl,p=l.filter((function(e){return"children"!==e&&"direction"!==e})),g=a.params,y=a.pagination,v=a.navigation,m=a.scrollbar,_=a.virtual,b=a.thumbs;l.includes("thumbs")&&c.thumbs&&c.thumbs.swiper&&g.thumbs&&!g.thumbs.swiper&&(t=!0),l.includes("controller")&&c.controller&&c.controller.control&&g.controller&&!g.controller.control&&(n=!0),l.includes("pagination")&&c.pagination&&(c.pagination.el||f)&&(g.pagination||!1===g.pagination)&&y&&!y.el&&(r=!0),l.includes("scrollbar")&&c.scrollbar&&(c.scrollbar.el||h)&&(g.scrollbar||!1===g.scrollbar)&&m&&!m.el&&(i=!0),l.includes("navigation")&&c.navigation&&(c.navigation.prevEl||d)&&(c.navigation.nextEl||u)&&(g.navigation||!1===g.navigation)&&v&&!v.prevEl&&!v.nextEl&&(o=!0);(p.forEach((function(e){if(ue(g[e])&&ue(c[e]))de(g[e],c[e]);else{var t=c[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?g[e]=c[e]:!1===t&&a[n=e]&&(a[n].destroy(),"navigation"===n?(g[n].prevEl=void 0,g[n].nextEl=void 0,a[n].prevEl=void 0,a[n].nextEl=void 0):(g[n].el=void 0,a[n].el=void 0))}var n})),p.includes("controller")&&!n&&a.controller&&a.controller.control&&g.controller&&g.controller.control&&(a.controller.control=g.controller.control),l.includes("children")&&s&&_&&g.virtual.enabled?(_.slides=s,_.update(!0)):l.includes("children")&&a.lazy&&a.params.lazy.enabled&&a.lazy.load(),t)&&(b.init()&&b.update(!0));n&&(a.controller.control=g.controller.control),r&&(f&&(g.pagination.el=f),y.init(),y.render(),y.update()),i&&(h&&(g.scrollbar.el=h),m.init(),m.updateSize(),m.setTranslate()),o&&(u&&(g.navigation.nextEl=u),d&&(g.navigation.prevEl=d),v.init(),v.update()),l.includes("allowSlideNext")&&(a.allowSlideNext=c.allowSlideNext),l.includes("allowSlidePrev")&&(a.allowSlidePrev=c.allowSlidePrev),l.includes("direction")&&a.changeDirection(c.direction,!1),a.update()}function Ee(e,t){return"undefined"===typeof window?Object(o.useEffect)(e,t):Object(o.useLayoutEffect)(e,t)}var Se=Object(o.createContext)(null),Te=Object(o.createContext)(null),we=["className","tag","wrapperTag","children","onSwiper"];function Oe(){return(Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ke=Object(o.forwardRef)((function(e,t){var n=void 0===e?{}:e,c=n.className,l=n.tag,u=void 0===l?"div":l,d=n.wrapperTag,h=void 0===d?"div":d,f=n.children,p=n.onSwiper,g=Object(i.a)(n,we),y=!1,v=Object(o.useState)("swiper"),m=Object(r.a)(v,2),_=m[0],b=m[1],E=Object(o.useState)(null),S=Object(r.a)(E,2),T=S[0],w=S[1],O=Object(o.useState)(!1),k=Object(r.a)(O,2),C=k[0],$=k[1],A=Object(o.useRef)(!1),P=Object(o.useRef)(null),I=Object(o.useRef)(null),R=Object(o.useRef)(null),D=Object(o.useRef)(null),L=Object(o.useRef)(null),M=Object(o.useRef)(null),N=Object(o.useRef)(null),j=Object(o.useRef)(null),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={on:{}},r={},i={};de(n,le.defaults),de(n,le.extendedDefaults),n._emitClasses=!0,n.init=!1;var o={},a=ye.map((function(e){return e.replace(/_/,"")})),s=Object.assign({},e);return Object.keys(s).forEach((function(s){"undefined"!==typeof e[s]&&(a.indexOf(s)>=0?ue(e[s])?(n[s]={},i[s]={},de(n[s],e[s]),de(i[s],e[s])):(n[s]=e[s],i[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"===typeof e[s]?t?r["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:n.on["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:o[s]=e[s])})),["navigation","pagination","scrollbar"].forEach((function(e){!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:o,events:r}}(g),U=B.params,G=B.passedParams,F=B.rest,V=B.events,H=_e(f),z=H.slides,K=H.slots,W=function(){$(!C)};Object.assign(U.on,{_containerClasses:function(e,t){b(t)}});var Y=function(){if(Object.assign(U.on,V),y=!0,I.current=new le(U),I.current.loopCreate=function(){},I.current.loopDestroy=function(){},U.loop&&(I.current.loopedSlides=ve(z,U)),I.current.virtual&&I.current.params.virtual.enabled){I.current.virtual.slides=z;var e={cache:!1,slides:z,renderExternal:w,renderExternalUpdate:!1};de(I.current.params.virtual,e),de(I.current.originalParams.virtual,e)}};P.current||Y(),I.current&&I.current.on("_beforeBreakpoint",W);return Object(o.useEffect)((function(){return function(){I.current&&I.current.off("_beforeBreakpoint",W)}})),Object(o.useEffect)((function(){!A.current&&I.current&&(I.current.emitSlidesClasses(),A.current=!0)})),Ee((function(){if(t&&(t.current=P.current),P.current)return I.current.destroyed&&Y(),function(e,t){var n=e.el,r=e.nextEl,i=e.prevEl,o=e.paginationEl,a=e.scrollbarEl,s=e.swiper;he(t)&&r&&i&&(s.params.navigation.nextEl=r,s.originalParams.navigation.nextEl=r,s.params.navigation.prevEl=i,s.originalParams.navigation.prevEl=i),fe(t)&&o&&(s.params.pagination.el=o,s.originalParams.pagination.el=o),pe(t)&&a&&(s.params.scrollbar.el=a,s.originalParams.scrollbar.el=a),s.init(n)}({el:P.current,nextEl:L.current,prevEl:M.current,paginationEl:N.current,scrollbarEl:j.current,swiper:I.current},U),p&&p(I.current),function(){I.current&&!I.current.destroyed&&I.current.destroy(!0,!1)}}),[]),Ee((function(){!y&&V&&I.current&&Object.keys(V).forEach((function(e){I.current.on(e,V[e])}));var e=function(e,t,n,r,i){var o=[];if(!t)return o;var a=function(e){o.indexOf(e)<0&&o.push(e)};if(n&&r){var s=r.map(i),c=n.map(i);s.join("")!==c.join("")&&a("children"),r.length!==n.length&&a("children")}return ye.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(ue(e[n])&&ue(t[n])){var r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?a(n):(r.forEach((function(r){e[n][r]!==t[n][r]&&a(n)})),i.forEach((function(r){e[n][r]!==t[n][r]&&a(n)})))}else e[n]!==t[n]&&a(n)})),o}(G,R.current,z,D.current,(function(e){return e.key}));return R.current=G,D.current=z,e.length&&I.current&&!I.current.destroyed&&be({swiper:I.current,slides:z,passedParams:G,changedParams:e,nextEl:L.current,prevEl:M.current,scrollbarEl:j.current,paginationEl:N.current}),function(){V&&I.current&&Object.keys(V).forEach((function(e){I.current.off(e,V[e])}))}})),Ee((function(){var e;!(e=I.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[T]),a.a.createElement(u,Oe({ref:P,className:ge("".concat(_).concat(c?" ".concat(c):""))},F),a.a.createElement(Te.Provider,{value:I.current},K["container-start"],a.a.createElement(h,{className:"swiper-wrapper"},K["wrapper-start"],U.virtual?function(e,t,n){if(!n)return null;var r=e.isHorizontal()?Object(x.a)({},e.rtlTranslate?"right":"left","".concat(n.offset,"px")):{top:"".concat(n.offset,"px")};return t.filter((function(e,t){return t>=n.from&&t<=n.to})).map((function(t){return a.a.cloneElement(t,{swiper:e,style:r})}))}(I.current,z,T):!U.loop||I.current&&I.current.destroyed?z.map((function(e){return a.a.cloneElement(e,{swiper:I.current})})):function(e,t,n){var r=t.map((function(t,n){return a.a.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})}));function i(e,t,r){return a.a.cloneElement(e,{key:"".concat(e.key,"-duplicate-").concat(t,"-").concat(r),className:"".concat(e.props.className||""," ").concat(n.slideDuplicateClass)})}if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-r.length%n.slidesPerGroup;if(o!==n.slidesPerGroup)for(var c=0;c<o;c+=1){var l=a.a.createElement("div",{className:"".concat(n.slideClass," ").concat(n.slideBlankClass)});r.push(l)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);for(var u=ve(r,n),d=[],h=[],f=0;f<u;f+=1){var p=f-Math.floor(f/r.length)*r.length;h.push(i(r[p],f,"append")),d.unshift(i(r[r.length-p-1],f,"prepend"))}return e&&(e.loopedSlides=u),[].concat(d,Object(s.a)(r),h)}(I.current,z,U),K["wrapper-end"]),he(U)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:M,className:"swiper-button-prev"}),a.a.createElement("div",{ref:L,className:"swiper-button-next"})),pe(U)&&a.a.createElement("div",{ref:j,className:"swiper-scrollbar"}),fe(U)&&a.a.createElement("div",{ref:N,className:"swiper-pagination"}),K["container-end"]))}));ke.displayName="Swiper";var Ce=["tag","children","className","swiper","zoom","virtualIndex"];function $e(){return($e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ae=Object(o.forwardRef)((function(e,t){var n=void 0===e?{}:e,s=n.tag,c=void 0===s?"div":s,l=n.children,u=n.className,d=void 0===u?"":u,h=n.swiper,f=n.zoom,p=n.virtualIndex,g=Object(i.a)(n,Ce),y=Object(o.useRef)(null),v=Object(o.useState)("swiper-slide"),m=Object(r.a)(v,2),_=m[0],b=m[1];function E(e,t,n){t===y.current&&b(n)}Ee((function(){if(t&&(t.current=y.current),y.current&&h){if(!h.destroyed)return h.on("_slideClass",E),function(){h&&h.off("_slideClass",E)};"swiper-slide"!==_&&b("swiper-slide")}})),Ee((function(){h&&y.current&&!h.destroyed&&b(h.getSlideClasses(y.current))}),[h]);var S={isActive:_.indexOf("swiper-slide-active")>=0||_.indexOf("swiper-slide-duplicate-active")>=0,isVisible:_.indexOf("swiper-slide-visible")>=0,isDuplicate:_.indexOf("swiper-slide-duplicate")>=0,isPrev:_.indexOf("swiper-slide-prev")>=0||_.indexOf("swiper-slide-duplicate-prev")>=0,isNext:_.indexOf("swiper-slide-next")>=0||_.indexOf("swiper-slide-duplicate-next")>=0},T=function(){return"function"===typeof l?l(S):l};return a.a.createElement(c,$e({ref:y,className:ge("".concat(_).concat(d?" ".concat(d):"")),"data-swiper-slide-index":p},g),a.a.createElement(Se.Provider,{value:S},f?a.a.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof f?f:void 0},T()):T()))}));Ae.displayName="SwiperSlide"},,,,,,,,function(e,t,n){"use strict";var r=n(1),i=n(0),o=n.n(i);t.a=function(e){var t=e.title,n=e.style;return o.a.createElement("div",{style:Object(r.a)({},n)},o.a.createElement("span",null,t),o.a.createElement("svg",{height:"1em",viewBox:"0 0 100 40",style:{verticalAlign:"-0.125em"}},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{transform:"translate(-100.000000, -71.000000)"},o.a.createElement("g",{transform:"translate(95.000000, 71.000000)"},o.a.createElement("g",{transform:"translate(5.000000, 0.000000)"},o.a.createElement("rect",{fill:"currentColor",x:"20",y:"16",width:"8",height:"8",rx:"2"},o.a.createElement("animate",{attributeName:"y",from:"16",to:"16",dur:"2s",begin:"0s",repeatCount:"indefinite",values:"16; 6; 26; 16; 16",keyTimes:"0; 0.1; 0.3; 0.4; 1",id:"circ-anim"})),o.a.createElement("rect",{fill:"currentColor",x:"46",y:"16",width:"8",height:"8",rx:"2"},o.a.createElement("animate",{attributeName:"y",from:"16",to:"16",dur:"2s",begin:"0.2s",repeatCount:"indefinite",values:"16; 6; 26; 16; 16",keyTimes:"0; 0.1; 0.3; 0.4; 1",id:"circ-anim"})),o.a.createElement("rect",{fill:"currentColor",x:"72",y:"16",width:"8",height:"8",rx:"2"},o.a.createElement("animate",{attributeName:"y",from:"16",to:"16",dur:"2s",begin:"0.4s",repeatCount:"indefinite",values:"16; 6; 26; 16; 16",keyTimes:"0; 0.1; 0.3; 0.4; 1",id:"circ-anim"}))))))))}},,,function(e,t,n){e.exports={fall_ground_box3:"FallGroundStatic_fall_ground_box3__2whRu",header:"FallGroundStatic_header__2tqMK",header_icon:"FallGroundStatic_header_icon__1iT8U",header_title:"FallGroundStatic_header_title__3dGYw",cover:"FallGroundStatic_cover__1QZPT",title:"FallGroundStatic_title__39MAV",desc:"FallGroundStatic_desc__3ijnq"}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),i=n(5),o=n(28),a=n(51),s=n(113),c=n(13),l=n(21),u=n(7),d=n(8),h=[];function f(e){var t=e.defaultIntegrations||[],n=e.integrations;t.forEach((function(e){e.isDefaultInstance=!0}));var r=function(e){var t={};return e.forEach((function(e){var n=e.name,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((function(e){return t[e]}))}(Array.isArray(n)?[].concat(Object(i.a)(t),Object(i.a)(n)):"function"===typeof n?Object(a.c)(n(t)):t),o=function(e,t){for(var n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(r,(function(e){return"Debug"===e.name}));if(-1!==o){var s=r.splice(o,1),c=Object(u.a)(s,1)[0];r.push(c)}return r}function p(e,t){var n,r=Object(l.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i&&i.afterAllSetup&&i.afterAllSetup(e)}}catch(o){r.e(o)}finally{r.f()}}function g(e,t,n){if(n[t.name])c.a&&o.c.log("Integration skipped because it was already installed: ".concat(t.name));else{if(n[t.name]=t,-1===h.indexOf(t.name)&&"function"===typeof t.setupOnce&&(t.setupOnce(),h.push(t.name)),t.setup&&"function"===typeof t.setup&&t.setup(e),"function"===typeof t.preprocessEvent){var r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(function(t,n){return r(t,n,e)}))}if("function"===typeof t.processEvent){var i=t.processEvent.bind(t),a=Object.assign((function(t,n){return i(t,n,e)}),{id:t.name});e.addEventProcessor(a)}c.a&&o.c.log("Integration installed: ".concat(t.name))}}var y=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"InboundFilters",processEvent:function(t,n,r){var i=r.getOptions();return _(t,m(e,i))?null:t}}};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[].concat(Object(i.a)(e.allowUrls||[]),Object(i.a)(t.allowUrls||[])),denyUrls:[].concat(Object(i.a)(e.denyUrls||[]),Object(i.a)(t.denyUrls||[])),ignoreErrors:[].concat(Object(i.a)(e.ignoreErrors||[]),Object(i.a)(t.ignoreErrors||[]),Object(i.a)(e.disableErrorDefaults?[]:y)),ignoreTransactions:[].concat(Object(i.a)(e.ignoreTransactions||[]),Object(i.a)(t.ignoreTransactions||[])),ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}function _(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(t){}return!1}(e)?(c.a&&o.c.warn("Event dropped due to being internal Sentry Error.\nEvent: ".concat(Object(a.e)(e))),!0):function(e,t){if(e.type||!t||!t.length)return!1;return function(e){var t,n=[];e.message&&n.push(e.message);try{t=e.exception.values[e.exception.values.length-1]}catch(r){}t&&t.value&&(n.push(t.value),t.type&&n.push("".concat(t.type,": ").concat(t.value)));return n}(e).some((function(e){return Object(s.c)(e,t)}))}(e,t.ignoreErrors)?(c.a&&o.c.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat(Object(a.e)(e))),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;var n=e.transaction;return!!n&&Object(s.c)(n,t)}(e,t.ignoreTransactions)?(c.a&&o.c.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat(Object(a.e)(e))),!0):function(e,t){if(!t||!t.length)return!1;var n=b(e);return!!n&&Object(s.c)(n,t)}(e,t.denyUrls)?(c.a&&o.c.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat(Object(a.e)(e),".\nUrl: ").concat(b(e))),!0):!function(e,t){if(!t||!t.length)return!0;var n=b(e);return!n||Object(s.c)(n,t)}(e,t.allowUrls)&&(c.a&&o.c.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat(Object(a.e)(e),".\nUrl: ").concat(b(e))),!0)}function b(e){try{var t;try{t=e.exception.values[0].stacktrace.frames}catch(n){}return t?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length-1;t>=0;t--){var n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(r){return c.a&&o.c.error("Cannot extract url for event ".concat(Object(a.e)(e))),null}}var E,S=n(44),T=new WeakMap,w=function(){return{name:"FunctionToString",setupOnce:function(){E=Function.prototype.toString;try{Function.prototype.toString=function(){for(var e=Object(S.f)(this),t=T.has(Object(d.a)())&&void 0!==e?e:this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return E.apply(t,r)}}catch(e){}},setup:function(e){T.set(e,!0)}}},O=function(){var e;return{name:"Dedupe",processEvent:function(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){var n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!C(e,t))return!1;if(!k(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){var n=$(t),r=$(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!C(e,t))return!1;if(!k(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return c.a&&o.c.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(n){}return e=t}}};function k(e,t){var n=A(e),r=A(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i],a=n[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function C(e,t){var n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(i){return!1}}function $(e){return e.exception&&e.exception.values&&e.exception.values[0]}function A(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(n){return}}function P(e,t){!0===t.debug&&(c.a?o.c.enable():Object(o.b)((function(){console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Object(d.b)().update(t.initialScope);var n=new e(t);!function(e){Object(d.b)().setClient(e)}(n),n.init()}var I=n(438),x=n(73),R=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function D(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.host,r=e.path,i=e.pass,o=e.port,a=e.projectId,s=e.protocol,c=e.publicKey;return"".concat(s,"://").concat(c).concat(t&&i?":".concat(i):"")+"@".concat(n).concat(o?":".concat(o):"","/").concat(r?"".concat(r,"/"):r).concat(a)}function L(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function M(e){var t="string"===typeof e?function(e){var t=R.exec(e);if(t){var n=t.slice(1),r=Object(u.a)(n,6),i=r[0],a=r[1],s=r[2],c=void 0===s?"":s,l=r[3],d=r[4],h=void 0===d?"":d,f="",p=r[5],g=p.split("/");if(g.length>1&&(f=g.slice(0,-1).join("/"),p=g.pop()),p){var y=p.match(/^\d+/);y&&(p=y[0])}return L({host:l,pass:c,path:f,projectId:p,port:h,protocol:i,publicKey:a})}Object(o.b)((function(){console.error("Invalid Sentry Dsn: ".concat(e))}))}(e):L(e);if(t&&function(e){if(!x.a)return!0;var t=e.port,n=e.projectId,r=e.protocol;return!["protocol","publicKey","host","projectId"].find((function(t){return!e[t]&&(o.c.error("Invalid Sentry Dsn: ".concat(t," missing")),!0)}))&&(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?!t||!isNaN(parseInt(t,10))||(o.c.error("Invalid Sentry Dsn: Invalid port ".concat(t)),!1):(o.c.error("Invalid Sentry Dsn: Invalid protocol ".concat(r)),!1):(o.c.error("Invalid Sentry Dsn: Invalid projectId ".concat(n)),!1))}(t))return t}function N(e){var t=e.protocol?"".concat(e.protocol,":"):"",n=e.port?":".concat(e.port):"";return"".concat(t,"//").concat(e.host).concat(n).concat(e.path?"/".concat(e.path):"","/api/")}function j(e,t,n){return t||"".concat(function(e){return"".concat(N(e)).concat(e.projectId,"/envelope/")}(e),"?").concat(function(e,t){return Object(S.h)(Object(r.a)({sentry_key:e.publicKey,sentry_version:"7"},t&&{sentry_client:"".concat(t.name,"/").concat(t.version)}))}(e,n))}var B=n(16),U=B.a;function G(){if(!("fetch"in U))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function F(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}var V=n(291),H={},z={};function K(e,t){H[e]=H[e]||[],H[e].push(t)}function W(e,t){z[e]||(t(),z[e]=!0)}function Y(e,t){var n=e&&H[e];if(n){var r,i=Object(l.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(t)}catch(s){x.a&&o.c.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(Object(V.c)(a),"\nError:"),s)}}}catch(c){i.e(c)}finally{i.f()}}}var q=B.a;var X,J=B.a;function Z(e){K("history",e),W("history",Q)}function Q(){if(function(){var e=q.chrome,t=e&&e.app&&e.app.runtime,n="history"in q&&!!q.history.pushState&&!!q.history.replaceState;return!t&&n}()){var e=J.onpopstate;J.onpopstate=function(){var t=J.location.href,n=X;X=t;var r={from:n,to:t};if(Y("history",r),e)try{for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e.apply(this,o)}catch(s){}},Object(S.e)(J.history,"pushState",t),Object(S.e)(J.history,"replaceState",t)}function t(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.length>2?n[2]:void 0;if(i){var o=X,a=String(i);X=a;var s={from:o,to:a};Y("history",s)}return e.apply(this,n)}}}var ee=n(17),te=n(25),ne=n(295),re=n(43),ie=n(64),oe=n(65),ae=n(158);function se(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[t],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"npm",i=e._metadata||{};i.sdk||(i.sdk={name:"sentry.javascript.".concat(t),packages:n.map((function(e){return{name:"".concat(r,":@sentry/").concat(e),version:ae.a}})),version:ae.a}),e._metadata=i}var ce=n(24),le=n(293),ue=n(325);function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[e,t]}function he(e,t){var n=Object(u.a)(e,2),r=n[0],o=n[1];return[r,[].concat(Object(i.a)(o),[t])]}function fe(e,t){var n,r=e[1],i=Object(l.a)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(t(o,o[0].type))return!0}}catch(a){i.e(a)}finally{i.f()}return!1}function pe(e){return B.a.__SENTRY__&&B.a.__SENTRY__.encodePolyfill?B.a.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}function ge(e){var t=Object(u.a)(e,2),n=t[0],r=t[1],i=JSON.stringify(n);function o(e){"string"===typeof i?i="string"===typeof e?i+e:[pe(i),e]:i.push("string"===typeof e?pe(e):e)}var a,s=Object(l.a)(r);try{for(s.s();!(a=s.n()).done;){var c=a.value,d=Object(u.a)(c,2),h=d[0],f=d[1];if(o("\n".concat(JSON.stringify(h),"\n")),"string"===typeof f||f instanceof Uint8Array)o(f);else{var p=void 0;try{p=JSON.stringify(f)}catch(g){p=JSON.stringify(Object(ue.a)(f))}o(p)}}}catch(y){s.e(y)}finally{s.f()}return"string"===typeof i?i:function(e){var t,n=e.reduce((function(e,t){return e+t.length}),0),r=new Uint8Array(n),i=0,o=Object(l.a)(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r.set(a,i),i+=a.length}}catch(y){o.e(y)}finally{o.f()}return r}(i)}function ye(e){return[{type:"span"},e]}function ve(e){var t="string"===typeof e.data?pe(e.data):e.data;return[Object(S.c)({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}var me={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function _e(e){return me[e]}function be(e){if(e&&e.sdk){var t=e.sdk;return{name:t.name,version:t.version}}}var Ee=n(58),Se=n(241),Te=function(e){Object(ie.a)(n,e);var t=Object(oe.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";return Object(ee.a)(this,n),(r=t.call(this,e)).message=e,r.name=(this instanceof n?this.constructor:void 0).prototype.constructor.name,Object.setPrototypeOf(Object(Ee.a)(r),(this instanceof n?this.constructor:void 0).prototype),r.logLevel=i,r}return n}(Object(Se.a)(Error)),we=n(61),Oe=n(10);function ke(e,t,n,o){var a=be(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[].concat(Object(i.a)(e.sdk.integrations||[]),Object(i.a)(t.integrations||[])),e.sdk.packages=[].concat(Object(i.a)(e.sdk.packages||[]),Object(i.a)(t.packages||[])))}(e,n&&n.sdk);var c=function(e,t,n,i){var o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return Object(r.a)(Object(r.a)(Object(r.a)({event_id:e.event_id,sent_at:(new Date).toISOString()},t&&{sdk:t}),!!n&&i&&{dsn:D(i)}),o&&{trace:Object(S.c)(Object(r.a)({},o))})}(e,a,o,t);return delete e.sdkProcessingMetadata,de(c,[[{type:s},e]])}var Ce=n(114);function $e(e){if("boolean"===typeof e)return Number(e);var t="string"===typeof e?parseFloat(e):e;if(!("number"!==typeof t||isNaN(t)||t<0||t>1))return t;c.a&&o.c.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(e)," of type ").concat(JSON.stringify(typeof e),"."))}var Ae=n(292),Pe="Not capturing exception because it's already been captured.",Ie=function(){function e(t){if(Object(ee.a)(this,e),this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=M(t.dsn):c.a&&o.c.warn("No DSN provided, client will not send events."),this._dsn){var n=j(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport(Object(r.a)(Object(r.a)({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this)},t.transportOptions),{},{url:n}))}}return Object(te.a)(e,[{key:"captureException",value:function(e,t,n){var i=this,s=Object(a.f)();if(Object(a.d)(e))return c.a&&o.c.log(Pe),s;var l=Object(r.a)({event_id:s},t);return this._process(this.eventFromException(e,l).then((function(e){return i._captureEvent(e,l,n)}))),l.event_id}},{key:"captureMessage",value:function(e,t,n,i){var o=this,s=Object(r.a)({event_id:Object(a.f)()},n),c=Object(ce.h)(e)?e:String(e),l=Object(ce.j)(e)?this.eventFromMessage(c,t,s):this.eventFromException(e,s);return this._process(l.then((function(e){return o._captureEvent(e,s,i)}))),s.event_id}},{key:"captureEvent",value:function(e,t,n){var i=Object(a.f)();if(t&&t.originalException&&Object(a.d)(t.originalException))return c.a&&o.c.log(Pe),i;var s=Object(r.a)({event_id:i},t),l=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,l||n)),s.event_id}},{key:"captureSession",value:function(e){"string"!==typeof e.release?c.a&&o.c.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Object(Ce.c)(e,{init:!1}))}},{key:"getDsn",value:function(){return this._dsn}},{key:"getOptions",value:function(){return this._options}},{key:"getSdkMetadata",value:function(){return this._options._metadata}},{key:"getTransport",value:function(){return this._transport}},{key:"flush",value:function(e){var t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((function(n){return t.flush(e).then((function(e){return n&&e}))}))):Object(le.c)(!0)}},{key:"close",value:function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,t.emit("close"),e}))}},{key:"getEventProcessors",value:function(){return this._eventProcessors}},{key:"addEventProcessor",value:function(e){this._eventProcessors.push(e)}},{key:"init",value:function(){this._isEnabled()&&this._setupIntegrations()}},{key:"getIntegrationByName",value:function(e){return this._integrations[e]}},{key:"addIntegration",value:function(e){var t=this._integrations[e.name];g(this,e,this._integrations),t||p(this,[e])}},{key:"sendEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("beforeSendEvent",e,n);var r,i=ke(e,this._dsn,this._options._metadata,this._options.tunnel),o=Object(l.a)(n.attachments||[]);try{for(o.s();!(r=o.n()).done;){var a=r.value;i=he(i,ve(a))}}catch(c){o.e(c)}finally{o.f()}var s=this.sendEnvelope(i);s&&s.then((function(n){return t.emit("afterSendEvent",e,n)}),null)}},{key:"sendSession",value:function(e){var t=function(e,t,n,i){var o=be(n);return de(Object(r.a)(Object(r.a)({sent_at:(new Date).toISOString()},o&&{sdk:o}),!!i&&t&&{dsn:D(t)}),["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}},{key:"recordDroppedEvent",value:function(e,t,n){if(this._options.sendClientReports){var r="".concat(e,":").concat(t);c.a&&o.c.log('Adding outcome: "'.concat(r,'"')),this._outcomes[r]=this._outcomes[r]+1||1}}},{key:"on",value:function(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._hooks[e]&&this._hooks[e].forEach((function(e){return e.apply(void 0,n)}))}},{key:"sendEnvelope",value:function(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(function(e){return c.a&&o.c.error("Error while sending event:",e),e})):(c.a&&o.c.error("Transport disabled"),Object(le.c)({}))}},{key:"_setupIntegrations",value:function(){var e=this._options.integrations;this._integrations=function(e,t){var n={};return t.forEach((function(t){t&&g(e,t,n)})),n}(this,e),p(this,e)}},{key:"_updateSessionFromEvent",value:function(e,t){var n=!1,i=!1,o=t.exception&&t.exception.values;if(o){i=!0;var a,s=Object(l.a)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value.mechanism;if(c&&!1===c.handled){n=!0;break}}}catch(d){s.e(d)}finally{s.f()}}var u="ok"===e.status;(u&&0===e.errors||u&&n)&&(Object(Ce.c)(e,Object(r.a)(Object(r.a)({},n&&{status:"crashed"}),{},{errors:e.errors||Number(i||n)})),this.captureSession(e))}},{key:"_isClientDoneProcessing",value:function(e){var t=this;return new le.a((function(n){var r=0,i=setInterval((function(){0==t._numProcessing?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))}),1)}))}},{key:"_isEnabled",value:function(){return!1!==this.getOptions().enabled&&void 0!==this._transport}},{key:"_prepareEvent",value:function(e,t,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(d.d)(),a=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s.length>0&&(t.integrations=s),this.emit("preprocessEvent",e,t),e.type||o.setLastEventId(e.event_id||t.event_id),Object(Ae.b)(a,e,t,n,this,o).then((function(e){if(null===e)return e;var t=Object(r.a)(Object(r.a)({},o.getPropagationContext()),n?n.getPropagationContext():void 0);if(!(e.contexts&&e.contexts.trace)&&t){var a=t.traceId,s=t.spanId,c=t.parentSpanId,l=t.dsc;e.contexts=Object(r.a)({trace:Object(S.c)({trace_id:a,span_id:s,parent_span_id:c})},e.contexts);var u=l||Object(we.b)(a,i);e.sdkProcessingMetadata=Object(r.a)({dynamicSamplingContext:u},e.sdkProcessingMetadata)}return e}))}},{key:"_captureEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){if(c.a){var t=e;"log"===t.logLevel?o.c.log(t.message):o.c.warn(t)}}))}},{key:"_processEvent",value:function(e,t,n){var i=this,o=this.getOptions(),a=o.sampleRate,s=Re(e),c=xe(e),u=e.type||"error",d="before send for type `".concat(u,"`"),h="undefined"===typeof a?void 0:$e(a);if(c&&"number"===typeof h&&Math.random()>h)return this.recordDroppedEvent("sample_rate","error",e),Object(le.b)(new Te("Discarding event because it's not included in the random sample (sampling rate = ".concat(a,")"),"log"));var f="replay_event"===u?"replay":u,p=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,p).then((function(n){if(null===n)throw i.recordDroppedEvent("event_processor",f,e),new Te("An event processor returned `null`, will not send event.","log");return t.data&&!0===t.data.__sentry__?n:function(e,t){var n="".concat(t," must return `null` or a valid event.");if(Object(ce.n)(e))return e.then((function(e){if(!Object(ce.i)(e)&&null!==e)throw new Te(n);return e}),(function(e){throw new Te("".concat(t," rejected with ").concat(e))}));if(!Object(ce.i)(e)&&null!==e)throw new Te(n);return e}(function(e,t,n){var r=e.beforeSend,i=e.beforeSendTransaction,o=e.beforeSendSpan;if(xe(t)&&r)return r(t,n);if(Re(t)){if(t.spans&&o){var a,s=[],c=Object(l.a)(t.spans);try{for(c.s();!(a=c.n()).done;){var u=a.value,d=o(u);d&&s.push(d)}}catch(h){c.e(h)}finally{c.f()}t.spans=s}if(i)return i(t,n)}return t}(o,n,t),d)})).then((function(o){if(null===o)throw i.recordDroppedEvent("before_send",f,e),new Te("".concat(d," returned `null`, will not send event."),"log");var a=n&&n.getSession();!s&&a&&i._updateSessionFromEvent(a,o);var c=o.transaction_info;if(s&&c&&o.transaction!==e.transaction){o.transaction_info=Object(r.a)(Object(r.a)({},c),{},{source:"custom"})}return i.sendEvent(o,t),o})).then(null,(function(e){if(e instanceof Te)throw e;throw i.captureException(e,{data:{__sentry__:!0},originalException:e}),new Te("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(e))}))}},{key:"_process",value:function(e){var t=this;this._numProcessing++,e.then((function(e){return t._numProcessing--,e}),(function(e){return t._numProcessing--,e}))}},{key:"_clearOutcomes",value:function(){var e=this._outcomes;return this._outcomes={},Object.keys(e).map((function(t){var n=t.split(":"),r=Object(u.a)(n,2);return{reason:r[0],category:r[1],quantity:e[t]}}))}}]),e}();function xe(e){return void 0===e.type}function Re(e){return"transaction"===e.type}var De=n(74);var Le="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Me(e,t){var n=Be(e,t),r={type:t&&t.name,value:Ge(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Ne(e,t,n,r){var i=Object(d.a)(),o=i&&i.getOptions().normalizeDepth,a=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(n instanceof Error)return n}return}(t),s={__serialized__:Object(ue.b)(t,o)};if(a)return{exception:{values:[Me(e,a)]},extra:s};var c={exception:{values:[{type:Object(ce.f)(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:ze(t,{isUnhandledRejection:r})}]},extra:s};if(n){var l=Be(e,n);l.length&&(c.exception.values[0].stacktrace={frames:l})}return c}function je(e,t){return{exception:{values:[Me(e,t)]}}}function Be(e,t){var n=t.stacktrace||t.stack||"",r=function(e){if(e&&Ue.test(e.message))return 1;return 0}(t),i=function(e){if("number"===typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,i)}catch(o){}return[]}var Ue=/Minified React error #\d+;/i;function Ge(e){var t=e&&e.message;return t?t.error&&"string"===typeof t.error.message?t.error.message:t:"No error message"}function Fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=r&&r.syntheticException||void 0,a=He(e,t,o,i);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),Object(le.c)(a)}function Ve(e,t,n,i,o){var s;if(Object(ce.e)(t)&&t.error)return je(e,t.error);if(Object(ce.a)(t)||Object(ce.b)(t)){var c=t;if("stack"in t)s=je(e,t);else{var l=c.name||(Object(ce.a)(c)?"DOMError":"DOMException"),u=c.message?"".concat(l,": ").concat(c.message):l;s=He(e,u,n,i),Object(a.b)(s,u)}return"code"in c&&(s.tags=Object(r.a)(Object(r.a)({},s.tags),{},{"DOMException.code":"".concat(c.code)})),s}return Object(ce.d)(t)?je(e,t):Object(ce.i)(t)||Object(ce.f)(t)?(s=Ne(e,t,n,o),Object(a.a)(s,{synthetic:!0}),s):(s=He(e,t,n,i),Object(a.b)(s,"".concat(t),void 0),Object(a.a)(s,{synthetic:!0}),s)}function He(e,t,n,r){var i={};if(r&&n){var o=Be(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]})}if(Object(ce.h)(t)){var a=t.__sentry_template_string__,s=t.__sentry_template_values__;return i.logentry={message:a,params:s},i}return i.message=t,i}function ze(e,t){var n=t.isUnhandledRejection,r=Object(S.d)(e),i=n?"promise rejection":"exception";if(Object(ce.e)(e))return"Event `ErrorEvent` captured as ".concat(i," with message `").concat(e.message,"`");if(Object(ce.f)(e)){var o=function(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(n){}}(e);return"Event `".concat(o,"` (type=").concat(e.type,") captured as ").concat(i)}return"Object captured as ".concat(i," with keys: ").concat(r)}var Ke=B.a,We=0;function Ye(){return We>0}function qe(){We++,setTimeout((function(){We--}))}function Xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if("function"!==typeof e)return e;try{var i=e.__sentry_wrapped__;if(i)return i;if(Object(S.f)(e))return e}catch(l){return e}var o=function(){var i=Array.prototype.slice.call(arguments);try{n&&"function"===typeof n&&n.apply(this,arguments);var o=i.map((function(e){return Xe(e,t)}));return e.apply(this,o)}catch(s){throw qe(),Object(d.f)((function(e){e.addEventProcessor((function(e){return t.mechanism&&(Object(a.b)(e,void 0,void 0),Object(a.a)(e,t.mechanism)),e.extra=Object(r.a)(Object(r.a)({},e.extra),{},{arguments:i}),e})),Object(I.b)(s)})),s}};try{for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(o[s]=e[s])}catch(u){}Object(S.g)(o,e),Object(S.a)(e,"__sentry_wrapped__",o);try{var c=Object.getOwnPropertyDescriptor(o,"name");c.configurable&&Object.defineProperty(o,"name",{get:function(){return e.name}})}catch(u){}return o}var Je,Ze,Qe,et=function(e){Object(ie.a)(n,e);var t=Object(oe.a)(n);function n(e){var i;Object(ee.a)(this,n);var o=Object(r.a)({parentSpanIsAlwaysRootSpan:!0},e);return se(o,"browser",["browser"],Ke.SENTRY_SDK_SOURCE||"npm"),i=t.call(this,o),o.sendClientReports&&Ke.document&&Ke.document.addEventListener("visibilitychange",(function(){"hidden"===Ke.document.visibilityState&&i._flushOutcomes()})),i}return Object(te.a)(n,[{key:"eventFromException",value:function(e,t){return function(e,t,n,r){var i=Ve(e,t,n&&n.syntheticException||void 0,r);return Object(a.a)(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),Object(le.c)(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}},{key:"eventFromMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2?arguments[2]:void 0;return Fe(this._options.stackParser,e,t,n,this._options.attachStacktrace)}},{key:"captureUserFeedback",value:function(e){if(this._isEnabled()){var t=function(e,t){var n=t.metadata,i=t.tunnel,o=t.dsn;return de(Object(r.a)(Object(r.a)({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&n.sdk&&{sdk:{name:n.sdk.name,version:n.sdk.version}}),!!i&&!!o&&{dsn:D(o)}),[function(e){return[{type:"user_report"},e]}(e)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}else Le&&o.c.warn("SDK not enabled, will not capture user feedback.")}},{key:"_prepareEvent",value:function(e,t,r){return e.platform=e.platform||"javascript",Object(ne.a)(Object(re.a)(n.prototype),"_prepareEvent",this).call(this,e,t,r)}},{key:"_flushOutcomes",value:function(){var e=this._clearOutcomes();if(0!==e.length)if(this._dsn){Le&&o.c.log("Sending outcomes:",e);var t,n,r,i=(t=e,de((n=this._options.tunnel&&D(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:r||Object(De.b)(),discarded_events:t}]]));this.sendEnvelope(i)}else Le&&o.c.log("No dsn provided, will not send outcomes");else Le&&o.c.log("No outcomes to send")}}]),n}(Ie);function tt(e){K("dom",e),W("dom",nt)}function nt(){if(J.document){var e=Y.bind(null,"dom"),t=ot(e,!0);J.document.addEventListener("click",t,!1),J.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=J[t]&&J[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(S.e)(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{var o=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=o[n]=o[n]||{refCount:0};if(!a.handler){var s=ot(e);a.handler=s,t.call(this,n,s,i)}a.refCount++}catch(c){}return t.call(this,n,r,i)}})),Object(S.e)(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var i=this.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete this.__sentry_instrumentation_handlers__)}catch(a){}return e.call(this,t,n,r)}})))}))}}function rt(e){if(e.type!==Ze)return!1;try{if(!e.target||e.target._sentryId!==Qe)return!1}catch(t){}return!0}function it(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){if(n&&!n._sentryCaptured){var r=at(n);if(!it(n.type,r)){Object(S.a)(n,"_sentryCaptured",!0),r&&!r._sentryId&&Object(S.a)(r,"_sentryId",Object(a.f)());var i="keypress"===n.type?"input":n.type;if(!rt(n))e({event:n,name:i,global:t}),Ze=n.type,Qe=r?r._sentryId:void 0;clearTimeout(Je),Je=J.setTimeout((function(){Qe=void 0,Ze=void 0}),1e3)}}}}function at(e){try{return e.target}catch(t){return null}}function st(e){K("xhr",e),W("xhr",ct)}function ct(){if(J.XMLHttpRequest){var e=XMLHttpRequest.prototype;Object(S.e)(e,"open",(function(e){return function(){for(var t=this,n=1e3*Object(De.c)(),r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=Object(ce.l)(i[0])?i[0].toUpperCase():void 0,s=lt(i[1]);if(!a||!s)return e.apply(this,i);this.__sentry_xhr_v3__={method:a,url:s,request_headers:{}},"POST"===a&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);var c=function(){var e=t.__sentry_xhr_v3__;if(e&&4===t.readyState){try{e.status_code=t.status}catch(r){}Y("xhr",{endTimestamp:1e3*Object(De.c)(),startTimestamp:n,xhr:t})}};return"onreadystatechange"in this&&"function"===typeof this.onreadystatechange?Object(S.e)(this,"onreadystatechange",(function(e){return function(){c();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}})):this.addEventListener("readystatechange",c),Object(S.e)(this,"setRequestHeader",(function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=this.__sentry_xhr_v3__;return a&&Object(ce.l)(i)&&Object(ce.l)(o)&&(a.request_headers[i.toLowerCase()]=o),e.apply(this,n)}})),e.apply(this,i)}})),Object(S.e)(e,"send",(function(e){return function(){for(var t=this.__sentry_xhr_v3__,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!t)return e.apply(this,r);void 0!==r[0]&&(t.body=r[0]);var o={startTimestamp:1e3*Object(De.c)(),xhr:this};return Y("xhr",o),e.apply(this,r)}}))}}function lt(e){if(Object(ce.l)(e))return e;try{return e.toString()}catch(t){}}function ut(e,t){var n=Object(d.a)(),i=Object(d.d)();if(n){var a=n.getOptions(),s=a.beforeBreadcrumb,c=void 0===s?null:s,l=a.maxBreadcrumbs,u=void 0===l?100:l;if(!(u<=0)){var h=Object(De.b)(),f=Object(r.a)({timestamp:h},e),p=c?Object(o.b)((function(){return c(f,t)})):f;null!==p&&(n.emit&&n.emit("beforeAddBreadcrumb",p,t),i.addBreadcrumb(p,u))}}}function dt(e){K("console",e),W("console",ht)}function ht(){"console"in B.a&&o.a.forEach((function(e){e in B.a.console&&Object(S.e)(B.a.console,e,(function(t){return o.d[e]=t,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i={args:n,level:e};Y("console",i);var a=o.d[e];a&&a.apply(B.a.console,n)}}))}))}function ft(e){K("fetch",e),W("fetch",pt)}function pt(){(function(){if("string"===typeof EdgeRuntime)return!0;if(!G())return!1;if(F(U.fetch))return!0;var e=!1,t=U.document;if(t&&"function"===typeof t.createElement)try{var n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=F(n.contentWindow.fetch)),t.head.removeChild(n)}catch(r){x.a&&o.c.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e})()&&Object(S.e)(B.a,"fetch",(function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=vt(n),a=o.method,s=o.url,c={args:n,fetchData:{method:a,url:s},startTimestamp:1e3*Object(De.c)()};return Y("fetch",Object(r.a)({},c)),e.apply(B.a,n).then((function(e){return Y("fetch",Object(r.a)(Object(r.a)({},c),{},{endTimestamp:1e3*Object(De.c)(),response:e})),e}),(function(e){throw Y("fetch",Object(r.a)(Object(r.a)({},c),{},{endTimestamp:1e3*Object(De.c)(),error:e})),e}))}}))}function gt(e,t){return!!e&&"object"===typeof e&&!!e[t]}function yt(e){return"string"===typeof e?e:e?gt(e,"url")?e.url:e.toString?e.toString():"":""}function vt(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){var t=Object(u.a)(e,2),n=t[0],r=t[1];return{url:yt(n),method:gt(r,"method")?String(r.method).toUpperCase():"GET"}}var i=e[0];return{url:yt(i),method:gt(i,"method")?String(i.method).toUpperCase():"GET"}}var mt=n(324),_t=["fatal","error","warning","log","info","debug"];function bt(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}var Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.a)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e);return{name:"Breadcrumbs",setup:function(e){t.console&&dt(wt(e)),t.dom&&tt(Tt(e,t.dom)),t.xhr&&st(Ot(e)),t.fetch&&ft(kt(e)),t.history&&Z(Ct(e)),t.sentry&&e.on("beforeSendEvent",St(e))}}};function St(e){return function(t){Object(d.a)()===e&&ut({category:"sentry.".concat("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Object(a.e)(t)},{event:t})}}function Tt(e,t){return function(n){if(Object(d.a)()===e){var r,i,a="object"===typeof t?t.serializeAttribute:void 0,s="object"===typeof t&&"number"===typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>1024&&(Le&&o.c.warn("`dom.maxStringLength` cannot exceed ".concat(1024,", but a value of ").concat(s," was configured. Sentry will use ").concat(1024," instead.")),s=1024),"string"===typeof a&&(a=[a]);try{var c=n.event,l=function(e){return!!e&&!!e.target}(c)?c.target:c;r=Object(mt.d)(l,{keyAttrs:a,maxStringLength:s}),i=Object(mt.a)(l)}catch(h){r="<unknown>"}if(0!==r.length){var u={category:"ui.".concat(n.name),message:r};i&&(u.data={"ui.component_name":i}),ut(u,{event:n.event,name:n.name,global:n.global})}}}}function wt(e){return function(t){if(Object(d.a)()===e){var n,r={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,"warn"===n?"warning":_t.includes(n)?n:"log"),message:Object(s.a)(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;r.message="Assertion failed: ".concat(Object(s.a)(t.args.slice(1)," ")||"console.assert"),r.data.arguments=t.args.slice(1)}ut(r,{input:t.args,level:t.level})}}}function Ot(e){return function(t){if(Object(d.a)()===e){var n=t.startTimestamp,r=t.endTimestamp,i=t.xhr.__sentry_xhr_v3__;if(n&&r&&i){var o=i.method,a=i.url,s=i.status_code,c=i.body;ut({category:"xhr",data:{method:o,url:a,status_code:s},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}}}function kt(e){return function(t){if(Object(d.a)()===e){var n=t.startTimestamp,i=t.endTimestamp;if(i&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){ut({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:i})}else{var o=t.response;ut({category:"fetch",data:Object(r.a)(Object(r.a)({},t.fetchData),{},{status_code:o&&o.status}),type:"http"},{input:t.args,response:o,startTimestamp:n,endTimestamp:i})}}}}function Ct(e){return function(t){if(Object(d.a)()===e){var n=t.from,r=t.to,i=bt(Ke.location.href),o=n?bt(n):void 0,a=bt(r);o&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),ut({category:"navigation",data:{from:n,to:r}})}}}var $t=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.a)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e);return{name:"BrowserApiErrors",setupOnce:function(){t.setTimeout&&Object(S.e)(Ke,"setTimeout",Pt),t.setInterval&&Object(S.e)(Ke,"setInterval",Pt),t.requestAnimationFrame&&Object(S.e)(Ke,"requestAnimationFrame",It),t.XMLHttpRequest&&"XMLHttpRequest"in Ke&&Object(S.e)(XMLHttpRequest.prototype,"send",xt);var e=t.eventTarget;e&&(Array.isArray(e)?e:$t).forEach(Rt)}}};function Pt(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];return n[0]=Xe(i,{mechanism:{data:{function:Object(V.c)(e)},handled:!1,type:"instrument"}}),e.apply(this,n)}}function It(e){return function(t){return e.apply(this,[Xe(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Object(V.c)(e)},handled:!1,type:"instrument"}})])}}function xt(e){return function(){var t=this,n=["onload","onerror","onprogress","onreadystatechange"];n.forEach((function(e){e in t&&"function"===typeof t[e]&&Object(S.e)(t,e,(function(t){var n={mechanism:{data:{function:e,handler:Object(V.c)(t)},handled:!1,type:"instrument"}},r=Object(S.f)(t);return r&&(n.mechanism.data.handler=Object(V.c)(r)),Xe(t,n)}))}));for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e.apply(this,i)}}function Rt(e){var t=Ke,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(S.e)(n,"addEventListener",(function(t){return function(n,r,i){try{"function"===typeof r.handleEvent&&(r.handleEvent=Xe(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Object(V.c)(r),target:e},handled:!1,type:"instrument"}}))}catch(o){}return t.apply(this,[n,Xe(r,{mechanism:{data:{function:"addEventListener",handler:Object(V.c)(r),target:e},handled:!1,type:"instrument"}}),i])}})),Object(S.e)(n,"removeEventListener",(function(e){return function(t,n,r){var i=n;try{var o=i&&i.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch(a){}return e.call(this,t,i,r)}})))}var Dt=null;function Lt(e){K("error",e),W("error",Mt)}function Mt(){Dt=B.a.onerror,B.a.onerror=function(e,t,n,r,i){var o={column:r,error:i,line:n,msg:e,url:t};return Y("error",o),!(!Dt||Dt.__SENTRY_LOADER__)&&Dt.apply(this,arguments)},B.a.onerror.__SENTRY_INSTRUMENTED__=!0}var Nt=null;function jt(e){var t="unhandledrejection";K(t,e),W(t,Bt)}function Bt(){Nt=B.a.onunhandledrejection,B.a.onunhandledrejection=function(e){var t=e;return Y("unhandledrejection",t),!(Nt&&!Nt.__SENTRY_LOADER__)||Nt.apply(this,arguments)},B.a.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.a)({onerror:!0,onunhandledrejection:!0},e);return{name:"GlobalHandlers",setupOnce:function(){Error.stackTraceLimit=50},setup:function(e){t.onerror&&(Gt(e),Vt("onerror")),t.onunhandledrejection&&(Ft(e),Vt("onunhandledrejection"))}}};function Gt(e){Lt((function(t){var n=Ht(),r=n.stackParser,i=n.attachStacktrace;if(Object(d.a)()===e&&!Ye()){var o=t.msg,a=t.url,s=t.line,c=t.column,l=t.error,u=function(e,t,n,r){var i=e.exception=e.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},s=a.stacktrace=a.stacktrace||{},c=s.frames=s.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=Object(ce.l)(t)&&t.length>0?t:Object(mt.c)();0===c.length&&c.push({colno:l,filename:d,function:V.a,in_app:!0,lineno:u});return e}(Ve(r,l||o,void 0,i,!1),a,s,c);u.level="error",Object(I.a)(u,{originalException:l,mechanism:{handled:!1,type:"onerror"}})}}))}function Ft(e){jt((function(t){var n=Ht(),r=n.stackParser,i=n.attachStacktrace;if(Object(d.a)()===e&&!Ye()){var o=function(e){if(Object(ce.j)(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return e}(t),a=Object(ce.j)(o)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(o))}]}}:Ve(r,o,void 0,i,!0);a.level="error",Object(I.a)(a,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}}))}function Vt(e){Le&&o.c.log("Global Handler attached: ".concat(e))}function Ht(){var e=Object(d.a)();return e&&e.getOptions()||{stackParser:function(){return[]},attachStacktrace:!1}}var zt=function(){return{name:"HttpContext",preprocessEvent:function(e){if(Ke.navigator||Ke.location||Ke.document){var t=e.request&&e.request.url||Ke.location&&Ke.location.href,n=(Ke.document||{}).referrer,i=(Ke.navigator||{}).userAgent,o=Object(r.a)(Object(r.a)(Object(r.a)({},e.request&&e.request.headers),n&&{Referer:n}),i&&{"User-Agent":i}),a=Object(r.a)(Object(r.a)(Object(r.a)({},e.request),t&&{url:t}),{},{headers:o});e.request=a}}}};function Kt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;if(o.exception&&o.exception.values&&a&&Object(ce.g)(a.originalException,Error)){var s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=Xt(Wt(e,t,i,a.originalException,r,o.exception.values,s,0),n))}}function Wt(e,t,n,r,o,a,s,c){if(a.length>=n+1)return a;var l=Object(i.a)(a);if(Object(ce.g)(r[o],Error)){Yt(s,c);var u=e(t,r[o]),d=l.length;qt(u,o,d,c),l=Wt(e,t,n,r[o],o,[u].concat(Object(i.a)(l)),u,d)}return Array.isArray(r.errors)&&r.errors.forEach((function(r,a){if(Object(ce.g)(r,Error)){Yt(s,c);var u=e(t,r),d=l.length;qt(u,"errors[".concat(a,"]"),d,c),l=Wt(e,t,n,r,o,[u].concat(Object(i.a)(l)),u,d)}})),l}function Yt(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism=Object(r.a)(Object(r.a)(Object(r.a)({},e.mechanism),"AggregateError"===e.type&&{is_exception_group:!0}),{},{exception_id:t})}function qt(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism=Object(r.a)(Object(r.a)({},e.mechanism),{},{type:"chained",source:t,exception_id:n,parent_id:i})}function Xt(e,t){return e.map((function(e){return e.value&&(e.value=Object(s.d)(e.value,t)),e}))}var Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent:function(e,r,i){var o=i.getOptions();Kt(Me,o.stackParser,o.maxValueLength,n,t,e,r)}}};function Zt(e,t,n,r){var i={filename:e,function:"<anonymous>"===t?V.a:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}var Qt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,en=/\((\S*)(?::(\d+))(?::(\d+))\)/,tn=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,nn=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,rn=[[30,function(e){var t=Qt.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){var n=en.exec(t[2]);n&&(t[2]=n[1],t[3]=n[2],t[4]=n[3])}var r=an(t[1]||V.a,t[2]),i=Object(u.a)(r,2),o=i[0];return Zt(i[1],o,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,function(e){var t=tn.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=nn.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}var r=t[3],i=t[1]||V.a,o=an(i,r),a=Object(u.a)(o,2);return i=a[0],Zt(r=a[1],i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]],on=V.b.apply(void 0,rn),an=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:V.a,n?"safari-extension:".concat(t):"safari-web-extension:".concat(t)]:[e,t]},sn="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,cn={};function ln(e){var t=cn[e];if(t)return t;var n=J[e];if(F(n))return cn[e]=n.bind(J);var r=J.document;if(r&&"function"===typeof r.createElement)try{var i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);var a=i.contentWindow;a&&a[e]&&(n=a[e]),r.head.removeChild(i)}catch(s){sn&&o.c.warn("Could not create sandbox iframe for ".concat(e," check, bailing to window.").concat(e,": "),s)}return n?cn[e]=n.bind(J):n}function un(e){cn[e]=void 0}function dn(e){var t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Object(le.b)(new Te("Not adding Promise because buffer limit was reached."));var i=r();return-1===t.indexOf(i)&&t.push(i),i.then((function(){return n(i)})).then(null,(function(){return n(i).then(null,(function(){}))})),i},drain:function(e){return new le.a((function(n,r){var i=t.length;if(!i)return n(!0);var o=setTimeout((function(){e&&e>0&&n(!1)}),e);t.forEach((function(e){Object(le.c)(e).then((function(){--i||(clearTimeout(o),n(!0))}),r)}))}))}}}function hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=parseInt("".concat(e),10);if(!isNaN(n))return 1e3*n;var r=Date.parse("".concat(e));return isNaN(r)?6e4:r-t}function fn(e,t){return e[t]||e.all||0}function pn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return fn(e,t)>n}function gn(e,t){var n=t.statusCode,i=t.headers,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),a=Object(r.a)({},e),s=i&&i["x-sentry-rate-limits"],c=i&&i["retry-after"];if(s){var d,h=Object(l.a)(s.trim().split(","));try{for(h.s();!(d=h.n()).done;){var f=d.value,p=f.split(":",5),g=Object(u.a)(p,5),y=g[0],v=g[1],m=g[4],_=parseInt(y,10),b=1e3*(isNaN(_)?60:_);if(v){var E,S=Object(l.a)(v.split(";"));try{for(S.s();!(E=S.n()).done;){var T=E.value;"metric_bucket"===T&&m&&!m.split(";").includes("custom")||(a[T]=o+b)}}catch(w){S.e(w)}finally{S.f()}}else a.all=o+b}}catch(w){h.e(w)}finally{h.f()}}else c?a.all=o+hn(c,o):429===n&&(a.all=o+6e4);return a}function yn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dn(e.bufferSize||64),r={},i=function(e){return n.drain(e)};function a(i){var a=[];if(fe(i,(function(t,n){var i=_e(n);if(pn(r,i)){var o=vn(t,n);e.recordDroppedEvent("ratelimit_backoff",i,o)}else a.push(t)})),0===a.length)return Object(le.c)({});var s=de(i[0],a),l=function(t){fe(s,(function(n,r){var i=vn(n,r);e.recordDroppedEvent(t,_e(r),i)}))};return n.add((function(){return t({body:ge(s)}).then((function(e){return void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&c.a&&o.c.warn("Sentry responded with status code ".concat(e.statusCode," to sent event.")),r=gn(r,e),e}),(function(e){throw l("network_error"),e}))})).then((function(e){return e}),(function(e){if(e instanceof Te)return c.a&&o.c.error("Skipped sending event because buffer is full."),l("queue_overflow"),Object(le.c)({});throw e}))}return{send:a,flush:i}}function vn(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ln("fetch"),n=0,i=0;function o(o){var a=o.body.length;n+=a,i++;var s=Object(r.a)({body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&i<15},e.fetchOptions);if(!t)return un("fetch"),Object(le.b)("No fetch implementation available");try{return t(e.url,s).then((function(e){return n-=a,i--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}}))}catch(c){return un("fetch"),n-=a,i--,Object(le.b)(c)}}return yn(e,o)}function _n(e){return[v(),w(),At(),Et(),Ut(),Jt(),O(),zt()]}function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={defaultIntegrations:_n(),release:"string"===typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Ke.SENTRY_RELEASE&&Ke.SENTRY_RELEASE.id?Ke.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return Object(r.a)(Object(r.a)({},t),e)}function En(){var e=Ke[Ke.chrome?"chrome":"browser"],t=e&&e.runtime&&e.runtime.id,n=Ke.location&&Ke.location.href||"",r=!!t&&Ke===Ke.top&&["chrome-extension:","moz-extension:","ms-browser-extension:"].some((function(e){return n.startsWith("".concat(e,"//"))}));return!!t&&!r}function Sn(){"undefined"!==typeof Ke.document?(Object(I.f)({ignoreDuration:!0}),Object(I.d)(),Z((function(e){var t=e.from,n=e.to;void 0!==t&&t!==n&&(Object(I.f)({ignoreDuration:!0}),Object(I.d)())}))):Le&&o.c.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")}var Tn=n(14),wn=n(364),On=n(328),kn=n(60),Cn=n(115),$n=n(23);function An(e){if("boolean"===typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;var t=e||function(){var e=Object(d.a)();return e&&e.getOptions()}();return!!t&&(t.enableTracing||"tracesSampleRate"in t||"tracesSampler"in t)}var Pn=n(62);var In=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ee.a)(this,e),this._traceId=t.traceId||Object(a.f)(),this._spanId=t.spanId||Object(a.f)().substring(16)}return Object(te.a)(e,[{key:"spanContext",value:function(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Oe.a}}},{key:"end",value:function(e){}},{key:"setAttribute",value:function(e,t){return this}},{key:"setAttributes",value:function(e){return this}},{key:"setStatus",value:function(e){return this}},{key:"updateName",value:function(e){return this}},{key:"isRecording",value:function(){return!1}},{key:"addEvent",value:function(e,t,n){return this}}]),e}(),xn=n(157);function Rn(e){if(e&&0!==e.length){var t={};return e.forEach((function(e){var n=e.attributes||{},r=n[$n.d],i=n[$n.e];"string"===typeof r&&"number"===typeof i&&(t[e.name]={value:i,unit:r})})),t}}function Dn(e){return{scope:e._sentryScope,isolationScope:e._sentryIsolationScope}}var Ln=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ee.a)(this,e),this._traceId=n.traceId||Object(a.f)(),this._spanId=n.spanId||Object(a.f)().substring(16),this._startTime=n.startTimestamp||Object(De.c)(),this._attributes={},this.setAttributes(Object(r.a)((t={},Object(Tn.a)(t,$n.g,"manual"),Object(Tn.a)(t,$n.f,n.op),t),n.attributes)),this._name=n.name,n.parentSpanId&&(this._parentSpanId=n.parentSpanId),"sampled"in n&&(this._sampled=n.sampled),n.endTimestamp&&(this._endTime=n.endTimestamp),this._events=[],this._isStandaloneSpan=n.isStandalone,this._endTime&&this._onSpanEnded()}return Object(te.a)(e,[{key:"spanContext",value:function(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:this._sampled?Oe.b:Oe.a}}},{key:"setAttribute",value:function(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}},{key:"setAttributes",value:function(e){var t=this;Object.keys(e).forEach((function(n){return t.setAttribute(n,e[n])}))}},{key:"updateStartTime",value:function(e){this._startTime=Object(Oe.j)(e)}},{key:"setStatus",value:function(e){return this._status=e,this}},{key:"updateName",value:function(e){return this._name=e,this}},{key:"end",value:function(e){this._endTime||(this._endTime=Object(Oe.j)(e),function(e){if(c.a){var t=Object(Oe.k)(e),n=t.description,r=void 0===n?"< unknown name >":n,i=t.op,a=void 0===i?"< unknown op >":i,s=e.spanContext().spanId,l=Object(Oe.e)(e)===e,u='[Tracing] Finishing "'.concat(a,'" ').concat(l?"root ":"",'span "').concat(r,'" with ID ').concat(s);o.c.log(u)}}(this),this._onSpanEnded())}},{key:"getSpanJSON",value:function(){return Object(S.c)({data:this._attributes,description:this._name,op:this._attributes[$n.f],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Object(Oe.g)(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[$n.g],_metrics_summary:Object(xn.a)(this),profile_id:this._attributes[$n.b],exclusive_time:this._attributes[$n.a],measurements:Rn(this._events),is_segment:this._isStandaloneSpan&&Object(Oe.e)(this)===this||void 0,segment_id:this._isStandaloneSpan?Object(Oe.e)(this).spanContext().spanId:void 0})}},{key:"isRecording",value:function(){return!this._endTime&&!!this._sampled}},{key:"addEvent",value:function(e,t,n){c.a&&o.c.log("[Tracing] Adding an event to span:",e);var r=Mn(t)?t:n||Object(De.c)(),i=Mn(t)?{}:t||{},a={name:e,time:Object(Oe.j)(r),attributes:i};return this._events.push(a),this}},{key:"isStandaloneSpan",value:function(){return!!this._isStandaloneSpan}},{key:"_onSpanEnded",value:function(){var e=Object(d.a)();if(e&&e.emit("spanEnd",this),this._isStandaloneSpan||this===Object(Oe.e)(this))if(this._isStandaloneSpan)!function(e){var t=Object(d.a)();if(!t)return;var n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");var r=t.getTransport();r&&r.send(e).then(null,(function(e){c.a&&o.c.error("Error while sending span:",e)}))}(function(e,t){var n,i=Object(we.c)(e[0]),o=t&&t.getDsn(),a=t&&t.getOptions().tunnel,s=Object(r.a)(Object(r.a)({sent_at:(new Date).toISOString()},function(e){return!!e.trace_id&&!!e.public_key}(i)&&{trace:i}),!!a&&o&&{dsn:D(o)}),c=t&&t.getOptions().beforeSendSpan,u=c?function(e){return c(Object(Oe.k)(e))}:function(e){return Object(Oe.k)(e)},d=[],h=Object(l.a)(e);try{for(h.s();!(n=h.n()).done;){var f=u(n.value);f&&d.push(ye(f))}}catch(p){h.e(p)}finally{h.f()}return de(s,d)}([this],e));else{var t=this._convertSpanToTransaction();if(t)(Dn(this).scope||Object(d.b)()).captureEvent(t)}}},{key:"_convertSpanToTransaction",value:function(){var e=this;if(Nn(Object(Oe.k)(this))){this._name||(c.a&&o.c.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");var t=Dn(this),n=t.scope,i=t.isolationScope,a=(n||Object(d.b)()).getClient()||Object(d.a)();if(!0!==this._sampled)return c.a&&o.c.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(a&&a.recordDroppedEvent("sample_rate","transaction"));var s=Object(Oe.f)(this).filter((function(t){return t!==e&&!function(e){return e instanceof Ln&&e.isStandaloneSpan()}(t)})).map((function(e){return Object(Oe.k)(e)})).filter(Nn),l=this._attributes[$n.i],u=Object(r.a)({contexts:{trace:Object(Oe.n)(this)},spans:s.length>1e3?s.sort((function(e,t){return e.start_timestamp-t.start_timestamp})).slice(0,1e3):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:Object(r.a)({capturedSpanScope:n,capturedSpanIsolationScope:i},Object(S.c)({dynamicSamplingContext:Object(we.c)(this)})),_metrics_summary:Object(xn.a)(this)},l&&{transaction_info:{source:l}}),h=Rn(this._events);return h&&Object.keys(h).length&&(c.a&&o.c.log("[Measurements] Adding measurements to transaction",JSON.stringify(h,void 0,2)),u.measurements=h),u}}}]),e}();function Mn(e){return e&&"number"===typeof e||e instanceof Date||Array.isArray(e)}function Nn(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}var jn=n(71);function Bn(e){var t=Vn();if(t.startInactiveSpan)return t.startInactiveSpan(e);var n=Fn(e),r=e.scope||Object(d.b)(),i=zn(r);return e.onlyIfParent&&!i?new In:Gn({parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r})}function Un(e,t){var n=Vn();return n.withActiveSpan?n.withActiveSpan(e,t):Object(d.f)((function(n){return Object(Pn.b)(n,e||void 0),t(n)}))}function Gn(e){var t=e.parentSpan,n=e.spanContext,i=e.forceTransaction,a=e.scope;if(!An())return new In;var s,l=Object(d.d)();if(t&&!i)s=function(e,t,n){var i=e.spanContext(),o=i.spanId,a=i.traceId,s=!t.getScopeData().sdkProcessingMetadata.__SENTRY_SUPPRESS_TRACING__&&Object(Oe.i)(e),c=s?new Ln(Object(r.a)(Object(r.a)({},n),{},{parentSpanId:o,traceId:a,sampled:s})):new In({traceId:a});Object(Oe.c)(e,c);var l=Object(d.a)();l&&(l.emit("spanStart",c),n.endTimestamp&&l.emit("spanEnd",c));return c}(t,a,n),Object(Oe.c)(t,s);else if(t){var u=Object(we.c)(t),h=t.spanContext(),f=h.traceId,p=h.spanId,g=Object(Oe.i)(t);s=Hn(Object(r.a)({traceId:f,parentSpanId:p},n),a,g),Object(we.a)(s,u)}else{var y=Object(r.a)(Object(r.a)({},l.getPropagationContext()),a.getPropagationContext()),v=y.traceId,m=y.dsc,_=y.parentSpanId,b=y.sampled;s=Hn(Object(r.a)({traceId:v,parentSpanId:_},n),a,b),m&&Object(we.a)(s,m)}return function(e){if(c.a){var t=Object(Oe.k)(e),n=t.description,r=void 0===n?"< unknown name >":n,i=t.op,a=void 0===i?"< unknown op >":i,s=t.parent_span_id,l=e.spanContext().spanId,u=Object(Oe.i)(e),d=Object(Oe.e)(e),h=d===e,f="[Tracing] Starting ".concat(u?"sampled":"unsampled"," ").concat(h?"root ":"","span"),p=["op: ".concat(a),"name: ".concat(r),"ID: ".concat(l)];if(s&&p.push("parent ID: ".concat(s)),!h){var g=Object(Oe.k)(d),y=g.op,v=g.description;p.push("root ID: ".concat(d.spanContext().spanId)),y&&p.push("root op: ".concat(y)),v&&p.push("root description: ".concat(v))}o.c.log("".concat(f,"\n  ").concat(p.join("\n  ")))}}(s),function(e,t,n){e&&(Object(S.a)(e,"_sentryIsolationScope",n),Object(S.a)(e,"_sentryScope",t))}(s,a,l),s}function Fn(e){var t=e.experimental||{},n=Object(r.a)({isStandalone:t.standalone},e);if(e.startTime){var i=Object(r.a)({},n);return i.startTimestamp=Object(Oe.j)(e.startTime),delete i.startTime,i}return n}function Vn(){var e=Object(kn.a)();return Object(Cn.a)(e)}function Hn(e,t,n){var i=Object(d.a)(),a=i&&i.getOptions()||{},s=e.name,l=void 0===s?"":s,h=e.attributes,f=t.getScopeData().sdkProcessingMetadata.__SENTRY_SUPPRESS_TRACING__?[!1]:function(e,t){if(!An(e))return[!1];var n,r=$e(n="function"===typeof e.tracesSampler?e.tracesSampler(t):void 0!==t.parentSampled?t.parentSampled:"undefined"!==typeof e.tracesSampleRate?e.tracesSampleRate:1);return void 0===r?(c.a&&o.c.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:(c.a&&o.c.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ".concat(Number(n),")")),[!1,r]):(c.a&&o.c.log("[Tracing] Discarding transaction because ".concat("function"===typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,r])}(a,{name:l,parentSampled:n,attributes:h,transactionContext:{name:l,parentSampled:n}}),p=Object(u.a)(f,2),g=p[0],y=p[1],v=new Ln(Object(r.a)(Object(r.a)({},e),{},{attributes:Object(r.a)(Object(Tn.a)({},$n.i,"custom"),e.attributes),sampled:g}));return void 0!==y&&v.setAttribute($n.h,y),i&&i.emit("spanStart",v),v}function zn(e){var t=Object(Pn.a)(e);if(t){var n=Object(d.a)();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Object(Oe.e)(t):t}}var Kn,Wn,Yn,qn,Xn,Jn,Zn=function(e,t,n,r){var i,o;return function(a){t.value>=0&&(a||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Qn=function(){return J.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},er=function(){var e=Qn();return e&&e.activationStart||0},tr=function(e,t){var n=Qn(),r="navigate";n&&(J.document&&J.document.prerendering||er()>0?r="prerender":J.document&&J.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-")));return{name:e,value:"undefined"===typeof t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},nr=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(i){}},rr=function(e){var t=function(t){("pagehide"===t.type||J.document&&"hidden"===J.document.visibilityState)&&e(t)};J.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},ir=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},or=-1,ar=function e(t){"hidden"===J.document.visibilityState&&or>-1&&(or="visibilitychange"===t.type?t.timeStamp:0,removeEventListener("visibilitychange",e,!0),removeEventListener("prerenderingchange",e,!0))},sr=function(){return J.document&&or<0&&(or="hidden"!==J.document.visibilityState||J.document.prerendering?1/0:0,addEventListener("visibilitychange",ar,!0),addEventListener("prerenderingchange",ar,!0)),{get firstHiddenTime(){return or}}},cr=function(e){J.document&&J.document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},lr=[1800,3e3],ur=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cr((function(){var n,r=sr(),i=tr("FCP"),o=nr("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-er(),0),i.entries.push(e),n(!0)))}))}));o&&(n=Zn(e,i,lr,t.reportAllChanges))}))},dr=[.1,.25],hr=[100,300],fr=0,pr=1/0,gr=0,yr=function(e){e.forEach((function(e){e.interactionId&&(pr=Math.min(pr,e.interactionId),gr=Math.max(gr,e.interactionId),fr=gr?(gr-pr)/7+1:0)}))},vr=function(){"interactionCount"in performance||Kn||(Kn=nr("event",yr,{type:"event",buffered:!0,durationThreshold:0}))},mr=[200,500],_r=function(){return(Kn?fr:performance.interactionCount||0)-0},br=[],Er={},Sr=function(e){var t=br[br.length-1],n=Er[e.interactionId];if(n||br.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Er[r.id]=r,br.push(r)}br.sort((function(e,t){return t.latency-e.latency})),br.splice(10).forEach((function(e){delete Er[e.id]}))}},Tr=function(){var e=Math.min(br.length-1,Math.floor(_r()/50));return br[e]},wr=[2500,4e3],Or={},kr=[800,1800],Cr=function e(t){J.document&&J.document.prerendering?cr((function(){return e(t)})):J.document&&"complete"!==J.document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},$r={},Ar={};function Pr(e,t){return jr(e,t),Ar[e]||(!function(e){var t={};"event"===e&&(t.durationThreshold=0);nr(e,(function(t){Ir(e,{entries:t})}),t)}(e),Ar[e]=!0),Br(e,t)}function Ir(e,t){var n=$r[e];if(n&&n.length){var r,i=Object(l.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(t)}catch(s){sn&&o.c.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(Object(V.c)(a),"\nError:"),s)}}}catch(c){i.e(c)}finally{i.f()}}}function xr(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ur(ir((function(){var n,r=tr("CLS",0),i=0,o=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],n=o[o.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>r.value&&(r.value=i,r.entries=o,n())},s=nr("layout-shift",a);s&&(n=Zn(e,r,dr,t.reportAllChanges),rr((function(){a(s.takeRecords()),n(!0)})),setTimeout(n,0))})))}((function(e){Ir("cls",{metric:e}),Wn=e}),{reportAllChanges:!0})}function Rr(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cr((function(){var n,r=sr(),i=tr("FID"),o=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},a=function(e){e.forEach(o)},s=nr("first-input",a);n=Zn(e,i,hr,t.reportAllChanges),s&&rr(ir((function(){a(s.takeRecords()),s.disconnect()})))}))}((function(e){Ir("fid",{metric:e}),Yn=e}))}function Dr(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cr((function(){var n,r=sr(),i=tr("LCP"),o=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-er(),0),i.entries=[t],n())},a=nr("largest-contentful-paint",o);if(a){n=Zn(e,i,wr,t.reportAllChanges);var s=ir((function(){Or[i.id]||(o(a.takeRecords()),a.disconnect(),Or[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){J.document&&addEventListener(e,(function(){return setTimeout(s,0)}),!0)})),rr(s)}}))}((function(e){Ir("lcp",{metric:e}),qn=e}))}function Lr(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=tr("TTFB"),r=Zn(e,n,kr,t.reportAllChanges);Cr((function(){var e=Qn();if(e){var t=e.responseStart;if(t<=0||t>performance.now())return;n.value=Math.max(t-er(),0),n.entries=[e],r(!0)}}))}((function(e){Ir("ttfb",{metric:e}),Xn=e}))}function Mr(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cr((function(){vr();var n,r=tr("INP"),i=function(e){e.forEach((function(e){(e.interactionId&&Sr(e),"first-input"===e.entryType)&&(!br.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Sr(e))}));var t=Tr();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,n())},o=nr("event",i,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});n=Zn(e,r,mr,t.reportAllChanges),o&&("PerformanceEventTiming"in J&&"interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),rr((function(){i(o.takeRecords()),r.value<0&&_r()>0&&(r.value=0,r.entries=[]),n(!0)})))}))}((function(e){Ir("inp",{metric:e}),Jn=e}))}function Nr(e,t,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return jr(e,t),Ar[e]||(i=n(),Ar[e]=!0),r&&t({metric:r}),Br(e,t,o?i:void 0)}function jr(e,t){$r[e]=$r[e]||[],$r[e].push(t)}function Br(e,t,n){return function(){n&&n();var r=$r[e];if(r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}}function Ur(e){return"number"===typeof e&&isFinite(e)}function Gr(e,t,n,i){var o=Object.assign({},i),a=Object(Oe.k)(e).start_timestamp;return a&&a>t&&"function"===typeof e.updateStartTime&&e.updateStartTime(t),Un(e,(function(){var e=Bn(Object(r.a)({startTime:t},o));return e&&e.end(n),e}))}function Fr(){return J&&J.addEventListener&&J.performance}function Vr(e){return e/1e3}var Hr,zr,Kr=0,Wr={};function Yr(){var e=Fr();if(e&&De.a){e.mark&&J.performance.mark("sentry-tracing-init");var t=function(){return e=function(e){var t=e.metric,n=t.entries[t.entries.length-1];if(n){var r=Vr(De.a),i=Vr(n.startTime);sn&&o.c.log("[Measurements] Adding FID"),Wr.fid={value:t.value,unit:"millisecond"},Wr["mark.fid"]={value:r+i,unit:"second"}}},Nr("fid",e,Rr,Yn);var e}(),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Nr("cls",e,xr,Wn,t)}((function(e){var t=e.metric,n=t.entries[t.entries.length-1];n&&(sn&&o.c.log("[Measurements] Adding CLS"),Wr.cls={value:t.value,unit:""},zr=n)}),!0),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Nr("lcp",e,Dr,qn,t)}((function(e){var t=e.metric,n=t.entries[t.entries.length-1];n&&(sn&&o.c.log("[Measurements] Adding LCP"),Wr.lcp={value:t.value,unit:"millisecond"},Hr=n)}),!0),i=function(){return e=function(e){var t=e.metric;t.entries[t.entries.length-1]&&(sn&&o.c.log("[Measurements] Adding TTFB"),Wr.ttfb={value:t.value,unit:"millisecond"})},Nr("ttfb",e,Lr,Xn);var e}();return function(){t(),n(),r(),i()}}return function(){}}function qr(){Pr("longtask",(function(e){var t,n=e.entries,r=Object(l.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!Object(Oe.d)())return;var o=Vr(De.a+i.startTime),a=Vr(i.duration),s=Bn({name:"Main UI thread blocked",op:"ui.long-task",startTime:o,attributes:Object(Tn.a)({},$n.g,"auto.ui.browser.metrics")});s&&s.end(o+a)}}catch(c){r.e(c)}finally{r.f()}}))}function Xr(){Pr("event",(function(e){var t,n=e.entries,r=Object(l.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!Object(Oe.d)())return;if("click"===i.name){var o=Vr(De.a+i.startTime),a=Vr(i.duration),s={name:Object(mt.d)(i.target),op:"ui.interaction.".concat(i.name),startTime:o,attributes:Object(Tn.a)({},$n.g,"auto.ui.browser.metrics")},c=Object(mt.a)(i.target);c&&(s.attributes["ui.component_name"]=c);var u=Bn(s);u&&u.end(o+a)}}}catch(d){r.e(d)}finally{r.f()}}))}function Jr(e){var t=Fr();if(t&&J.performance.getEntries&&De.a){sn&&o.c.log("[Tracing] Adding & adjusting spans using Performance API");var n=Vr(De.a),r=t.getEntries(),i=Object(Oe.k)(e),a=i.op,s=i.start_timestamp;if(r.slice(Kr).forEach((function(t){var r=Vr(t.startTime),i=Vr(t.duration);if(!("navigation"===a&&s&&n+r<s))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((function(r){Zr(e,t,r,n)})),Zr(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Zr(e,t,"fetch",n,"cache","domainLookupStart"),Zr(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(Gr(e,n+Vr(t.requestStart),n+Vr(t.responseEnd),{op:"browser",name:"request",attributes:Object(Tn.a)({},$n.g,"auto.ui.browser.metrics")}),Gr(e,n+Vr(t.responseStart),n+Vr(t.responseEnd),{op:"browser",name:"response",attributes:Object(Tn.a)({},$n.g,"auto.ui.browser.metrics")}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":!function(e,t,n,r,i){var o=i+n;Gr(e,o,o+r,{name:t.name,op:t.entryType,attributes:Object(Tn.a)({},$n.g,"auto.resource.browser.metrics")})}(e,t,r,i,n);var c=sr(),l=t.startTime<c.firstHiddenTime;"first-paint"===t.name&&l&&(sn&&o.c.log("[Measurements] Adding FP"),Wr.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&l&&(sn&&o.c.log("[Measurements] Adding FCP"),Wr.fcp={value:t.startTime,unit:"millisecond"});break;case"resource":!function(e,t,n,r,i,o){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;var a=bt(n),s=Object(Tn.a)({},$n.g,"auto.resource.browser.metrics");Qr(s,t,"transferSize","http.response_transfer_size"),Qr(s,t,"encodedBodySize","http.response_content_length"),Qr(s,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(s["resource.render_blocking_status"]=t.renderBlockingStatus);a.protocol&&(s["url.scheme"]=a.protocol.split(":").pop());a.host&&(s["server.address"]=a.host);s["url.same_origin"]=n.includes(J.location.origin);var c=o+r;Gr(e,c,c+i,{name:n.replace(J.location.origin,""),op:t.initiatorType?"resource.".concat(t.initiatorType):"resource.other",attributes:s})}(e,t,t.name,r,i,n)}})),Kr=Math.max(r.length-1,0),function(e){var t=J.navigator;if(!t)return;var n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Ur(n.rtt)&&(Wr["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Ur(t.deviceMemory)&&e.setAttribute("deviceMemory","".concat(t.deviceMemory," GB"));Ur(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===a){!function(e){var t=Qn();if(!t)return;var n=t.responseStart,r=t.requestStart;r<=n&&(sn&&o.c.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Wr),["fcp","fp","lcp"].forEach((function(e){if(Wr[e]&&s&&!(n>=s)){var t=Wr[e].value,r=n+Vr(t),i=Math.abs(1e3*(r-s)),a=i-t;sn&&o.c.log("[Measurements] Normalized ".concat(e," from ").concat(t," to ").concat(i," (").concat(a,")")),Wr[e].value=i}}));var c=Wr["mark.fid"];c&&Wr.fid&&(Gr(e,c.value,c.value+Vr(Wr.fid.value),{name:"first input delay",op:"ui.action",attributes:Object(Tn.a)({},$n.g,"auto.ui.browser.metrics")}),delete Wr["mark.fid"]),"fcp"in Wr||delete Wr.cls,Object.keys(Wr).forEach((function(e){!function(e,t,n){var r,i=Object(Oe.d)(),o=i&&Object(Oe.e)(i);o&&o.addEvent(e,(r={},Object(Tn.a)(r,$n.e,t),Object(Tn.a)(r,$n.d,n),r))}(e,Wr[e].value,Wr[e].unit)})),function(e){Hr&&(sn&&o.c.log("[Measurements] Adding LCP Data"),Hr.element&&e.setAttribute("lcp.element",Object(mt.d)(Hr.element)),Hr.id&&e.setAttribute("lcp.id",Hr.id),Hr.url&&e.setAttribute("lcp.url",Hr.url.trim().slice(0,200)),e.setAttribute("lcp.size",Hr.size));zr&&zr.sources&&(sn&&o.c.log("[Measurements] Adding CLS Data"),zr.sources.forEach((function(t,n){return e.setAttribute("cls.source.".concat(n+1),Object(mt.d)(t.node))})))}(e)}Hr=void 0,zr=void 0,Wr={}}}function Zr(e,t,n,r,i,o){var a=o?t[o]:t["".concat(n,"End")],s=t["".concat(n,"Start")];s&&a&&Gr(e,r+Vr(s),r+Vr(a),{op:"browser",name:i||n,attributes:Object(Tn.a)({},$n.g,"auto.ui.browser.metrics")})}function Qr(e,t,n,r){var i=t[n];null!=i&&i<2147483647&&(e[r]=i)}function ei(){if(Fr()&&De.a){var e=function(){return e=function(e){var t,n,r=e.metric,i=Object(d.a)();if(i&&void 0!=r.value){var o=r.entries.find((function(e){return e.duration===r.value&&ti[e.name]}));if(o){var a=ti[o.name],s=i.getOptions(),c=Vr(De.a+o.startTime),l=Vr(r.value),u=Object(d.b)(),h=Object(Oe.d)(),f=h?Object(Oe.e)(h):void 0,p=f?Object(Oe.k)(f).description:void 0,g=u.getUser(),y=i.getIntegrationByName("Replay"),v=y&&y.getReplayId(),m=void 0!==g?g.email||g.id||g.ip_address:void 0,_=void 0;try{_=u.getScopeData().contexts.profile.profile_id}catch(w){}var b=Object(mt.d)(o.target),E=Object(S.c)((t={release:s.release,environment:s.environment,transaction:p},Object(Tn.a)(t,$n.a,r.value),Object(Tn.a)(t,"user",m||void 0),Object(Tn.a)(t,"profile_id",_||void 0),Object(Tn.a)(t,"replay_id",v||void 0),t)),T=Bn({name:b,op:"ui.interaction.".concat(a),attributes:E,startTime:c,experimental:{standalone:!0}});T.addEvent("inp",(n={},Object(Tn.a)(n,$n.d,"millisecond"),Object(Tn.a)(n,$n.e,r.value),n)),T.end(c+l)}}},Nr("inp",e,Mr,Jn);var e}();return function(){e()}}return function(){}}var ti={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};var ni={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function ri(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Map,a=!1,s="externalFinish",l=!n.disableAutoFinish,u=n.idleTimeout,h=void 0===u?ni.idleTimeout:u,f=n.finalTimeout,p=void 0===f?ni.finalTimeout:f,g=n.childSpanTimeout,y=void 0===g?ni.childSpanTimeout:g,v=n.beforeSpanEnd,m=Object(d.a)();if(!m||!An())return new In;var _=Object(d.b)(),b=Object(Oe.d)(),E=ii(e);function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(De.c)(),t=Object(Oe.f)(E).filter((function(e){return e!==E}));if(t.length){var n=t.map((function(e){return Object(Oe.k)(e).timestamp})).filter((function(e){return!!e})),r=n.length?Math.max.apply(Math,Object(i.a)(n)):void 0,o=Object(Oe.j)(e),a=Object(Oe.k)(E).start_timestamp,s=Math.min(a?a+p/1e3:1/0,Math.max(a||-1/0,Math.min(o,r||1/0)));E.end(s)}else E.end(e)}function T(){t&&(clearTimeout(t),t=void 0)}function w(e){T(),t=setTimeout((function(){!a&&0===r.size&&l&&(s="idleTimeout",S(e))}),h)}function O(e){t=setTimeout((function(){!a&&l&&(s="heartbeatFailed",S(e))}),y)}function k(e){T(),r.set(e,!0),O(Object(De.c)()+y/1e3)}function C(e){(r.has(e)&&r.delete(e),0===r.size)&&w(Object(De.c)()+h/1e3)}function $(){a=!0,r.clear(),v&&v(E),Object(Pn.b)(_,b);var e=Object(Oe.k)(E),t=e.timestamp,n=e.start_timestamp;if(t&&n){(e.data||{})[$n.c]||E.setAttribute($n.c,s),o.c.log('[Tracing] Idle span "'.concat(e.op,'" finished'));var i=Object(Oe.f)(E).filter((function(e){return e!==E})),l=0;i.forEach((function(e){e.isRecording()&&(e.setStatus({code:jn.a,message:"cancelled"}),e.end(t),c.a&&o.c.log("[Tracing] Cancelling span since span ended early",JSON.stringify(e,void 0,2)));var n=Object(Oe.k)(e),r=n.timestamp,i=void 0===r?0:r,a=n.start_timestamp,s=void 0===a?0:a,u=s<=t,d=i-s<(p+h)/1e3;if(c.a){var f=JSON.stringify(e,void 0,2);u?d||o.c.log("[Tracing] Discarding span since it finished after idle span final timeout",f):o.c.log("[Tracing] Discarding span since it happened after idle span was finished",f)}d&&u||(Object(Oe.h)(E,e),l++)})),l>0&&E.setAttribute("sentry.idle_span_discarded_spans",l)}}return m.on("spanStart",(function(e){a||e===E||Object(Oe.k)(e).timestamp||Object(Oe.f)(E).includes(e)&&k(e.spanContext().spanId)})),m.on("spanEnd",(function(e){a||(C(e.spanContext().spanId),e===E&&$())})),m.on("idleSpanEnableAutoFinish",(function(e){e===E&&(l=!0,w(),r.size&&O())})),n.disableAutoFinish||w(),setTimeout((function(){a||(E.setStatus({code:jn.a,message:"deadline_exceeded"}),s="finalTimeout",S())}),p),E}function ii(e){var t=Bn(e);return Object(Pn.b)(Object(d.b)(),t),c.a&&o.c.log("[Tracing] Started span is an idle span"),t}var oi=!1;function ai(){oi||(oi=!0,Lt(si),jt(si))}function si(){var e=Object(Oe.d)(),t=e&&Object(Oe.e)(e);if(t){c.a&&o.c.log("[Tracing] Root span: ".concat("internal_error"," -> Global error occured")),t.setStatus({code:jn.a,message:"internal_error"})}}function ci(){Ke&&Ke.document?Ke.document.addEventListener("visibilitychange",(function(){var e=Object(Oe.d)();if(e){var t=Object(Oe.e)(e);if(Ke.document.hidden&&t){var n=Object(Oe.k)(t),r=n.op,i=n.status;Le&&o.c.log("[Tracing] Transaction: ".concat("cancelled"," -> since tab moved to the background, op: ").concat(r)),i||t.setStatus({code:jn.a,message:"cancelled"}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}})):Le&&o.c.warn("[Tracing] Could not set up background tab detection due to lack of global document")}si.tag="sentry_tracingErrorCallback";var li=n(304);function ui(e,t,n,o,a){var s=Object(d.d)(),c=Object(r.a)(Object(r.a)({},s.getPropagationContext()),n.getPropagationContext()),l=c.traceId,u=c.spanId,h=c.sampled,f=c.dsc,p=a?Object(Oe.m)(a):Object(wn.a)(l,u,h),g=Object(li.c)(f||(a?Object(we.c)(a):Object(we.b)(l,t))),y=o.headers||("undefined"!==typeof Request&&Object(ce.g)(e,Request)?e.headers:void 0);if(y){if("undefined"!==typeof Headers&&Object(ce.g)(y,Headers)){var v=new Headers(y);return v.append("sentry-trace",p),g&&v.append(li.a,g),v}if(Array.isArray(y)){var m=[].concat(Object(i.a)(y),[["sentry-trace",p]]);return g&&m.push([li.a,g]),m}var _="baggage"in y?y.baggage:void 0,b=[];return Array.isArray(_)?b.push.apply(b,Object(i.a)(_)):_&&b.push(_),g&&b.push(g),Object(r.a)(Object(r.a)({},y),{},{"sentry-trace":p,baggage:b.length>0?b.join(","):void 0})}return{"sentry-trace":p,baggage:g}}function di(e){try{return new URL(e).href}catch(t){return}}function hi(e,t){if(t.response){Object(jn.d)(e,t.response.status);var n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){var r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:jn.a,message:"internal_error"});e.end()}var fi={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function pi(e){var t=Object(r.a)({traceFetch:fi.traceFetch,traceXHR:fi.traceXHR},e),n=t.traceFetch,i=t.traceXHR,o=t.shouldCreateSpanForRequest,a=t.enableHTTPTimings,c=t.tracePropagationTargets,l="function"===typeof o?o:function(e){return!0},u=function(e){return function(e,t){var n=Ke.location&&Ke.location.href;if(n){var r,i;try{r=new URL(e,n),i=new URL(n).origin}catch(c){return!1}var o=r.origin===i;return t?Object(s.c)(r.toString(),t)||o&&Object(s.c)(r.pathname,t):o}var a=!!e.match(/^\/(?!\/)/);return t?Object(s.c)(e,t):a}(e,c)},h={};n&&ft((function(e){var t=function(e,t,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"auto.http.browser";if(e.fetchData){var a=An()&&t(e.fetchData.url);if(!e.endTimestamp||!a){var s=Object(d.b)(),c=Object(d.a)(),l=e.fetchData,u=l.method,h=l.url,f=di(h),p=f?bt(f).host:void 0,g=!!Object(Oe.d)(),y=a&&g?Bn({name:"".concat(u," ").concat(h),attributes:(i={url:h,type:"fetch","http.method":u,"http.url":f,"server.address":p},Object(Tn.a)(i,$n.g,o),Object(Tn.a)(i,$n.f,"http.client"),i)}):new In;if(e.fetchData.__span=y.spanContext().spanId,r[y.spanContext().spanId]=y,n(e.fetchData.url)&&c){var v=e.args[0];e.args[1]=e.args[1]||{};var m=e.args[1];m.headers=ui(v,c,s,m,An()&&g?y:void 0)}return y}var _=e.fetchData.__span;if(!_)return;var b=r[_];b&&(hi(b,e),delete r[_])}}(e,l,u,h);if(t){var n=vi(e.fetchData.url),r=n?bt(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}a&&t&&gi(t)})),i&&st((function(e){var t=function(e,t,n,i){var o,a=e.xhr,s=a&&a.__sentry_xhr_v3__;if(!a||a.__sentry_own_request__||!s)return;var c=An()&&t(s.url);if(e.endTimestamp&&c){var l=a.__sentry_xhr_span_id__;if(!l)return;var u=i[l];return void(u&&void 0!==s.status_code&&(Object(jn.d)(u,s.status_code),u.end(),delete i[l]))}var h=vi(s.url),f=h?bt(h).host:void 0,p=!!Object(Oe.d)(),g=c&&p?Bn({name:"".concat(s.method," ").concat(s.url),attributes:(o={type:"xhr","http.method":s.method,"http.url":h,url:s.url,"server.address":f},Object(Tn.a)(o,$n.g,"auto.http.browser"),Object(Tn.a)(o,$n.f,"http.client"),o)}):new In;a.__sentry_xhr_span_id__=g.spanContext().spanId,i[a.__sentry_xhr_span_id__]=g;var y=Object(d.a)();a.setRequestHeader&&n(s.url)&&y&&function(e,t,n){var i=Object(d.b)(),o=Object(d.d)(),a=Object(r.a)(Object(r.a)({},o.getPropagationContext()),i.getPropagationContext()),s=a.traceId,c=a.spanId,l=a.sampled,u=a.dsc,h=n&&An()?Object(Oe.m)(n):Object(wn.a)(s,c,l),f=Object(li.c)(u||(n?Object(we.c)(n):Object(we.b)(s,t)));!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(li.a,n)}catch(r){}}(e,h,f)}(a,y,An()&&p?g:void 0);return g}(e,l,u,h);a&&t&&gi(t)}))}function gi(e){var t=(Object(Oe.k)(e).data||{}).url;if(t&&"string"===typeof t)var n=Pr("resource",(function(r){r.entries.forEach((function(r){(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"===typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(r)&&r.name.endsWith(t)&&(function(e){var t=function(e){var t,n="unknown",r="unknown",i="",o=Object(l.a)(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if("/"===a){var s=e.split("/"),c=Object(u.a)(s,2);n=c[0],r=c[1];break}if(!isNaN(Number(a))){n="h"===i?"http":i,r=e.split(i)[1];break}i+=a}}catch(d){o.e(d)}finally{o.f()}i===e&&(n=i);return{name:n,version:r}}(e.nextHopProtocol),n=t.name,r=t.version,i=[];if(i.push(["network.protocol.version",r],["network.protocol.name",n]),!De.a)return i;return[].concat(i,[["http.request.redirect_start",yi(e.redirectStart)],["http.request.fetch_start",yi(e.fetchStart)],["http.request.domain_lookup_start",yi(e.domainLookupStart)],["http.request.domain_lookup_end",yi(e.domainLookupEnd)],["http.request.connect_start",yi(e.connectStart)],["http.request.secure_connection_start",yi(e.secureConnectionStart)],["http.request.connection_end",yi(e.connectEnd)],["http.request.request_start",yi(e.requestStart)],["http.request.response_start",yi(e.responseStart)],["http.request.response_end",yi(e.responseEnd)]])}(r).forEach((function(t){return e.setAttribute.apply(e,Object(i.a)(t))})),setTimeout(n))}))}))}function yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return((De.a||performance.timeOrigin)+e)/1e3}function vi(e){try{return new URL(e,Ke.location.origin).href}catch(t){return}}var mi=Object(r.a)(Object(r.a)({},ni),{},{instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{}},fi);function _i(e,t,n){e.emit("startPageLoadSpan",t,n),Object(d.b)().setTransactionName(t.name);var r=Object(Oe.d)();return"pageload"===(r&&Object(Oe.k)(r).op)?r:void 0}function bi(e,t){Object(d.d)().setPropagationContext(Object(On.a)()),Object(d.b)().setPropagationContext(Object(On.a)()),e.emit("startNavigationSpan",t),Object(d.b)().setTransactionName(t.name);var n=Object(Oe.d)();return"navigation"===(n&&Object(Oe.k)(n).op)?n:void 0}function Ei(e){var t=Object(mt.b)("meta[name=".concat(e,"]"));return t?t.getAttribute("content"):void 0}function Si(e,t,n,r){var i;Ke.document&&addEventListener("click",(function(){var a="ui.action.click",s=Object(Oe.d)(),c=s&&Object(Oe.e)(s);if(c){var l=Object(Oe.k)(c).op;if(["navigation","pageload"].includes(l))return void(Le&&o.c.warn("[Tracing] Did not create ".concat(a," span because a pageload or navigation span is in progress.")))}i&&(i.setAttribute($n.c,"interactionInterrupted"),i.end(),i=void 0),r.name?i=ri({name:r.name,op:a,attributes:Object(Tn.a)({},$n.i,r.source||"url")},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):Le&&o.c.warn("[Tracing] Did not create ".concat(a," transaction because _latestRouteName is missing."))}),{once:!1,capture:!0})}!function(e){var t=Object(r.a)({},e);se(t,"react"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=bn(e);if(En())Object(o.b)((function(){console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));else{Le&&(G()||o.c.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));var n=Object(r.a)(Object(r.a)({},t),{},{stackParser:Object(V.d)(t.stackParser||on),integrations:f(t),transport:t.transport||mn});P(et,n),t.autoSessionTracking&&Sn()}}(t)}({dsn:"https://363f09ff1788a96821366db4b1c56187@sentry.crazymaplestudios.com/5",environment:"test",integrations:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ai();var t=Object(r.a)(Object(r.a)({},mi),e),n=t.enableInp,i=t.enableLongTask,a=t._experiments.enableInteractions,s=t.beforeStartSpan,c=t.idleTimeout,l=t.finalTimeout,u=t.childSpanTimeout,h=t.markBackgroundSpan,f=t.traceFetch,p=t.traceXHR,g=t.shouldCreateSpanForRequest,y=t.enableHTTPTimings,v=t.instrumentPageLoad,m=t.instrumentNavigation,_=Yr();n&&ei(),i&&qr(),a&&Xr();var b={name:void 0,source:void 0};function E(e,t){var n="pageload"===t.op,r=s?s(t):t,i=r.attributes||{};t.name!==r.name&&(i[$n.i]="custom",r.attributes=i),b.name=r.name,b.source=i[$n.i];var o=ri(r,{idleTimeout:c,finalTimeout:l,childSpanTimeout:u,disableAutoFinish:n,beforeSpanEnd:function(e){_(),Jr(e)}});function a(){["interactive","complete"].includes(Ke.document.readyState)&&e.emit("idleSpanEnableAutoFinish",o)}return n&&Ke.document&&(Ke.document.addEventListener("readystatechange",(function(){a()})),a()),o}return{name:"BrowserTracing",afterAllSetup:function(e){var t,n=Ke.location&&Ke.location.href;if(e.on("startNavigationSpan",(function(n){Object(d.a)()===e&&(t&&(Le&&o.c.log("[Tracing] Finishing current root span with op: ".concat(Object(Oe.k)(t).op)),t.end()),t=E(e,Object(r.a)({op:"navigation"},n)))})),e.on("startPageLoadSpan",(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(d.a)()===e){t&&(Le&&o.c.log("[Tracing] Finishing current root span with op: ".concat(Object(Oe.k)(t).op)),t.end());var a=i.sentryTrace||Ei("sentry-trace"),s=i.baggage||Ei("baggage"),c=Object(wn.b)(a,s);Object(d.b)().setPropagationContext(c),t=E(e,Object(r.a)({op:"pageload"},n))}})),e.on("spanEnd",(function(e){var t=Object(Oe.k)(e).op;if(e===Object(Oe.e)(e)&&("navigation"===t||"pageload"===t)){var n=Object(d.b)(),i=n.getPropagationContext();n.setPropagationContext(Object(r.a)(Object(r.a)({},i),{},{sampled:void 0!==i.sampled?i.sampled:Object(Oe.i)(e),dsc:i.dsc||Object(we.c)(e)}))}})),Ke.location){var i;if(v)_i(e,{name:Ke.location.pathname,startTime:De.a?De.a/1e3:void 0,attributes:(i={},Object(Tn.a)(i,$n.i,"url"),Object(Tn.a)(i,$n.g,"auto.pageload.browser"),i)});m&&Z((function(t){var r,i=t.to,o=t.from;void 0===o&&n&&-1!==n.indexOf(i)?n=void 0:o!==i&&(n=void 0,bi(e,{name:Ke.location.pathname,attributes:(r={},Object(Tn.a)(r,$n.i,"url"),Object(Tn.a)(r,$n.g,"auto.navigation.browser"),r)}))}))}h&&ci(),a&&Si(c,l,u,b),pi({traceFetch:f,traceXHR:p,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:g,enableHTTPTimings:y})}}}()],tracesSampleRate:.1})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n(304),i=n(51),o=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function a(e,t){var n=function(e){if(e){var t,n=e.match(o);if(n)return"1"===n[3]?t=!0:"0"===n[3]&&(t=!1),{traceId:n[1],parentSampled:t,parentSpanId:n[2]}}}(e),a=Object(r.b)(t),s=n||{},c=s.traceId,l=s.parentSpanId,u=s.parentSampled;return n?{traceId:c||Object(i.f)(),parentSpanId:l||Object(i.f)().substring(16),spanId:Object(i.f)().substring(16),sampled:u,dsc:a||{}}:{traceId:c||Object(i.f)(),spanId:Object(i.f)().substring(16)}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(i.f)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(i.f)().substring(16),n=arguments.length>2?arguments[2]:void 0,r="";return void 0!==n&&(r=n?"-1":"-0"),"".concat(e,"-").concat(t).concat(r)}},,,,,function(e,t,n){"use strict";var r=n(0),i=n.n(r),o=n(240),a=n.n(o),s=n(138),c=n.n(s);function l(){return"undefined"===typeof document||"undefined"===typeof document.visibilityState||"hidden"!==document.visibilityState}var u=new Map,d=function(e){var t=u.get(e);return{data:null===t||void 0===t?void 0:t.data,startTime:null===t||void 0===t?void 0:t.startTime}},h=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e};var p=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},g=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e};var y=function(e){var t=Object(r.useRef)((function(){throw new Error("Cannot call an event handler while rendering.")}));t.current=e;var n=Object(r.useCallback)((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.current;if(r)return r.apply(void 0,g(e))}),[t]);if("function"===typeof e)return n},v=function(e,t){var n=Object(r.useRef)(!1);Object(r.useEffect)((function(){return function(){n.current=!1}}),[]),Object(r.useEffect)((function(){if(n.current)return e();n.current=!0}),t)},m=[];var _=!1;if("undefined"!==typeof window&&window.addEventListener&&!_){var b=function(){if(l()&&("undefined"===typeof navigator.onLine||navigator.onLine))for(var e=0;e<m.length;e++){(0,m[e])()}};window.addEventListener("visibilitychange",b,!1),window.addEventListener("focus",b,!1),_=!0}var E=function(e){return m.push(e),function(){var t=m.indexOf(e);m.splice(t,1)}},S=[];var T=!1;if("undefined"!==typeof window&&window.addEventListener&&!T){window.addEventListener("visibilitychange",(function(){if(l())for(var e=0;e<S.length;e++){(0,S[e])()}}),!1),T=!0}var w=function(e){return S.push(e),function(){var t=S.indexOf(e);S.splice(t,1)}},O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},k=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},C=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(k(arguments[t]));return e},$="AHOOKS_USE_REQUEST_DEFAULT_KEY",A=function(){function e(e,t,n,r){this.count=0,this.pollingWhenVisibleFlag=!1,this.pollingTimer=void 0,this.loadingDelayTimer=void 0,this.unsubscribe=[],this.that=this,this.state={loading:!1,params:[],data:void 0,error:void 0,run:this.run.bind(this.that),mutate:this.mutate.bind(this.that),refresh:this.refresh.bind(this.that),cancel:this.cancel.bind(this.that),unmount:this.unmount.bind(this.that)},this.service=e,this.config=t,this.subscribe=n,r&&(this.state=O(O({},this.state),r)),this.debounceRun=this.config.debounceInterval?a()(this._run,this.config.debounceInterval):void 0,this.throttleRun=this.config.throttleInterval?c()(this._run,this.config.throttleInterval):void 0,this.limitRefresh=function(e,t){var n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n||(n=!0,e.apply(void 0,f(r)),setTimeout((function(){n=!1}),t))}}(this.refresh.bind(this),this.config.focusTimespan),this.config.pollingInterval&&this.unsubscribe.push(w(this.rePolling.bind(this))),this.config.refreshOnWindowFocus&&this.unsubscribe.push(E(this.limitRefresh.bind(this)))}return e.prototype.setState=function(e){void 0===e&&(e={}),this.state=O(O({},this.state),e),this.subscribe(this.state)},e.prototype._run=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.pollingTimer&&clearTimeout(this.pollingTimer),this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),this.count+=1;var r=this.count;return this.setState({loading:!this.config.loadingDelay,params:t}),this.config.loadingDelay&&(this.loadingDelayTimer=setTimeout((function(){e.setState({loading:!0})}),this.config.loadingDelay)),this.service.apply(this,C(t)).then((function(n){if(r!==e.count)return new Promise((function(){}));e.loadingDelayTimer&&clearTimeout(e.loadingDelayTimer);var i=e.config.formatResult?e.config.formatResult(n):n;return e.setState({data:i,error:void 0,loading:!1}),e.config.onSuccess&&e.config.onSuccess(i,t),i})).catch((function(n){if(r!==e.count)return new Promise((function(){}));if(e.loadingDelayTimer&&clearTimeout(e.loadingDelayTimer),e.setState({data:void 0,error:n,loading:!1}),e.config.onError&&e.config.onError(n,t),e.config.throwOnError)throw n;return console.error(n),Promise.reject("useRequest has caught the exception, if you need to handle the exception yourself, you can set options.throwOnError to true.")})).finally((function(){if(r===e.count&&e.config.pollingInterval){if(!l()&&!e.config.pollingWhenHidden)return void(e.pollingWhenVisibleFlag=!0);e.pollingTimer=setTimeout((function(){e._run.apply(e,C(t))}),e.config.pollingInterval)}}))},e.prototype.run=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.debounceRun?(this.debounceRun.apply(this,C(e)),Promise.resolve(null)):this.throttleRun?(this.throttleRun.apply(this,C(e)),Promise.resolve(null)):this._run.apply(this,C(e))},e.prototype.cancel=function(){this.debounceRun&&this.debounceRun.cancel(),this.throttleRun&&this.throttleRun.cancel(),this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingWhenVisibleFlag=!1,this.count+=1,this.setState({loading:!1})},e.prototype.refresh=function(){return this.run.apply(this,C(this.state.params))},e.prototype.rePolling=function(){this.pollingWhenVisibleFlag&&(this.pollingWhenVisibleFlag=!1,this.refresh())},e.prototype.mutate=function(e){"function"===typeof e?this.setState({data:e(this.state.data)||{}}):this.setState({data:e})},e.prototype.unmount=function(){this.cancel(),this.unsubscribe.forEach((function(e){e()}))},e}();var P=function(e,t){var n,i=t||{},o=i.refreshDeps,a=void 0===o?[]:o,s=i.manual,c=void 0!==s&&s,l=i.onSuccess,h=void 0===l?function(){}:l,f=i.onError,p=void 0===f?function(){}:f,g=i.defaultLoading,m=void 0!==g&&g,_=i.loadingDelay,b=i.pollingInterval,E=void 0===b?0:b,S=i.pollingWhenHidden,T=void 0===S||S,w=i.defaultParams,P=void 0===w?[]:w,I=i.refreshOnWindowFocus,x=void 0!==I&&I,R=i.focusTimespan,D=void 0===R?5e3:R,L=i.fetchKey,M=i.cacheKey,N=i.cacheTime,j=void 0===N?3e5:N,B=i.staleTime,U=void 0===B?0:B,G=i.debounceInterval,F=i.throttleInterval,V=i.initialData,H=i.ready,z=void 0===H||H,K=i.throwOnError,W=void 0!==K&&K,Y=Object(r.useRef)($),q=y(e),X=y(h),J=y(p),Z=y(L);"formatResult"in i&&(n=i.formatResult);var Q={formatResult:y(n),onSuccess:X,onError:J,loadingDelay:_,pollingInterval:E,pollingWhenHidden:T,refreshOnWindowFocus:!c&&x,focusTimespan:D,debounceInterval:G,throttleInterval:F,throwOnError:W},ee=y((function(e,t){re((function(n){return n[e]=t,O({},n)}))})),te=k(Object(r.useState)((function(){var e;if(M){var t=null===(e=d(M))||void 0===e?void 0:e.data;if(t){Y.current=t.newstFetchKey;var n={};return Object.keys(t.fetches).forEach((function(e){var r=t.fetches[e],i=new A(q,Q,ee.bind(null,e),{loading:r.loading,params:r.params,data:r.data,error:r.error});n[e]=i.state})),n}}return{}})),2),ne=te[0],re=te[1],ie=Object(r.useRef)(ne);ie.current=ne;var oe=Object(r.useRef)(),ae=Object(r.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(z){if(Z){var n=Z.apply(void 0,C(e));Y.current=void 0===n?$:n}var r=Y.current,i=ie.current[r];if(!i){var o=new A(q,Q,ee.bind(null,r),{data:V});i=o.state,re((function(e){return e[r]=i,O({},e)}))}return i.run.apply(i,C(e))}oe.current=e}),[L,ee,z]),se=Object(r.useRef)(ae);se.current=ae,v((function(){M&&function(e,t,n){var r=u.get(e);(null===r||void 0===r?void 0:r.timer)&&clearTimeout(r.timer);var i=void 0;t>-1&&(i=setTimeout((function(){u.delete(e)}),t)),u.set(e,{data:n,timer:i,startTime:(new Date).getTime()})}(M,j,{fetches:ne,newstFetchKey:Y.current})}),[M,ne]);var ce=Object(r.useRef)(!1);v((function(){z&&(!ce.current&&oe.current&&se.current.apply(se,C(oe.current)),ce.current=!0)}),[z]),Object(r.useEffect)((function(){var e;if(!c)if(Object.keys(ne).length>0){var t=M&&(null===(e=d(M))||void 0===e?void 0:e.startTime)||0;-1===U||(new Date).getTime()-t<=U||Object.values(ne).forEach((function(e){e.refresh()}))}else se.current.apply(se,C(P))}),[]);var le=Object(r.useCallback)((function(){Object.values(ie.current).forEach((function(e){e.unmount()})),Y.current=$,re({}),ie.current={}}),[re]);v((function(){c||Object.values(ie.current).forEach((function(e){e.refresh()}))}),C(a)),Object(r.useEffect)((function(){return function(){Object.values(ie.current).forEach((function(e){e.unmount()}))}}),[]);var ue=Object(r.useCallback)((function(e){return function(){console.warn("You should't call "+e+" when service not executed once.")}}),[]);return O(O({loading:z&&!c||m,data:V,error:void 0,params:[],cancel:ue("cancel"),refresh:ue("refresh"),mutate:ue("mutate")},ne[Y.current]||{}),{run:ae,fetches:ne,reset:le})},I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},R=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},D=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(R(arguments[t]));return e};var L=function(e,t){var n=t.refreshDeps,i=void 0===n?[]:n,o=t.ref,a=t.isNoMore,s=t.threshold,c=void 0===s?100:s,l=(t.fetchKey,x(t,["refreshDeps","ref","isNoMore","threshold","fetchKey"])),u=R(Object(r.useState)(!1),2),d=u[0],h=u[1];Object(r.useEffect)((function(){t.fetchKey&&console.warn("useRequest loadMore mode don't need fetchKey!")}),[]);var f=P(e,I(I({},l),{fetchKey:function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.list)||void 0===t?void 0:t.length)||0},onSuccess:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];h(!1),t.onSuccess&&t.onSuccess.apply(t,D(e))}})),p=f.data,g=f.run,y=f.params,m=f.reset,_=f.loading,b=f.fetches,E=Object(r.useCallback)((function(){m();var e=R(y).slice(1);g.apply(void 0,D([void 0],e))}),[g,m,y]),S=Object(r.useRef)(E);S.current=E,v((function(){t.manual||S.current()}),D(i));var T=Object(r.useMemo)((function(){var e=[],t=p;return Object.values(b).forEach((function(n){var r,i;(null===(r=n.data)||void 0===r?void 0:r.list)&&(e=e.concat(null===(i=n.data)||void 0===i?void 0:i.list)),n.loading||(t=n.data)})),I(I({},t),{list:e})}),[b,p]),w=!!a&&(!_&&!d&&a(T)),O=Object(r.useCallback)((function(){if(!w){h(!0);var e=R(y).slice(1);g.apply(void 0,D([T],e))}}),[w,g,T,y]),k=function(){!_&&!d&&o&&o.current&&o.current.scrollHeight-o.current.scrollTop<=o.current.clientHeight+c&&O()},C=Object(r.useRef)(k);return C.current=k,Object(r.useEffect)((function(){if(!o||!o.current)return function(){};var e=function(){return C.current()};return o.current.addEventListener("scroll",e),function(){o&&o.current&&o.current.removeEventListener("scroll",e)}}),[C]),I(I({},f),{data:T,reload:E,loading:_&&0===T.list.length,loadMore:O,loadingMore:d,noMore:w})},M=function(){return(M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},N=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},j=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},B=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(j(arguments[t]));return e};var U=function(e,t){t.paginated;var n=t.defaultPageSize,i=void 0===n?10:n,o=t.refreshDeps,a=void 0===o?[]:o,s=t.fetchKey,c=N(t,["paginated","defaultPageSize","refreshDeps","fetchKey"]);Object(r.useEffect)((function(){s&&console.error("useRequest pagination's fetchKey will not work!")}),[]);var l=P(e,M({defaultParams:[{current:1,pageSize:i}]},c)),u=l.data,d=l.params,h=l.run,f=l.loading,p=N(l,["data","params","run","loading"]),g=d&&d[0]?d[0]:{},y=g.current,m=void 0===y?1:y,_=g.pageSize,b=void 0===_?i:_,E=g.sorter,S=void 0===E?{}:E,T=g.filters,w=void 0===T?{}:T,O=Object(r.useCallback)((function(e){var t=j(d),n=t[0],r=t.slice(1);h.apply(void 0,B([M(M({},n),e)],r))}),[h,d]),k=(null===u||void 0===u?void 0:u.total)||0,C=Object(r.useMemo)((function(){return Math.ceil(k/b)}),[b,k]),$=Object(r.useCallback)((function(e,t){var n=e<=0?1:e,r=t<=0?1:t,i=Math.ceil(k/r);n>i&&(n=i),O({current:e,pageSize:t})}),[k,O]),A=Object(r.useCallback)((function(e){$(e,b)}),[$,b]),I=Object(r.useCallback)((function(e){$(m,e)}),[$,m]),x=Object(r.useRef)(A);x.current=A,v((function(){t.manual||x.current(1)}),B(a));var R=Object(r.useCallback)((function(e,t,n){O({current:e.current,pageSize:e.pageSize||i,filters:t,sorter:n})}),[w,S,O]);return M({loading:f,data:u,params:d,run:h,pagination:{current:m,pageSize:b,total:k,totalPage:C,onChange:$,changeCurrent:A,changePageSize:I},tableProps:{dataSource:(null===u||void 0===u?void 0:u.list)||[],loading:f,onChange:R,pagination:{current:m,pageSize:b,total:k}},sorter:S,filters:w},p)},G=i.a.createContext({});G.displayName="UseRequestConfigContext";var F=G,V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},H=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},z=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},K=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(z(arguments[t]));return e};F.Provider,t.a=function(e,t){void 0===t&&(t={});var n=Object(r.useContext)(F),i=V(V({},n),t),o=i.paginated,a=i.loadMore,s=i.requestMethod,c=Object(r.useRef)(o),l=Object(r.useRef)(a);if(c.current!==o)throw Error("You should not modify the paginated of options");if(l.current!==a)throw Error("You should not modify the loadMore of options");c.current=o,l.current=a;var u,d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fetch.apply(void 0,K(e)).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)}))},h=s||d;switch(typeof e){case"string":u=function(){return h(e)};break;case"object":var f=e.url,p=H(e,["url"]);u=function(){return s?s(e):d(f,p)};break;default:u=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,r){var i=e.apply(void 0,K(t)),o=i;if(!i.then)switch(typeof i){case"string":o=h(i);break;case"object":var a=i.url,c=H(i,["url"]);o=s?s(i):d(a,c)}o.then(n).catch(r)}))}}return a?L(u,i):o?U(u,i):P(u,i)}},,,,,,,,,,,,,,,function(module,exports,__webpack_require__){(function(global,module){var t;t=function(){"use strict";function ownKeys$7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2$5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$7(Object(n),!0).forEach((function(t){_defineProperty$6(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _regeneratorRuntime$2(){_regeneratorRuntime$2=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i,o,a,s,c=t&&t.prototype instanceof d?t:d,h=Object.create(c.prototype),f=new T(r||[]);return h._invoke=(i=e,o=n,a=f,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return{value:void 0,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){var r=b(n,a);if(r){if(r===u)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";var c=l(i,o,a);if("normal"===c.type){if(s=a.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(s="completed",a.method="throw",a.arg=c.arg)}}),h}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=c;var u={};function d(){}function h(){}function f(){}var p={};s(p,i,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(w([])));y&&y!==t&&n.call(y,i)&&(p=y);var v=f.prototype=d.prototype=Object.create(p);function m(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function w(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=f,s(v,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},m(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(v),s(v,a,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep$3(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function _asyncToGenerator$3(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){asyncGeneratorStep$3(o,r,i,a,s,"next",e)}function s(e){asyncGeneratorStep$3(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$6(e,t,n){return t&&_defineProperties$6(e.prototype,t),n&&_defineProperties$6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits$5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$5(e,t)}function _getPrototypeOf$5(e){return(_getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf$5(e,t){return(_setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct$5(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _objectWithoutProperties$1(e,t){if(null==e)return{};var n,r,i=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _assertThisInitialized$5(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn$5(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(e)}function _createSuper$5(e){var t=_isNativeReflectConstruct$5();return function(){var n,r=_getPrototypeOf$5(e);if(t){var i=_getPrototypeOf$5(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn$5(this,n)}}function _superPropBase$3(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf$5(e)););return e}function _get$3(){return(_get$3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_superPropBase$3(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray$2(e,t)||_nonIterableRest()}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$2(e)||_nonIterableSpread$1()}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$2(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray$1(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}function _unsupportedIterableToArray$2(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$2(e,t):void 0}}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper$1(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray$2(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function listCacheClear(){this.__data__=[],this.size=0}function eq(e,t){return e===t||e!=e&&t!=t}function assocIndexOf(e,t){for(var n=e.length;n--;)if(eq(e[n][0],t))return n;return-1}var arrayProto=Array.prototype,splice$1=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,n=assocIndexOf(t,e);return!(n<0)&&(n==t.length-1?t.pop():splice$1.call(t,n,1),--this.size,!0)}function listCacheGet(e){var t=this.__data__,n=assocIndexOf(t,e);return n<0?void 0:t[n][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var n=this.__data__,r=assocIndexOf(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var freeGlobal="object"==("undefined"==typeof global?"undefined":_typeof$4(global))&&global&&global.Object===Object&&global,freeGlobal$1=freeGlobal,freeSelf="object"==("undefined"==typeof self?"undefined":_typeof$4(self))&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")(),root$1=root,_Symbol$2=root$1.Symbol,_Symbol$3=_Symbol$2,objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=_Symbol$3?_Symbol$3.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty$d.call(e,symToStringTag$1),n=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var r=!0}catch(o){}var i=nativeObjectToString$1.call(e);return r&&(t?e[symToStringTag$1]=n:delete e[symToStringTag$1]),i}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=_Symbol$3?_Symbol$3.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}function isObject$o(e){var t=_typeof$4(e);return null!=e&&("object"==t||"function"==t)}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(e){if(!isObject$o(e))return!1;var t=baseGetTag(e);return t==funcTag$2||t==genTag$1||t==asyncTag||t==proxyTag}var coreJsData=root$1["__core-js_shared__"],coreJsData$1=coreJsData,maskSrcKey=(uid2=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||""),uid2?"Symbol(src)_1."+uid2:""),uid2;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(e){if(null!=e){try{return funcToString$1.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$d=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject$o(e)||isMasked(e))&&(isFunction$1(e)?reIsNative:reIsHostCtor).test(toSource(e))}function getValue(e,t){return null==e?void 0:e[t]}function getNative(e,t){var n=getValue(e,t);return baseIsNative(n)?n:void 0}var Map$1=getNative(root$1,"Map"),Map$2=Map$1,nativeCreate=getNative(Object,"create"),nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function hashGet(e){var t=this.__data__;if(nativeCreate$1){var n=t[e];return n===HASH_UNDEFINED$2?void 0:n}return hasOwnProperty$b.call(t,e)?t[e]:void 0}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty;function hashHas(e){var t=this.__data__;return nativeCreate$1?void 0!==t[e]:hasOwnProperty$a.call(t,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nativeCreate$1&&void 0===t?HASH_UNDEFINED$1:t,this}function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(e){var t=_typeof$4(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function getMapData(e,t){var n=e.__data__;return isKeyable(t)?n["string"==typeof t?"string":"hash"]:n.map}function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){var n=getMapData(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE$1=200;function stackSet(e,t){var n=this.__data__;if(n instanceof ListCache){var r=n.__data__;if(!Map$2||r.length<LARGE_ARRAY_SIZE$1-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new MapCache(r)}return n.set(e,t),this.size=n.size,this}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}function arrayEach(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var defineProperty$e=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),defineProperty$f=defineProperty$e;function baseAssignValue(e,t,n){"__proto__"==t&&defineProperty$f?defineProperty$f(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function assignValue(e,t,n){var r=e[t];hasOwnProperty$9.call(e,t)&&eq(r,n)&&(void 0!==n||t in e)||baseAssignValue(e,t,n)}function copyObject(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?baseAssignValue(n,s,c):assignValue(n,s,c)}return n}function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function isObjectLike(e){return null!=e&&"object"==_typeof$4(e)}var argsTag$3="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag$3}var objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,propertyIsEnumerable$2=objectProto$9.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$8.call(e,"callee")&&!propertyIsEnumerable$2.call(e,"callee")},isArguments$1=isArguments,isArray$6=Array.isArray,isArray$7=isArray$6;function stubFalse(){return!1}var freeExports$2="object"==_typeof$4(exports)&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==_typeof$4(module)&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,isBuffer$1=isBuffer,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var n=_typeof$4(e);return!!(t=null==t?MAX_SAFE_INTEGER$2:t)&&("number"==n||"symbol"!=n&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$1}var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$3="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(t){return e(t)}}typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0,typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;var freeExports$1="object"==_typeof$4(exports)&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==_typeof$4(module)&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{return freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(t){}}(),nodeUtil$1=nodeUtil,nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray$3=isTypedArray$2,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function arrayLikeKeys(e,t){var n=isArray$7(e),r=!n&&isArguments$1(e),i=!n&&!r&&isBuffer$1(e),o=!n&&!r&&!i&&isTypedArray$3(e),a=n||r||i||o,s=a?baseTimes(e.length,String):[],c=s.length;for(var l in e)!t&&!hasOwnProperty$7.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||isIndex(l,c))||s.push(l);return s}var objectProto$7=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$7)}function overArg(e,t){return function(n){return e(t(n))}}var nativeKeys$1=overArg(Object.keys,Object),nativeKeys$2=nativeKeys$1,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys$2(e);var t=[];for(var n in Object(e))hasOwnProperty$6.call(e,n)&&"constructor"!=n&&t.push(n);return t}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction$1(e)}function keys$4(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function baseAssign(e,t){return e&&copyObject(t,keys$4(t),e)}function nativeKeysIn(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function baseKeysIn(e){if(!isObject$o(e))return nativeKeysIn(e);var t=isPrototype(e),n=[];for(var r in e)("constructor"!=r||!t&&hasOwnProperty$5.call(e,r))&&n.push(r);return n}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}function baseAssignIn(e,t){return e&&copyObject(t,keysIn(t),e)}var freeExports="object"==_typeof$4(exports)&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==_typeof$4(module)&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;function cloneBuffer(e,t){if(t)return e.slice();var n=e.length,r=allocUnsafe?allocUnsafe(n):new e.constructor(n);return e.copy(r),r}function copyArray(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function arrayFilter(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function stubArray(){return[]}var objectProto$4=Object.prototype,propertyIsEnumerable$1=objectProto$4.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(e){return null==e?[]:(e=Object(e),arrayFilter(nativeGetSymbols$1(e),(function(t){return propertyIsEnumerable$1.call(e,t)})))}:stubArray,getSymbols$1=getSymbols;function copySymbols(e,t){return copyObject(e,getSymbols$1(e),t)}function arrayPush(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var getPrototype=overArg(Object.getPrototypeOf,Object),getPrototype$1=getPrototype,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(e){for(var t=[];e;)arrayPush(t,getSymbols$1(e)),e=getPrototype$1(e);return t}:stubArray,getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(e,t){return copyObject(e,getSymbolsIn$1(e),t)}function baseGetAllKeys(e,t,n){var r=t(e);return isArray$7(e)?r:arrayPush(r,n(e))}function getAllKeys(e){return baseGetAllKeys(e,keys$4,getSymbols$1)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,getSymbolsIn$1)}var DataView$2=getNative(root$1,"DataView"),DataView$3=DataView$2,Promise$2=getNative(root$1,"Promise"),Promise$3=Promise$2,Set$1=getNative(root$1,"Set"),Set$2=Set$1,WeakMap$2=getNative(root$1,"WeakMap"),WeakMap$3=WeakMap$2,mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$3),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$3),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$3),getTag=baseGetTag;(DataView$3&&getTag(new DataView$3(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$3&&getTag(Promise$3.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$3&&getTag(new WeakMap$3)!=weakMapTag$1)&&(getTag=function(e){var t=baseGetTag(e),n=t==objectTag$2?e.constructor:void 0,r=n?toSource(n):"";if(r)switch(r){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return t});var getTag$1=getTag,objectProto$3=Object.prototype,hasOwnProperty$4=objectProto$3.hasOwnProperty;function initCloneArray(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$4.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Uint8Array$3=root$1.Uint8Array,Uint8Array$4=Uint8Array$3;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new Uint8Array$4(t).set(new Uint8Array$4(e)),t}function cloneDataView(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var reFlags=/\w*$/;function cloneRegExp(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}var symbolProto$2=_Symbol$3?_Symbol$3.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}function cloneTypedArray(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,t,n){var r=e.constructor;switch(t){case arrayBufferTag$2:return cloneArrayBuffer(e);case boolTag$2:case dateTag$2:return new r(+e);case dataViewTag$2:return cloneDataView(e,n);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(e,n);case mapTag$3:return new r;case numberTag$2:case stringTag$2:return new r(e);case regexpTag$2:return cloneRegExp(e);case setTag$3:return new r;case symbolTag$3:return cloneSymbol(e)}}var objectCreate$1=Object.create,baseCreate=function(){function e(){}return function(t){if(!isObject$o(t))return{};if(objectCreate$1)return objectCreate$1(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),baseCreate$1=baseCreate;function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:baseCreate$1(getPrototype$1(e))}var mapTag$2="[object Map]";function baseIsMap(e){return isObjectLike(e)&&getTag$1(e)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,isMap$1=isMap,setTag$2="[object Set]";function baseIsSet(e){return isObjectLike(e)&&getTag$1(e)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet$1=isSet,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};function baseClone(e,t,n,r,i,o){var a,s=t&CLONE_DEEP_FLAG$1,c=t&CLONE_FLAT_FLAG,l=t&CLONE_SYMBOLS_FLAG$1;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!isObject$o(e))return e;var u=isArray$7(e);if(u){if(a=initCloneArray(e),!s)return copyArray(e,a)}else{var d=getTag$1(e),h=d==funcTag||d==genTag;if(isBuffer$1(e))return cloneBuffer(e,s);if(d==objectTag$1||d==argsTag$1||h&&!i){if(a=c||h?{}:initCloneObject(e),!s)return c?copySymbolsIn(e,baseAssignIn(a,e)):copySymbols(e,baseAssign(a,e))}else{if(!cloneableTags[d])return i?e:{};a=initCloneByTag(e,d,s)}}o||(o=new Stack);var f=o.get(e);if(f)return f;o.set(e,a),isSet$1(e)?e.forEach((function(r){a.add(baseClone(r,t,n,r,e,o))})):isMap$1(e)&&e.forEach((function(r,i){a.set(i,baseClone(r,t,n,i,e,o))}));var p=u?void 0:(l?c?getAllKeysIn:getAllKeys:c?keysIn:keys$4)(e);return arrayEach(p||e,(function(r,i){p&&(r=e[i=r]),assignValue(a,i,baseClone(r,t,n,i,e,o))})),a}cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(e){return baseClone(e,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new MapCache;++t<n;)this.add(e[t])}function arraySome(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function cacheHas(e,t){return e.has(t)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(e,t,n,r,i,o){var a=n&COMPARE_PARTIAL_FLAG$5,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var d=-1,h=!0,f=n&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],g=t[d];if(r)var y=a?r(g,p,d,t,e,o):r(p,g,d,e,t,o);if(void 0!==y){if(y)continue;h=!1;break}if(f){if(!arraySome(t,(function(e,t){if(!cacheHas(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)}))){h=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function setToArray(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto$1=_Symbol$3?_Symbol$3.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag(e,t,n,r,i,o,a){switch(n){case dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag:return!(e.byteLength!=t.byteLength||!o(new Uint8Array$4(e),new Uint8Array$4(t)));case boolTag:case dateTag:case numberTag:return eq(+e,+t);case errorTag:return e.name==t.name&&e.message==t.message;case regexpTag:case stringTag:return e==t+"";case mapTag:var s=mapToArray;case setTag:var c=r&COMPARE_PARTIAL_FLAG$4;if(s||(s=setToArray),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;r|=COMPARE_UNORDERED_FLAG$2,a.set(e,t);var u=equalArrays(s(e),s(t),r,i,o,a);return a.delete(e),u;case symbolTag$1:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function equalObjects(e,t,n,r,i,o){var a=n&COMPARE_PARTIAL_FLAG$3,s=getAllKeys(e),c=s.length;if(c!=getAllKeys(t).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in t:hasOwnProperty$3.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<c;){var g=e[u=s[l]],y=t[u];if(r)var v=a?r(y,g,u,t,e,o):r(g,y,u,e,t,o);if(!(void 0===v?g===y||i(g,y,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var m=e.constructor,_=t.constructor;m==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(e),o.delete(t),f}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function baseIsEqualDeep(e,t,n,r,i,o){var a=isArray$7(e),s=isArray$7(t),c=a?arrayTag:getTag$1(e),l=s?arrayTag:getTag$1(t),u=(c=c==argsTag?objectTag:c)==objectTag,d=(l=l==argsTag?objectTag:l)==objectTag,h=c==l;if(h&&isBuffer$1(e)){if(!isBuffer$1(t))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new Stack),a||isTypedArray$3(e)?equalArrays(e,t,n,r,i,o):equalByTag(e,t,c,n,r,i,o);if(!(n&COMPARE_PARTIAL_FLAG$2)){var f=u&&hasOwnProperty$2.call(e,"__wrapped__"),p=d&&hasOwnProperty$2.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,y=p?t.value():t;return o||(o=new Stack),i(g,y,n,r,o)}}return!!h&&(o||(o=new Stack),equalObjects(e,t,n,r,i,o))}function baseIsEqual(e,t,n,r,i){return e===t||(null==e||null==t||!isObjectLike(e)&&!isObjectLike(t)?e!=e&&t!=t:baseIsEqualDeep(e,t,n,r,baseIsEqual,i))}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],l=e[c],u=s[1];if(a&&s[2]){if(void 0===l&&!(c in e))return!1}else{var d=new Stack;if(r)var h=r(l,u,c,e,t,d);if(!(void 0===h?baseIsEqual(u,l,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,r,d):h))return!1}}return!0}function isStrictComparable(e){return e==e&&!isObject$o(e)}function getMatchData(e){for(var t=keys$4(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,isStrictComparable(i)]}return t}function matchesStrictComparable(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(n){return n===e||baseIsMatch(n,e,t)}}var symbolTag="[object Symbol]";function isSymbol$7(e){return"symbol"==_typeof$4(e)||isObjectLike(e)&&baseGetTag(e)==symbolTag}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray$7(e))return!1;var n=_typeof$4(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!isSymbol$7(e))||reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t)}var FUNC_ERROR_TEXT$2="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT$2);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(memoize.Cache||MapCache),n}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize(e,(function(e){return n.size===MAX_MEMOIZE_SIZE&&n.clear(),e})),n=t.cache;return t}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,(function(e,n,r,i){t.push(r?i.replace(reEscapeChar,"$1"):n||e)})),t})),stringToPath$1=stringToPath;function arrayMap(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var INFINITY$2=1/0,symbolProto=_Symbol$3?_Symbol$3.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray$7(e))return arrayMap(e,baseToString)+"";if(isSymbol$7(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$2?"-0":t}function toString$l(e){return null==e?"":baseToString(e)}function castPath(e,t){return isArray$7(e)?e:isKey(e,t)?[e]:stringToPath$1(toString$l(e))}var INFINITY$1=1/0;function toKey(e){if("string"==typeof e||isSymbol$7(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}function baseGet(e,t){for(var n=0,r=(t=castPath(t,e)).length;null!=e&&n<r;)e=e[toKey(t[n++])];return n&&n==r?e:void 0}function get$2(e,t,n){var r=null==e?void 0:baseGet(e,t);return void 0===r?n:r}function baseHasIn(e,t){return null!=e&&t in Object(e)}function hasPath(e,t,n){for(var r=-1,i=(t=castPath(t,e)).length,o=!1;++r<i;){var a=toKey(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&isLength(i)&&isIndex(a,i)&&(isArray$7(e)||isArguments$1(e))}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(n){var r=get$2(n,e);return void 0===r&&r===t?hasIn(n,e):baseIsEqual(t,r,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function identity(e){return e}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==_typeof$4(e)?isArray$7(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseFindIndex(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function baseIsNaN(e){return e!=e}function strictIndexOf(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function baseIndexOf(e,t,n){return t==t?strictIndexOf(e,t,n):baseFindIndex(e,baseIsNaN,n)}function arrayIncludes$1(e,t){return!(null==e||!e.length)&&baseIndexOf(e,t,0)>-1}function arrayIncludesWith(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function noop$1(){}var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function(e){return new Set$2(e)}:noop$1,createSet$1=createSet,LARGE_ARRAY_SIZE=200;function baseUniq(e,t,n){var r=-1,i=arrayIncludes$1,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=arrayIncludesWith;else if(o>=LARGE_ARRAY_SIZE){var l=t?null:createSet$1(e);if(l)return setToArray(l);a=!1,i=cacheHas,c=new SetCache}else c=t?[]:s;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),s.push(u)}else i(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}function uniqBy(e,t){return e&&e.length?baseUniq(e,baseIteratee(t)):[]}var CodecType=(e=CodecType||{},e.H265="h265",e.H264="h264",e),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},proxy=function(){var e,t=null;function n(e){return!!e&&("object"===_typeof$4(e)||"function"==typeof e)}function r(e){if(null!==e&&!n(e))throw new TypeError("Object prototype may only be an Object or null: "+e)}var i=Object,o=Boolean(i.create)||!({__proto__:null}instanceof i),a=i.create||(o?function(e){return r(e),{__proto__:e}}:function(e){if(r(e),null===e)throw new SyntaxError("Native Object.create is required to create objects with null prototype");var t=function(){};return t.prototype=e,new t}),s=function(){return null},c=i.getPrototypeOf||([].__proto__===Array.prototype?function(e){var t=e.__proto__;return n(t)?t:null}:s);return(e=function(l,u){if(void 0===(this&&this instanceof e?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");if(!n(l)||!n(u))throw new TypeError("Cannot create proxy with a non-object as target or handler");var d=function(){};t=function(){l=null,d=function(e){throw new TypeError("Cannot perform '".concat(e,"' on a proxy that has been revoked"))}},setTimeout((function(){t=null}),0);var h=u;for(var f in u={get:null,set:null,apply:null,construct:null},h){if(!(f in u))throw new TypeError("Proxy polyfill does not support trap '".concat(f,"'"));u[f]=h[f]}"function"==typeof h&&(u.apply=h.apply.bind(h));var p,g=c(l),y=!1,v=!1;"function"==typeof l?(p=function(){var e=this&&this.constructor===p,t=Array.prototype.slice.call(arguments);if(d(e?"construct":"apply"),e&&u.construct)return u.construct.call(this,l,t);if(!e&&u.apply)return u.apply(l,this,t);if(e){t.unshift(l);var n=l.bind.apply(l,t);return new n}return l.apply(this,t)},y=!0):l instanceof Array?(p=[],v=!0):p=o||null!==g?a(g):{};var m=u.get?function(e){return d("get"),u.get(this,e,p)}:function(e){return d("get"),this[e]},_=u.set?function(e,t){d("set"),u.set(this,e,t,p)}:function(e,t){d("set"),this[e]=t},b=i.getOwnPropertyNames(l),E={};b.forEach((function(e){if(!y&&!v||!(e in p)){var t=i.getOwnPropertyDescriptor(l,e),n={enumerable:Boolean(t.enumerable),get:m.bind(l,e),set:_.bind(l,e)};i.defineProperty(p,e,n),E[e]=!0}}));var S=!0;if(y||v){var T=i.setPrototypeOf||([].__proto__===Array.prototype?function(e,t){return r(t),e.__proto__=t,e}:s);g&&T(p,g)||(S=!1)}if(u.get||!S)for(var w in l)E[w]||i.defineProperty(p,w,{get:m.bind(l,w)});return i.seal(l),i.seal(p),p}).revocable=function(n,r){return{proxy:new e(n,r),revoke:t}},e},Proxy$1=proxy(),MyProxy=function(){function e(){_classCallCheck$5(this,e),this.subscribeId=0,this.watcherMap=new Map}return _createClass$6(e,[{key:"observe",value:function(e){var t=this,n=new Proxy$1(e,{set:function(e,r,i){var o=Reflect.get(e,r);Reflect.set(e,r,i);var a=t.watcherMap.get(n);return a&&(t.flushCallback(a),t.flushPropertyCallback(a,r,o,i)),!0}});return this.watcherMap.set(n,{pending:!1,queue:[],property:{}}),n}},{key:"subscribe",value:function(e,t){var n=this.watcherMap.get(e);if(n)return this.subscribeId++,n.queue.push({id:this.subscribeId,callback:t}),this.subscribeId}},{key:"unsubscribe",value:function(e,t){var n=this.watcherMap.get(e);if(n){var r=n.queue,i=r.findIndex((function(e){return e.id===t}));void 0!==i&&i>-1&&r.splice(i,1)}}},{key:"subscribeProperty",value:function(e,t,n){var r=this.watcherMap.get(e);r&&(this.subscribeId++,r.property[t]||(r.property[t]={pending:!1,timer:0,pre:null,queue:[]}),r.property[t].queue.push({id:this.subscribeId,callback:n}))}},{key:"unsubscribeProperty",value:function(e,t,n){var r=this.watcherMap.get(e);if(r){var i=r.property[t];if(i){var o=i.queue,a=o.findIndex((function(e){return e.id===n}));void 0!==a&&a>-1&&o.splice(a,1)}}}},{key:"flushCallback",value:function(e){e.pending||(e.pending=!0,setTimeout((function(){e.queue.forEach((function(e){return e.callback()})),e.pending=!1}),0))}},{key:"flushPropertyCallback",value:function(e,t,n,r){var i=e.property[t];i&&(clearTimeout(i.timer),!1===i.pending&&(i.pending=!0,i.pre=n),i.timer=setTimeout((function(){i.queue.forEach((function(e){return e.callback(i.pre,r)})),i.pending=!1}),0))}}]),e}(),MyProxy$1=new MyProxy,e;function ownKeys$6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2$4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$6(Object(n),!0).forEach((function(t){_defineProperty$5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey$3(r.key),r)}}function _createClass$5(e,t,n){return t&&_defineProperties$5(e.prototype,t),n&&_defineProperties$5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$5(e,t,n){return(t=_toPropertyKey$3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits$4(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$4(e,t)}function _getPrototypeOf$4(e){return(_getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf$4(e,t){return(_setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct$4(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _assertThisInitialized$4(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn$4(e,t){if(t&&("object"===_typeof$4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(e)}function _createSuper$4(e){var t=_isNativeReflectConstruct$4();return function(){var n,r=_getPrototypeOf$4(e);if(t){var i=_getPrototypeOf$4(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn$4(this,n)}}function _superPropBase$2(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf$4(e)););return e}function _get$2(){return(_get$2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_superPropBase$2(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toPrimitive$3(e,t){if("object"!==_typeof$4(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof$4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return"symbol"===_typeof$4(t)?t:String(t)}var check=function(e){return e&&e.Math==Math&&e},global$H=check("object"==("undefined"==typeof globalThis?"undefined":_typeof$4(globalThis))&&globalThis)||check("object"==("undefined"==typeof window?"undefined":_typeof$4(window))&&window)||check("object"==("undefined"==typeof self?"undefined":_typeof$4(self))&&self)||check("object"==_typeof$4(commonjsGlobal)&&commonjsGlobal)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$L=function(e){try{return!!e()}catch(t){return!0}},fails$K=fails$L,descriptors=!fails$K((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),fails$J=fails$L,functionBindNative=!fails$J((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),NATIVE_BIND$4=functionBindNative,call$u=Function.prototype.call,functionCall=NATIVE_BIND$4?call$u.bind(call$u):function(){return call$u.apply(call$u,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable$2={}.propertyIsEnumerable,getOwnPropertyDescriptor$5=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$5&&!$propertyIsEnumerable$2.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor$5(this,e);return!!t&&t.enumerable}:$propertyIsEnumerable$2;var createPropertyDescriptor$7=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},NATIVE_BIND$3=functionBindNative,FunctionPrototype$3=Function.prototype,call$t=FunctionPrototype$3.call,uncurryThisWithBind=NATIVE_BIND$3&&FunctionPrototype$3.bind.bind(call$t,call$t),functionUncurryThisRaw=NATIVE_BIND$3?uncurryThisWithBind:function(e){return function(){return call$t.apply(e,arguments)}},uncurryThisRaw$1=functionUncurryThisRaw,toString$k=uncurryThisRaw$1({}.toString),stringSlice$a=uncurryThisRaw$1("".slice),classofRaw$2=function(e){return stringSlice$a(toString$k(e),8,-1)},classofRaw$1=classofRaw$2,uncurryThisRaw=functionUncurryThisRaw,functionUncurryThis=function(e){if("Function"===classofRaw$1(e))return uncurryThisRaw(e)},uncurryThis$J=functionUncurryThis,fails$I=fails$L,classof$g=classofRaw$2,$Object$4=Object,split$3=uncurryThis$J("".split),indexedObject=fails$I((function(){return!$Object$4("z").propertyIsEnumerable(0)}))?function(e){return"String"==classof$g(e)?split$3(e,""):$Object$4(e)}:$Object$4,isNullOrUndefined$7=function(e){return null==e},isNullOrUndefined$6=isNullOrUndefined$7,$TypeError$k=TypeError,requireObjectCoercible$a=function(e){if(isNullOrUndefined$6(e))throw $TypeError$k("Can't call method on "+e);return e},IndexedObject$5=indexedObject,requireObjectCoercible$9=requireObjectCoercible$a,toIndexedObject$c=function(e){return IndexedObject$5(requireObjectCoercible$9(e))},documentAll$2="object"==("undefined"==typeof document?"undefined":_typeof$4(document))&&document.all,IS_HTMLDDA=void 0===documentAll$2&&void 0!==documentAll$2,documentAll_1={all:documentAll$2,IS_HTMLDDA:IS_HTMLDDA},$documentAll$1=documentAll_1,documentAll$1=$documentAll$1.all,isCallable$u=$documentAll$1.IS_HTMLDDA?function(e){return"function"==typeof e||e===documentAll$1}:function(e){return"function"==typeof e},isCallable$t=isCallable$u,$documentAll=documentAll_1,documentAll=$documentAll.all,isObject$n=$documentAll.IS_HTMLDDA?function(e){return"object"==_typeof$4(e)?null!==e:isCallable$t(e)||e===documentAll}:function(e){return"object"==_typeof$4(e)?null!==e:isCallable$t(e)},global$G=global$H,isCallable$s=isCallable$u,aFunction=function(e){return isCallable$s(e)?e:void 0},getBuiltIn$d=function(e,t){return arguments.length<2?aFunction(global$G[e]):global$G[e]&&global$G[e][t]},uncurryThis$I=functionUncurryThis,objectIsPrototypeOf=uncurryThis$I({}.isPrototypeOf),getBuiltIn$c=getBuiltIn$d,engineUserAgent=getBuiltIn$c("navigator","userAgent")||"",global$F=global$H,userAgent$6=engineUserAgent,process$3=global$F.process,Deno$1=global$F.Deno,versions=process$3&&process$3.versions||Deno$1&&Deno$1.version,v8=versions&&versions.v8,match,version$2;v8&&(match=v8.split("."),version$2=match[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version$2&&userAgent$6&&(match=userAgent$6.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent$6.match(/Chrome\/(\d+)/),match&&(version$2=+match[1])));var engineV8Version=version$2,V8_VERSION$3=engineV8Version,fails$H=fails$L,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$H((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&V8_VERSION$3&&V8_VERSION$3<41})),NATIVE_SYMBOL$6=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$6&&!Symbol.sham&&"symbol"==_typeof$4(Symbol.iterator),getBuiltIn$b=getBuiltIn$d,isCallable$r=isCallable$u,isPrototypeOf$9=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$3=Object,isSymbol$6=USE_SYMBOL_AS_UID$1?function(e){return"symbol"==_typeof$4(e)}:function(e){var t=getBuiltIn$b("Symbol");return isCallable$r(t)&&isPrototypeOf$9(t.prototype,$Object$3(e))},$String$4=String,tryToString$7=function(e){try{return $String$4(e)}catch(t){return"Object"}},isCallable$q=isCallable$u,tryToString$6=tryToString$7,$TypeError$j=TypeError,aCallable$b=function(e){if(isCallable$q(e))return e;throw $TypeError$j(tryToString$6(e)+" is not a function")},aCallable$a=aCallable$b,isNullOrUndefined$5=isNullOrUndefined$7,getMethod$6=function(e,t){var n=e[t];return isNullOrUndefined$5(n)?void 0:aCallable$a(n)},call$s=functionCall,isCallable$p=isCallable$u,isObject$m=isObject$n,$TypeError$i=TypeError,ordinaryToPrimitive$1=function(e,t){var n,r;if("string"===t&&isCallable$p(n=e.toString)&&!isObject$m(r=call$s(n,e)))return r;if(isCallable$p(n=e.valueOf)&&!isObject$m(r=call$s(n,e)))return r;if("string"!==t&&isCallable$p(n=e.toString)&&!isObject$m(r=call$s(n,e)))return r;throw $TypeError$i("Can't convert object to primitive value")},shared$7={exports:{}},isPure=!1,global$E=global$H,defineProperty$d=Object.defineProperty,defineGlobalProperty$3=function(e,t){try{defineProperty$d(global$E,e,{value:t,configurable:!0,writable:!0})}catch(n){global$E[e]=t}return t},global$D=global$H,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=global$D[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore;(shared$7.exports=function(e,t){return store$2[e]||(store$2[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.0",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"});var requireObjectCoercible$8=requireObjectCoercible$a,$Object$2=Object,toObject$h=function(e){return $Object$2(requireObjectCoercible$8(e))},uncurryThis$H=functionUncurryThis,toObject$g=toObject$h,hasOwnProperty$1=uncurryThis$H({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(e,t){return hasOwnProperty$1(toObject$g(e),t)},uncurryThis$G=functionUncurryThis,id=0,postfix=Math.random(),toString$j=uncurryThis$G(1..toString),uid$4=function(e){return"Symbol("+(void 0===e?"":e)+")_"+toString$j(++id+postfix,36)},global$C=global$H,shared$6=shared$7.exports,hasOwn$m=hasOwnProperty_1,uid$3=uid$4,NATIVE_SYMBOL$5=symbolConstructorDetection,USE_SYMBOL_AS_UID=useSymbolAsUid,WellKnownSymbolsStore$1=shared$6("wks"),_Symbol$1=global$C.Symbol,symbolFor=_Symbol$1&&_Symbol$1.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?_Symbol$1:_Symbol$1&&_Symbol$1.withoutSetter||uid$3,wellKnownSymbol$u=function(e){if(!hasOwn$m(WellKnownSymbolsStore$1,e)||!NATIVE_SYMBOL$5&&"string"!=typeof WellKnownSymbolsStore$1[e]){var t="Symbol."+e;NATIVE_SYMBOL$5&&hasOwn$m(_Symbol$1,e)?WellKnownSymbolsStore$1[e]=_Symbol$1[e]:WellKnownSymbolsStore$1[e]=USE_SYMBOL_AS_UID&&symbolFor?symbolFor(t):createWellKnownSymbol(t)}return WellKnownSymbolsStore$1[e]},call$r=functionCall,isObject$l=isObject$n,isSymbol$5=isSymbol$6,getMethod$5=getMethod$6,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$t=wellKnownSymbol$u,$TypeError$h=TypeError,TO_PRIMITIVE=wellKnownSymbol$t("toPrimitive"),toPrimitive$3=function(e,t){if(!isObject$l(e)||isSymbol$5(e))return e;var n,r=getMethod$5(e,TO_PRIMITIVE);if(r){if(void 0===t&&(t="default"),n=call$r(r,e,t),!isObject$l(n)||isSymbol$5(n))return n;throw $TypeError$h("Can't convert object to primitive value")}return void 0===t&&(t="number"),ordinaryToPrimitive(e,t)},toPrimitive$2=toPrimitive$3,isSymbol$4=isSymbol$6,toPropertyKey$5=function(e){var t=toPrimitive$2(e,"string");return isSymbol$4(t)?t:t+""},global$B=global$H,isObject$k=isObject$n,document$3=global$B.document,EXISTS$1=isObject$k(document$3)&&isObject$k(document$3.createElement),documentCreateElement$2=function(e){return EXISTS$1?document$3.createElement(e):{}},DESCRIPTORS$n=descriptors,fails$G=fails$L,createElement$1=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$n&&!fails$G((function(){return 7!=Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a})),DESCRIPTORS$m=descriptors,call$q=functionCall,propertyIsEnumerableModule$2=objectPropertyIsEnumerable,createPropertyDescriptor$6=createPropertyDescriptor$7,toIndexedObject$b=toIndexedObject$c,toPropertyKey$4=toPropertyKey$5,hasOwn$l=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$2=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$m?$getOwnPropertyDescriptor$2:function(e,t){if(e=toIndexedObject$b(e),t=toPropertyKey$4(t),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$2(e,t)}catch(n){}if(hasOwn$l(e,t))return createPropertyDescriptor$6(!call$q(propertyIsEnumerableModule$2.f,e,t),e[t])};var objectDefineProperty={},DESCRIPTORS$l=descriptors,fails$F=fails$L,v8PrototypeDefineBug=DESCRIPTORS$l&&fails$F((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),isObject$j=isObject$n,$String$3=String,$TypeError$g=TypeError,anObject$l=function(e){if(isObject$j(e))return e;throw $TypeError$g($String$3(e)+" is not an object")},DESCRIPTORS$k=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$k=anObject$l,toPropertyKey$3=toPropertyKey$5,$TypeError$f=TypeError,$defineProperty$1=Object.defineProperty,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$k?V8_PROTOTYPE_DEFINE_BUG$1?function(e,t,n){if(anObject$k(e),t=toPropertyKey$3(t),anObject$k(n),"function"==typeof e&&"prototype"===t&&"value"in n&&WRITABLE in n&&!n[WRITABLE]){var r=$getOwnPropertyDescriptor$1(e,t);r&&r[WRITABLE]&&(e[t]=n.value,n={configurable:CONFIGURABLE$1 in n?n[CONFIGURABLE$1]:r[CONFIGURABLE$1],enumerable:ENUMERABLE in n?n[ENUMERABLE]:r[ENUMERABLE],writable:!1})}return $defineProperty$1(e,t,n)}:$defineProperty$1:function(e,t,n){if(anObject$k(e),t=toPropertyKey$3(t),anObject$k(n),IE8_DOM_DEFINE)try{return $defineProperty$1(e,t,n)}catch(r){}if("get"in n||"set"in n)throw $TypeError$f("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var DESCRIPTORS$j=descriptors,definePropertyModule$7=objectDefineProperty,createPropertyDescriptor$5=createPropertyDescriptor$7,createNonEnumerableProperty$a=DESCRIPTORS$j?function(e,t,n){return definePropertyModule$7.f(e,t,createPropertyDescriptor$5(1,n))}:function(e,t,n){return e[t]=n,e},makeBuiltIn$3={exports:{}},DESCRIPTORS$i=descriptors,hasOwn$k=hasOwnProperty_1,FunctionPrototype$2=Function.prototype,getDescriptor=DESCRIPTORS$i&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$k(FunctionPrototype$2,"name"),PROPER=EXISTS&&"something"===function(){}.name,CONFIGURABLE=EXISTS&&(!DESCRIPTORS$i||DESCRIPTORS$i&&getDescriptor(FunctionPrototype$2,"name").configurable),functionName={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE},uncurryThis$F=functionUncurryThis,isCallable$o=isCallable$u,store$1=sharedStore,functionToString$1=uncurryThis$F(Function.toString);isCallable$o(store$1.inspectSource)||(store$1.inspectSource=function(e){return functionToString$1(e)});var inspectSource$3=store$1.inspectSource,global$A=global$H,isCallable$n=isCallable$u,WeakMap$1=global$A.WeakMap,weakMapBasicDetection=isCallable$n(WeakMap$1)&&/native code/.test(String(WeakMap$1)),shared$5=shared$7.exports,uid$2=uid$4,keys$3=shared$5("keys"),sharedKey$4=function(e){return keys$3[e]||(keys$3[e]=uid$2(e))},hiddenKeys$5={},NATIVE_WEAK_MAP=weakMapBasicDetection,global$z=global$H,isObject$i=isObject$n,createNonEnumerableProperty$9=createNonEnumerableProperty$a,hasOwn$j=hasOwnProperty_1,shared$4=sharedStore,sharedKey$3=sharedKey$4,hiddenKeys$4=hiddenKeys$5,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$7=global$z.TypeError,WeakMap=global$z.WeakMap,set$2,get$1,has,enforce=function(e){return has(e)?get$1(e):set$2(e,{})},getterFor=function(e){return function(t){var n;if(!isObject$i(t)||(n=get$1(t)).type!==e)throw TypeError$7("Incompatible receiver, "+e+" required");return n}};if(NATIVE_WEAK_MAP||shared$4.state){var store=shared$4.state||(shared$4.state=new WeakMap);store.get=store.get,store.has=store.has,store.set=store.set,set$2=function(e,t){if(store.has(e))throw TypeError$7(OBJECT_ALREADY_INITIALIZED);return t.facade=e,store.set(e,t),t},get$1=function(e){return store.get(e)||{}},has=function(e){return store.has(e)}}else{var STATE=sharedKey$3("state");hiddenKeys$4[STATE]=!0,set$2=function(e,t){if(hasOwn$j(e,STATE))throw TypeError$7(OBJECT_ALREADY_INITIALIZED);return t.facade=e,createNonEnumerableProperty$9(e,STATE,t),t},get$1=function(e){return hasOwn$j(e,STATE)?e[STATE]:{}},has=function(e){return hasOwn$j(e,STATE)}}var internalState={set:set$2,get:get$1,has:has,enforce:enforce,getterFor:getterFor},fails$E=fails$L,isCallable$m=isCallable$u,hasOwn$i=hasOwnProperty_1,DESCRIPTORS$h=descriptors,CONFIGURABLE_FUNCTION_NAME$2=functionName.CONFIGURABLE,inspectSource$2=inspectSource$3,InternalStateModule$9=internalState,enforceInternalState$3=InternalStateModule$9.enforce,getInternalState$8=InternalStateModule$9.get,defineProperty$c=Object.defineProperty,CONFIGURABLE_LENGTH=DESCRIPTORS$h&&!fails$E((function(){return 8!==defineProperty$c((function(){}),"length",{value:8}).length})),TEMPLATE=String(String).split("String"),makeBuiltIn$2=makeBuiltIn$3.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!hasOwn$i(e,"name")||CONFIGURABLE_FUNCTION_NAME$2&&e.name!==t)&&(DESCRIPTORS$h?defineProperty$c(e,"name",{value:t,configurable:!0}):e.name=t),CONFIGURABLE_LENGTH&&n&&hasOwn$i(n,"arity")&&e.length!==n.arity&&defineProperty$c(e,"length",{value:n.arity});try{n&&hasOwn$i(n,"constructor")&&n.constructor?DESCRIPTORS$h&&defineProperty$c(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=enforceInternalState$3(e);return hasOwn$i(r,"source")||(r.source=TEMPLATE.join("string"==typeof t?t:"")),e};Function.prototype.toString=makeBuiltIn$2((function(){return isCallable$m(this)&&getInternalState$8(this).source||inspectSource$2(this)}),"toString");var isCallable$l=isCallable$u,definePropertyModule$6=objectDefineProperty,makeBuiltIn$1=makeBuiltIn$3.exports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$i=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(isCallable$l(n)&&makeBuiltIn$1(n,o,r),r.global)i?e[t]=n:defineGlobalProperty$1(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(a){}i?e[t]=n:definePropertyModule$6.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},objectGetOwnPropertyNames={},ceil=Math.ceil,floor$8=Math.floor,mathTrunc=Math.trunc||function(e){var t=+e;return(t>0?floor$8:ceil)(t)},trunc=mathTrunc,toIntegerOrInfinity$d=function(e){var t=+e;return t!=t||0===t?0:trunc(t)},toIntegerOrInfinity$c=toIntegerOrInfinity$d,max$4=Math.max,min$6=Math.min,toAbsoluteIndex$7=function(e,t){var n=toIntegerOrInfinity$c(e);return n<0?max$4(n+t,0):min$6(n,t)},toIntegerOrInfinity$b=toIntegerOrInfinity$d,min$5=Math.min,toLength$8=function(e){return e>0?min$5(toIntegerOrInfinity$b(e),9007199254740991):0},toLength$7=toLength$8,lengthOfArrayLike$i=function(e){return toLength$7(e.length)},toIndexedObject$a=toIndexedObject$c,toAbsoluteIndex$6=toAbsoluteIndex$7,lengthOfArrayLike$h=lengthOfArrayLike$i,createMethod$6=function(e){return function(t,n,r){var i,o=toIndexedObject$a(t),a=lengthOfArrayLike$h(o),s=toAbsoluteIndex$6(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},arrayIncludes={includes:createMethod$6(!0),indexOf:createMethod$6(!1)},uncurryThis$E=functionUncurryThis,hasOwn$h=hasOwnProperty_1,toIndexedObject$9=toIndexedObject$c,indexOf$1=arrayIncludes.indexOf,hiddenKeys$3=hiddenKeys$5,push$a=uncurryThis$E([].push),objectKeysInternal=function(e,t){var n,r=toIndexedObject$9(e),i=0,o=[];for(n in r)!hasOwn$h(hiddenKeys$3,n)&&hasOwn$h(r,n)&&push$a(o,n);for(;t.length>i;)hasOwn$h(r,n=t[i++])&&(~indexOf$1(o,n)||push$a(o,n));return o},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$2=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(e){return internalObjectKeys$1(e,hiddenKeys$2)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$a=getBuiltIn$d,uncurryThis$D=functionUncurryThis,getOwnPropertyNamesModule$1=objectGetOwnPropertyNames,getOwnPropertySymbolsModule$3=objectGetOwnPropertySymbols,anObject$j=anObject$l,concat$3=uncurryThis$D([].concat),ownKeys$5=getBuiltIn$a("Reflect","ownKeys")||function(e){var t=getOwnPropertyNamesModule$1.f(anObject$j(e)),n=getOwnPropertySymbolsModule$3.f;return n?concat$3(t,n(e)):t},hasOwn$g=hasOwnProperty_1,ownKeys$4=ownKeys$5,getOwnPropertyDescriptorModule$2=objectGetOwnPropertyDescriptor,definePropertyModule$5=objectDefineProperty,copyConstructorProperties$2=function(e,t,n){for(var r=ownKeys$4(t),i=definePropertyModule$5.f,o=getOwnPropertyDescriptorModule$2.f,a=0;a<r.length;a++){var s=r[a];hasOwn$g(e,s)||n&&hasOwn$g(n,s)||i(e,s,o(t,s))}},fails$D=fails$L,isCallable$k=isCallable$u,replacement=/#|\.prototype\./,isForced$4=function(e,t){var n=data[normalize(e)];return n==POLYFILL||n!=NATIVE&&(isCallable$k(t)?fails$D(t):!!t)},normalize=isForced$4.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced$4.data={},NATIVE=isForced$4.NATIVE="N",POLYFILL=isForced$4.POLYFILL="P",isForced_1=isForced$4,global$y=global$H,getOwnPropertyDescriptor$4=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$8=createNonEnumerableProperty$a,defineBuiltIn$h=defineBuiltIn$i,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties$1=copyConstructorProperties$2,isForced$3=isForced_1,_export=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,l=e.stat;if(n=c?global$y:l?global$y[s]||defineGlobalProperty(s,{}):(global$y[s]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(a=getOwnPropertyDescriptor$4(n,r))&&a.value:n[r],!isForced$3(c?r:s+(l?".":"#")+r,e.forced)&&void 0!==i){if(_typeof$4(o)==_typeof$4(i))continue;copyConstructorProperties$1(o,i)}(e.sham||i&&i.sham)&&createNonEnumerableProperty$8(o,"sham",!0),defineBuiltIn$h(n,r,o,e)}},uncurryThis$C=functionUncurryThis,aCallable$9=aCallable$b,NATIVE_BIND$2=functionBindNative,bind$c=uncurryThis$C(uncurryThis$C.bind),functionBindContext=function(e,t){return aCallable$9(e),void 0===t?e:NATIVE_BIND$2?bind$c(e,t):function(){return e.apply(t,arguments)}},classof$f=classofRaw$2,isArray$5=Array.isArray||function(e){return"Array"==classof$f(e)},wellKnownSymbol$s=wellKnownSymbol$u,TO_STRING_TAG$4=wellKnownSymbol$s("toStringTag"),test$1={};test$1[TO_STRING_TAG$4]="z";var toStringTagSupport="[object z]"===String(test$1),TO_STRING_TAG_SUPPORT$2=toStringTagSupport,isCallable$j=isCallable$u,classofRaw=classofRaw$2,wellKnownSymbol$r=wellKnownSymbol$u,TO_STRING_TAG$3=wellKnownSymbol$r("toStringTag"),$Object$1=Object,CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(n){}},classof$e=TO_STRING_TAG_SUPPORT$2?classofRaw:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=tryGet(t=$Object$1(e),TO_STRING_TAG$3))?n:CORRECT_ARGUMENTS?classofRaw(t):"Object"==(r=classofRaw(t))&&isCallable$j(t.callee)?"Arguments":r},uncurryThis$B=functionUncurryThis,fails$C=fails$L,isCallable$i=isCallable$u,classof$d=classof$e,getBuiltIn$9=getBuiltIn$d,inspectSource$1=inspectSource$3,noop=function(){},empty=[],construct$1=getBuiltIn$9("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$6=uncurryThis$B(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=function(e){if(!isCallable$i(e))return!1;try{return construct$1(noop,empty,e),!0}catch(t){return!1}},isConstructorLegacy=function(e){if(!isCallable$i(e))return!1;switch(classof$d(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$6(constructorRegExp,inspectSource$1(e))}catch(t){return!0}};isConstructorLegacy.sham=!0;var isConstructor$4=!construct$1||fails$C((function(){var e;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){e=!0}))||e}))?isConstructorLegacy:isConstructorModern,isArray$4=isArray$5,isConstructor$3=isConstructor$4,isObject$h=isObject$n,wellKnownSymbol$q=wellKnownSymbol$u,SPECIES$6=wellKnownSymbol$q("species"),$Array$4=Array,arraySpeciesConstructor$1=function(e){var t;return isArray$4(e)&&(t=e.constructor,(isConstructor$3(t)&&(t===$Array$4||isArray$4(t.prototype))||isObject$h(t)&&null===(t=t[SPECIES$6]))&&(t=void 0)),void 0===t?$Array$4:t},arraySpeciesConstructor=arraySpeciesConstructor$1,arraySpeciesCreate$3=function(e,t){return new(arraySpeciesConstructor(e))(0===t?0:t)},bind$b=functionBindContext,uncurryThis$A=functionUncurryThis,IndexedObject$4=indexedObject,toObject$f=toObject$h,lengthOfArrayLike$g=lengthOfArrayLike$i,arraySpeciesCreate$2=arraySpeciesCreate$3,push$9=uncurryThis$A([].push),createMethod$5=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,l,u,d){for(var h,f,p=toObject$f(c),g=IndexedObject$4(p),y=bind$b(l,u),v=lengthOfArrayLike$g(g),m=0,_=d||arraySpeciesCreate$2,b=t?_(c,v):n||a?_(c,0):void 0;v>m;m++)if((s||m in g)&&(f=y(h=g[m],m,p),e))if(t)b[m]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return m;case 2:push$9(b,h)}else switch(e){case 4:return!1;case 7:push$9(b,h)}return o?-1:r||i?i:b}},arrayIteration={forEach:createMethod$5(0),map:createMethod$5(1),filter:createMethod$5(2),some:createMethod$5(3),every:createMethod$5(4),find:createMethod$5(5),findIndex:createMethod$5(6),filterReject:createMethod$5(7)},objectDefineProperties={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$4=Object.keys||function(e){return internalObjectKeys(e,enumBugKeys$1)},DESCRIPTORS$g=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$4=objectDefineProperty,anObject$i=anObject$l,toIndexedObject$8=toIndexedObject$c,objectKeys$3=objectKeys$4;objectDefineProperties.f=DESCRIPTORS$g&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function(e,t){anObject$i(e);for(var n,r=toIndexedObject$8(t),i=objectKeys$3(t),o=i.length,a=0;o>a;)definePropertyModule$4.f(e,n=i[a++],r[n]);return e};var getBuiltIn$8=getBuiltIn$d,html$2=getBuiltIn$8("document","documentElement"),anObject$h=anObject$l,definePropertiesModule$1=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys$1=hiddenKeys$5,html$1=html$2,documentCreateElement$1=documentCreateElement$2,sharedKey$2=sharedKey$4,GT=">",LT="<",PROTOTYPE$2="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$2("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return LT+SCRIPT+GT+e+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame=function(){var e,t=documentCreateElement$1("iframe"),n="java"+SCRIPT+":";return t.style.display="none",html$1.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(scriptTag("document.F=Object")),e.close(),e.F},activeXDocument,_NullProtoObject2=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(t){}_NullProtoObject2="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var e=enumBugKeys.length;e--;)delete _NullProtoObject2[PROTOTYPE$2][enumBugKeys[e]];return _NullProtoObject2()};hiddenKeys$1[IE_PROTO$1]=!0;var objectCreate=Object.create||function(e,t){var n;return null!==e?(EmptyConstructor[PROTOTYPE$2]=anObject$h(e),n=new EmptyConstructor,EmptyConstructor[PROTOTYPE$2]=null,n[IE_PROTO$1]=e):n=_NullProtoObject2(),void 0===t?n:definePropertiesModule$1.f(n,t)},wellKnownSymbol$p=wellKnownSymbol$u,create$5=objectCreate,defineProperty$b=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$p("unscopables"),ArrayPrototype$1=Array.prototype;null==ArrayPrototype$1[UNSCOPABLES]&&defineProperty$b(ArrayPrototype$1,UNSCOPABLES,{configurable:!0,value:create$5(null)});var addToUnscopables$4=function(e){ArrayPrototype$1[UNSCOPABLES][e]=!0},$$G=_export,$find$1=arrayIteration.find,addToUnscopables$3=addToUnscopables$4,FIND="find",SKIPS_HOLES$1=!0;FIND in[]&&Array(1)[FIND]((function(){SKIPS_HOLES$1=!1})),$$G({target:"Array",proto:!0,forced:SKIPS_HOLES$1},{find:function(e){return $find$1(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$3(FIND);var es_object_toString={},TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$c=classof$e,objectToString=TO_STRING_TAG_SUPPORT$1?{}.toString:function(){return"[object "+classof$c(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,defineBuiltIn$g=defineBuiltIn$i,toString$i=objectToString;TO_STRING_TAG_SUPPORT||defineBuiltIn$g(Object.prototype,"toString",toString$i,{unsafe:!0});var es_array_concat={},$TypeError$e=TypeError,MAX_SAFE_INTEGER=9007199254740991,doesNotExceedSafeInteger$2=function(e){if(e>MAX_SAFE_INTEGER)throw $TypeError$e("Maximum allowed index exceeded");return e},toPropertyKey$2=toPropertyKey$5,definePropertyModule$3=objectDefineProperty,createPropertyDescriptor$4=createPropertyDescriptor$7,createProperty$5=function(e,t,n){var r=toPropertyKey$2(t);r in e?definePropertyModule$3.f(e,r,createPropertyDescriptor$4(0,n)):e[r]=n},fails$B=fails$L,wellKnownSymbol$o=wellKnownSymbol$u,V8_VERSION$2=engineV8Version,SPECIES$5=wellKnownSymbol$o("species"),arrayMethodHasSpeciesSupport$5=function(e){return V8_VERSION$2>=51||!fails$B((function(){var t=[];return(t.constructor={})[SPECIES$5]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},$$F=_export,fails$A=fails$L,isArray$3=isArray$5,isObject$g=isObject$n,toObject$e=toObject$h,lengthOfArrayLike$f=lengthOfArrayLike$i,doesNotExceedSafeInteger$1=doesNotExceedSafeInteger$2,createProperty$4=createProperty$5,arraySpeciesCreate$1=arraySpeciesCreate$3,arrayMethodHasSpeciesSupport$4=arrayMethodHasSpeciesSupport$5,wellKnownSymbol$n=wellKnownSymbol$u,V8_VERSION$1=engineV8Version,IS_CONCAT_SPREADABLE=wellKnownSymbol$n("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION$1>=51||!fails$A((function(){var e=[];return e[IS_CONCAT_SPREADABLE]=!1,e.concat()[0]!==e})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport$4("concat"),isConcatSpreadable=function(e){if(!isObject$g(e))return!1;var t=e[IS_CONCAT_SPREADABLE];return void 0!==t?!!t:isArray$3(e)},FORCED$8=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;$$F({target:"Array",proto:!0,arity:1,forced:FORCED$8},{concat:function(e){var t,n,r,i,o,a=toObject$e(this),s=arraySpeciesCreate$1(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(isConcatSpreadable(o=-1===t?a:arguments[t]))for(i=lengthOfArrayLike$f(o),doesNotExceedSafeInteger$1(c+i),n=0;n<i;n++,c++)n in o&&createProperty$4(s,c,o[n]);else doesNotExceedSafeInteger$1(c+1),createProperty$4(s,c++,o);return s.length=c,s}});var web_domCollections_forEach={},domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},documentCreateElement=documentCreateElement$2,classList=documentCreateElement("span").classList,DOMTokenListPrototype$2=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$2===Object.prototype?void 0:DOMTokenListPrototype$2,fails$z=fails$L,arrayMethodIsStrict$4=function(e,t){var n=[][e];return!!n&&fails$z((function(){n.call(null,t||function(){return 1},1)}))},$forEach$2=arrayIteration.forEach,arrayMethodIsStrict$3=arrayMethodIsStrict$4,STRICT_METHOD$3=arrayMethodIsStrict$3("forEach"),arrayForEach=STRICT_METHOD$3?[].forEach:function(e){return $forEach$2(this,e,arguments.length>1?arguments[1]:void 0)},global$x=global$H,DOMIterables$1=domIterables,DOMTokenListPrototype$1=domTokenListPrototype,forEach$1=arrayForEach,createNonEnumerableProperty$7=createNonEnumerableProperty$a,handlePrototype$1=function(e){if(e&&e.forEach!==forEach$1)try{createNonEnumerableProperty$7(e,"forEach",forEach$1)}catch(t){e.forEach=forEach$1}};for(var COLLECTION_NAME$1 in DOMIterables$1)DOMIterables$1[COLLECTION_NAME$1]&&handlePrototype$1(global$x[COLLECTION_NAME$1]&&global$x[COLLECTION_NAME$1].prototype);handlePrototype$1(DOMTokenListPrototype$1);var es_object_keys={},$$E=_export,toObject$d=toObject$h,nativeKeys=objectKeys$4,fails$y=fails$L,FAILS_ON_PRIMITIVES$1=fails$y((function(){nativeKeys(1)}));$$E({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$1},{keys:function(e){return nativeKeys(toObject$d(e))}});var uncurryThis$z=functionUncurryThis,arraySlice$c=uncurryThis$z([].slice),$$D=_export,isArray$2=isArray$5,isConstructor$2=isConstructor$4,isObject$f=isObject$n,toAbsoluteIndex$5=toAbsoluteIndex$7,lengthOfArrayLike$e=lengthOfArrayLike$i,toIndexedObject$7=toIndexedObject$c,createProperty$3=createProperty$5,wellKnownSymbol$m=wellKnownSymbol$u,arrayMethodHasSpeciesSupport$3=arrayMethodHasSpeciesSupport$5,nativeSlice=arraySlice$c,HAS_SPECIES_SUPPORT$3=arrayMethodHasSpeciesSupport$3("slice"),SPECIES$4=wellKnownSymbol$m("species"),$Array$3=Array,max$3=Math.max;$$D({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$3},{slice:function(e,t){var n,r,i,o=toIndexedObject$7(this),a=lengthOfArrayLike$e(o),s=toAbsoluteIndex$5(e,a),c=toAbsoluteIndex$5(void 0===t?a:t,a);if(isArray$2(o)&&(n=o.constructor,(isConstructor$2(n)&&(n===$Array$3||isArray$2(n.prototype))||isObject$f(n)&&null===(n=n[SPECIES$4]))&&(n=void 0),n===$Array$3||void 0===n))return nativeSlice(o,s,c);for(r=new(void 0===n?$Array$3:n)(max$3(c-s,0)),i=0;s<c;s++,i++)s in o&&createProperty$3(r,i,o[s]);return r.length=i,r}});var es_regexp_exec={},classof$b=classof$e,$String$2=String,toString$h=function(e){if("Symbol"===classof$b(e))throw TypeError("Cannot convert a Symbol value to a string");return $String$2(e)},anObject$g=anObject$l,regexpFlags$1=function(){var e=anObject$g(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},fails$x=fails$L,global$w=global$H,$RegExp$2=global$w.RegExp,UNSUPPORTED_Y$3=fails$x((function(){var e=$RegExp$2("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),MISSED_STICKY$2=UNSUPPORTED_Y$3||fails$x((function(){return!$RegExp$2("a","y").sticky})),BROKEN_CARET=UNSUPPORTED_Y$3||fails$x((function(){var e=$RegExp$2("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),regexpStickyHelpers={BROKEN_CARET:BROKEN_CARET,MISSED_STICKY:MISSED_STICKY$2,UNSUPPORTED_Y:UNSUPPORTED_Y$3},fails$w=fails$L,global$v=global$H,$RegExp$1=global$v.RegExp,regexpUnsupportedDotAll=fails$w((function(){var e=$RegExp$1(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),fails$v=fails$L,global$u=global$H,$RegExp=global$u.RegExp,regexpUnsupportedNcg=fails$v((function(){var e=$RegExp("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),call$p=functionCall,uncurryThis$y=functionUncurryThis,toString$g=toString$h,regexpFlags=regexpFlags$1,stickyHelpers$2=regexpStickyHelpers,shared$3=shared$7.exports,create$4=objectCreate,getInternalState$7=internalState.get,UNSUPPORTED_DOT_ALL$1=regexpUnsupportedDotAll,UNSUPPORTED_NCG$1=regexpUnsupportedNcg,nativeReplace=shared$3("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,_patchedExec=nativeExec,charAt$a=uncurryThis$y("".charAt),indexOf=uncurryThis$y("".indexOf),replace$8=uncurryThis$y("".replace),stringSlice$9=uncurryThis$y("".slice),UPDATES_LAST_INDEX_WRONG=(re12=/a/,re22=/b*/g,call$p(nativeExec,re12,"a"),call$p(nativeExec,re22,"a"),0!==re12.lastIndex||0!==re22.lastIndex),re12,re22,UNSUPPORTED_Y$2=stickyHelpers$2.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y$2||UNSUPPORTED_DOT_ALL$1||UNSUPPORTED_NCG$1;PATCH&&(_patchedExec=function(e){var t,n,r,i,o,a,s,c=this,l=getInternalState$7(c),u=toString$g(e),d=l.raw;if(d)return d.lastIndex=c.lastIndex,t=call$p(_patchedExec,d,u),c.lastIndex=d.lastIndex,t;var h=l.groups,f=UNSUPPORTED_Y$2&&c.sticky,p=call$p(regexpFlags,c),g=c.source,y=0,v=u;if(f&&(p=replace$8(p,"y",""),-1===indexOf(p,"g")&&(p+="g"),v=stringSlice$9(u,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==charAt$a(u,c.lastIndex-1))&&(g="(?: "+g+")",v=" "+v,y++),n=new RegExp("^(?:"+g+")",p)),NPCG_INCLUDED&&(n=new RegExp("^"+g+"$(?!\\s)",p)),UPDATES_LAST_INDEX_WRONG&&(r=c.lastIndex),i=call$p(nativeExec,f?n:c,v),f?i?(i.input=stringSlice$9(i.input,y),i[0]=stringSlice$9(i[0],y),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),NPCG_INCLUDED&&i&&i.length>1&&call$p(nativeReplace,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&h)for(i.groups=a=create$4(null),o=0;o<h.length;o++)a[(s=h[o])[0]]=i[s[1]];return i});var regexpExec$3=_patchedExec,$$C=_export,exec$5=regexpExec$3;$$C({target:"RegExp",proto:!0,forced:/./.exec!==exec$5},{exec:exec$5});var $$B=_export,call$o=functionCall,isCallable$h=isCallable$u,anObject$f=anObject$l,toString$f=toString$h,DELEGATES_TO_EXEC=(execCalled=!1,re=/[ac]/,re.exec=function(){return execCalled=!0,/./.exec.apply(this,arguments)},!0===re.test("abc")&&execCalled),execCalled,re,nativeTest=/./.test;$$B({target:"RegExp",proto:!0,forced:!DELEGATES_TO_EXEC},{test:function(e){var t=anObject$f(this),n=toString$f(e),r=t.exec;if(!isCallable$h(r))return call$o(nativeTest,t,n);var i=call$o(r,t,n);return null!==i&&(anObject$f(i),!0)}});var es_array_join={},$$A=_export,uncurryThis$x=functionUncurryThis,IndexedObject$3=indexedObject,toIndexedObject$6=toIndexedObject$c,arrayMethodIsStrict$2=arrayMethodIsStrict$4,nativeJoin=uncurryThis$x([].join),ES3_STRINGS=IndexedObject$3!=Object,STRICT_METHOD$2=arrayMethodIsStrict$2("join",",");$$A({target:"Array",proto:!0,forced:ES3_STRINGS||!STRICT_METHOD$2},{join:function(e){return nativeJoin(toIndexedObject$6(this),void 0===e?",":e)}});var es_array_splice={},DESCRIPTORS$f=descriptors,isArray$1=isArray$5,$TypeError$d=TypeError,getOwnPropertyDescriptor$3=Object.getOwnPropertyDescriptor,SILENT_ON_NON_WRITABLE_LENGTH_SET=DESCRIPTORS$f&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),arraySetLength=SILENT_ON_NON_WRITABLE_LENGTH_SET?function(e,t){if(isArray$1(e)&&!getOwnPropertyDescriptor$3(e,"length").writable)throw $TypeError$d("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},tryToString$5=tryToString$7,$TypeError$c=TypeError,deletePropertyOrThrow$3=function(e,t){if(!delete e[t])throw $TypeError$c("Cannot delete property "+tryToString$5(t)+" of "+tryToString$5(e))},$$z=_export,toObject$c=toObject$h,toAbsoluteIndex$4=toAbsoluteIndex$7,toIntegerOrInfinity$a=toIntegerOrInfinity$d,lengthOfArrayLike$d=lengthOfArrayLike$i,setArrayLength=arraySetLength,doesNotExceedSafeInteger=doesNotExceedSafeInteger$2,arraySpeciesCreate=arraySpeciesCreate$3,createProperty$2=createProperty$5,deletePropertyOrThrow$2=deletePropertyOrThrow$3,arrayMethodHasSpeciesSupport$2=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport$2("splice"),max$2=Math.max,min$4=Math.min;$$z({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2},{splice:function(e,t){var n,r,i,o,a,s,c=toObject$c(this),l=lengthOfArrayLike$d(c),u=toAbsoluteIndex$4(e,l),d=arguments.length;for(0===d?n=r=0:1===d?(n=0,r=l-u):(n=d-2,r=min$4(max$2(toIntegerOrInfinity$a(t),0),l-u)),doesNotExceedSafeInteger(l+n-r),i=arraySpeciesCreate(c,r),o=0;o<r;o++)(a=u+o)in c&&createProperty$2(i,o,c[a]);if(i.length=r,n<r){for(o=u;o<l-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:deletePropertyOrThrow$2(c,s);for(o=l;o>l-r+n;o--)deletePropertyOrThrow$2(c,o-1)}else if(n>r)for(o=l-r;o>u;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:deletePropertyOrThrow$2(c,s);for(o=0;o<n;o++)c[o+u]=arguments[o+2];return setArrayLength(c,l-r+n),i}});var es_promise={},classof$a=classofRaw$2,global$t=global$H,engineIsNode="process"==classof$a(global$t.process),isCallable$g=isCallable$u,$String$1=String,$TypeError$b=TypeError,aPossiblePrototype$1=function(e){if("object"==_typeof$4(e)||isCallable$g(e))return e;throw $TypeError$b("Can't set "+$String$1(e)+" as a prototype")},uncurryThis$w=functionUncurryThis,anObject$e=anObject$l,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=uncurryThis$w(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return anObject$e(n),aPossiblePrototype(r),t?e(n,r):n.__proto__=r,n}}():void 0),defineProperty$a=objectDefineProperty.f,hasOwn$f=hasOwnProperty_1,wellKnownSymbol$l=wellKnownSymbol$u,TO_STRING_TAG$2=wellKnownSymbol$l("toStringTag"),setToStringTag$7=function(e,t,n){e&&!n&&(e=e.prototype),e&&!hasOwn$f(e,TO_STRING_TAG$2)&&defineProperty$a(e,TO_STRING_TAG$2,{configurable:!0,value:t})},getBuiltIn$7=getBuiltIn$d,definePropertyModule$2=objectDefineProperty,wellKnownSymbol$k=wellKnownSymbol$u,DESCRIPTORS$e=descriptors,SPECIES$3=wellKnownSymbol$k("species"),setSpecies$3=function(e){var t=getBuiltIn$7(e),n=definePropertyModule$2.f;DESCRIPTORS$e&&t&&!t[SPECIES$3]&&n(t,SPECIES$3,{configurable:!0,get:function(){return this}})},isPrototypeOf$8=objectIsPrototypeOf,$TypeError$a=TypeError,anInstance$5=function(e,t){if(isPrototypeOf$8(t,e))return e;throw $TypeError$a("Incorrect invocation")},isConstructor$1=isConstructor$4,tryToString$4=tryToString$7,$TypeError$9=TypeError,aConstructor$3=function(e){if(isConstructor$1(e))return e;throw $TypeError$9(tryToString$4(e)+" is not a constructor")},anObject$d=anObject$l,aConstructor$2=aConstructor$3,isNullOrUndefined$4=isNullOrUndefined$7,wellKnownSymbol$j=wellKnownSymbol$u,SPECIES$2=wellKnownSymbol$j("species"),speciesConstructor$4=function(e,t){var n,r=anObject$d(e).constructor;return void 0===r||isNullOrUndefined$4(n=anObject$d(r)[SPECIES$2])?t:aConstructor$2(n)},NATIVE_BIND$1=functionBindNative,FunctionPrototype$1=Function.prototype,apply$a=FunctionPrototype$1.apply,call$n=FunctionPrototype$1.call,functionApply="object"==("undefined"==typeof Reflect?"undefined":_typeof$4(Reflect))&&Reflect.apply||(NATIVE_BIND$1?call$n.bind(apply$a):function(){return call$n.apply(apply$a,arguments)}),$TypeError$8=TypeError,validateArgumentsLength$4=function(e,t){if(e<t)throw $TypeError$8("Not enough arguments");return e},userAgent$5=engineUserAgent,engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent$5),global$s=global$H,apply$9=functionApply,bind$a=functionBindContext,isCallable$f=isCallable$u,hasOwn$e=hasOwnProperty_1,fails$u=fails$L,html=html$2,arraySlice$b=arraySlice$c,createElement=documentCreateElement$2,validateArgumentsLength$3=validateArgumentsLength$4,IS_IOS$1=engineIsIos,IS_NODE$3=engineIsNode,set$1=global$s.setImmediate,clear$1=global$s.clearImmediate,process$2=global$s.process,Dispatch=global$s.Dispatch,Function$2=global$s.Function,MessageChannel=global$s.MessageChannel,String$1=global$s.String,counter=0,queue$1={},ONREADYSTATECHANGE="onreadystatechange",$location,defer,channel,port;try{$location=global$s.location}catch(error){}var run=function(e){if(hasOwn$e(queue$1,e)){var t=queue$1[e];delete queue$1[e],t()}},runner=function(e){return function(){run(e)}},listener$1=function(e){run(e.data)},post=function(e){global$s.postMessage(String$1(e),$location.protocol+"//"+$location.host)};set$1&&clear$1||(set$1=function(e){validateArgumentsLength$3(arguments.length,1);var t=isCallable$f(e)?e:Function$2(e),n=arraySlice$b(arguments,1);return queue$1[++counter]=function(){apply$9(t,void 0,n)},defer(counter),counter},clear$1=function(e){delete queue$1[e]},IS_NODE$3?defer=function(e){process$2.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel&&!IS_IOS$1?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener$1,defer=bind$a(port.postMessage,port)):global$s.addEventListener&&isCallable$f(global$s.postMessage)&&!global$s.importScripts&&$location&&"file:"!==$location.protocol&&!fails$u(post)?(defer=post,global$s.addEventListener("message",listener$1,!1)):defer=ONREADYSTATECHANGE in createElement("script")?function(e){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)});var task$1={set:set$1,clear:clear$1},userAgent$4=engineUserAgent,global$r=global$H,engineIsIosPebble=/ipad|iphone|ipod/i.test(userAgent$4)&&void 0!==global$r.Pebble,userAgent$3=engineUserAgent,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(userAgent$3),global$q=global$H,bind$9=functionBindContext,getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,macrotask=task$1.set,IS_IOS=engineIsIos,IS_IOS_PEBBLE=engineIsIosPebble,IS_WEBOS_WEBKIT=engineIsWebosWebkit,IS_NODE$2=engineIsNode,MutationObserver$1=global$q.MutationObserver||global$q.WebKitMutationObserver,document$2=global$q.document,process$1=global$q.process,Promise$1=global$q.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor$2(global$q,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify$1,toggle,node,promise,then;queueMicrotask||(flush=function(){var e,t;for(IS_NODE$2&&(e=process$1.domain)&&e.exit();head;){t=head.fn,head=head.next;try{t()}catch(error){throw head?notify$1():last=void 0,error}}last=void 0,e&&e.enter()},IS_IOS||IS_NODE$2||IS_WEBOS_WEBKIT||!MutationObserver$1||!document$2?!IS_IOS_PEBBLE&&Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),promise.constructor=Promise$1,then=bind$9(promise.then,promise),notify$1=function(){then(flush)}):IS_NODE$2?notify$1=function(){process$1.nextTick(flush)}:(macrotask=bind$9(macrotask,global$q),notify$1=function(){macrotask(flush)}):(toggle=!0,node=document$2.createTextNode(""),new MutationObserver$1(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}));var microtask$1=queueMicrotask||function(e){var t={fn:e,next:void 0};last&&(last.next=t),head||(head=t,notify$1()),last=t},global$p=global$H,hostReportErrors$1=function(e,t){var n=global$p.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},perform$3=function(e){try{return{error:!1,value:e()}}catch(error){return{error:!0,value:error}}},Queue$1=function(){this.head=null,this.tail=null};Queue$1.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var queue=Queue$1,global$o=global$H,promiseNativeConstructor=global$o.Promise,engineIsDeno="object"==("undefined"==typeof Deno?"undefined":_typeof$4(Deno))&&Deno&&"object"==_typeof$4(Deno.version),IS_DENO$1=engineIsDeno,IS_NODE$1=engineIsNode,engineIsBrowser=!IS_DENO$1&&!IS_NODE$1&&"object"==("undefined"==typeof window?"undefined":_typeof$4(window))&&"object"==("undefined"==typeof document?"undefined":_typeof$4(document)),global$n=global$H,NativePromiseConstructor$4=promiseNativeConstructor,isCallable$e=isCallable$u,isForced$2=isForced_1,inspectSource=inspectSource$3,wellKnownSymbol$i=wellKnownSymbol$u,IS_BROWSER=engineIsBrowser,IS_DENO=engineIsDeno,V8_VERSION=engineV8Version;NativePromiseConstructor$4&&NativePromiseConstructor$4.prototype;var SPECIES$1=wellKnownSymbol$i("species"),SUBCLASSING=!1,NATIVE_PROMISE_REJECTION_EVENT$1=isCallable$e(global$n.PromiseRejectionEvent),FORCED_PROMISE_CONSTRUCTOR$5=isForced$2("Promise",(function(){var e=inspectSource(NativePromiseConstructor$4),t=e!==String(NativePromiseConstructor$4);if(!t&&66===V8_VERSION)return!0;if(!V8_VERSION||V8_VERSION<51||!/native code/.test(e)){var n=new NativePromiseConstructor$4((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[SPECIES$1]=r,!(SUBCLASSING=n.then((function(){}))instanceof r))return!0}return!t&&(IS_BROWSER||IS_DENO)&&!NATIVE_PROMISE_REJECTION_EVENT$1})),promiseConstructorDetection={CONSTRUCTOR:FORCED_PROMISE_CONSTRUCTOR$5,REJECTION_EVENT:NATIVE_PROMISE_REJECTION_EVENT$1,SUBCLASSING:SUBCLASSING},newPromiseCapability$2={},aCallable$8=aCallable$b,$TypeError$7=TypeError,PromiseCapability=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw $TypeError$7("Bad Promise constructor");t=e,n=r})),this.resolve=aCallable$8(t),this.reject=aCallable$8(n)};newPromiseCapability$2.f=function(e){return new PromiseCapability(e)};var $$y=_export,IS_NODE=engineIsNode,global$m=global$H,call$m=functionCall,defineBuiltIn$f=defineBuiltIn$i,setPrototypeOf$5=objectSetPrototypeOf,setToStringTag$6=setToStringTag$7,setSpecies$2=setSpecies$3,aCallable$7=aCallable$b,isCallable$d=isCallable$u,isObject$e=isObject$n,anInstance$4=anInstance$5,speciesConstructor$3=speciesConstructor$4,task=task$1.set,microtask=microtask$1,hostReportErrors=hostReportErrors$1,perform$2=perform$3,Queue=queue,InternalStateModule$8=internalState,NativePromiseConstructor$3=promiseNativeConstructor,PromiseConstructorDetection=promiseConstructorDetection,newPromiseCapabilityModule$3=newPromiseCapability$2,PROMISE="Promise",FORCED_PROMISE_CONSTRUCTOR$4=PromiseConstructorDetection.CONSTRUCTOR,NATIVE_PROMISE_REJECTION_EVENT=PromiseConstructorDetection.REJECTION_EVENT,NATIVE_PROMISE_SUBCLASSING=PromiseConstructorDetection.SUBCLASSING,getInternalPromiseState=InternalStateModule$8.getterFor(PROMISE),setInternalState$7=InternalStateModule$8.set,NativePromisePrototype$2=NativePromiseConstructor$3&&NativePromiseConstructor$3.prototype,PromiseConstructor=NativePromiseConstructor$3,PromisePrototype=NativePromisePrototype$2,TypeError$6=global$m.TypeError,document$1=global$m.document,process=global$m.process,newPromiseCapability$1=newPromiseCapabilityModule$3.f,newGenericPromiseCapability=newPromiseCapability$1,DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$m.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,isThenable=function(e){var t;return!(!isObject$e(e)||!isCallable$d(t=e.then))&&t},callReaction=function(e,t){var n,r,i,o=t.value,a=t.state==FULFILLED,s=a?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{s?(a||(t.rejection===UNHANDLED&&onHandleUnhandled(t),t.rejection=HANDLED),!0===s?n=o:(u&&u.enter(),n=s(o),u&&(u.exit(),i=!0)),n===e.promise?l(TypeError$6("Promise-chain cycle")):(r=isThenable(n))?call$m(r,n,c,l):c(n)):l(o)}catch(error){u&&!i&&u.exit(),l(error)}},notify=function(e,t){e.notified||(e.notified=!0,microtask((function(){for(var n,r=e.reactions;n=r.get();)callReaction(n,e);e.notified=!1,t&&!e.rejection&&onUnhandled(e)})))},dispatchEvent=function(e,t,n){var r,i;DISPATCH_EVENT?((r=document$1.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),global$m.dispatchEvent(r)):r={promise:t,reason:n},!NATIVE_PROMISE_REJECTION_EVENT&&(i=global$m["on"+e])?i(r):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",n)},onUnhandled=function(e){call$m(task,global$m,(function(){var t,n=e.facade,r=e.value;if(isUnhandled(e)&&(t=perform$2((function(){IS_NODE?process.emit("unhandledRejection",r,n):dispatchEvent(UNHANDLED_REJECTION,n,r)})),e.rejection=IS_NODE||isUnhandled(e)?UNHANDLED:HANDLED,t.error))throw t.value}))},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e){call$m(task,global$m,(function(){var t=e.facade;IS_NODE?process.emit("rejectionHandled",t):dispatchEvent(REJECTION_HANDLED,t,e.value)}))},bind$8=function(e,t,n){return function(r){e(t,r,n)}},internalReject=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=REJECTED,notify(e,!0))},internalResolve=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw TypeError$6("Promise can't be resolved itself");var i=isThenable(n);i?microtask((function(){var r={done:!1};try{call$m(i,n,bind$8(e,r,t),bind$8(internalReject,r,t))}catch(error){internalReject(r,error,t)}})):(t.value=n,t.state=FULFILLED,notify(t,!1))}catch(error){internalReject({done:!1},error,t)}}};if(FORCED_PROMISE_CONSTRUCTOR$4&&(PromiseConstructor=function(e){anInstance$4(this,PromisePrototype),aCallable$7(e),call$m(Internal,this);var t=getInternalPromiseState(this);try{e(bind$8(internalResolve,t),bind$8(internalReject,t))}catch(error){internalReject(t,error)}},PromisePrototype=PromiseConstructor.prototype,Internal=function(e){setInternalState$7(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:PENDING,value:void 0})},Internal.prototype=defineBuiltIn$f(PromisePrototype,"then",(function(e,t){var n=getInternalPromiseState(this),r=newPromiseCapability$1(speciesConstructor$3(this,PromiseConstructor));return n.parent=!0,r.ok=!isCallable$d(e)||e,r.fail=isCallable$d(t)&&t,r.domain=IS_NODE?process.domain:void 0,n.state==PENDING?n.reactions.add(r):microtask((function(){callReaction(r,n)})),r.promise})),OwnPromiseCapability=function(){var e=new Internal,t=getInternalPromiseState(e);this.promise=e,this.resolve=bind$8(internalResolve,t),this.reject=bind$8(internalReject,t)},newPromiseCapabilityModule$3.f=newPromiseCapability$1=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)},isCallable$d(NativePromiseConstructor$3)&&NativePromisePrototype$2!==Object.prototype)){nativeThen=NativePromisePrototype$2.then,NATIVE_PROMISE_SUBCLASSING||defineBuiltIn$f(NativePromisePrototype$2,"then",(function(e,t){var n=this;return new PromiseConstructor((function(e,t){call$m(nativeThen,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete NativePromisePrototype$2.constructor}catch(error){}setPrototypeOf$5&&setPrototypeOf$5(NativePromisePrototype$2,PromisePrototype)}$$y({global:!0,constructor:!0,wrap:!0,forced:FORCED_PROMISE_CONSTRUCTOR$4},{Promise:PromiseConstructor}),setToStringTag$6(PromiseConstructor,PROMISE,!1),setSpecies$2(PROMISE);var iterators={},wellKnownSymbol$h=wellKnownSymbol$u,Iterators$4=iterators,ITERATOR$9=wellKnownSymbol$h("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$3=function(e){return void 0!==e&&(Iterators$4.Array===e||ArrayPrototype[ITERATOR$9]===e)},classof$9=classof$e,getMethod$4=getMethod$6,isNullOrUndefined$3=isNullOrUndefined$7,Iterators$3=iterators,wellKnownSymbol$g=wellKnownSymbol$u,ITERATOR$8=wellKnownSymbol$g("iterator"),getIteratorMethod$5=function(e){if(!isNullOrUndefined$3(e))return getMethod$4(e,ITERATOR$8)||getMethod$4(e,"@@iterator")||Iterators$3[classof$9(e)]},call$l=functionCall,aCallable$6=aCallable$b,anObject$c=anObject$l,tryToString$3=tryToString$7,getIteratorMethod$4=getIteratorMethod$5,$TypeError$6=TypeError,getIterator$4=function(e,t){var n=arguments.length<2?getIteratorMethod$4(e):t;if(aCallable$6(n))return anObject$c(call$l(n,e));throw $TypeError$6(tryToString$3(e)+" is not iterable")},call$k=functionCall,anObject$b=anObject$l,getMethod$3=getMethod$6,iteratorClose$2=function(e,t,n){var r,i;anObject$b(e);try{if(!(r=getMethod$3(e,"return"))){if("throw"===t)throw n;return n}r=call$k(r,e)}catch(error){i=!0,r=error}if("throw"===t)throw n;if(i)throw r;return anObject$b(r),n},bind$7=functionBindContext,call$j=functionCall,anObject$a=anObject$l,tryToString$2=tryToString$7,isArrayIteratorMethod$2=isArrayIteratorMethod$3,lengthOfArrayLike$c=lengthOfArrayLike$i,isPrototypeOf$7=objectIsPrototypeOf,getIterator$3=getIterator$4,getIteratorMethod$3=getIteratorMethod$5,iteratorClose$1=iteratorClose$2,$TypeError$5=TypeError,Result=function(e,t){this.stopped=e,this.result=t},ResultPrototype=Result.prototype,iterate$2=function(e,t,n){var r,i,o,a,s,c,l,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),g=bind$7(t,u),y=function(e){return r&&iteratorClose$1(r,"normal",e),new Result(!0,e)},v=function(e){return d?(anObject$a(e),p?g(e[0],e[1],y):g(e[0],e[1])):p?g(e,y):g(e)};if(h)r=e.iterator;else if(f)r=e;else{if(!(i=getIteratorMethod$3(e)))throw $TypeError$5(tryToString$2(e)+" is not iterable");if(isArrayIteratorMethod$2(i)){for(o=0,a=lengthOfArrayLike$c(e);a>o;o++)if((s=v(e[o]))&&isPrototypeOf$7(ResultPrototype,s))return s;return new Result(!1)}r=getIterator$3(e,i)}for(c=h?e.next:r.next;!(l=call$j(c,r)).done;){try{s=v(l.value)}catch(error){iteratorClose$1(r,"throw",error)}if("object"==_typeof$4(s)&&s&&isPrototypeOf$7(ResultPrototype,s))return s}return new Result(!1)},wellKnownSymbol$f=wellKnownSymbol$u,ITERATOR$7=wellKnownSymbol$f("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$7]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}var checkCorrectnessOfIteration$2=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var n=!1;try{var r={};r[ITERATOR$7]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(error){}return n},NativePromiseConstructor$2=promiseNativeConstructor,checkCorrectnessOfIteration$1=checkCorrectnessOfIteration$2,FORCED_PROMISE_CONSTRUCTOR$3=promiseConstructorDetection.CONSTRUCTOR,promiseStaticsIncorrectIteration=FORCED_PROMISE_CONSTRUCTOR$3||!checkCorrectnessOfIteration$1((function(e){NativePromiseConstructor$2.all(e).then(void 0,(function(){}))})),$$x=_export,call$i=functionCall,aCallable$5=aCallable$b,newPromiseCapabilityModule$2=newPromiseCapability$2,perform$1=perform$3,iterate$1=iterate$2,PROMISE_STATICS_INCORRECT_ITERATION$1=promiseStaticsIncorrectIteration;$$x({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION$1},{all:function(e){var t=this,n=newPromiseCapabilityModule$2.f(t),r=n.resolve,i=n.reject,o=perform$1((function(){var n=aCallable$5(t.resolve),o=[],a=0,s=1;iterate$1(e,(function(e){var c=a++,l=!1;s++,call$i(n,t,e).then((function(e){l||(l=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var $$w=_export,FORCED_PROMISE_CONSTRUCTOR$2=promiseConstructorDetection.CONSTRUCTOR,NativePromiseConstructor$1=promiseNativeConstructor,getBuiltIn$6=getBuiltIn$d,isCallable$c=isCallable$u,defineBuiltIn$e=defineBuiltIn$i,NativePromisePrototype$1=NativePromiseConstructor$1&&NativePromiseConstructor$1.prototype;if($$w({target:"Promise",proto:!0,forced:FORCED_PROMISE_CONSTRUCTOR$2,real:!0},{catch:function(e){return this.then(void 0,e)}}),isCallable$c(NativePromiseConstructor$1)){var method$1=getBuiltIn$6("Promise").prototype.catch;NativePromisePrototype$1.catch!==method$1&&defineBuiltIn$e(NativePromisePrototype$1,"catch",method$1,{unsafe:!0})}var $$v=_export,call$h=functionCall,aCallable$4=aCallable$b,newPromiseCapabilityModule$1=newPromiseCapability$2,perform=perform$3,iterate=iterate$2,PROMISE_STATICS_INCORRECT_ITERATION=promiseStaticsIncorrectIteration;$$v({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION},{race:function(e){var t=this,n=newPromiseCapabilityModule$1.f(t),r=n.reject,i=perform((function(){var i=aCallable$4(t.resolve);iterate(e,(function(e){call$h(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var $$u=_export,call$g=functionCall,newPromiseCapabilityModule=newPromiseCapability$2,FORCED_PROMISE_CONSTRUCTOR$1=promiseConstructorDetection.CONSTRUCTOR;$$u({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR$1},{reject:function(e){var t=newPromiseCapabilityModule.f(this);return call$g(t.reject,void 0,e),t.promise}});var anObject$9=anObject$l,isObject$d=isObject$n,newPromiseCapability=newPromiseCapability$2,promiseResolve$2=function(e,t){if(anObject$9(e),isObject$d(t)&&t.constructor===e)return t;var n=newPromiseCapability.f(e);return(0,n.resolve)(t),n.promise},$$t=_export,getBuiltIn$5=getBuiltIn$d,FORCED_PROMISE_CONSTRUCTOR=promiseConstructorDetection.CONSTRUCTOR,promiseResolve$1=promiseResolve$2;getBuiltIn$5("Promise"),$$t({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR},{resolve:function(e){return promiseResolve$1(this,e)}});var es_function_name={},DESCRIPTORS$d=descriptors,FUNCTION_NAME_EXISTS=functionName.EXISTS,uncurryThis$v=functionUncurryThis,defineProperty$9=objectDefineProperty.f,FunctionPrototype=Function.prototype,functionToString=uncurryThis$v(FunctionPrototype.toString),nameRE=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,regExpExec$2=uncurryThis$v(nameRE.exec),NAME$1="name";DESCRIPTORS$d&&!FUNCTION_NAME_EXISTS&&defineProperty$9(FunctionPrototype,NAME$1,{configurable:!0,get:function(){try{return regExpExec$2(nameRE,functionToString(this))[1]}catch(error){return""}}});var $$s=_export;$$s({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var es_number_constructor={},isCallable$b=isCallable$u,isObject$c=isObject$n,setPrototypeOf$4=objectSetPrototypeOf,inheritIfRequired$3=function(e,t,n){var r,i;return setPrototypeOf$4&&isCallable$b(r=t.constructor)&&r!==n&&isObject$c(i=r.prototype)&&i!==n.prototype&&setPrototypeOf$4(e,i),e},uncurryThis$u=functionUncurryThis,thisNumberValue$2=uncurryThis$u(1..valueOf),whitespaces$3="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",uncurryThis$t=functionUncurryThis,requireObjectCoercible$7=requireObjectCoercible$a,toString$e=toString$h,whitespaces$2=whitespaces$3,replace$7=uncurryThis$t("".replace),whitespace="["+whitespaces$2+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod$4=function(e){return function(t){var n=toString$e(requireObjectCoercible$7(t));return 1&e&&(n=replace$7(n,ltrim,"")),2&e&&(n=replace$7(n,rtrim,"")),n}},stringTrim={start:createMethod$4(1),end:createMethod$4(2),trim:createMethod$4(3)},DESCRIPTORS$c=descriptors,global$l=global$H,uncurryThis$s=functionUncurryThis,isForced$1=isForced_1,defineBuiltIn$d=defineBuiltIn$i,hasOwn$d=hasOwnProperty_1,inheritIfRequired$2=inheritIfRequired$3,isPrototypeOf$6=objectIsPrototypeOf,isSymbol$3=isSymbol$6,toPrimitive$1=toPrimitive$3,fails$t=fails$L,getOwnPropertyNames$3=objectGetOwnPropertyNames.f,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,defineProperty$8=objectDefineProperty.f,thisNumberValue$1=thisNumberValue$2,trim$1=stringTrim.trim,NUMBER="Number",NativeNumber=global$l[NUMBER],NumberPrototype=NativeNumber.prototype,TypeError$5=global$l.TypeError,arraySlice$a=uncurryThis$s("".slice),charCodeAt$3=uncurryThis$s("".charCodeAt),toNumeric=function(e){var t=toPrimitive$1(e,"number");return"bigint"==typeof t?t:toNumber$1(t)},toNumber$1=function(e){var t,n,r,i,o,a,s,c,l=toPrimitive$1(e,"number");if(isSymbol$3(l))throw TypeError$5("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=trim$1(l),43===(t=charCodeAt$3(l,0))||45===t){if(88===(n=charCodeAt$3(l,2))||120===n)return NaN}else if(48===t){switch(charCodeAt$3(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(a=(o=arraySlice$a(l,2)).length,s=0;s<a;s++)if((c=charCodeAt$3(o,s))<48||c>i)return NaN;return parseInt(o,r)}return+l};if(isForced$1(NUMBER,!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1"))){for(var NumberWrapper=function e(t){var n=arguments.length<1?0:NativeNumber(toNumeric(t)),r=this;return isPrototypeOf$6(NumberPrototype,r)&&fails$t((function(){thisNumberValue$1(r)}))?inheritIfRequired$2(Object(n),r,e):n},keys$2=DESCRIPTORS$c?getOwnPropertyNames$3(NativeNumber):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),j$1=0,key$1;keys$2.length>j$1;j$1++)hasOwn$d(NativeNumber,key$1=keys$2[j$1])&&!hasOwn$d(NumberWrapper,key$1)&&defineProperty$8(NumberWrapper,key$1,getOwnPropertyDescriptor$1(NativeNumber,key$1));NumberWrapper.prototype=NumberPrototype,NumberPrototype.constructor=NumberWrapper,defineBuiltIn$d(global$l,NUMBER,NumberWrapper,{constructor:!0})}var es_array_map={},$$r=_export,$map$1=arrayIteration.map,arrayMethodHasSpeciesSupport$1=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport$1("map");$$r({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1},{map:function(e){return $map$1(this,e,arguments.length>1?arguments[1]:void 0)}});var fails$s=fails$L,correctPrototypeGetter=!fails$s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),hasOwn$c=hasOwnProperty_1,isCallable$a=isCallable$u,toObject$b=toObject$h,sharedKey$1=sharedKey$4,CORRECT_PROTOTYPE_GETTER$1=correctPrototypeGetter,IE_PROTO=sharedKey$1("IE_PROTO"),$Object=Object,ObjectPrototype$4=$Object.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER$1?$Object.getPrototypeOf:function(e){var t=toObject$b(e);if(hasOwn$c(t,IE_PROTO))return t[IE_PROTO];var n=t.constructor;return isCallable$a(n)&&t instanceof n?n.prototype:t instanceof $Object?ObjectPrototype$4:null},fails$r=fails$L,isCallable$9=isCallable$u,isObject$b=isObject$n,getPrototypeOf$3=objectGetPrototypeOf,defineBuiltIn$c=defineBuiltIn$i,wellKnownSymbol$e=wellKnownSymbol$u,ITERATOR$6=wellKnownSymbol$e("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$3(getPrototypeOf$3(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=!isObject$b(IteratorPrototype$2)||fails$r((function(){var e={};return IteratorPrototype$2[ITERATOR$6].call(e)!==e}));NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={}),isCallable$9(IteratorPrototype$2[ITERATOR$6])||defineBuiltIn$c(IteratorPrototype$2,ITERATOR$6,(function(){return this}));var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$3=objectCreate,createPropertyDescriptor$3=createPropertyDescriptor$7,setToStringTag$5=setToStringTag$7,Iterators$2=iterators,returnThis$1=function(){return this},iteratorCreateConstructor=function(e,t,n,r){var i=t+" Iterator";return e.prototype=create$3(IteratorPrototype$1,{next:createPropertyDescriptor$3(+!r,n)}),setToStringTag$5(e,i,!1),Iterators$2[i]=returnThis$1,e},$$q=_export,call$f=functionCall,FunctionName$1=functionName,isCallable$8=isCallable$u,createIteratorConstructor$1=iteratorCreateConstructor,getPrototypeOf$2=objectGetPrototypeOf,setPrototypeOf$3=objectSetPrototypeOf,setToStringTag$4=setToStringTag$7,createNonEnumerableProperty$6=createNonEnumerableProperty$a,defineBuiltIn$b=defineBuiltIn$i,wellKnownSymbol$d=wellKnownSymbol$u,Iterators$1=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME$3=FunctionName$1.PROPER,CONFIGURABLE_FUNCTION_NAME$1=FunctionName$1.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$5=wellKnownSymbol$d("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},iteratorDefine=function(e,t,n,r,i,o,a){createIteratorConstructor$1(n,t,r);var s,c,l,u=function(e){if(e===i&&g)return g;if(!BUGGY_SAFARI_ITERATORS&&e in f)return f[e];switch(e){case KEYS:case VALUES:case ENTRIES:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,f=e.prototype,p=f[ITERATOR$5]||f["@@iterator"]||i&&f[i],g=!BUGGY_SAFARI_ITERATORS&&p||u(i),y="Array"==t&&f.entries||p;if(y&&(s=getPrototypeOf$2(y.call(new e)))!==Object.prototype&&s.next&&(getPrototypeOf$2(s)!==IteratorPrototype&&(setPrototypeOf$3?setPrototypeOf$3(s,IteratorPrototype):isCallable$8(s[ITERATOR$5])||defineBuiltIn$b(s,ITERATOR$5,returnThis)),setToStringTag$4(s,d,!0)),PROPER_FUNCTION_NAME$3&&i==VALUES&&p&&p.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME$1?createNonEnumerableProperty$6(f,"name",VALUES):(h=!0,g=function(){return call$f(p,this)})),i)if(c={values:u(VALUES),keys:o?g:u(KEYS),entries:u(ENTRIES)},a)for(l in c)(BUGGY_SAFARI_ITERATORS||h||!(l in f))&&defineBuiltIn$b(f,l,c[l]);else $$q({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS||h},c);return f[ITERATOR$5]!==g&&defineBuiltIn$b(f,ITERATOR$5,g,{name:i}),Iterators$1[t]=g,c},createIterResultObject$2=function(e,t){return{value:e,done:t}},toIndexedObject$5=toIndexedObject$c,addToUnscopables$2=addToUnscopables$4,Iterators=iterators,InternalStateModule$7=internalState,defineProperty$7=objectDefineProperty.f,defineIterator$1=iteratorDefine,createIterResultObject$1=createIterResultObject$2,DESCRIPTORS$b=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState$6=InternalStateModule$7.set,getInternalState$6=InternalStateModule$7.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$1(Array,"Array",(function(e,t){setInternalState$6(this,{type:ARRAY_ITERATOR,target:toIndexedObject$5(e),index:0,kind:t})}),(function(){var e=getInternalState$6(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,createIterResultObject$1(void 0,!0)):createIterResultObject$1("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),values=Iterators.Arguments=Iterators.Array;if(addToUnscopables$2("keys"),addToUnscopables$2("values"),addToUnscopables$2("entries"),DESCRIPTORS$b&&"values"!==values.name)try{defineProperty$7(values,"name",{value:"values"})}catch(error){}var global$k=global$H,DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty$5=createNonEnumerableProperty$a,wellKnownSymbol$c=wellKnownSymbol$u,ITERATOR$4=wellKnownSymbol$c("iterator"),TO_STRING_TAG$1=wellKnownSymbol$c("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(e,t){if(e){if(e[ITERATOR$4]!==ArrayValues)try{createNonEnumerableProperty$5(e,ITERATOR$4,ArrayValues)}catch(error){e[ITERATOR$4]=ArrayValues}if(e[TO_STRING_TAG$1]||createNonEnumerableProperty$5(e,TO_STRING_TAG$1,t),DOMIterables[t])for(var n in ArrayIteratorMethods)if(e[n]!==ArrayIteratorMethods[n])try{createNonEnumerableProperty$5(e,n,ArrayIteratorMethods[n])}catch(error){e[n]=ArrayIteratorMethods[n]}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global$k[COLLECTION_NAME]&&global$k[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");var es_array_filter={},$$p=_export,$filter$1=arrayIteration.filter,arrayMethodHasSpeciesSupport=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("filter");$$p({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{filter:function(e){return $filter$1(this,e,arguments.length>1?arguments[1]:void 0)}});var DESCRIPTORS$a=descriptors,uncurryThis$r=functionUncurryThis,call$e=functionCall,fails$q=fails$L,objectKeys$2=objectKeys$4,getOwnPropertySymbolsModule$2=objectGetOwnPropertySymbols,propertyIsEnumerableModule$1=objectPropertyIsEnumerable,toObject$a=toObject$h,IndexedObject$2=indexedObject,$assign=Object.assign,defineProperty$6=Object.defineProperty,concat$2=uncurryThis$r([].concat),objectAssign=!$assign||fails$q((function(){if(DESCRIPTORS$a&&1!==$assign({b:1},$assign(defineProperty$6({},"a",{enumerable:!0,get:function(){defineProperty$6(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=$assign({},e)[n]||objectKeys$2($assign({},t)).join("")!=r}))?function(e,t){for(var n=toObject$a(e),r=arguments.length,i=1,o=getOwnPropertySymbolsModule$2.f,a=propertyIsEnumerableModule$1.f;r>i;)for(var s,c=IndexedObject$2(arguments[i++]),l=o?concat$2(objectKeys$2(c),o(c)):objectKeys$2(c),u=l.length,d=0;u>d;)s=l[d++],DESCRIPTORS$a&&!call$e(a,c,s)||(n[s]=c[s]);return n}:$assign,$$o=_export,assign$4=objectAssign;$$o({target:"Object",stat:!0,arity:2,forced:Object.assign!==assign$4},{assign:assign$4});var eventemitter3={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&l.push(s[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(eventemitter3);var EventEmitter=eventemitter3.exports,es_string_match={},uncurryThis$q=functionUncurryThis,defineBuiltIn$a=defineBuiltIn$i,regexpExec$2=regexpExec$3,fails$p=fails$L,wellKnownSymbol$b=wellKnownSymbol$u,createNonEnumerableProperty$4=createNonEnumerableProperty$a,SPECIES=wellKnownSymbol$b("species"),RegExpPrototype$4=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(e,t,n,r){var i=wellKnownSymbol$b(e),o=!fails$p((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!fails$p((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[SPECIES]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||n){var s=uncurryThis$q(/./[i]),c=t(i,""[e],(function(e,t,n,r,i){var a=uncurryThis$q(e),c=t.exec;return c===regexpExec$2||c===RegExpPrototype$4.exec?o&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));defineBuiltIn$a(String.prototype,e,c[0]),defineBuiltIn$a(RegExpPrototype$4,i,c[1])}r&&createNonEnumerableProperty$4(RegExpPrototype$4[i],"sham",!0)},uncurryThis$p=functionUncurryThis,toIntegerOrInfinity$9=toIntegerOrInfinity$d,toString$d=toString$h,requireObjectCoercible$6=requireObjectCoercible$a,charAt$9=uncurryThis$p("".charAt),charCodeAt$2=uncurryThis$p("".charCodeAt),stringSlice$8=uncurryThis$p("".slice),createMethod$3=function(e){return function(t,n){var r,i,o=toString$d(requireObjectCoercible$6(t)),a=toIntegerOrInfinity$9(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=charCodeAt$2(o,a))<55296||r>56319||a+1===s||(i=charCodeAt$2(o,a+1))<56320||i>57343?e?charAt$9(o,a):r:e?stringSlice$8(o,a,a+2):i-56320+(r-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$3(!1),charAt:createMethod$3(!0)},charAt$8=stringMultibyte.charAt,advanceStringIndex$3=function(e,t,n){return t+(n?charAt$8(e,t).length:1)},call$d=functionCall,anObject$8=anObject$l,isCallable$7=isCallable$u,classof$8=classofRaw$2,regexpExec$1=regexpExec$3,$TypeError$4=TypeError,regexpExecAbstract=function(e,t){var n=e.exec;if(isCallable$7(n)){var r=call$d(n,e,t);return null!==r&&anObject$8(r),r}if("RegExp"===classof$8(e))return call$d(regexpExec$1,e,t);throw $TypeError$4("RegExp#exec called on incompatible receiver")},call$c=functionCall,fixRegExpWellKnownSymbolLogic$2=fixRegexpWellKnownSymbolLogic,anObject$7=anObject$l,isNullOrUndefined$2=isNullOrUndefined$7,toLength$6=toLength$8,toString$c=toString$h,requireObjectCoercible$5=requireObjectCoercible$a,getMethod$2=getMethod$6,advanceStringIndex$2=advanceStringIndex$3,regExpExec$1=regexpExecAbstract;fixRegExpWellKnownSymbolLogic$2("match",(function(e,t,n){return[function(t){var n=requireObjectCoercible$5(this),r=isNullOrUndefined$2(t)?void 0:getMethod$2(t,e);return r?call$c(r,t,n):new RegExp(t)[e](toString$c(n))},function(e){var r=anObject$7(this),i=toString$c(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return regExpExec$1(r,i);var a=r.unicode;r.lastIndex=0;for(var s,c=[],l=0;null!==(s=regExpExec$1(r,i));){var u=toString$c(s[0]);c[l]=u,""===u&&(r.lastIndex=advanceStringIndex$2(i,toLength$6(r.lastIndex),a)),l++}return 0===l?null:c}]}));var es_regexp_constructor={},isObject$a=isObject$n,classof$7=classofRaw$2,wellKnownSymbol$a=wellKnownSymbol$u,MATCH$2=wellKnownSymbol$a("match"),isRegexp=function(e){var t;return isObject$a(e)&&(void 0!==(t=e[MATCH$2])?!!t:"RegExp"==classof$7(e))},call$b=functionCall,hasOwn$b=hasOwnProperty_1,isPrototypeOf$5=objectIsPrototypeOf,regExpFlags=regexpFlags$1,RegExpPrototype$3=RegExp.prototype,regexpGetFlags=function(e){var t=e.flags;return void 0!==t||"flags"in RegExpPrototype$3||hasOwn$b(e,"flags")||!isPrototypeOf$5(RegExpPrototype$3,e)?t:call$b(regExpFlags,e)},defineProperty$5=objectDefineProperty.f,proxyAccessor$1=function(e,t,n){n in e||defineProperty$5(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},DESCRIPTORS$9=descriptors,global$j=global$H,uncurryThis$o=functionUncurryThis,isForced=isForced_1,inheritIfRequired$1=inheritIfRequired$3,createNonEnumerableProperty$3=createNonEnumerableProperty$a,getOwnPropertyNames$2=objectGetOwnPropertyNames.f,isPrototypeOf$4=objectIsPrototypeOf,isRegExp$2=isRegexp,toString$b=toString$h,getRegExpFlags$1=regexpGetFlags,stickyHelpers$1=regexpStickyHelpers,proxyAccessor=proxyAccessor$1,defineBuiltIn$9=defineBuiltIn$i,fails$o=fails$L,hasOwn$a=hasOwnProperty_1,enforceInternalState$2=internalState.enforce,setSpecies$1=setSpecies$3,wellKnownSymbol$9=wellKnownSymbol$u,UNSUPPORTED_DOT_ALL=regexpUnsupportedDotAll,UNSUPPORTED_NCG=regexpUnsupportedNcg,MATCH$1=wellKnownSymbol$9("match"),NativeRegExp=global$j.RegExp,RegExpPrototype$2=NativeRegExp.prototype,SyntaxError$1=global$j.SyntaxError,exec$4=uncurryThis$o(RegExpPrototype$2.exec),charAt$7=uncurryThis$o("".charAt),replace$6=uncurryThis$o("".replace),stringIndexOf$2=uncurryThis$o("".indexOf),stringSlice$7=uncurryThis$o("".slice),IS_NCG=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,re1=/a/g,re2=/a/g,CORRECT_NEW=new NativeRegExp(re1)!==re1,MISSED_STICKY$1=stickyHelpers$1.MISSED_STICKY,UNSUPPORTED_Y$1=stickyHelpers$1.UNSUPPORTED_Y,BASE_FORCED=DESCRIPTORS$9&&(!CORRECT_NEW||MISSED_STICKY$1||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG||fails$o((function(){return re2[MATCH$1]=!1,NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||"/a/i"!=NativeRegExp(re1,"i")}))),handleDotAll=function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=charAt$7(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+charAt$7(e,++r);return i},handleNCG=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,c=!1,l=0,u="";r<=n;r++){if("\\"===(t=charAt$7(e,r)))t+=charAt$7(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:exec$4(IS_NCG,stringSlice$7(e,r+1))&&(r+=2,c=!0),i+=t,l++;continue;case">"===t&&c:if(""===u||hasOwn$a(a,u))throw new SyntaxError$1("Invalid capture group name");a[u]=!0,o[o.length]=[u,l],c=!1,u="";continue}c?u+=t:i+=t}return[i,o]};if(isForced("RegExp",BASE_FORCED)){for(var RegExpWrapper=function e(t,n){var r,i,o,a,s,c,l=isPrototypeOf$4(RegExpPrototype$2,this),u=isRegExp$2(t),d=void 0===n,h=[],f=t;if(!l&&u&&d&&t.constructor===e)return t;if((u||isPrototypeOf$4(RegExpPrototype$2,t))&&(t=t.source,d&&(n=getRegExpFlags$1(f))),t=void 0===t?"":toString$b(t),n=void 0===n?"":toString$b(n),f=t,UNSUPPORTED_DOT_ALL&&"dotAll"in re1&&(i=!!n&&stringIndexOf$2(n,"s")>-1)&&(n=replace$6(n,/s/g,"")),r=n,MISSED_STICKY$1&&"sticky"in re1&&(o=!!n&&stringIndexOf$2(n,"y")>-1)&&UNSUPPORTED_Y$1&&(n=replace$6(n,/y/g,"")),UNSUPPORTED_NCG&&(t=(a=handleNCG(t))[0],h=a[1]),s=inheritIfRequired$1(NativeRegExp(t,n),l?this:RegExpPrototype$2,e),(i||o||h.length)&&(c=enforceInternalState$2(s),i&&(c.dotAll=!0,c.raw=e(handleDotAll(t),r)),o&&(c.sticky=!0),h.length&&(c.groups=h)),t!==f)try{createNonEnumerableProperty$3(s,"source",""===f?"(?:)":f)}catch(error){}return s},keys$1=getOwnPropertyNames$2(NativeRegExp),index$4=0;keys$1.length>index$4;)proxyAccessor(RegExpWrapper,NativeRegExp,keys$1[index$4++]);RegExpPrototype$2.constructor=RegExpWrapper,RegExpWrapper.prototype=RegExpPrototype$2,defineBuiltIn$9(global$j,"RegExp",RegExpWrapper,{constructor:!0})}setSpecies$1("RegExp");var makeBuiltIn=makeBuiltIn$3.exports,defineProperty$4=objectDefineProperty,defineBuiltInAccessor$2=function(e,t,n){return n.get&&makeBuiltIn(n.get,t,{getter:!0}),n.set&&makeBuiltIn(n.set,t,{setter:!0}),defineProperty$4.f(e,t,n)},DESCRIPTORS$8=descriptors,MISSED_STICKY=regexpStickyHelpers.MISSED_STICKY,classof$6=classofRaw$2,defineBuiltInAccessor$1=defineBuiltInAccessor$2,getInternalState$5=internalState.get,RegExpPrototype$1=RegExp.prototype,$TypeError$3=TypeError;DESCRIPTORS$8&&MISSED_STICKY&&defineBuiltInAccessor$1(RegExpPrototype$1,"sticky",{configurable:!0,get:function(){if(this!==RegExpPrototype$1){if("RegExp"===classof$6(this))return!!getInternalState$5(this).sticky;throw $TypeError$3("Incompatible receiver, RegExp required")}}});var es_regexp_toString={},PROPER_FUNCTION_NAME$2=functionName.PROPER,defineBuiltIn$8=defineBuiltIn$i,anObject$6=anObject$l,$toString$3=toString$h,fails$n=fails$L,getRegExpFlags=regexpGetFlags,TO_STRING$1="toString",RegExpPrototype=RegExp.prototype,nativeToString=RegExpPrototype[TO_STRING$1],NOT_GENERIC=fails$n((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME=PROPER_FUNCTION_NAME$2&&nativeToString.name!=TO_STRING$1;(NOT_GENERIC||INCORRECT_NAME)&&defineBuiltIn$8(RegExp.prototype,TO_STRING$1,(function(){var e=anObject$6(this);return"/"+$toString$3(e.source)+"/"+$toString$3(getRegExpFlags(e))}),{unsafe:!0});var es_string_split={},toAbsoluteIndex$3=toAbsoluteIndex$7,lengthOfArrayLike$b=lengthOfArrayLike$i,createProperty$1=createProperty$5,$Array$2=Array,max$1=Math.max,arraySliceSimple=function(e,t,n){for(var r=lengthOfArrayLike$b(e),i=toAbsoluteIndex$3(t,r),o=toAbsoluteIndex$3(void 0===n?r:n,r),a=$Array$2(max$1(o-i,0)),s=0;i<o;i++,s++)createProperty$1(a,s,e[i]);return a.length=s,a},apply$8=functionApply,call$a=functionCall,uncurryThis$n=functionUncurryThis,fixRegExpWellKnownSymbolLogic$1=fixRegexpWellKnownSymbolLogic,anObject$5=anObject$l,isNullOrUndefined$1=isNullOrUndefined$7,isRegExp$1=isRegexp,requireObjectCoercible$4=requireObjectCoercible$a,speciesConstructor$2=speciesConstructor$4,advanceStringIndex$1=advanceStringIndex$3,toLength$5=toLength$8,toString$a=toString$h,getMethod$1=getMethod$6,arraySlice$9=arraySliceSimple,callRegExpExec=regexpExecAbstract,regexpExec=regexpExec$3,stickyHelpers=regexpStickyHelpers,fails$m=fails$L,UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,MAX_UINT32=4294967295,min$3=Math.min,$push=[].push,exec$3=uncurryThis$n(/./.exec),push$8=uncurryThis$n($push),stringSlice$6=uncurryThis$n("".slice),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails$m((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));fixRegExpWellKnownSymbolLogic$1("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=toString$a(requireObjectCoercible$4(this)),i=void 0===n?MAX_UINT32:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!isRegExp$1(e))return call$a(t,r,e,i);for(var o,a,s,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,d=new RegExp(e.source,l+"g");(o=call$a(regexpExec,d,r))&&!((a=d.lastIndex)>u&&(push$8(c,stringSlice$6(r,u,o.index)),o.length>1&&o.index<r.length&&apply$8($push,c,arraySlice$9(o,1)),s=o[0].length,u=a,c.length>=i));)d.lastIndex===o.index&&d.lastIndex++;return u===r.length?!s&&exec$3(d,"")||push$8(c,""):push$8(c,stringSlice$6(r,u)),c.length>i?arraySlice$9(c,0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:call$a(t,this,e,n)}:t,[function(t,n){var i=requireObjectCoercible$4(this),o=isNullOrUndefined$1(t)?void 0:getMethod$1(t,e);return o?call$a(o,t,i,n):call$a(r,toString$a(i),t,n)},function(e,i){var o=anObject$5(this),a=toString$a(e),s=n(r,o,a,i,r!==t);if(s.done)return s.value;var c=speciesConstructor$2(o,RegExp),l=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(UNSUPPORTED_Y?"g":"y"),d=new c(UNSUPPORTED_Y?"^(?:"+o.source+")":o,u),h=void 0===i?MAX_UINT32:i>>>0;if(0===h)return[];if(0===a.length)return null===callRegExpExec(d,a)?[a]:[];for(var f=0,p=0,g=[];p<a.length;){d.lastIndex=UNSUPPORTED_Y?0:p;var y,v=callRegExpExec(d,UNSUPPORTED_Y?stringSlice$6(a,p):a);if(null===v||(y=min$3(toLength$5(d.lastIndex+(UNSUPPORTED_Y?p:0)),a.length))===f)p=advanceStringIndex$1(a,p,l);else{if(push$8(g,stringSlice$6(a,f,p)),g.length===h)return g;for(var m=1;m<=v.length-1;m++)if(push$8(g,v[m]),g.length===h)return g;p=f=y}}return push$8(g,stringSlice$6(a,f)),g}]}),!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC,UNSUPPORTED_Y);var es_string_replace={},uncurryThis$m=functionUncurryThis,toObject$9=toObject$h,floor$7=Math.floor,charAt$6=uncurryThis$m("".charAt),replace$5=uncurryThis$m("".replace),stringSlice$5=uncurryThis$m("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution$1=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,c=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==i&&(i=toObject$9(i),c=SUBSTITUTION_SYMBOLS),replace$5(o,c,(function(o,c){var l;switch(charAt$6(c,0)){case"$":return"$";case"&":return e;case"`":return stringSlice$5(t,0,n);case"'":return stringSlice$5(t,a);case"<":l=i[stringSlice$5(c,1,-1)];break;default:var u=+c;if(0===u)return o;if(u>s){var d=floor$7(u/10);return 0===d?o:d<=s?void 0===r[d-1]?charAt$6(c,1):r[d-1]+charAt$6(c,1):o}l=r[u-1]}return void 0===l?"":l}))},apply$7=functionApply,call$9=functionCall,uncurryThis$l=functionUncurryThis,fixRegExpWellKnownSymbolLogic=fixRegexpWellKnownSymbolLogic,fails$l=fails$L,anObject$4=anObject$l,isCallable$6=isCallable$u,isNullOrUndefined=isNullOrUndefined$7,toIntegerOrInfinity$8=toIntegerOrInfinity$d,toLength$4=toLength$8,toString$9=toString$h,requireObjectCoercible$3=requireObjectCoercible$a,advanceStringIndex=advanceStringIndex$3,getMethod=getMethod$6,getSubstitution=getSubstitution$1,regExpExec=regexpExecAbstract,wellKnownSymbol$8=wellKnownSymbol$u,REPLACE=wellKnownSymbol$8("replace"),max=Math.max,min$2=Math.min,concat$1=uncurryThis$l([].concat),push$7=uncurryThis$l([].push),stringIndexOf$1=uncurryThis$l("".indexOf),stringSlice$4=uncurryThis$l("".slice),maybeToString=function(e){return void 0===e?e:String(e)},REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails$l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));fixRegExpWellKnownSymbolLogic("replace",(function(e,t,n){var r=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(e,n){var r=requireObjectCoercible$3(this),i=isNullOrUndefined(e)?void 0:getMethod(e,REPLACE);return i?call$9(i,e,r,n):call$9(t,toString$9(r),e,n)},function(e,i){var o=anObject$4(this),a=toString$9(e);if("string"==typeof i&&-1===stringIndexOf$1(i,r)&&-1===stringIndexOf$1(i,"$<")){var s=n(t,o,a,i);if(s.done)return s.value}var c=isCallable$6(i);c||(i=toString$9(i));var l=o.global;if(l){var u=o.unicode;o.lastIndex=0}for(var d=[];;){var h=regExpExec(o,a);if(null===h)break;if(push$7(d,h),!l)break;""===toString$9(h[0])&&(o.lastIndex=advanceStringIndex(a,toLength$4(o.lastIndex),u))}for(var f="",p=0,g=0;g<d.length;g++){for(var y=toString$9((h=d[g])[0]),v=max(min$2(toIntegerOrInfinity$8(h.index),a.length),0),m=[],_=1;_<h.length;_++)push$7(m,maybeToString(h[_]));var b=h.groups;if(c){var E=concat$1([y],m,v,a);void 0!==b&&push$7(E,b);var S=toString$9(apply$7(i,void 0,E))}else S=getSubstitution(y,a,v,m,b,i);v>=p&&(f+=stringSlice$4(a,p,v)+S,p=v+y.length)}return f+stringSlice$4(a,p)}]}),!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);var es_string_trim={},PROPER_FUNCTION_NAME$1=functionName.PROPER,fails$k=fails$L,whitespaces$1=whitespaces$3,non="\u200b\x85\u180e",stringTrimForced=function(e){return fails$k((function(){return!!whitespaces$1[e]()||non[e]()!==non||PROPER_FUNCTION_NAME$1&&whitespaces$1[e].name!==e}))},$$n=_export,$trim=stringTrim.trim,forcedStringTrimMethod=stringTrimForced;$$n({target:"String",proto:!0,forced:forcedStringTrimMethod("trim")},{trim:function(){return $trim(this)}});var arraySlice$8=arraySliceSimple,floor$6=Math.floor,mergeSort=function e(t,n){var r=t.length,i=floor$6(r/2);return r<8?insertionSort(t,n):merge(t,e(arraySlice$8(t,0,i),n),e(arraySlice$8(t,i),n),n)},insertionSort=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},merge=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},arraySort$1=mergeSort,userAgent$2=engineUserAgent,firefox=userAgent$2.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],UA=engineUserAgent,engineIsIeOrEdge=/MSIE|Trident/.test(UA),userAgent$1=engineUserAgent,webkit=userAgent$1.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit&&+webkit[1],$$m=_export,uncurryThis$k=functionUncurryThis,aCallable$3=aCallable$b,toObject$8=toObject$h,lengthOfArrayLike$a=lengthOfArrayLike$i,deletePropertyOrThrow$1=deletePropertyOrThrow$3,toString$8=toString$h,fails$j=fails$L,internalSort$1=arraySort$1,arrayMethodIsStrict$1=arrayMethodIsStrict$4,FF$1=engineFfVersion,IE_OR_EDGE$1=engineIsIeOrEdge,V8$1=engineV8Version,WEBKIT$1=engineWebkitVersion,test=[],nativeSort$1=uncurryThis$k(test.sort),push$6=uncurryThis$k(test.push),FAILS_ON_UNDEFINED=fails$j((function(){test.sort(void 0)})),FAILS_ON_NULL=fails$j((function(){test.sort(null)})),STRICT_METHOD$1=arrayMethodIsStrict$1("sort"),STABLE_SORT$1=!fails$j((function(){if(V8$1)return V8$1<70;if(!(FF$1&&FF$1>3)){if(IE_OR_EDGE$1)return!0;if(WEBKIT$1)return WEBKIT$1<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)test.push({k:t+r,v:n})}for(test.sort((function(e,t){return t.v-e.v})),r=0;r<test.length;r++)t=test[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),FORCED$7=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD$1||!STABLE_SORT$1,getSortCompare$1=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:toString$8(t)>toString$8(n)?1:-1}};$$m({target:"Array",proto:!0,forced:FORCED$7},{sort:function(e){void 0!==e&&aCallable$3(e);var t=toObject$8(this);if(STABLE_SORT$1)return void 0===e?nativeSort$1(t):nativeSort$1(t,e);var n,r,i=[],o=lengthOfArrayLike$a(t);for(r=0;r<o;r++)r in t&&push$6(i,t[r]);for(internalSort$1(i,getSortCompare$1(e)),n=lengthOfArrayLike$a(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)deletePropertyOrThrow$1(t,r++);return t}});var XG_DEBUG_OPEN="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,STYLE={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},XGTAG="%c[xgplayer]",XG_DEBUG={config:{debug:XG_DEBUG_OPEN?3:0},logInfo:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.config.debug>=3&&(t=console).log.apply(t,[XGTAG,STYLE.info,e].concat(r))},logWarn:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.config.debug>=1&&(t=console).warn.apply(t,[XGTAG,STYLE.warn,e].concat(r))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(t=console)[n].apply(t,[XGTAG,STYLE.error,e].concat(i))}}};function bindDebug(e){e.logInfo=XG_DEBUG.logInfo.bind(e),e.logWarn=XG_DEBUG.logWarn.bind(e),e.logError=XG_DEBUG.logError.bind(e)}var XgplayerTimeRange=function(){function e(t){_classCallCheck$4(this,e),this.bufferedList=t}return _createClass$5(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),util={};function checkIsIn(e,t){for(var n=0,r=t.length;n<r;n++)if(e.indexOf(t[n])>-1)return!0;return!1}function isObject$9(e){var t=_typeof$3(e);return null!==e&&("object"===t||"function"===t)}function debounce$2(e,t,n){var r,i,o,a,s,c,l=0,u=!1,d=!1,h=!0,f=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function g(e,t){return f?(window.cancelAnimationFrame(s),window.requestAnimationFrame(e)):setTimeout(e,t)}function y(e){return l=e,s=g(m,t),u?p(e):a}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function m(){var e=Date.now();if(v(e))return _(e);s=g(m,function(e){var n=e-l,r=t-(e-c);return d?Math.min(r,o-n):r}(e))}function _(e){return s=void 0,h&&r?p(e):(r=i=void 0,a)}function b(){for(var e=Date.now(),n=v(e),o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];if(r=l,i=this,c=e,n){if(void 0===s)return y(c);if(d)return s=g(m,t),p(c)}return void 0===s&&(s=g(m,t)),a}return t=+t||0,isObject$9(n)&&(u=!!n.leading,o=(d="maxWait"in n)?Math.max(+n.maxWait||0,t):o,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==s&&function(e){if(f)return window.cancelAnimationFrame(e);clearTimeout(e)}(s),l=0,r=c=i=s=void 0},b.flush=function(){return void 0===s?a:_(Date.now())},b.pending=function(){return void 0!==s},b}function throttle$1(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return isObject$9(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),debounce$2(e,t,{leading:r,trailing:i,maxWait:t})}function getLang$1(){var e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return"zh-cn"===e&&(e="zh"),e}function checkIsCurrentVideo(e,t,n){if(e){var r=e.getAttribute(n);return!(!r||r!==t||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)}}util.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach((function(t){var r=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&i.setAttribute(r,o):i.setAttribute(r,o)})),i},util.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var r=document.createElement("div");r.innerHTML=e;var i=r.children;return r=null,i.length>0?(i=i[0],n&&util.addClass(i,n),t&&Object.keys(t).forEach((function(e){i.setAttribute(e,t[e])})),i):null}catch(o){return XG_DEBUG.logError("util.createDomFromHtml",o),null}},util.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(r){var n=e.className&&"object"===_typeof$3(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},util.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(n){util.hasClass(e,t)||(e.className&&"object"===_typeof$3(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},util.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(n){util.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===_typeof$3(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},util.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){util.hasClass(e,t)?util.removeClass(e,t):util.addClass(e,t)}))},util.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===util.typeOf(e[n])?t.push(e[n]):"Object"===util.typeOf(e[n])&&Object.keys(e[n]).map((function(r){e[n][r]&&t.push(r)}))},r=0;r<arguments.length;r++)n(r);return t.join(" ")},util.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(r){XG_DEBUG.logError("util.findDom",r),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},util.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},util.padStart=function(e,t,n){for(var r=String(n),i=t>>0,o=Math.ceil(i/r.length),a=[],s=String(e);o--;)a.push(r);return a.join("").substring(0,i-s.length)+s},util.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=util.padStart(Math.floor(e/3600),2,0),n=util.padStart(Math.floor((e-3600*t)/60),2,0),r=util.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,r]:[t,n,r]).join(":")},util.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},util.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},util.deepCopy=function(e,t){if("Object"===util.typeOf(t)&&"Object"===util.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==util.typeOf(t[n])||t[n]instanceof Node?"Array"===util.typeOf(t[n])?e[n]="Array"===util.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:util.deepCopy(e[n],t[n])})),e},util.deepMerge=function(e,t){return Object.keys(t).map((function(n){var r;"Array"===util.typeOf(t[n])&&"Array"===util.typeOf(e[n])?"Array"===util.typeOf(e[n])&&(r=e[n]).push.apply(r,_toConsumableArray(t[n])):util.typeOf(e[n])!==util.typeOf(t[n])||null===e[n]||"Object"!==util.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):util.deepMerge(e[n],t[n])})),e},util.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},util.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},util.setInterval=function(e,t,n,r){e._interval[t]||(e._interval[t]=window.setInterval(n.bind(e),r))},util.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},util.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var r=setTimeout((function(){t(),util.clearTimeout(e,r)}),n);return e._timers.push(r),r},util.clearTimeout=function(e,t){var n=e._timers;if("Array"===util.typeOf(n)){for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1),clearTimeout(t);break}}else clearTimeout(t)},util.clearAllTimers=function(e){var t=e._timers;"Array"===util.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},util.createImgBtn=function(e,t,n,r){var i,o,a,s=util.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return s.style.backgroundImage='url("'.concat(t,'")'),n&&r&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&r.indexOf(e)>-1)||(i=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(r.slice(0,r.indexOf(e)).trim()),a=e,!1)})),s.style.width="".concat(i).concat(a),s.style.height="".concat(o).concat(a),s.style.backgroundSize="".concat(i).concat(a," ").concat(o).concat(a),s.style.margin="start"===e?"-".concat(o/2).concat(a," auto auto -").concat(i/2).concat(a):"auto 5px auto 5px"),s},util.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var r="#";e.replace(/[0-9A-F]/gi,(function(e){r+=e+e})),e=r}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},util.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},util.checkIsFunction=function(e){return e&&"function"==typeof e},util.checkIsObject=function(e){return null!==e&&"object"===_typeof$3(e)},util.hide=function(e){e.style.display="none"},util.show=function(e,t){e.style.display=t||"block"},util.isUndefined=function(e){if(null==e)return!0},util.setStyleFromCsstext=function(e,t){t&&("String"===util.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},util.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var r=n.replace(/\s+/g,"").split(";"),i={},o={};return r.map((function(e){if(e){var n=e.split(":");n.length>1&&(checkIsIn(n[0],t)?i[n[0]]=n[1]:o[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(o).map((function(t){e.style[t]=o[t]})),i},util.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),r={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(r[t[0]]=t[1])}})),r},util.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var r=new window.Image;r.onload=function(e){r=null,t&&t(e)},r.onerror=function(e){r=null,n&&n(e)},r.src=e}},util.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},util.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},util.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},util.checkTouchSupport=function(){return"ontouchstart"in window},util.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],r=0;r<e.length;r++)n.push({start:e.start(r)<.5?0:e.start(r),end:e.end(r)});n.sort((function(e,t){return e.start-t.start||t.end-e.end}));var i=[];if(t)for(var o=0;o<n.length;o++){var a=i.length;if(a){var s=i[a-1].end;n[o].start-s<t?n[o].end>s&&(i[a-1].end=n[o].end):i.push(n[o])}else i.push(n[o])}else i=n;return new XgplayerTimeRange(i)},util.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.touches&&e.touches.length>0&&(e=e.touches[0]),{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},util.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},util.getHostFromUrl=function(e){if("String"!==util.typeOf(e))return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},util.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},util.isMSE=function(e){return!!(e&&e instanceof HTMLMediaElement)&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},util.generateSessionId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new Date).getTime();try{e=parseInt(e)}catch(r){e=0}t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=parseInt(window.performance.now()));var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}));return n},util.createEvent=function(e){var t;return"function"==typeof window.Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t};var VERSION_REG={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},H264_MIMETYPES=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],sniffer$1={get device(){return sniffer$1.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!o,s=!(a||r||n||o),c=/(?:iPad|PlayBook)/.test(e);return{isTablet:o,isPhone:a,isIpad:c,isIos:a||c,isAndroid:r,isPc:s,isSymbian:n,isWindowsPhone:t,isFireFox:i}},get osVersion(){if("undefined"==typeof navigator)return 0;var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?VERSION_REG.ios:VERSION_REG.android)?t.exec(e):[];if(n&&n.length>=3){var r=n[2].split(".");return r.length>0?parseInt(r[0]):0}return 0},get isWeixin(){return"undefined"!=typeof navigator&&!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())},isSupportMP4:function(){var e={isSupport:!1,mime:""};if("undefined"==typeof document)return e;if(this.supportResult)return this.supportResult;var t=document.createElement("video");return"function"==typeof t.canPlayType&&H264_MIMETYPES.map((function(n){"probably"===t.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(e.isSupport=!0,e.mime+="||".concat(n))})),this.supportResult=e,t=null,e},isHevcSupported:function(){return!("undefined"==typeof MediaSource||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"==typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var n=e.video||{},r=e.audio||{};try{var i=MediaSource.isTypeSupported(n.contentType),o=MediaSource.isTypeSupported(r.contentType);return Promise.resolve({supported:i&&o,smooth:!1,powerEfficient:!1})}catch(a){return Promise.resolve(t)}}},version$1="3.0.0-next.54",ERROR_TYPE_MAP={1:"network",2:"network",3:"decoder",4:"format"},Errors=_createClass$5((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};_classCallCheck$4(this,e);var r=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.media){var i=n.mediaError?n.mediaError:t.media.error||{},o=t.duration,a=t.currentTime,s=t.ended,c=t.src,l=t.currentSrc,u=t.media,d=u.readyState,h=u.networkState,f={playerVersion:version$1,currentTime:a,duration:o,ended:s,readyState:d,networkState:h,src:c||l,errorType:n.errorType,errorCode:n.errorCode||i.code,message:n.errorMessage||i.message,mediaError:i,originError:n.originError?n.originError.stack:"",host:util.getHostFromUrl(c||l)};return n.ext&&Object.keys(n.ext).map((function(e){f[e]=n.ext[e]})),f}if(arguments.length>1){for(var p={playerVersion:version$1,domain:document.domain},g=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],y=0;y<arguments.length;y++)p[g[y]]=arguments[y];return p.ex=r?(r[arguments[0]]||{}).msg:"",p}})),PLAY="play",PLAYING="playing",ENDED="ended",PAUSE="pause",ERROR$3="error",SEEKING="seeking",SEEKED="seeked",TIME_UPDATE="timeupdate",WAITING="waiting",CANPLAY="canplay",CANPLAY_THROUGH="canplaythrough",DURATION_CHANGE="durationchange",VOLUME_CHANGE="volumechange",LOADED_DATA="loadeddata",RATE_CHANGE="ratechange",PROGRESS="progress",LOAD_START="loadstart",EMPTIED="emptied",STALLED="stalled",SUSPEND="suspend",ABORT="abort",BUFFER_CHANGE="bufferedChange",PLAYER_FOCUS="focus",PLAYER_BLUR="blur",READY="ready",URL_NULL="urlNull",AUTOPLAY_STARTED="autoplay_started",AUTOPLAY_PREVENTED="autoplay_was_prevented",COMPLETE="complete",REPLAY="replay",DESTROY="destroy",URL_CHANGE="urlchange",DOWNLOAD_SPEED_CHANGE="download_speed_change",FULLSCREEN_CHANGE="fullscreen_change",CSS_FULLSCREEN_CHANGE="cssFullscreen_change",MINI_STATE_CHANGE="mini_state_change",DEFINITION_CHANGE="definition_change",BEFORE_DEFINITION_CHANGE="before_definition_change",AFTER_DEFINITION_CHANGE="after_definition_change",SEI_PARSED="SEI_PARSED",RETRY="retry",VIDEO_RESIZE="video_resize",PIP_CHANGE="pip_change",ROTATE="rotate",SCREEN_SHOT="screenShot",PLAYNEXT="playnext",SHORTCUT="shortcut",XGLOG="xglog",USER_ACTION="user_action",RESET="reset",SWITCH_SUBTITLE="switch_subtitle",VIDEO_EVENTS=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],STATS_EVENTS$1={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},FPS_STUCK="fps_stuck",Events=Object.freeze(Object.defineProperty({__proto__:null,ABORT:ABORT,AFTER_DEFINITION_CHANGE:AFTER_DEFINITION_CHANGE,AUTOPLAY_PREVENTED:AUTOPLAY_PREVENTED,AUTOPLAY_STARTED:AUTOPLAY_STARTED,BEFORE_DEFINITION_CHANGE:BEFORE_DEFINITION_CHANGE,BUFFER_CHANGE:BUFFER_CHANGE,CANPLAY:CANPLAY,CANPLAY_THROUGH:CANPLAY_THROUGH,COMPLETE:COMPLETE,CSS_FULLSCREEN_CHANGE:CSS_FULLSCREEN_CHANGE,DEFINITION_CHANGE:DEFINITION_CHANGE,DESTROY:DESTROY,DOWNLOAD_SPEED_CHANGE:DOWNLOAD_SPEED_CHANGE,DURATION_CHANGE:DURATION_CHANGE,EMPTIED:EMPTIED,ENDED:ENDED,ERROR:ERROR$3,FPS_STUCK:FPS_STUCK,FULLSCREEN_CHANGE:FULLSCREEN_CHANGE,LOADED_DATA:LOADED_DATA,LOAD_START:LOAD_START,MINI_STATE_CHANGE:MINI_STATE_CHANGE,PAUSE:PAUSE,PIP_CHANGE:PIP_CHANGE,PLAY:PLAY,PLAYER_BLUR:PLAYER_BLUR,PLAYER_FOCUS:PLAYER_FOCUS,PLAYING:PLAYING,PLAYNEXT:PLAYNEXT,PROGRESS:PROGRESS,RATE_CHANGE:RATE_CHANGE,READY:READY,REPLAY:REPLAY,RESET:RESET,RETRY:RETRY,ROTATE:ROTATE,SCREEN_SHOT:SCREEN_SHOT,SEEKED:SEEKED,SEEKING:SEEKING,SEI_PARSED:SEI_PARSED,SHORTCUT:SHORTCUT,STALLED:STALLED,STATS_EVENTS:STATS_EVENTS$1,SUSPEND:SUSPEND,SWITCH_SUBTITLE:SWITCH_SUBTITLE,TIME_UPDATE:TIME_UPDATE,URL_CHANGE:URL_CHANGE,URL_NULL:URL_NULL,USER_ACTION:USER_ACTION,VIDEO_EVENTS:VIDEO_EVENTS,VIDEO_RESIZE:VIDEO_RESIZE,VOLUME_CHANGE:VOLUME_CHANGE,WAITING:WAITING,XGLOG:XGLOG},Symbol.toStringTag,{value:"Module"}));function emitVideoEvent(e,t){this&&this.emit&&("error"===e?this.errorHandler(e,t.error):this.emit(e,t))}function getVideoEventHandler(e,t){return function(n,r){var i={player:t,eventName:e,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,isInternalOp:!!t._internalOp[n.type],muted:t.muted,volume:t.volume,host:util.getHostFromUrl(t.currentSrc),vtype:t.vtype};if(t.removeInnerOP(n.type),"timeupdate"===e&&(t._currentTime=t.media&&t.media.currentTime),"ratechange"===e){var o=t.media?t.media.playbackRate:0;if(o&&t._rate===o)return;t._rate=t.media&&t.media.playbackRate}if("durationchange"===e&&(t._duration=t.media.duration),"volumechange"===e&&(i.isMutedChange=t._lastMuted!==t.muted,t._lastMuted=t.muted),"error"===e&&(i.error=r||t.video.error),t.mediaEventMiddleware[e]){var a=emitVideoEvent.bind(t,e,i);try{t.mediaEventMiddleware[e].call(t,i,a)}catch(s){throw emitVideoEvent.call(t,e,i),s}}else emitVideoEvent.call(t,e,i)}}var MediaProxy=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;_classCallCheck$4(this,n),(r=t.call(this,e))._hasStart=!1,r._currentTime=0,r._duration=0,r._internalOp={},r._lastMuted=!1,r.vtype="MP4",r._rate=-1,r.mediaConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:0|e.tabindex,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var i=e["x5-video-player-type"]||e.x5VideoPlayerType;return sniffer$1.isWeixin&&sniffer$1.os.isAndroid&&i&&(r.mediaConfig["x5-video-player-type"]=i,delete r.mediaConfig.playsinline,delete r.mediaConfig["webkit-playsinline"],delete r.mediaConfig["x5-playsinline"]),e.loop&&(r.mediaConfig.loop="loop"),r.media=util.createDom(r.mediaConfig.mediaType,"",r.mediaConfig,""),e.defaultPlaybackRate&&(r.media.defaultPlaybackRate=r.media.playbackRate=e.defaultPlaybackRate),"Number"===util.typeOf(e.volume)&&(r.volume=e.volume),e.autoplayMuted&&(r.media.muted=!0,r._lastMuted=!0),e.autoplay&&(r.media.autoplay=!0),r._interval={},r.mediaEventMiddleware={},r.attachVideoEvents(),r}return _createClass$5(n,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.mediaEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.mediaEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers||(this._evHandlers=VIDEO_EVENTS.map((function(t){var n="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"==typeof e[n]&&e.on(t,e[n]),_defineProperty$5({},t,getVideoEventHandler(t,e))}))),this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.addEventListener(n,e[n],!1)}))}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.removeEventListener(n,e[n],!1)})),this._evHandlers.forEach((function(t){var n=Object.keys(t)[0],r="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[r]&&e.off(n,e[r])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),e.load(),t.forEach((function(e){n.media.appendChild(util.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))}));var r=e.children;if(r){this._videoSourceCount=r.length;for(var i=null,o=0;o<this._evHandlers.length;o++)if("error"===Object.keys(this._evHandlers[o])[0]){i=this._evHandlers[o];break}!this._sourceError&&(this._sourceError=function(e){if(n._videoSourceCount--,0===n._videoSourceCount){var t={code:4,message:"sources load error"};i?i.error(e,t):n.errorHandler("error",t)}});for(var a=0;a<r.length;a++)r[a].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0])}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.media&&(this.media.error||t)){var n=this.media.error||t,r=n.code?ERROR_TYPE_MAP[n.code]:"other";n.message,this.media.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new Errors(this,{errorType:r,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var e in this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media}},{key:"play",value:function(){return this.media?this.media.play():null}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return!!this.media&&this.media.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.media)return t;e||(e=this.media.buffered);var n=this.media.currentTime;if(e)for(var r=0,i=e.length;r<i&&(t[0]=e.start(r),t[1]=e.end(r),!(t[0]<=n&&n<=t[1]));r++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.media&&this.media.autoplay},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?util.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var t=this.media.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||t.start(n)<.1)&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?void 0!==this.media.currentTime?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.media&&this.media.defaultMuted},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.media&&this.media.ended}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){return this.media.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.media.error.code-1]:""}},{key:"loop",get:function(){return!!this.media&&this.media.loop},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return!!this.media&&this.media.muted},set:function(e){this.media&&this.media.muted!==e&&(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkStat}},{key:"paused",get:function(){return!this.media||this.media.paused}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){this.media&&e!==1/0&&(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return!!this.media&&this.media.preload},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return!!this.media&&this.media.seekable}},{key:"seeking",get:function(){return!!this.media&&this.media.seeking}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){this.media&&(this.emit(URL_CHANGE,e),this.emit(WAITING),this._currentTime=0,this._duration=0,/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src)?this.onWaiting():(this._detachSourceEvents(this.media),"Array"===util.typeOf(e)?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()))}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e!==1/0&&this.media&&(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=_get$2(_getPrototypeOf$4(n.prototype),"emit",this)).call.apply(r,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=_get$2(_getPrototypeOf$4(n.prototype),"on",this)).call.apply(r,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=_get$2(_getPrototypeOf$4(n.prototype),"once",this)).call.apply(r,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=_get$2(_getPrototypeOf$4(n.prototype),"off",this)).call.apply(r,[this,e,t].concat(o))}},{key:"offAll",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"removeAllListeners",this).call(this)}}]),n}(EventEmitter),INDEXDB=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};_classCallCheck$4(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return _createClass$5(e,[{key:"openDB",value:function(e){var t=this,n=this,r=this.myDB.version||1,i=n.indexedDB.open(n.myDB.name,r);i.onerror=function(e){},i.onsuccess=function(r){t.myDB.db=r.target.result,e.call(n)},i.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,r=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=0;i<t.length;i++)(n=r.add(t[i])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,r=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=0;i<t.length;i++)(n=r.put(t[i])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var r=this,i=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);i.onerror=function(){n.call(r,null)},i.onsuccess=function(e){var t=e.target.result;n.call(r,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}(),FULLSCREEN_EVENTS=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],GET_FULLSCREEN_API=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],EXIT_FULLSCREEN_API=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],PLATER_ID="data-xgplayerid";function callHandler(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=t.call.apply(t,[e].concat(i));n&&"function"==typeof n&&(a&&a.then?a.then((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.call.apply(n,[e].concat(r))})):n.call.apply(n,[e].concat(i)))}function hook(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var r=arguments,i=this;if(n.pre)try{var o;(o=n.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(c){throw c.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(c.message),c}if(this.__hooks&&this.__hooks[e])try{var a,s=(a=this.__hooks[e]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));s?s.then?s.then((function(e){!1!==e&&callHandler.apply(void 0,[i,t,n.next].concat(_toConsumableArray(r)))})).catch((function(e){throw e})):callHandler.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===s&&callHandler.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(c){throw c.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(c.message),c}else callHandler.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function useHooks(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function removeHooks(e,t){var n=this.__hooks;n&&delete n[e]}function usePluginHooks(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.useHooks&&t.useHooks.apply(t,r)}}function removePluginHooks(e){if(this.plugins&&this.plugins[e.toLowerCase()]){var t=this.plugins[e.toLowerCase()];if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.removeHooks&&t.removeHooks.apply(t,r)}}}function hooksDescriptor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function delHooksDescriptor(e){e.__hooks=null}function runHooks(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(i));var a,s=(a=e.__hooks[t]).call.apply(a,[e,e].concat(i));if(s&&s.then)s.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(i))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==s)return n.call.apply(n,[e,e].concat(i))}function showErrorMsg(e,t){XG_DEBUG.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var BasePlugin=function(){function e(t){_classCallCheck$4(this,e),util.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),hooksDescriptor(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return _createClass$5(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=util.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):showErrorMsg(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__onceEvents[e]=t,this.player.once(e,t)):Array.isArray(e)&&e.forEach((function(r){n.__onceEvents[r]=t,n.player.once(e,t)})):showErrorMsg(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(r){delete n.__events[e],n.player.off(r,t)})):showErrorMsg(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;["__events","__onceEvents"].forEach((function(t){Object.keys(e[t]).forEach((function(n){e[t][n]&&e.off(n,e[t][n]),n&&delete e[t][n]}))})),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.player).emit.apply(t,[e].concat(r))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var r=_objectSpread2$4(_objectSpread2$4({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,r)}}},{key:"hook",value:function(e,t){return hook.call.apply(hook,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return useHooks.call.apply(useHooks,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return removeHooks.call.apply(removeHooks,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),util.clearAllTimers(this),util.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),delHooksDescriptor(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}(),DOCUMENT_NODE_TYPE=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var proto=Element.prototype;proto.matches=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector}function closest$2(e,t){for(;e&&e.nodeType!==DOCUMENT_NODE_TYPE;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var closest_1=closest$2,closest$1=closest_1;function _delegate(e,t,n,r,i){var o=listener.apply(this,arguments);return e.addEventListener(n,o,i),{destroy:function(){e.removeEventListener(n,o,i)}}}function delegate(e,t,n,r,i){return"function"==typeof e.addEventListener?_delegate.apply(null,arguments):"function"==typeof n?_delegate.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return _delegate(e,t,n,r,i)})))}function listener(e,t,n,r){return function(n){n.delegateTarget=closest$1(n.target,t),n.delegateTarget&&r.call(e,n)}}var delegate_1=delegate,ROOT_TYPES={CONTROLS:"controls",ROOT:"root"},POSITIONS$a={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function isUrl$1(e){return!!e&&e.indexOf&&/^(?:http|data:|\/)/.test(e)}function mergeIconClass(e,t){return"object"===_typeof$3(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}function mergeIconAttr(e,t){return"object"===_typeof$3(e)&&e.attr&&"object"===_typeof$3(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}function createIcon(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(e instanceof window.Element)return util.addClass(e,n),Object.keys(r).map((function(t){e.setAttribute(t,r[t])})),e;if(isUrl$1(e)||isUrl$1(e.url))return r.src=isUrl$1(e)?e:e.url||"",o=util.createDom(e.tag||"img","",r,"xg-img ".concat(n));if("function"==typeof e)try{return(o=e())instanceof window.Element?(util.addClass(o,n),Object.keys(r).map((function(e){o.setAttribute(e,r[e])})),o):(XG_DEBUG.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(i,"] is a function mast return an Element Object")),null)}catch(a){return XG_DEBUG.logError("Plugin named [".concat(i,"]:createIcon"),a),null}return"string"==typeof e?util.createDomFromHtml(e,r,n):(XG_DEBUG.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(i,"] is invalid")),null)}function registerIconsObj(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(r){var i=e[r],o=i&&i.class?i.class:"",a=i&&i.attr?i.attr:{},s=null;n&&n[r]&&(o=mergeIconClass(n[r],o),a=mergeIconAttr(n[r],a),s=createIcon(n[r],r,o,a,t.pluginName)),!s&&i&&(s=createIcon(i.icon?i.icon:i,a,o,{},t.pluginName)),t.icons[r]=s}))}function registerTextObj(e,t){Object.keys(e).map((function(n){Object.defineProperty(t.langText,n,{get:function(){var r=t.lang,i=t.i18n;return i[n]?i[n]:e[n]&&e[n][r]||""}})}))}var Plugin=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck$4(this,n),(e=t.call(this,r)).__delegates=[],e}return _createClass$5(n,[{key:"__init",value:function(e){if(_get$2(_getPrototypeOf$4(n.prototype),"__init",this).call(this,e),e.root){var t=e.root,r=null;this.icons={},this.root=null,this.parent=null,registerIconsObj(this.registerIcons()||{},this),this.langText={},registerTextObj(this.registerLanguageTexts()||{},this);var i="";try{i=this.render()}catch(s){throw XG_DEBUG.logError("Plugin:".concat(this.pluginName,":render"),s),new Error("Plugin:".concat(this.pluginName,":render:").concat(s.message))}if(i)(r=n.insert(i,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(r=util.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(r)}this.root=r,this.parent=t;var o=this.config.attr||{},a=this.config.style||{};this.setAttr(o),this.setStyle(a),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===_typeof$3(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var r,i,o=n,a=t[o],s={root:e.root};"function"==typeof a?(r=e.config[o]||{},i=a):"object"===_typeof$3(a)&&"function"==typeof a.plugin&&(r=a.options?util.deepCopy(e.config[o]||{},a.options):e.config[o]||{},i=a.plugin),s.config=r,void 0!==r.index&&(s.index=r.index),r.root&&(s.root=r.root),e.registerPlugin(i,s,o)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,r=this.langText;t&&function e(t,n){for(var r=0;r<t.children.length;r++)t.children[r].children.length>0?e(t.children[r],n):n(t.children[r])}(t,(function(t){var i=t.getAttribute&&t.getAttribute("lang-key");if(i){var o=n[i.toUpperCase()]||r[i];o&&(t.innerHTML="function"==typeof o?o(e):o)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},r=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var i=n[t]||r[t]||"";i&&(e.innerHTML=i)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var i=_get$2(_getPrototypeOf$4(n.prototype),"registerPlugin",this).call(this,e,t,r);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,r){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){i.bindEL(e,t)})):this.bindEL(e,t);else{var o=n.delegate.call(this,this.root,e,t,r);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var r="".concat(e,"_").concat(t),i=0;i<this.__delegates.length;i++)if(this.__delegates[i].key===r){this.__delegates[i].destroy(),this.__delegates.splice(i,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)return"String"===util.typeOf(e)?this.root.style[e]=t:void("Object"===util.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)return"String"===util.typeOf(e)?this.root.setAttribute(e,t):void("Object"===util.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(n){return XG_DEBUG.logError("Plugin:appendChild",n),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),_get$2(_getPrototypeOf$4(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.children.length,i=Number(n),o=e instanceof window.Node;if(r){for(var a=0,s=null,c="";a<r;a++){s=t.children[a];var l=Number(s.getAttribute("data-index"));if(l>=i){c="beforebegin";break}l<i&&(c="afterend")}return o?"afterend"===c?t.appendChild(e):t.insertBefore(e,s):s.insertAdjacentHTML(c,e),"afterend"===c?t.children[t.children.length-1]:t.children[a]}return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(e instanceof window.Node&&"function"==typeof r)if(Array.isArray(n))n.forEach((function(n){var a=delegate_1(e,t,n,r,i);a.key="".concat(t,"_").concat(n),o.push(a)}));else{var a=delegate_1(e,t,n,r,i);a.key="".concat(t,"_").concat(n),o.push(a)}return o}},{key:"ROOT_TYPES",get:function(){return ROOT_TYPES}},{key:"POSITIONS",get:function(){return POSITIONS$a}}]),n}(BasePlugin),charAt$5=stringMultibyte.charAt,toString$7=toString$h,InternalStateModule$6=internalState,defineIterator=iteratorDefine,createIterResultObject=createIterResultObject$2,STRING_ITERATOR="String Iterator",setInternalState$5=InternalStateModule$6.set,getInternalState$4=InternalStateModule$6.getterFor(STRING_ITERATOR);defineIterator(String,"String",(function(e){setInternalState$5(this,{type:STRING_ITERATOR,string:toString$7(e),index:0})}),(function(){var e,t=getInternalState$4(this),n=t.string,r=t.index;return r>=n.length?createIterResultObject(void 0,!0):(e=charAt$5(n,r),t.index+=e.length,createIterResultObject(e,!1))}));var ResizeObserver$1=function(){function e(){var t=this;if(_classCallCheck$4(this,e),_defineProperty$5(this,"__trigger",(function(e){var n=(new Date).getTime();t.timeStamp=n;for(var r=0;r<e.length;r++)t.__runHandler(e[r].target)})),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver(throttle$1(this.__trigger,100,{trailing:!0})),this.timeStamp=(new Date).getTime()}catch(n){console.error(n)}}return _createClass$5(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=e.getAttribute(PLATER_ID),r=this.__handlers,i=-1,o=0;o<r.length;o++)r[o]&&e===r[o].target&&(i=o);i>-1?this.__handlers[i].handler=t:this.__handlers.push({target:e,handler:t,playerId:n})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,r){e===n.target&&(t=r)}));try{this.observer&&this.observer.unobserve(e)}catch(n){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(error){console.error(error)}return!0}return!1}}]),e}(),resizeObserver$1=null;function addObserver$1(e,t){return resizeObserver$1||(resizeObserver$1=new ResizeObserver$1),resizeObserver$1.addObserver(e,t),resizeObserver$1}function unObserver$1(e,t){resizeObserver$1.unObserver(e,t)}var pluginsManager={pluginGroup:{},init:function(e){var t=e._pluginInfoId;t||(t=(new Date).getTime(),e._pluginInfoId=t),!e.config.closeResizeObserver&&addObserver$1(e.root,(function(){e.resize()})),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[t]={_player:e,_originalOptions:e.config||{},_plugins:{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),n=0;n<t.length;n++){var r=this.pluginGroup[t[n]]._player;if(r.root===e)return r}return null}return null},formatPluginInfo:function(e,t){var n=null,r=null;return e.plugin&&"function"==typeof e.plugin?(n=e.plugin,r=e.options):(n=e,r={}),t&&(r.config=t||{}),{PLUFGIN:n,options:r}},checkPluginIfExits:function(e,t){for(var n=0;n<t.length;n++)if(e.toLowerCase()===t[n].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,t){for(var n=Object.keys(t),r=null,i=0;i<n.length;i++)if(e.toLowerCase()===n[i].toLowerCase()){r=t[n[i]];break}return"Object"===util.typeOf(r)?{root:r.root,position:r.position}:{}},lazyRegister:function(e,t){var n=this,r=t.timeout||1500;return Promise.race([t.loader().then((function(t){var r;r=t&&t.__esModule?t.default:t,n.register(e,r,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),r)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var r=e._pluginInfoId;if(r&&this.pluginGroup[r]){this.pluginGroup[r]._plugins||(this.pluginGroup[r]._plugins={});var i=this.pluginGroup[r]._plugins,o=this.pluginGroup[r]._originalOptions;n.player=this.pluginGroup[r]._player;var a=n.pluginName||t.pluginName;if(!a)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported(e.config.mediaType,e.config.codecType)){n.config||(n.config={});for(var s=Object.keys(o),c=0;c<s.length;c++)if(a.toLowerCase()===s[c].toLowerCase()){var l=o[s[c]];"Object"===util.typeOf(l)?n.config=Object.assign({},n.config,o[s[c]]):"Boolean"===util.typeOf(l)&&(n.config.disable=!l);break}t.defaultConfig&&Object.keys(t.defaultConfig).forEach((function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{i[a.toLowerCase()]&&(this.unRegister(r,a.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(a,"] exist, destroy the old instance")));var u=new t(n);return i[a.toLowerCase()]=u,i[a.toLowerCase()].func=t,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(d){throw console.error(d),d}}else console.warn("not supported plugin [".concat(a,"]"))}}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(r){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),r)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!n||!this.pluginGroup[n])return null;var r=t.toLowerCase();return this.pluginGroup[n]._plugins[r]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(r){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var i=e._pluginInfoId;if(t.pluginGroup[i]){var o=t.pluginGroup[i]._plugins,a=[];Object.keys(o).forEach((function(e){if(o[e]&&o[e].beforePlayerInit)try{var t=o[e].beforePlayerInit();a.push(n(t))}catch(r){throw a.push(n(null)),r}})),Promise.all([].concat(a)).then((function(){r()})).catch((function(e){console.error(e),r()}))}else r()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var n=this.pluginGroup[t]._plugins;Object.keys(n).forEach((function(e){n[e]&&n[e].afterPlayerInit&&n[e].afterPlayerInit()}))}},setLang:function(e,t){var n=t._pluginInfoId;if(n&&this.pluginGroup[n]){var r=this.pluginGroup[n]._plugins;Object.keys(r).forEach((function(t){if(r[t].updateLang)r[t].updateLang(e);else try{r[t].lang=e}catch(error){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=this,n=e._pluginInfoId;if(n&&this.pluginGroup[n]){var r=[],i=this.pluginGroup[n]._plugins;Object.keys(i).forEach((function(e){"controls"!==e&&i[e]&&(r.push({plugin:i[e].func,options:i[e].__args}),t.unRegister(n,e))})),r.forEach((function(n){t.register(e,n.plugin,n.options)}))}},onPluginsReady:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var n=this.pluginGroup[t]._plugins||{};Object.keys(n).forEach((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))}},setCurrentUserActive:function(e,t){if(this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var n=Object.keys(this.pluginGroup),r=0;r<n.length;r++){var i=this.pluginGroup[n[r]];i&&i._player&&(this.pluginGroup[n[r]]._player.isUserActive=!1)}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var n=this.pluginGroup[e[t]];if(n&&n._player&&n._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){unObserver$1(e.root);for(var n=this.pluginGroup[t]._plugins,r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];this.unRegister(t,o)}var a=e.isUseActive;if(delete this.pluginGroup[t],delete e._pluginInfoId,a){var s=Object.keys(this.pluginGroup);s.length>0&&this.setCurrentUserActive(s[s.length-1],!0)}}}},STATE_CLASS={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function getDefaultConfig$1(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:getLang$1(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var usePreset=function(e,t){var n,r,i=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),o=i.plugins,a=void 0===o?[]:o,s=i.ignores,c=void 0===s?[]:s,l=i.icons,u=void 0===l?{}:l,d=i.i18n,h=void 0===d?[]:d;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(n=e.config.plugins).push.apply(n,_toConsumableArray(a)),(r=e.config.ignores).push.apply(r,_toConsumableArray(c)),Object.keys(u).map((function(t){e.config.icons[t]||(e.config.icons[t]=u[t])}));var f=e.config.i18n||[];h.push.apply(h,_toConsumableArray(f)),e.config.i18n=h},Controls=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"onMouseEnter",(function(t){var n=_assertThisInitialized$4(e),r=n.player;n.playerConfig.closeControlsBlur&&r.focus({autoHide:!1})})),_defineProperty$5(_assertThisInitialized$4(e),"onMouseLeave",(function(){_assertThisInitialized$4(e).player.focus()})),e}return _createClass$5(n,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==sniffer$1.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,r=t.height,i=t.mode;if(!n){"flex"===i&&this.player.addClass(STATE_CLASS.FLEX_CONTROLS);var o={height:"".concat(r,"px")};Object.keys(o).map((function(t){e.root.style[t]=o[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(MINI_STATE_CHANGE,(function(t){t?util.addClass(e.root,"mini-controls"):util.removeClass(e.root,"mini-controls")}));var a=this.playerConfig.isMobileSimulateMode;"mobile"!==sniffer$1.device&&"mobile"!==a&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&util.addClass(this.root,STATE_CLASS.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){util.removeClass(this.root,STATE_CLASS.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){util.addClass(this.root,"show")}},{key:"hide",value:function(){util.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(this.root){var i=e.defaultConfig||{};if(!t.root){var o=t.position?t.position:t.config&&t.config.position?t.config.position:i.position;switch(o){case POSITIONS$a.CONTROLS_LEFT:t.root=this.left;break;case POSITIONS$a.CONTROLS_RIGHT:t.root=this.right;break;case POSITIONS$a.CONTROLS_CENTER:t.root=this.center;break;case POSITIONS$a.CONTROLS:t.root=this.root;break;default:t.root=this.left}return _get$2(_getPrototypeOf$4(n.prototype),"registerPlugin",this).call(this,e,t,r)}}}},{key:"destroy",value:function(){"mobile"!==sniffer$1.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,r=e.initShow;if(!e.disable){var i=util.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},_defineProperty$5({},STATE_CLASS.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":r||!n});return'<xg-controls class="'.concat(i,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(Plugin),EN={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},XGI18nLang={lang:{},langKeys:[],textKeys:[]};function deepMerge(e,t){return Object.keys(t).forEach((function(n){var r,i=util.typeOf(t[n]),o=util.typeOf(e[n]);"Array"===i?("Array"!==o&&(e[n]=[]),(r=e[n]).push.apply(r,_toConsumableArray(t[n]))):"Object"===i?("Object"!==o&&(e[n]={}),deepMerge(e[n],t[n])):e[n]=t[n]})),e}function updateKeys(){Object.keys(XGI18nLang.lang.en).map((function(e){XGI18nLang.textKeys[e]=e}))}function extend(e,t){var n=[];if(t||(t=XGI18nLang),t.lang){n="Array"!==util.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e;var r=t.lang;n.map((function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),r[e.LANG]?deepMerge(r[e.LANG]||{},e.TEXT||{}):use(e,t)})),updateKeys()}}function use(e,t){var n=e.LANG;if(t||(t=XGI18nLang),t.lang){var r=e.TEXT||{};"zh"===n&&(n="zh-cn"),t.lang[n]?deepMerge(t.lang[n],r):(t.langKeys.push(n),t.lang[n]=r),updateKeys()}}function init$1(e){var t,n={lang:{},langKeys:[],textKeys:{},pId:e};return deepMerge(n.lang,XGI18nLang.lang),(t=n.langKeys).push.apply(t,_toConsumableArray(XGI18nLang.langKeys)),deepMerge(n.textKeys,XGI18nLang.textKeys),n}use(EN);var I18N={get textKeys(){return XGI18nLang.textKeys},get langKeys(){return XGI18nLang.langKeys},get lang(){var e={};return XGI18nLang.langKeys.map((function(t){e[t]=XGI18nLang.lang[t]})),XGI18nLang.lang["zh-cn"]&&(e.zh=XGI18nLang.lang["zh-cn"]||{}),e},extend:extend,use:use,init:init$1},STATES={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},STATE_ARRAY=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],PlAYER_HOOKS=["play","pause","replay","retry"],REAL_TIME_SPEED=0,AVG_SPEED=0,Player=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;_classCallCheck$4(this,n);var i=util.deepMerge(getDefaultConfig$1(),e);_defineProperty$5(_assertThisInitialized$4(r=t.call(this,i)),"canPlayFunc",(function(){if(r.config){var e=r.config,t=e.autoplay,n=e.startTime,i=e.defaultPlaybackRate;XG_DEBUG.logInfo("player","canPlayFunc, startTime",n),n&&(r.currentTime=n>r.duration?r.duration:n,r.config.startTime=0),r.playbackRate=i,(t||r._useAutoplay)&&r.mediaPlay(),r.off(CANPLAY,r.canPlayFunc),r.removeClass(STATE_CLASS.ENTER)}})),_defineProperty$5(_assertThisInitialized$4(r),"onFullscreenChange",(function(e,t){var n=function(){util.setTimeout(_assertThisInitialized$4(r),(function(){r.resize()}),100)},i=util.getFullScreenEl();r._fullActionFrom?r._fullActionFrom="":r.emit(USER_ACTION,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:r.currentTime,duration:r.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var o=checkIsCurrentVideo(i,r.playerId,PLATER_ID);if(t||i&&(i===r._fullscreenEl||o))n(),!r.config.closeFocusVideoFocus&&r.media.focus(),r.fullscreen=!0,r.changeFullStyle(r.root,i,STATE_CLASS.FULLSCREEN),r.emit(FULLSCREEN_CHANGE,!0,r._fullScreenOffset),r.cssfullscreen&&r.exitCssFullscreen();else if(r.fullscreen){n();var a=_assertThisInitialized$4(r),s=a._fullScreenOffset;a.config.needFullscreenScroll?(window.scrollTo(s.left,s.top),util.setTimeout(_assertThisInitialized$4(r),(function(){r.fullscreen=!1,r._fullScreenOffset=null}),100)):(!r.config.closeFocusVideoFocus&&r.media.focus(),r.fullscreen=!1,r._fullScreenOffset=null),r.cssfullscreen?r.removeClass(STATE_CLASS.FULLSCREEN):r.recoverFullStyle(r.root,r._fullscreenEl,STATE_CLASS.FULLSCREEN),r._fullscreenEl=null,r.emit(FULLSCREEN_CHANGE,!1)}})),_defineProperty$5(_assertThisInitialized$4(r),"_onWebkitbeginfullscreen",(function(e){r._fullscreenEl=r.media,r.onFullscreenChange(e,!0)})),_defineProperty$5(_assertThisInitialized$4(r),"_onWebkitendfullscreen",(function(e){r.onFullscreenChange(e,!1)})),hooksDescriptor(_assertThisInitialized$4(r),PlAYER_HOOKS),r.config=i,r._pluginInfoId=util.generateSessionId(),bindDebug(_assertThisInitialized$4(r));var o=r.constructor.defaultPreset;if(r.config.presets.length){var a=r.config.presets.indexOf("default");a>=0&&o&&(r.config.presets[a]=o)}else o&&r.config.presets.push(o);if(r.userTimer=null,r.waitTimer=null,r._state=STATES.INITIAL,r.isError=!1,r._hasStart=!1,r.isSeeking=!1,r.isCanplay=!1,r._useAutoplay=!1,r.rotateDeg=0,r.isActive=!1,r.fullscreen=!1,r.cssfullscreen=!1,r.isRotateFullscreen=!1,r._fullscreenEl=null,r._cssfullscreenEl=null,r.curDefinition=null,r._orgCss="",r._fullScreenOffset=null,r._videoHeight=0,r._videoWidth=0,r._accPlayed={t:0,acc:0,loopAcc:0},r.innerContainer=null,r.controls=null,r.topBar=null,r.root=null,r.__i18n=I18N.init(r._pluginInfoId),sniffer$1.os.isAndroid&&sniffer$1.osVersion>0&&sniffer$1.osVersion<6&&(r.config.autoplay=!1),r.database=new INDEXDB,r.isUserActive=!1,!r._initDOM())return console.error(new Error("can't find the dom which id is ".concat(r.config.id," or this.config.el does not exist"))),_possibleConstructorReturn$4(r);var s=r.config,c=s.definition,l=void 0===c?{}:c;if(!s.url&&l.list&&l.list.length>0){var u=l.list.find((function(e){return e.definition&&e.definition===l.defaultDefinition}));u||(l.defaultDefinition=l.list[0].definition,u=l.list[0]),r.config.url=u.url,r.curDefinition=u}return r._bindEvents(),r._registerPresets(),r._registerPlugins(),pluginsManager.onPluginsReady(_assertThisInitialized$4(r)),r.getInitDefinition(),r.setState(STATES.READY),util.setTimeout(_assertThisInitialized$4(r),(function(){r.emit(READY)}),0),r.onReady&&r.onReady(),(r.config.videoInit||r.config.autoplay)&&(!r.hasStart||r.state<STATES.ATTACHED)&&r.start(),r}return _createClass$5(n,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(ERROR$3,new Errors("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=t}var n=pluginsManager.checkPlayerRoot(this.root);n&&(XG_DEBUG.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this.root.setAttribute(PLATER_ID,this.playerId),pluginsManager.init(this),this._initBaseDoms();var r=this.constructor.XgVideoProxy;if(r&&this.mediaConfig.mediaType===r.mediaType){var i=this.innerContainer||this.root;this.detachVideoEvents(this.media);var o=new r(i,this.config,this.mediaConfig);this.attachVideoEvents(o),this.media=o}if(this.media.setAttribute(PLATER_ID,this.playerId),this.config.controls){var a=this.config.controls.root||null,s=pluginsManager.register(this,Controls,{root:a});this.controls=s}var c="mobile"===this.config.isMobileSimulateMode?"mobile":sniffer$1.device;if(this.addClass("".concat(STATE_CLASS.DEFAULT," ").concat(STATE_CLASS.INACTIVE," xgplayer-").concat(c," ").concat(this.config.controls?"":STATE_CLASS.NO_CONTROLS)),this.config.autoplay?this.addClass(STATE_CLASS.ENTER):this.addClass(STATE_CLASS.NO_START),this.config.fluid){var l=this.config,u=l.width,d=l.height;"number"==typeof u&&"number"==typeof d||(u=600,d=337.5);var h={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*d/u,"%")};Object.keys(h).forEach((function(t){e.root.style[t]=h[t]}))}else["width","height"].forEach((function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=util.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=util.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=util.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=util.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.config.topBarAutoHide&&util.addClass(this.topBar,STATE_CLASS.TOP_BAR_AUTOHIDE),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),FULLSCREEN_EVENTS.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),sniffer$1.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(LOADED_DATA,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(PLAY,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),FULLSCREEN_EVENTS.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off(PLAY,this.playFunc),this.off(CANPLAY,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.media&&(e&&""!==e&&("Array"!==util.typeOf(e)||0!==e.length)||(e="",this.emit(URL_NULL),XG_DEBUG.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this._detachSourceEvents(this.media),"Array"===util.typeOf(e)&&e.length>0?this._attachSourceEvents(this.media,e):this.media.src&&this.media.src===e?e||this.media.removeAttribute("src"):this.media.src=e,"Number"===util.typeOf(this.config.volume)&&(this.volume=this.config.volume);var n=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!n.contains(this.media)&&n.insertBefore(this.media,n.firstChild);var r=this.media.readyState;XG_DEBUG.logInfo("_startInit readyState",r),this.config.autoplay&&(!/^blob/.test(this.media.currentSrc)&&!/^blob/.test(this.media.src)&&this.load(),(sniffer$1.os.isIpad||sniffer$1.os.isPhone)&&this.mediaPlay()),r>=2?this.canPlayFunc():this.once(CANPLAY,this.canPlayFunc),(!this.hasStart||this.state<STATES.ATTACHED)&&pluginsManager.afterInit(this),this.hasStart=!0,this.setState(STATES.ATTACHED),util.setTimeout(this,(function(){t.emit(COMPLETE)}),0)}}},{key:"_registerPlugins",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._loadingPlugins=[];var n=this.config.ignores||[],r=this.config.plugins||[],i=this.config.i18n||[];t&&I18N.extend(i,this.__i18n);var o=n.join("||").toLowerCase().split("||"),a=this.plugins;r.forEach((function(n){try{var r=n.plugin?n.plugin.pluginName:n.pluginName;if(r&&o.indexOf(r.toLowerCase())>-1)return null;if(!t&&a[r.toLowerCase()])return;if(n.lazy&&n.loader){var i=pluginsManager.lazyRegister(e,n);return void(n.forceBeforeInit&&(i.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(i),1)})).catch((function(t){XG_DEBUG.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(i),1)})),e._loadingPlugins.push(i)))}return e.registerPlugin(n)}catch(s){XG_DEBUG.logError("_registerPlugins:",s)}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){usePreset(e,t)}))}},{key:"_getRootByPosition",value:function(e){var t=null;switch(e){case POSITIONS$a.ROOT_RIGHT:t=this.rightBar;break;case POSITIONS$a.ROOT_LEFT:t=this.leftBar;break;case POSITIONS$a.ROOT_TOP:t=this.topBar;break;default:t=this.innerContainer||this.root}return t}},{key:"registerPlugin",value:function(e,t){var n=pluginsManager.formatPluginInfo(e,t),r=n.PLUFGIN,i=n.options,o=this.config.plugins;!pluginsManager.checkPluginIfExits(r.pluginName,o)&&o.push(r);var a=pluginsManager.getRootByConfig(r.pluginName,this.config);a.root&&(i.root=a.root),a.position&&(i.position=a.position);var s=i.position?i.position:i.config&&i.config.position||r.defaultConfig&&r.defaultConfig.position;return!i.root&&"string"==typeof s&&s.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(r,i,r.pluginName):(i.root||(i.root=this._getRootByPosition(s)),pluginsManager.register(this,r,i))}},{key:"deregister",value:function(e){"string"==typeof e?pluginsManager.unRegister(this,e):e instanceof BasePlugin&&pluginsManager.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof BasePlugin&&(t=e.pluginName),t)for(var n=this.config.plugins.length-1;n>-1;n--)if(this.config.plugins[n].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(n,1);break}}},{key:"plugins",get:function(){return pluginsManager.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=pluginsManager.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(util.hasClass(this.root,e)||util.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&util.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return util.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!(this.state>STATES.ATTACHING))return e||this.config.url||this.getInitDefinition(),this.hasStart=!0,this.setState(STATES.ATTACHING),this._registerPlugins(!1),pluginsManager.beforeInit(this).then((function(){if(t.config)return e||(e=t.url||t.config.url),t._startInit(e)})).catch((function(e){throw e.fileName="player",e.lineNumber="236",XG_DEBUG.logError("start:beforeInit:",e),e}))}},{key:"switchURL",value:function(e,t){var n=this,r=e;"Object"===util.typeOf(e)&&(r=e.url);var i=this.currentTime,o=this.paused&&!this.isError;return this.src=r,new Promise((function(e){var t=function(){n.currentTime=i,o&&n.once("canplay",(function(){n.pause()})),e()};sniffer$1.os.isAndroid?n.once("timeupdate",(function(){t()})):n.once("canplay",(function(){t()})),n.play()}))}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<STATES.ATTACHED)return this.removeClass(STATE_CLASS.NO_START),this.addClass(STATE_CLASS.ENTER),this.start(),void(this._useAutoplay=!0);this.state<STATES.RUNNING&&(this.removeClass(STATE_CLASS.NO_START),!this.isCanplay&&this.addClass(STATE_CLASS.ENTER));var t=_get$2(_getPrototypeOf$4(n.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY),e.addClass(STATE_CLASS.PLAYING),e.state<STATES.RUNNING&&(XG_DEBUG.logInfo(">>>>playPromise.then"),e.setState(STATES.RUNNING),e.emit(AUTOPLAY_STARTED))})).catch((function(t){if(XG_DEBUG.logWarn(">>>>playPromise.catch",t.name),e.media&&e.media.error)return e.onError(),void e.removeClass(STATE_CLASS.ENTER);"NotAllowedError"===t.name&&(e._errorTimer=util.setTimeout(e,(function(){e._errorTimer=null,e.emit(AUTOPLAY_PREVENTED),e.addClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY),e.removeClass(STATE_CLASS.ENTER),e.pause(),e.setState(STATES.NOTALLOW)}),0))})):(XG_DEBUG.logWarn("video.play not return promise"),this.state<STATES.RUNNING&&(this.setState(STATES.RUNNING),this.removeClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY),this.removeClass(STATE_CLASS.NO_START),this.removeClass(STATE_CLASS.ENTER),this.addClass(STATE_CLASS.PLAYING),this.emit(AUTOPLAY_STARTED))),t}},{key:"mediaPause",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(STATE_CLASS.PAUSED),runHooks(this,"play",(function(){e.mediaPlay()}))}},{key:"pause",value:function(){var e=this;runHooks(this,"pause",(function(){_get$2(_getPrototypeOf$4(n.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var n=this;if(this.media&&!Number.isNaN(Number(e)||!this.hasStart)){var r=this.config,i=r.isSeekedPlay,o=r.seekedStatus,a=t||(i?"play":o);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(CANPLAY,(function(){switch(n.removeClass(STATE_CLASS.ENTER),n.isSeeking=!1,a){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.state<STATES.RUNNING?(this.removeClass(STATE_CLASS.NO_START),this.addClass(STATE_CLASS.ENTER),this.currentTime=e,"play"===a&&this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,t=this.config,n=t.definition;!t.url&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map((function(t){t.definition===n.defaultDefinition&&(e.config.url=t.url,e.curDefinition=t)}))}},{key:"changeDefinition",value:function(e,t){var n=this,r=this.config.definition;if(Array.isArray(null==r?void 0:r.list)&&r.list.forEach((function(t){(null==e?void 0:e.definition)===t.definition&&(n.curDefinition=t)})),null!=e&&e.bitrate&&"number"!=typeof e.bitrate&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(DEFINITION_CHANGE,{from:t,to:e}),this.hasStart){var i=this.switchURL(e.url,_objectSpread2$4({seamless:!1!==r.seamless&&"undefined"!=typeof MediaSource&&"function"==typeof MediaSource.isTypeSupported},e));i&&i.then?i.then((function(){n.emit(AFTER_DEFINITION_CHANGE,{from:t,to:e})})):this.emit(AFTER_DEFINITION_CHANGE,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(LOADED_DATA,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[STATE_CLASS.NOT_ALLOW_AUTOPLAY,STATE_CLASS.PLAYING,STATE_CLASS.NO_START,STATE_CLASS.PAUSED,STATE_CLASS.REPLAY,STATE_CLASS.ENTER,STATE_CLASS.ENDED,STATE_CLASS.ERROR,STATE_CLASS.LOADING];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(STATE_CLASS.ENTER),this.emit(RESET)}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;this.resetState();var r=this.plugins;if(r&&(t.map((function(t){e.deregister(t)})),n)){var i=getDefaultConfig$1();Object.keys(this.config).keys((function(t){"undefined"===e.config[t]||"plugins"!==t&&"presets"!==t&&"el"!==t&&"id"!==t||(e.config[t]=i[t])}))}}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,r=this.root,i=this.media;if(r&&i){if(this.hasStart=!1,this._useAutoplay=!1,r.removeAttribute(PLATER_ID),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),util.clearAllTimers(this),this.emit(DESTROY),pluginsManager.destroy(this),delHooksDescriptor(this),_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),t)for(var o=t.children,a=0;a<o.length;a++)t.removeChild(o[a]);!t&&i instanceof window.Node&&r.contains(i)&&r.removeChild(i),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&r.removeChild(e[t]),e[t]=null}));var s=r.className.split(" ");s.length>0?r.className=s.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):r.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(STATE_CLASS.ENDED),this.currentTime=0,this.isSeeking=!1,runHooks(this,"replay",(function(){e.once(CANPLAY,(function(){var t=e.mediaPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.play(),e.emit(REPLAY),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(STATE_CLASS.ERROR),this.addClass(STATE_CLASS.LOADING),runHooks(this,"retry",(function(){var t=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(CANPLAY,(function(){e.mediaPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,r){e&&(r||(r=STATE_CLASS.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=util.filterStyleFromText(e)),util.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=util.filterStyleFromText(t),util.addClass(t,r),t.setAttribute(PLATER_ID,this.playerId)))}},{key:"recoverFullStyle",value:function(e,t,n,r){r||(r=STATE_CLASS.PARENT_FULLSCREEN),this._orgCss&&(util.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),util.removeClass(e,n),t&&t!==e&&this._orgPCss&&(util.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",util.removeClass(t,r),t.removeAttribute(PLATER_ID))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.media;e||(e=t),this._fullScreenOffset={top:util.scrollTop(),left:util.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var r=util.getFullScreenEl();if(r!==this._fullscreenEl)try{for(var i=0;i<GET_FULLSCREEN_API.length;i++){var o=GET_FULLSCREEN_API[i];if(e[o]){var a="webkitRequestFullscreen"===o?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[o]();return a&&a.then?a:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(s){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||util.getFullScreenEl()){this.root;var t=this.media;this._fullActionFrom="exit";try{for(var n=0;n<EXIT_FULLSCREEN_API.length;n++){var r=EXIT_FULLSCREEN_API[n];if(document[r]){var i=document[r]();return i&&i.then?i:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(o){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(STATE_CLASS.INNER_FULLSCREEN," ").concat(STATE_CLASS.CSS_FULLSCREEN):STATE_CLASS.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,t);var n=this.config.fullscreen,r=void 0===n?{}:n,i=!0===r.useCssFullscreen||"function"==typeof r.useCssFullscreen&&r.useCssFullscreen();i&&(this.fullscreen=!0,this.emit(FULLSCREEN_CHANGE,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(CSS_FULLSCREEN_CHANGE,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(STATE_CLASS.INNER_FULLSCREEN," ").concat(STATE_CLASS.CSS_FULLSCREEN):STATE_CLASS.CSS_FULLSCREEN;if(this.fullscreen){var t=this.config.fullscreen,n=void 0===t?{}:t;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(FULLSCREEN_CHANGE,!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(CSS_FULLSCREEN_CHANGE,!1)}},{key:"getRotateFullscreen",value:function(e){this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(STATE_CLASS.INNER_FULLSCREEN," ").concat(STATE_CLASS.ROTATE_FULLSCREEN):STATE_CLASS.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,STATE_CLASS.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(FULLSCREEN_CHANGE,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(STATE_CLASS.INNER_FULLSCREEN," ").concat(STATE_CLASS.ROTATE_FULLSCREEN):STATE_CLASS.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,STATE_CLASS.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(FULLSCREEN_CHANGE,!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(PLAYER_FOCUS,_objectSpread2$4({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(PLAYER_BLUR,_objectSpread2$4({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoHide,r=void 0===n?!this.config.closePlayerBlur:n,i=t.delay,o=void 0===i?this.config.inactive:i;this.isActive=!0,this.removeClass(STATE_CLASS.INACTIVE),this.userTimer&&(util.clearTimeout(this,this.userTimer),this.userTimer=null),r?this.userTimer=util.setTimeout(this,(function(){e.userTimer=null,e.blur()}),o):this.userTimer&&(util.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignorePaused,n=void 0!==t&&t;if(this.isActive){var r=this.config.closePauseVideoFocus;this.isActive=!1,(n||r||!this.paused&&!this.ended)&&this.addClass(STATE_CLASS.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(STATE_CLASS.ENTER),this.removeClass(STATE_CLASS.ERROR),this.removeClass(STATE_CLASS.LOADING),this.isCanplay=!0,this.waitTimer&&util.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1}},{key:"onLoadstart",value:function(){this.removeClass(STATE_CLASS.ERROR)}},{key:"onPlay",value:function(){this.state===STATES.ENDED&&this.setState(STATES.RUNNING),this.removeClass(STATE_CLASS.PAUSED),this.ended&&this.removeClass(STATE_CLASS.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(STATE_CLASS.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(util.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(STATE_CLASS.ENDED),this.setState(STATES.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY),this.removeClass(STATE_CLASS.NO_START),this.removeClass(STATE_CLASS.ENTER),this.removeClass(STATE_CLASS.LOADING),this.addClass(STATE_CLASS.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(STATE_CLASS.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&util.clearTimeout(this,this.waitTimer),this.removeClass(STATE_CLASS.LOADING),this.removeClass(STATE_CLASS.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&util.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=util.setTimeout(this,(function(){e.addClass(STATE_CLASS.LOADING),util.clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1,[STATE_CLASS.NO_START,STATE_CLASS.PAUSED,STATE_CLASS.ENDED,STATE_CLASS.ERROR,STATE_CLASS.REPLAY,STATE_CLASS.LOADING].forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(STATE_CLASS.LOADING))&&this.media.readyState>2&&(this.removeClass(STATE_CLASS.LOADING),util.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<STATES.RUNNING&&this.duration&&(this.setState(STATES.RUNNING),this.emit(AUTOPLAY_STARTED)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===util.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,n){if(this.media&&t&&e){var r="String"===util.typeOf(e)?e:e.type||"";n.props&&"Array"!==util.typeOf(n.props)&&(n.props=[n.props]),this.emit(USER_ACTION,_objectSpread2$4({eventType:r,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.media.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.media.currentTime||.2,r=t.length,i=0;i<r;i++)if(t.start(i)<=n&&t.end(i)>n)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.media&&e&&e.h){var t=1/e.h,n=1!==t?"scale(".concat(t,")"):"",r=0,i=0;e.y&&(i=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(r=(100-100*e.w)/2-100*e.x),n+=" translate(".concat(r,"%, ").concat(i,"%)"),this.media.style.transform=n,this.media.style.webkitTransform=n}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(n){if("plugins"!==n){t.config[n]=e[n];var r=t.plugins[n.toLowerCase()];r&&"Function"===util.typeOf(r.setConfig)&&r.setConfig(e[n])}}))}},{key:"playNext",value:function(e){this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,this.play(),this.emit(PLAYNEXT,e)}},{key:"resize",value:function(){var e=this;if(this.media){var t=this.media,n=t.videoWidth,r=t.videoHeight,i=this.config,o=i.fitVideoSize,a=i.videoFillMode;if("fill"!==a&&"cover"!==a||this.setAttribute("data-xgfill",a),r&&n){this._videoHeight=r,this._videoWidth=n;var s=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=s.width,u=s.height-c,d=parseInt(n/r*1e3,10),h=parseInt(l/u*1e3,10),f=l,p=u,g={};"auto"===o&&h>d||"fixWidth"===o?(p=l/d*1e3,this.config.fluid?g.paddingTop="".concat(100*p/f,"%"):g.height="".concat(p+c,"px")):("auto"===o&&h<d||"fixHeight"===o)&&(f=d*u/1e3,g.width="".concat(f,"px")),this.fullscreen||this.cssfullscreen||Object.keys(g).forEach((function(t){e.root.style[t]=g[t]})),("fillHeight"===a&&h<d||"fillWidth"===a&&h>d)&&this.setAttribute("data-xgfill","cover");var y={videoScale:d,vWidth:f,vHeight:p,cWidth:f,cHeight:p+c};this.emit(VIDEO_RESIZE,y)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.media.updateObjectPosition?this.media.updateObjectPosition(e,t):this.media.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){XG_DEBUG.logInfo("setState","state from:".concat(STATE_ARRAY[this.state]," to:").concat(STATE_ARRAY[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,!1===e&&this.setState(STATES.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===STATES.RUNNING||this._state===STATES.ENDED},set:function(e){e?this.setState(STATES.RUNNING):this._state>=STATES.RUNNING&&this.setState(STATES.ATTACHED)}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition,r=null,i=null;n.list=e,this.emit("resourceReady",e),e.forEach((function(e){var o;(null===(o=t.curDefinition)||void 0===o?void 0:o.definition)===e.definition&&(r=e),n.defaultDefinition===e.definition&&(i=e)})),!i&&e.length>0&&(i=e[0]),r?this.changeDefinition(r):i&&this.changeDefinition(i)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var t=this.media.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==I18N.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,pluginsManager.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(I18N.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return"zh"===e&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return version$1}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return _get$2(_getPrototypeOf$4(n.prototype),"readyState",this)}},{key:"error",get:function(){var e=_get$2(_getPrototypeOf$4(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return _get$2(_getPrototypeOf$4(n.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"avgSpeed",get:function(){return AVG_SPEED},set:function(e){AVG_SPEED=e}},{key:"realTimeSpeed",get:function(){return REAL_TIME_SPEED},set:function(e){REAL_TIME_SPEED=e}},{key:"hook",value:function(e,t){return hook.call.apply(hook,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return useHooks.call.apply(useHooks,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return removeHooks.call.apply(removeHooks,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return usePluginHooks.call.apply(usePluginHooks,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return removePluginHooks.call.apply(removePluginHooks,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),pluginsManager.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return XG_DEBUG.config.debug},set:function(e){XG_DEBUG.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return pluginsManager.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){pluginsManager.setCurrentUserActive(e,t)}},{key:"isHevcSupported",value:function(){return sniffer$1.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return sniffer$1.probeConfigSupported(e)}},{key:"install",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=t)}},{key:"use",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]=t}}]),n}(MediaProxy);function now$2(){return(new Date).getTime()}_defineProperty$5(Player,"defaultPreset",null),_defineProperty$5(Player,"XgVideoProxy",null);var LOG_TYPES$1={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},XGLogger=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"_onTimeupdate",(function(){e._state.isTimeUpdate=!0,e._state.autoplayStart&&(XG_DEBUG.logInfo("[xgLogger]".concat(e.player.playerId," _onTimeupdate")),e._sendFF("onTimeupdate"))})),_defineProperty$5(_assertThisInitialized$4(e),"_onAutoplayStart",(function(){XG_DEBUG.logInfo("[xgLogger]".concat(e.player.playerId," _onAutoplayStart")),e._state.autoplayStart=!0,e.vt&&e._sendFF("onAutoplayStart")})),_defineProperty$5(_assertThisInitialized$4(e),"_onReset",(function(){e._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},e.vt=0,e.pt=0,e.fvt=0,e.newPointTime=now$2(),e.loadedCostTime=0,e.startCostTime=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e.fixedWaitingStart=0,e._isWaiting=!1,e._waitTimer&&util.clearTimeout(_assertThisInitialized$4(e),e._waitTimer),e._waittTimer&&util.clearTimeout(_assertThisInitialized$4(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0})),_defineProperty$5(_assertThisInitialized$4(e),"_onSeeking",(function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=now$2(),e.emitLog(LOG_TYPES$1.SEEK_START,{start:now$2()}))})),_defineProperty$5(_assertThisInitialized$4(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),_defineProperty$5(_assertThisInitialized$4(e),"_onWaitingLoadStart",(function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=now$2(),e.fixedWaitingStart=now$2(),e._waitType=1,e.emitLog(LOG_TYPES$1.WAIT_START,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:1,endType:"loadstart"}))})),_defineProperty$5(_assertThisInitialized$4(e),"_onWaiting",(function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e.fixedWaitingStart=now$2(),e._waitTimer=util.setTimeout(_assertThisInitialized$4(e),(function(){e._isWaiting&&(e.waitingStart=now$2(),util.clearTimeout(_assertThisInitialized$4(e),e._waitTimer),e._waitTimer=null,e._startWaitTimeout(),e.emitLog(LOG_TYPES$1.WAIT_START,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))}),200))})),_defineProperty$5(_assertThisInitialized$4(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),_defineProperty$5(_assertThisInitialized$4(e),"_onPlaying",(function(){e._isWaiting&&e.suspendWaitingStatus("playing")})),e}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=now$2(),this.loadedCostTime=0,this.startCostTime=0,this.on(LOAD_START,(function(){var t=e._state,n=t.autoplayStart,r=t.isFFSend;e.startCostTime=now$2()-e.newPointTime,XG_DEBUG.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(n," isFFSend:").concat(r," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),r||(!t.isLs&&e.emitLog(LOG_TYPES$1.LOAD_START,{}),t.isLs=!0,t.isTimeUpdate=!1,t.isFFLoading=!0,e.pt=now$2(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())})),this.on(LOADED_DATA,(function(){e.vt=now$2(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var t=e._state,n=t.isTimeUpdate,r=t.isFFSend,i=t.autoplayStart;XG_DEBUG.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),n&&i&&e._sendFF("loadedData"),r||e.emitLog(LOG_TYPES$1.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")})),this.on(SEEKING,this._onSeeking),this.on(SEEKED,this._onSeeked),this.on(DESTROY,(function(){e.endState("destroy")})),this.on(URL_CHANGE,(function(){e.endState("urlChange"),XG_DEBUG.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()})),this.on([PLAYING,CANPLAY],this._onPlaying),this.on(WAITING,this._onWaiting),this.on(ERROR$3,this._onError),this.on(RESET,(function(){XG_DEBUG.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()}))}},{key:"_initOnceEvents",value:function(){this.off(AUTOPLAY_STARTED,this._onAutoplayStart),this.off(TIME_UPDATE,this._onTimeupdate),this.once(AUTOPLAY_STARTED,this._onAutoplayStart),this.once(TIME_UPDATE,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=now$2();var t=this._state,n=t.isFFLoading,r=t.isFFSend;XG_DEBUG.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(n," !isFFSend:").concat(!r)),this.vt>0&&n&&!r&&(XG_DEBUG.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(LOG_TYPES$1.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&util.clearTimeout(this,this._waittTimer),this._waittTimer=util.setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),util.clearTimeout(e,e._waittTimer),e._waittTimer=null}),this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=now$2(),n=t-this.seekingStart;this.seekingStart=0,this.emitLog(LOG_TYPES$1.SEEK_END,{end:t,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(util.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(util.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var t=now$2(),n=t-this.waitingStart,r=t-this.fixedWaitingStart,i=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(LOG_TYPES$1.WAIT_END,{fixedCostTime:r>i?i:r,costTime:n>i?i:n,type:"loadeddata"===e?1:this._waitType,endType:2===this._waitType?"seek":e})}}},{key:"emitLog",value:function(e,t){var n=this.player;this.emit(XGLOG,_objectSpread2$4({t:now$2(),host:util.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),n}(Plugin);function ReplaySvg(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Replay=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"registerIcons",value:function(){return{replay:ReplaySvg}}},{key:"afterCreate",value:function(){var e=this;Plugin.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(ENDED,(function(){if(e.playerConfig.loop||util.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}}})),this.on(PLAY,(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),util.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(Plugin),Poster=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){util.addClass(this.root,"hide")}},{key:"show",value:function(){util.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(ENDED,(function(){e.isEndedShow&&util.removeClass(e.root,"hide")})),this.config.hideCanplay?(this.once(TIME_UPDATE,(function(){e.onTimeUpdate()})),this.on(URL_CHANGE,(function(){util.removeClass(e.root,"hide"),util.addClass(e.root,"xg-showplay"),e.once(TIME_UPDATE,(function(){e.onTimeUpdate()}))}))):this.on(PLAY,(function(){util.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?util.removeClass(this.root,"xg-showplay"):this.once(TIME_UPDATE,(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,n=e.hideCanplay,r=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(r,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}(Plugin);function PlaySvg(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function PauseSvg(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var AnimateMap={};function addAnimate(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};AnimateMap[e]&&window.clearTimeout(AnimateMap[e].id),AnimateMap[e]={},n.start&&n.start(),AnimateMap[e].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(AnimateMap[e].id),delete AnimateMap[e]}),t)}function clearAnimation(){Object.keys(AnimateMap).map((function(e){window.clearTimeout(AnimateMap[e].id),delete AnimateMap[e]}))}var Start=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),_defineProperty$5(_assertThisInitialized$4(r=t.call(this,e)),"onAutoplayStart",(function(){if(!r.autoPlayStart){var e="auto"===r.config.mode?"auto-hide":"hide";util.addClass(r.root,e),r.autoPlayStart=!0,r.onPlayPause("play")}})),r.autoPlayStart=!1,r}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.playerConfig;this.initIcons(),this.once(READY,(function(){n&&(n.lang&&"en"===n.lang?util.addClass(t.root,"lang-is-en"):"jp"===n.lang&&util.addClass(t.root,"lang-is-jp"))})),this.on(AUTOPLAY_STARTED,this.onAutoplayStart),n.autoplay||this.show(),this.on(AUTOPLAY_PREVENTED,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),util.removeClass(e.root,t),e.show()})),this.on(PLAY,(function(){e.onPlayPause("play")})),this.on(PAUSE,(function(){e.onPlayPause("pause")})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation();var n=e.player.paused;e.emitUserAction(t,"switch_play_pause",{props:"paused",from:n,to:!n})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:PlaySvg,class:"xg-icon-play"},startPause:{icon:PauseSvg,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){util.addClass(this.root,"hide")}},{key:"show",value:function(){util.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){util.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){util.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;addAnimate("pauseplay",400,{start:function(){util.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){util.removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"switchPausePlay",value:function(e){var t=this.player;e.cancelable&&e.preventDefault(),e.stopPropagation(),t.state<STATES.READY||(this.player.paused||t.state!==STATES.RUNNING?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,n=this.player;if(!(n.state<STATES.RUNNING)&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&n.paused&&!n.ended||t.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),clearAnimation()}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(Plugin),Enter=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"render",value:function(){var e=this.config.innerHtml,t=util.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var n="",r=1;r<=12;r++)n+='<div class="xgplayer-enter-bar'.concat(r,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(Plugin),MiniScreenIcon=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:10}}}]),n}(Plugin);function getStyleSize(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!Number.isNaN(t)&&t}var measurements=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],measurementsLength=measurements.length;function getZeroSize(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<measurementsLength;t++)e[measurements[t]]=0;return e}function getStyle(e){return window.getComputedStyle(e)}function getSize(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"===_typeof$3(e)&&e.nodeType){var t=getStyle(e);if("none"===t.display)return getZeroSize();var n={};n.width=e.offsetWidth,n.height=e.offsetHeight;for(var r=n.isBorderBox="border-box"===t.boxSizing,i=0;i<measurementsLength;i++){var o=measurements[i],a=t[o],s=parseFloat(a);n[o]=Number.isNaN(s)?0:s}var c=n.paddingLeft+n.paddingRight,l=n.paddingTop+n.paddingBottom,u=n.marginLeft+n.marginRight,d=n.marginTop+n.marginBottom,h=n.borderLeftWidth+n.borderRightWidth,f=n.borderTopWidth+n.borderBottomWidth,p=r,g=getStyleSize(t.width);!1!==g&&(n.width=g+(p?0:c+h));var y=getStyleSize(t.height);return!1!==y&&(n.height=y+(p?0:l+f)),n.innerWidth=n.width-(c+h),n.innerHeight=n.height-(l+f),n.outerWidth=n.width+u,n.outerHeight=n.height+d,n}}function getTouch$1(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.identifier===t)return r}}var EVENTS$3={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},POST_START_EVENTS={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Draggabilly=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck$4(this,n),(r=t.call(this)).isEnabled=!0,r.isDragging=!1,r.isDown=!1,r.position={},r.downPoint={},r.dragPoint={x:0,y:0},r.startPos={x:0,y:0},r._root=e instanceof Element?e:document.querySelector(e),r._handlerDom=i.handle instanceof Element?i.handle:document.querySelector(i.handle),r._root&&r._handlerDom?(r._bindStartEvent(),r):_possibleConstructorReturn$4(r)}return _createClass$5(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),POST_START_EVENTS[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var n=POST_START_EVENTS[this._startKey];n.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=getTouch$1(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=getTouch$1(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=getTouch$1(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=getSize(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit(EVENTS$3.START,this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(EVENTS$3.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var n={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,t),n}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var n=this.startPos,r=n.x,i=n.y,o=this._dragPointerMove(e,t),a=o.x,s=o.y;a=this.checkContain("x",a,r),s=this.checkContain("y",s,i),this.position.x=r+a,this.position.y=i+s,this.dragPoint.x=a,this.dragPoint.y=s,this.emit(EVENTS$3.MOVE,this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,n){return t+n<0?0-n:"x"===e&&t+n>this.startPos.maxX?this.startPos.maxX-n:"y"===e&&t+n>this.startPos.maxY?this.startPos.maxY-n:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(t)?0:t,this.position.y=Number.isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),r=0===t.indexOf("matrix3d")?12:4,i=parseInt(n[r],10),o=parseInt(n[r+1],10);this.position.x+=i,this.position.y+=o}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var n=getSize(this._root.parentNode);return n?parseFloat(e)/100*n[t]:0}return parseInt(e,10)}}]),n}(EventEmitter),MiniScreen=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;_classCallCheck$4(this,n),_defineProperty$5(_assertThisInitialized$4(r=t.call(this,e)),"onCancelClick",(function(e){r.exitMini(),r.isClose=!0})),_defineProperty$5(_assertThisInitialized$4(r),"onCenterClick",(function(e){var t=_assertThisInitialized$4(r).player;t.paused?t.play():t.pause()})),_defineProperty$5(_assertThisInitialized$4(r),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-r.pos.scrollY)<50)){var t=parseInt(util.getCss(r.player.root,"height"));t+=r.config.scrollTop,r.pos.scrollY=window.scrollY,window.scrollY>t+5?!r.isMini&&!r.isClose&&r.getMini():window.scrollY<=t&&(r.isMini&&r.exitMini(),r.isClose=!1)}})),r.isMini=!1,r.isClose=!1;var i=_assertThisInitialized$4(r).config;return r.pos={left:i.left<0?window.innerWidth-i.width-20:i.left,top:i.top<0?window.innerHeight-i.height-20:i.top,height:r.config.height,width:r.config.width,scrollY:window.scrollY||0},r.lastStyle=null,r}return _createClass$5(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(PAUSE,(function(){e.setAttr("data-state","pause")})),this.on(PLAY,(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(MiniScreenIcon,n,MiniScreenIcon.pluginName)}var r=util.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",r,this.onCancelClick),this.bind(".play-icon",r,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Draggabilly(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:PlaySvg,class:"xg-icon-play"},pause:{icon:PauseSvg,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,r=this.config.target||this.player.root;this.lastStyle={},util.addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=r.style[t],r.style[t]="".concat(e.pos[t],"px")})),n.fluid&&(r.style["padding-top"]=""),this.emit(MINI_STATE_CHANGE,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,r=this.config.target||this.player.root;util.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){r.style[t]=e.lastStyle[t]})),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(MINI_STATE_CHANGE,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=util.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(Plugin),MOUSE_EVENTS={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},HOOKS=["videoClick","videoDbClick"],PCPlugin=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"onMouseMove",(function(t){var n=_assertThisInitialized$4(e),r=n.player,i=n.playerConfig;r.isActive||(r.focus({autoHide:!i.closeDelayBlur}),!i.closeFocusVideoFocus&&r.media.focus())})),_defineProperty$5(_assertThisInitialized$4(e),"onMouseEnter",(function(t){var n=_assertThisInitialized$4(e),r=n.playerConfig,i=n.player;!r.closeFocusVideoFocus&&i.media.focus(),r.closeDelayBlur?i.focus({autoHide:!1}):i.focus()})),_defineProperty$5(_assertThisInitialized$4(e),"onMouseLeave",(function(t){var n=e.playerConfig,r=n.closePlayerBlur,i=n.leavePlayerTime,o=n.closeDelayBlur;r||o||(i?e.player.focus({autoHide:!0,delay:i}):e.player.blur())})),_defineProperty$5(_assertThisInitialized$4(e),"onVideoClick",(function(t){var n=_assertThisInitialized$4(e),r=n.player,i=n.playerConfig;t.target&&i.closeVideoClick||t.target!==r.root&&t.target!==r.media&&t.target!==r.innerContainer&&t.target!==r.media.__canvas||(t.preventDefault(),i.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,runHooks(_assertThisInitialized$4(e),HOOKS[0],(function(t,n){e.switchPlayPause(n.e)}),{e:t,paused:r.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),_defineProperty$5(_assertThisInitialized$4(e),"onVideoDblClick",(function(t){var n=_assertThisInitialized$4(e),r=n.player;n.playerConfig.closeVideoDblclick||!t.target||t.target!==r.media&&t.target!==r.media.__canvas||(e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),runHooks(_assertThisInitialized$4(e),HOOKS[1],(function(t,n){e.emitUserAction(n.e,"switch_fullscreen",{props:"fullscreen",from:r.fullscreen,to:!r.fullscreen}),r.fullscreen?r.exitFullscreen():r.getFullscreen()}),{e:t,fullscreen:r.fullscreen})))})),e}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,HOOKS.map((function(t){e.__hooks[t]=null})),"mobile"===this.playerConfig.isMobileSimulateMode||"mobile"===sniffer$1.device&&!sniffer$1.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,t=this.player,n=t.video,r=t.root,i=this.playerConfig.enableContextmenu;r&&r.addEventListener("click",this.onVideoClick,!1),r&&r.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(MOUSE_EVENTS).map((function(t){r.addEventListener(t,e[MOUSE_EVENTS[t]],!1)})),i&&n&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,n=t.video,r=t.root;this.clickTimer&&clearTimeout(this.clickTimer),r.removeEventListener("click",this.onVideoClick,!1),r.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(MOUSE_EVENTS).map((function(t){r.removeEventListener(t,e[MOUSE_EVENTS[t]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),n}(BasePlugin),es_number_toFixed={},toIntegerOrInfinity$7=toIntegerOrInfinity$d,toString$6=toString$h,requireObjectCoercible$2=requireObjectCoercible$a,$RangeError$5=RangeError,stringRepeat=function(e){var t=toString$6(requireObjectCoercible$2(this)),n="",r=toIntegerOrInfinity$7(e);if(r<0||r==1/0)throw $RangeError$5("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},$$l=_export,uncurryThis$j=functionUncurryThis,toIntegerOrInfinity$6=toIntegerOrInfinity$d,thisNumberValue=thisNumberValue$2,$repeat=stringRepeat,fails$i=fails$L,$RangeError$4=RangeError,$String=String,floor$5=Math.floor,repeat=uncurryThis$j($repeat),stringSlice$3=uncurryThis$j("".slice),nativeToFixed=uncurryThis$j(1..toFixed),pow$2=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},log$1=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t},multiply=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=floor$5(i/1e7)},divide=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=floor$5(r/t),r=r%t*1e7},dataToString=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=$String(e[t]);n=""===n?r:n+repeat("0",7-r.length)+r}return n},FORCED$6=fails$i((function(){return"0.000"!==nativeToFixed(8e-5,3)||"1"!==nativeToFixed(.9,0)||"1.25"!==nativeToFixed(1.255,2)||"1000000000000000128"!==nativeToFixed(0xde0b6b3a7640080,0)}))||!fails$i((function(){nativeToFixed({})}));$$l({target:"Number",proto:!0,forced:FORCED$6},{toFixed:function(e){var t,n,r,i,o=thisNumberValue(this),a=toIntegerOrInfinity$6(e),s=[0,0,0,0,0,0],c="",l="0";if(a<0||a>20)throw $RangeError$4("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return $String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(t=log$1(o*pow$2(2,69,1))-69)<0?o*pow$2(2,-t,1):o/pow$2(2,t,1),n*=4503599627370496,(t=52-t)>0){for(multiply(s,0,n),r=a;r>=7;)multiply(s,1e7,0),r-=7;for(multiply(s,pow$2(10,r,1),0),r=t-1;r>=23;)divide(s,1<<23),r-=23;divide(s,1<<r),multiply(s,1,1),divide(s,2),l=dataToString(s)}else multiply(s,0,n),multiply(s,1<<-t,0),l=dataToString(s)+repeat("0",a);return a>0?c+((i=l.length)<=a?"0."+repeat("0",a-i)+l:stringSlice$3(l,0,i-a)+"."+stringSlice$3(l,i-a)):c+l}});var EVENTS$2={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},TOUCHS={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},MOUSES={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function getTouch(e){return e&&e.length>0?e[e.length-1]:null}function preventToucheDefault(e){var t=navigator.userAgent;/(?:iPhone|iPad)/.test(t)&&e.cancelable&&e.preventDefault()}function getDefaultConfig(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var Touche=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};_classCallCheck$4(this,e),this._pos={moving:!1,start:!1,x:0,y:0},this.config=getDefaultConfig(),Object.keys(r).map((function(e){n.config[e]=r[e]})),this.root=t,this.events="mouse"===r.eventType?MOUSES:TOUCHS,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return _createClass$5(e,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger(EVENTS$2.PRESS,e),t._pos.press=!0,t.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger(EVENTS$2.DOUBlE_CLICK,e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger(EVENTS$2.CLICK,e)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var n=this.__handlers[e],r=-1,i=0;i<n.length;i++)if(n[i]===t){r=i;break}r>=0&&this.__handlers[e].splice(r,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(n){try{n(t)}catch(error){console.error("trigger>>:".concat(e),error)}}))}},{key:"onTouchStart",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&preventToucheDefault(e);var r=getTouch(e.touches);t.x=r?parseInt(r.pageX,10):e.pageX,t.y=r?parseInt(r.pageX,10):e.pageX,t.start=!0,this.__setPress(e),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger(EVENTS$2.TOUCH_START,e)}},{key:"onTouchCancel",value:function(e){this.onTouchEnd(e)}},{key:"onTouchEnd",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&preventToucheDefault(e),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&this.trigger(EVENTS$2.PRESS_END,e),this.trigger(EVENTS$2.TOUCH_END,e),!t.press&&!t.moving&&this.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(e){var t=this._pos,n=this.config,r=getTouch(e.touches),i=r?parseInt(r.pageX,10):e.pageX,o=r?parseInt(r.pageY,10):e.pageX,a=i-t.x,s=o-t.y;Math.abs(s)<n.miniStep&&Math.abs(a)<n.miniStep||(this.__clearPress(),t.press&&this.trigger(EVENTS$2.PRESS_END,e),t.press=!1,t.moving=!0,this.trigger(EVENTS$2.TOUCH_MOVE,e))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map((function(n){e.root.removeEventListener("touchend",e[t[n]])}))}}]),e}();function SeekTipIcon(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var ACTIONS={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},MobilePlugin=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),_defineProperty$5(_assertThisInitialized$4(r=t.call(this,e)),"onTouchStart",(function(e){var t=_assertThisInitialized$4(r),n=t.player,i=t.config,o=t.pos,a=t.playerConfig,s=r.getTouche(e);if(s&&!i.disableGesture&&r.duration>0&&!n.ended){o.isStart=!0,util.checkIsFunction(a.disableSwipeHandler)&&a.disableSwipeHandler(),r.find(".xg-dur").innerHTML=util.format(r.duration);var c=r.root.getBoundingClientRect();90===n.rotateDeg?(o.top=c.left,o.left=c.top,o.width=c.height,o.height=c.width):(o.top=c.top,o.left=c.left,o.width=c.width,o.height=c.height);var l=parseInt(s.pageX-o.left,10),u=parseInt(s.pageY-o.top,10);o.x=90===n.rotateDeg?u:l,o.y=90===n.rotateDeg?l:u,o.scopeL=i.scopeL*o.width,o.scopeR=(1-i.scopeR)*o.width,o.scopeM1=o.width*(1-i.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),_defineProperty$5(_assertThisInitialized$4(r),"onTouchMove",(function(e){var t=r.getTouche(e),n=_assertThisInitialized$4(r),i=n.pos,o=n.config,a=n.player;if(t&&!o.disableGesture&&r.duration&&i.isStart){var s=o.miniMoveStep,c=o.hideControlsActive,l=parseInt(t.pageX-i.left,10),u=parseInt(t.pageY-i.top,10),d=90===a.rotateDeg?u:l,h=90===a.rotateDeg?l:u;if(Math.abs(d-i.x)>s||Math.abs(h-i.y)>s){var f=d-i.x,p=h-i.y,g=i.scope;if(-1===g&&(0===(g=r.checkScope(d,h,f,p,i))&&(c?a.blur():a.focus({autoHide:!1}),!i.time&&(i.time=parseInt(1e3*a.currentTime,10)+1e3*r.timeOffset)),i.scope=g),-1===g||g>0&&!o.gestureY||0===g&&!o.gestureX)return;e.cancelable&&e.preventDefault(),r.executeMove(f,p,g,i.width,i.height),i.x=d,i.y=h}}})),_defineProperty$5(_assertThisInitialized$4(r),"onTouchEnd",(function(e){var t=_assertThisInitialized$4(r),n=t.player,i=t.pos,o=t.playerConfig;if(i.isStart){i.scope>-1&&e.cancelable&&e.preventDefault();var a=r.config,s=a.disableGesture,c=a.gestureX;!s&&c?(r.endLastMove(i.scope),setTimeout((function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()}),10)):i.time=0,i.scope=-1,r.resetPos(),util.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),r.changeAction(ACTIONS.AUTO)}})),_defineProperty$5(_assertThisInitialized$4(r),"onRootTouchMove",(function(e){!r.config.disableGesture&&r.config.gestureX&&r.checkIsRootTarget(e)&&(e.stopPropagation(),r.pos.isStart?r.onTouchMove(e):r.onTouchStart(e))})),_defineProperty$5(_assertThisInitialized$4(r),"onRootTouchEnd",(function(e){r.pos.isStart&&r.checkIsRootTarget(e)&&(e.stopPropagation(),r.onTouchEnd(e))})),r.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},r.timer=null,r}return _createClass$5(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:SeekTipIcon,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,r=this.player;!0===t.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),util.isUndefined(t.disableGesture)||(n.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=util.createDom("xg-mask","",{},"xgmask"),r.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var i=this.domEventType;this.touch=new Touche(this.root,{eventType:i,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),r.root.addEventListener("touchmove",this.onRootTouchMove,!0),r.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(DURATION_CHANGE,(function(){var t=e.player,n=e.config;1e3*t.duration<n.moveDuration&&(n.moveDuration=1e3*t.duration)})),this.on([CANPLAY,ENDED],(function(){var t=e.pos,n=t.time;!t.isStart&&n>0&&(e.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).map((function(t){e.touch.on(t,(function(n){e[o[t]](n)}))})),!n.disableActive){var a=r.plugins.progress;a&&(a.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),a.addCallBack("dragend",(function(){e.changeAction(ACTIONS.AUTO)})))}}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;if(e&&e.usable){this.thumbnail=e.createThumbnail(null,"mobile-thumbnail");var t=this.find(".time-preview");t.insertBefore(this.thumbnail,t.children[0])}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&util.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);var n=t.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,n,r,i){var o=i.width,a=-1;if(e<0||e>o)return a;var s=0===r?Math.abs(n):Math.abs(n/r);return Math.abs(n)>0&&s>=1.73&&e>i.scopeM1&&e<i.scopeM2?a=0:(0===Math.abs(n)||s<=.57)&&(a=e<i.scopeL?1:e>i.scopeR?2:3),a}},{key:"executeMove",value:function(e,t,n,r,i){switch(n){case 0:this.updateTime(e/r*this.config.scopeM);break;case 1:this.updateBrightness(t/i);break;case 2:sniffer$1.os.isIos||this.updateVolume(t/i)}}},{key:"endLastMove",value:function(e){var t=this,n=this.pos,r=this.player,i=this.config,o=(n.time-this.timeOffset)/1e3;0===e&&(r.seek(Number(o).toFixed(1)),i.hideControlsEnd?r.blur():r.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500)),this.changeAction(ACTIONS.AUTO)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"onClick",value:function(e){var t=this.player,n=this.config,r=this.playerConfig;t.state<STATES.RUNNING?r.closeVideoClick||(this.sendUseAction(util.createEvent("click")),t.play()):!n.closedbClick||r.closeVideoClick?t.isActive?t.blur():t.focus():r.closeVideoClick||((t.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),t.focus())}},{key:"onDbClick",value:function(e){var t=this.config,n=this.player;!t.closedbClick&&n.state>=STATES.RUNNING&&(this.sendUseAction(util.createEvent("dblclick")),this.switchPlayPause())}},{key:"onPress",value:function(e){var t=this.pos,n=this.config,r=this.player;n.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:r.playbackRate,to:n.pressRate}),r.playbackRate=n.pressRate,this.changeAction(ACTIONS.PLAYBACK))}},{key:"onPressEnd",value:function(e){var t=this.pos,n=this.config,r=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:r.playbackRate,to:t.rate}),r.playbackRate=t.rate,t.rate=1,this.changeAction(ACTIONS.AUTO))}},{key:"updateTime",value:function(e){var t=this.player,n=this.config,r=this.player.duration;e=Number(e.toFixed(4));var i=parseInt(e*n.moveDuration,10)+this.timeOffset;i=(i+=this.pos.time)<0?0:i>1e3*r?1e3*r-200:i,t.getPlugin("time")&&t.getPlugin("time").updateTime(i/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(i/1e3/this.duration,!0),this.activeSeekNote(i/1e3,e>0),n.isTouchingSeek&&t.seek(Number((i-this.timeOffset)/1e3).toFixed(1)),this.pos.time=i}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,n=this.pos;if(e=parseInt(100*e,10),n.volume+=e,!(Math.abs(n.volume)<10)){var r=parseInt(10*t.volume,10)-parseInt(n.volume/10,10);r=r>10?10:r<1?0:r,t.volume=r/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,n=this.config,r=this.xgMask,i=t.light+.8*e;i=i>n.maxDarkness?n.maxDarkness:i<0?0:i,r&&(r.style.backgroundColor="rgba(0,0,0,".concat(i,")")),t.light=i}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,r=this.config,i=!(this.duration!==1/0&&this.duration>0);if(e&&"number"==typeof e&&!i&&!r.disableActive){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(ACTIONS.SEEKING);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=util.format(this.duration),this.find(".xg-cur").innerHTML=util.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?util.removeClass(this.find(".xg-seek-show"),"xg-back"):util.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<STATES.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(Plugin);function preventDefault(e){e.preventDefault(),e.returnValue=!1}function isDisableTag(e){var t=e.tagName;return!("INPUT"!==t&&"TEXTAREA"!==t&&!e.isContentEditable)}var Keyboard=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"onBodyKeyDown",(function(t){var n=t||window.event;if(e.player&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&!(e.config.disable||e.config.disableBodyTrigger||!e.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var r=n.keyCode;return!(n.target!==document.body&&(!e.config.isGlobalTrigger||isDisableTag(n.target))||!e.checkCode(r,!0))&&(preventDefault(n),e.handleKeyCode(r,t),!1)}})),_defineProperty$5(_assertThisInitialized$4(e),"onKeydown",(function(t){var n=t||window.event;if(!(e.config.disable||e.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey)&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&(e.player.isUserActive||e.config.isIgnoreUserActive)){if(!n||37!==n.keyCode&&!e.checkCode(n.keyCode)||n.target!==e.player.root&&n.target!==e.player.video&&n.target!==e.player.controls.el)return!0;preventDefault(n),e.handleKeyCode(n.keyCode,t)}})),e}return _createClass$5(n,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(r){t[n][r]&&(e.keyCodeMap[n][r]=t[n][r])})):e.keyCodeMap[n]=t[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,n=e.top,r=e.bottom,i=window.innerHeight;return!(n<0&&n<0-.9*t||r>0&&r-i>.9*t)}},{key:"checkCode",value:function(e,t){var n=this,r=!1;return Object.keys(this.keyCodeMap).map((function(i){n.keyCodeMap[i]&&e===n.keyCodeMap[i].keyCode&&!n.keyCodeMap[i].disable&&(r=!t||t&&!n.keyCodeMap[i].noBodyTarget)})),r}},{key:"downVolume",value:function(e){var t=this.player,n=parseFloat((t.volume-.1).toFixed(1)),r={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:r}),t.volume=n>=0?n:0}},{key:"upVolume",value:function(e){var t=this.player,n=parseFloat((t.volume+.1).toFixed(1)),r={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:r}),t.volume=n<=1?n:1}},{key:"seek",value:function(e){var t,n=this.player,r=n.currentTime,i=n.duration,o={currentTime:{from:r,to:t=r+this.seekStep<=i?r+this.seekStep:i-1}};this.emitUserAction(e,"seek",{props:o}),this.player.currentTime=t}},{key:"seekBack",value:function(e){var t=this.player.currentTime,n=0;t-this.seekStep>=0&&(n=t-this.seekStep);var r={currentTime:{from:t,to:n}};this.emitUserAction(e,"seek",{props:r}),this.player.currentTime=n}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,n=t.fullscreen,r=t.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),t.exitFullscreen()),r&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:r,to:!r}),t.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,t){var n=this;Object.keys(this.keyCodeMap).map((function(r){var i=n.keyCodeMap[r],o=i.action,a=i.keyCode,s=i.disable;a!==e||s||("function"==typeof o?o(t,n.player):"string"==typeof o&&"function"==typeof n[o]&&n[o](t,n.player),n.emit(SHORTCUT,_objectSpread2$4({key:r,target:t.target},n.keyCodeMap[r])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}(BasePlugin);function loadingIcon(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var Loading=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"registerIcons",value:function(){return{loadingIcon:loadingIcon}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.ROOT}}}]),n}(Plugin),$$k=_export,$findIndex$1=arrayIteration.findIndex,addToUnscopables$1=addToUnscopables$4,FIND_INDEX="findIndex",SKIPS_HOLES=!0;FIND_INDEX in[]&&Array(1)[FIND_INDEX]((function(){SKIPS_HOLES=!1})),$$k({target:"Array",proto:!0,forced:SKIPS_HOLES},{findIndex:function(e){return $findIndex$1(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$1(FIND_INDEX);var TPL=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],InnerList=function(){function e(t){_classCallCheck$4(this,e),this.fragments=t.fragments||[],this._callBack=t.actionCallback,this.fragConfig={fragFocusClass:t.fragFocusClass||"inner-focus-point",fragAutoFocus:!!t.fragAutoFocus,fragClass:t.fragClass||""},this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return _createClass$5(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=e;var n=0,r=this.fragments;this.fragments=r.map((function(e){return e.start=parseInt(n,10),e.end=parseInt(n+e.percent*t.duration,10),e.duration=parseInt(e.percent*t.duration,10),n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,r=this.fragments,i=t.newIndex,o=t.curIndex,a=t.millisecond;i!==o&&n.map((function(t,n){n<i?t[e].style.width="100%":n>i&&(t[e].style.width=0)}));var s=r[i],c=0===a?0:(a-s.start)/s.duration;n[i][e].style.width=c<0?0:"".concat(100*c,"%")}},{key:"updateFocus",value:function(e){if(this.fragConfig.fragAutoFocus&&!(this.fragments.length<2))if(e){var t=this.findIndex(1e3*e.currentTime,this.focusIndex);if(t!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(t);var n={index:t,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=t,this._callBack&&this._callBack(n)}}else if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var r={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(r),this.focusIndex=-1}}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(parseInt(1e3*t,10))}var n=this.playedIndex,r=this.cachedIndex;if("Undefined"!==util.typeOf(e.played)){var i=this.findIndex(1e3*e.played,n);this.updateProgress("played",{newIndex:i,curIndex:n,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=i}if("Undefined"!==util.typeOf(e.cached)){var o=this.findIndex(1e3*e.cached,r);this.updateProgress("cached",{newIndex:o,curIndex:r,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(e,t){var n=this.fragments;if(1===n.length)return 0;if(t>-1&&e>n[t].start&&e<n[t].end)return t;if(e>n[n.length-1].start)return n.length-1;for(var r=0;r<n.length;r++)if(e>n[r].start&&e<=n[r].end){t=r;break}return t}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(util.hasClass(e[t],this.fragConfig.fragFocusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)util.removeClass(e[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return util.addClass(t[e],this.fragConfig.fragFocusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(e){var t=this;if(Object.keys(this.fragConfig).forEach((function(n){void 0!==e[n]&&(t.fragConfig[n]=e[n])})),e.fragments){if(this.fragments=0===e.fragments.length?[{percent:1}]:e.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var n=this.root.children;n.length>0;)this.root.removeChild(n[0]);this.render()}}},{key:"render",value:function(){var e=this,t=this.style.progressColor;if(this.root||(this.root=util.createDom("xg-inners","",{},"progress-list")),this.fragments){var n=this.fragConfig,r=n.fragClass,i=n.fragFocusClass;this.progressList=this.fragments.map((function(n){var o=util.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?i:""," xgplayer-progress-inner ").concat(r));return e.root.appendChild(o),TPL.forEach((function(t){o.appendChild(util.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:o.children[0],played:o.children[1]}}))}return this.root}}]),e}(),FRAGMENT_FOCUS_CLASS={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},Progress=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),_defineProperty$5(_assertThisInitialized$4(r=t.call(this,e)),"onMoveOnly",(function(e,t){var n=_assertThisInitialized$4(r),i=n.pos,o=n.config,a=n.player,s=t;if(e){util.event(e);var c=util.getEventPos(e,a.zoom),l=90===a.rotateDeg?c.clientY:c.clientX;if(i.moving&&Math.abs(i.x-l)<o.miniMoveStep)return;i.moving=!0,i.x=l,s=r.computeTime(e,l)}r.triggerCallbacks("dragmove",s,e),r._updateInnerFocus(s)})),_defineProperty$5(_assertThisInitialized$4(r),"onBodyClick",(function(e){r.pos.isLocked&&(r.pos.isLocked=!1,e.preventDefault(),e.stopPropagation())})),_defineProperty$5(_assertThisInitialized$4(r),"_mouseDownHandler",(function(e,t){r._state.time=t.currentTime,r.updateWidth(t.currentTime,t.percent,0),r._updateInnerFocus(t)})),_defineProperty$5(_assertThisInitialized$4(r),"_mouseUpHandler",(function(e,t){_assertThisInitialized$4(r).pos.moving&&r.updateWidth(t.currentTime,t.percent,2)})),_defineProperty$5(_assertThisInitialized$4(r),"_mouseMoveHandler",(function(e,t){var n=_assertThisInitialized$4(r),i=n._state,o=n.pos,a=n.config,s=n.player;i.time<t.currentTime?t.forward=!0:t.forward=!1,i.time=t.currentTime,o.isDown&&!o.moving&&(o.moving=!0,a.isPauseMoving&&s.pause(),r.triggerCallbacks("dragstart",t,e),r.emitUserAction("drag","dragstart",t)),r.updateWidth(t.currentTime,t.percent,1),r.triggerCallbacks("dragmove",t,e),r._updateInnerFocus(t)})),_defineProperty$5(_assertThisInitialized$4(r),"onMouseDown",(function(e){var t=_assertThisInitialized$4(r),n=t._state,i=t.player,o=t.pos,a=t.config,s=t.playerConfig,c=util.getEventPos(e,i.zoom),l=90===i.rotateDeg?c.clientY:c.clientX;if(!(i.isMini||a.closeMoveSeek||!s.allowSeekAfterEnded&&i.ended)){e.stopPropagation(),r.focus(),util.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),util.checkIsFunction(a.onMoveStart)&&a.onMoveStart(),util.event(e),o.x=l,o.isDown=!0,o.moving=!1,n.prePlayTime=i.currentTime,i.focus({autoHide:!1}),r.isProgressMoving=!0,util.addClass(r.progressBtn,"active");var u=r.computeTime(e,l);return u.prePlayTime=n.prePlayTime,r._mouseDownHandlerHook(e,u),"touchstart"===e.type?(r.root.addEventListener("touchmove",r.onMouseMove),r.root.addEventListener("touchend",r.onMouseUp)):(r.unbind("mousemove",r.onMoveOnly),document.addEventListener("mousemove",r.onMouseMove,!1),document.addEventListener("mouseup",r.onMouseUp,!1)),!0}})),_defineProperty$5(_assertThisInitialized$4(r),"onMouseUp",(function(e){var t=_assertThisInitialized$4(r),n=t.player,i=t.config,o=t.pos,a=t.playerConfig,s=t._state;e.stopPropagation(),e.preventDefault(),util.checkIsFunction(a.enableSwipeHandler)&&a.enableSwipeHandler(),util.checkIsFunction(i.onMoveEnd)&&i.onMoveEnd(),util.event(e),util.removeClass(r.progressBtn,"active");var c=r.computeTime(e,o.x);c.prePlayTime=s.prePlayTime,o.moving?(r.triggerCallbacks("dragend",c,e),r.emitUserAction("drag","dragend",c)):(r.triggerCallbacks("click",c,e),r.emitUserAction("click","click",c)),r._mouseUpHandlerHook(e,c),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,o.isLocked=!0,s.prePlayTime=0,s.time=0,"touchend"===e.type?(r.root.removeEventListener("touchmove",r.onMouseMove),r.root.removeEventListener("touchend",r.onMouseUp),r.blur()):(document.removeEventListener("mousemove",r.onMouseMove,!1),document.removeEventListener("mouseup",r.onMouseUp,!1),o.isEnter?"mobile"!==a.isMobileSimulateMode&&r.bind("mousemove",r.onMoveOnly):r.onMouseLeave(e)),util.setTimeout(_assertThisInitialized$4(r),(function(){r.resetSeekState()}),10),n.focus()})),_defineProperty$5(_assertThisInitialized$4(r),"onMouseMove",(function(e){var t=_assertThisInitialized$4(r),n=t._state,i=t.pos,o=t.player,a=t.config;util.checkTouchSupport()&&e.preventDefault(),util.event(e);var s=util.getEventPos(e,o.zoom),c=90===o.rotateDeg?s.clientY:s.clientX,l=Math.abs(i.x-c);if(!(i.moving&&l<a.miniMoveStep||!i.moving&&l<a.miniStartStep)){i.x=c;var u=r.computeTime(e,c);u.prePlayTime=n.prePlayTime,r._mouseMoveHandlerHook(e,u)}})),_defineProperty$5(_assertThisInitialized$4(r),"onMouseOut",(function(e){r.triggerCallbacks("mouseout",null,e)})),_defineProperty$5(_assertThisInitialized$4(r),"onMouseOver",(function(e){r.triggerCallbacks("mouseover",null,e)})),_defineProperty$5(_assertThisInitialized$4(r),"onMouseEnter",(function(e){var t=_assertThisInitialized$4(r),n=t.player,i=t.pos;if(!(i.isDown||i.isEnter||n.isMini||!n.config.allowSeekAfterEnded&&n.ended)){i.isEnter=!0,r.bind("mousemove",r.onMoveOnly),r.bind("mouseleave",r.onMouseLeave),util.event(e);var o=util.getEventPos(e,n.zoom),a=90===n.rotateDeg?o.clientY:o.clientX,s=r.computeTime(e,a);r.triggerCallbacks("mouseenter",s,e),r.focus()}})),_defineProperty$5(_assertThisInitialized$4(r),"onMouseLeave",(function(e){r.triggerCallbacks("mouseleave",null,e),r.unlock(),r._updateInnerFocus(null)})),_defineProperty$5(_assertThisInitialized$4(r),"onVideoResize",(function(){var e=r.pos,t=e.x,n=e.isDown;if(e.isEnter&&!n){var i=r.computeTime(null,t);r.onMoveOnly(null,i)}})),r.useable=!1,r.isProgressMoving=!1,r.__dragCallBacks=[],r._state={now:-1,direc:0,time:0,prePlayTime:-1},r._disableBlur=!1,r}return _createClass$5(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"_initInner",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=_objectSpread2$4(_objectSpread2$4({fragments:t},n),{},{actionCallback:function(t){e.emitUserAction("fragment_focus","fragment_focus",t)}});this.innerList?this.innerList.reset(r):(this.innerList=new InnerList(r),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)})))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!this.config.disable&&!this.playerConfig.isLive){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var t=this.config,n=t.fragFocusClass,r=t.fragAutoFocus,i=t.fragClass;this._initInner(this.config.fragments,{fragFocusClass:n,fragAutoFocus:r,fragClass:i,style:this.playerConfig.commonStyle||{}}),"mobile"===sniffer$1.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(DURATION_CHANGE,(function(){e.onMouseLeave()})),this.on(TIME_UPDATE,(function(){e.onTimeupdate()})),this.on(SEEKED,(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(PROGRESS,(function(){e.onCacheUpdate()})),this.on(ENDED,(function(){e.onCacheUpdate(),e._state.now=0})),this.on(EMPTIED,(function(){e.onReset()})),this.on(VIDEO_RESIZE,(function(){e.onVideoResize()})),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var t=this,n=null;Object.keys(e).forEach((function(r){t.config[r]=e[r],"fragments"===r&&(n=e[r])})),n&&this._initInner(n,e)}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===_typeof$3(e)&&Object.keys(e).map((function(n){t.style[n]=e[n]})))}},{key:"triggerCallbacks",value:function(e,t,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(r){if(r&&r.handler&&r.type===e)try{r.handler(t,n)}catch(error){console.error("[XGPLAYER][triggerCallbacks] ".concat(r," error"),error)}}))}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var n=this.__dragCallBacks,r=-1;n.map((function(n,i){n&&n.type===e&&n.handler===t&&(r=i)})),r>-1&&n.splice(r,1)}},{key:"unlock",value:function(){var e=this.player,t=this.pos;t.isEnter=!1,e.isMini||(this.unbind("mousemove",this.onMoveOnly),t.isDown?this.unbind("mouseleave",this.onMouseLeave):this.blur())}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"!==this.domEventType&&"compatible"!==this.domEventType||(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",util.stopPropagation),t.center&&t.center.addEventListener("touchend",util.stopPropagation))),"mouse"!==this.domEventType&&"compatible"!==this.domEventType||(this.bind("mousedown",this.onMouseDown),"mobile"!==n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),util.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),util.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,n){var r=this.config,i=this.player;if(!r.isCloseClickSeek||0!==n){var o=e>=i.duration?i.duration-r.endedDiff:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==n||r.isDragingSeek&&"audio"!==i.config.mediaType)&&(this._state.now=o,this._state.direc=o>i.currentTime?0:1,i.seek(o))}}},{key:"computeTime",value:function(e,t){var n,r,i=this.player,o=this.root.getBoundingClientRect(),a=o.width,s=o.height,c=o.top,l=o.left,u=t;90===i.rotateDeg?(n=s,r=c):(n=a,r=l);var d=u-r,h=(d=d>n?n:d<0?0:d)/n;return{percent:h=h<0?0:h>1?1:h,currentTime:parseInt(h*this.duration*1e3,10)/1e3,offset:d,width:n,left:r,e:e}}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var r=t.plugins.time;r&&r.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,t=this._state,n=this.duration;if(!(e.isSeeking||this.isProgressMoving||e.state<STATES.RUNNING)){if(t.now>-1){var r=parseInt(1e3*t.now,10)-parseInt(1e3*e.currentTime,10);if(0===t.direc&&r>300||1===t.direc&&r>-300)return void(t.now=-1);t.now=-1}var i=this.timeOffset+e.currentTime;this.innerList.update({played:i},n),this.progressBtn.style.left="".concat(i/n*100,"%");var o=this.player.plugins.miniprogress;o&&o.update({played:i},n)}}},{key:"onCacheUpdate",value:function(){var e=this.player,t=this.duration;if(e){var n=e.bufferedPoint;this.innerList.update({cached:n.end},t);var r=this.player.plugins.miniprogress;r&&r.update({cached:n.end},t)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var n=this.domEventType;"touch"!==n&&"compatible"!==n||(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",util.stopPropagation),t.center&&t.center.removeEventListener("touchend",util.stopPropagation))),"mouse"!==n&&"compatible"!==n||(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:FRAGMENT_FOCUS_CLASS.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return FRAGMENT_FOCUS_CLASS}}]),n}(Plugin),Fullscreen$1=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"_onMouseenter",(function(t){e.emit("icon_mouseenter",{pluginName:e.pluginName})})),_defineProperty$5(_assertThisInitialized$4(e),"_onMouseLeave",(function(t){e.emit("icon_mouseleave",{pluginName:e.pluginName})})),e}return _createClass$5(n,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),n}(Plugin),Play=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this);var t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([PAUSE,ERROR$3],(function(){e.animate(t.paused)})),this.on(PLAY,(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:PlaySvg,class:"xg-icon-play"},pause:{icon:PauseSvg,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t=this.i18nKeys,n=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),n&&this.changeLangTextKey(n,t.PLAY_TIPS)):(this.setAttr("data-state","play"),n&&this.changeLangTextKey(n,t.PAUSE_TIPS))}},{key:"destroy",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(Fullscreen$1);function BackSVG(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var TopBackIcon=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:BackSVG,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){util.addClass(this.root,"show")}},{key:"hide",value:function(){util.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.ROOT_TOP,index:0}}}]),n}(Plugin);function FullScreenSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function ExitFullScreenSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Fullscreen=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.player.setRotateDeg(0):e.player.setRotateDeg(90))})),e}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this);var t=this.config,r=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var i=util.getFullScreenEl();r.fullscreenTarget===i&&this.player.getFullscreen().catch((function(e){})),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(t){var n=e.player.fullscreen;e.emitUserAction(t,"switch_fullscreen",{prop:"fullscreen",from:n,to:!n})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(FULLSCREEN_CHANGE,(function(t){var n=e.find(".xg-tips");n&&e.changeLangTextKey(n,t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:TopBackIcon,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===sniffer$1.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:FullScreenSvg,class:"xg-get-fullscreen"},exitFullscreen:{icon:ExitFullScreenSvg,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon","mobile"===sniffer$1.device?"touchend":"click",this.handleFullscreen),"mobile"===sniffer$1.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,n=this.config;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(t.fullscreen?t.exitCssFullscreen():t.getCssFullscreen(),this.animate(t.fullscreen)):n.rotateFullscreen?(t.fullscreen?t.exitRotateFullscreen():t.getRotateFullscreen(),this.animate(t.fullscreen)):n.switchCallback&&"function"==typeof n.switchCallback?n.switchCallback(t.fullscreen):t.fullscreen?t.exitFullscreen():t.getFullscreen().catch((function(e){}))}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(Fullscreen$1),Time=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),(r=t.call(this,e)).isActiving=!1,r}return _createClass$5(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(DURATION_CHANGE,(function(){e.onTimeUpdate()})),this.on(TIME_UPDATE,(function(){e.onTimeUpdate()})),this.on(EMPTIED,(function(){e.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&_get$2(_getPrototypeOf$4(n.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!(this.config.disable||this.isActiving||e.state<STATES.RUNNING&&e.state!==STATES.ATTACHED)){var t=this.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=util.format(t),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=util.format(this.duration))):(this.timeDom.innerHTML=util.format(t),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=util.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=util.format(0),this.centerDurDom.innerHTML=util.format(0)):(this.timeDom.innerHTML=util.format(0),this.durationDom.innerHTML=util.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=util.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=util.createDom("xg-icon","00:00",{},"xgplayer-time right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(util.hide(this.durationDom),util.hide(this.timeDom),util.hide(this.find(".time-separator")),util.show(this.find(".time-live-tag"))):util.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(util.hide(this.durationDom),util.hide(this.timeDom),util.hide(this.find(".time-separator")),util.show(this.find(".time-live-tag"))):(util.hide(this.find(".time-live-tag")),util.show(this.find(".time-separator")),util.show(this.durationDom),util.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=util.format(e):this.centerCurDom.innerHTML=util.format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,n=function(){e.isActiving=!1};this.off(SEEKED,n),t.isSeeking?this.once(SEEKED,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(Plugin);function volumeLargeSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function volumeSmallSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function volumeMutedSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Volume=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"onBarMousedown",(function(t){var n=_assertThisInitialized$4(e).player,r=e.find(".xgplayer-bar");util.event(t);var i=r.getBoundingClientRect(),o=util.getEventPos(t,n.zoom),a=i.height-(o.clientY-i.top);if(o.h=a,o.barH=i.height,e.pos=o,!(a<-2))return e.updateVolumePos(a,t),document.addEventListener("mouseup",e.onBarMouseUp),e._d.isStart=!0,!1})),_defineProperty$5(_assertThisInitialized$4(e),"onBarMouseMove",(function(t){var n=_assertThisInitialized$4(e)._d;if(n.isStart){var r=_assertThisInitialized$4(e),i=r.pos,o=r.player;t.preventDefault(),t.stopPropagation(),util.event(t);var a=util.getEventPos(t,o.zoom);n.isMoving=!0;var s=i.h-a.clientY+i.clientY;s>i.barH||e.updateVolumePos(s,t)}})),_defineProperty$5(_assertThisInitialized$4(e),"onBarMouseUp",(function(t){util.event(t),document.removeEventListener("mouseup",e.onBarMouseUp);var n=_assertThisInitialized$4(e)._d;n.isStart=!1,n.isMoving=!1})),_defineProperty$5(_assertThisInitialized$4(e),"onMouseenter",(function(t){e._d.isActive=!0,e.focus(),e.emit("icon_mouseenter",{pluginName:e.pluginName})})),_defineProperty$5(_assertThisInitialized$4(e),"onMouseleave",(function(t){e._d.isActive=!1,e.unFocus(100,!1,t),e.emit("icon_mouseleave",{pluginName:e.pluginName})})),_defineProperty$5(_assertThisInitialized$4(e),"onVolumeChange",(function(t){if(e.player){var n=e.player,r=n.muted,i=n.volume;e._d.isMoving||(e.find(".xgplayer-drag").style.height=r||0===i?"4px":"".concat(100*i,"%"),e.config.showValueLabel&&e.updateVolumeValue()),e.animate(r,i)}})),e}return _createClass$5(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:volumeSmallSvg,class:"xg-volume-small"},volumeLarge:{icon:volumeLargeSvg,class:"xg-volume"},volumeMuted:{icon:volumeMutedSvg,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var t=this.playerConfig,n=t.commonStyle,r=t.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(t){e.changeMuted(t)}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==sniffer$1.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(VOLUME_CHANGE,this.onVolumeChange),this.once(LOADED_DATA,this.onVolumeChange),"Number"!==util.typeOf(r)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var n=this.player,r=this.find(".xgplayer-drag"),i=this.find(".xgplayer-bar");if(i&&r){var o=parseInt(e/i.getBoundingClientRect().height*1e3,10);r.style.height="".concat(e,"px");var a=Math.max(Math.min(o/1e3,1),0),s={volume:{from:n.volume,to:a}};n.muted&&(s.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:n.muted,volume:n.volume,props:s}),n.volume=Math.max(Math.min(o/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,n=e.muted,r=this.find(".xgplayer-value-label"),i=Math.max(Math.min(t,1),0);r.innerText=n?0:Math.ceil(100*i)}},{key:"focus",value:function(){this.player.focus({autoHide:!1}),this._timerId&&(util.clearTimeout(this,this._timerId),this._timerId=null),util.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=this._d,o=this.player;i.isActive||(this._timerId&&(util.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=util.setTimeout(this,(function(){i.isActive||(n?o.blur():o.focus(),util.removeClass(e.root,"slide-show"),i.isStart&&e.onBarMouseUp(r)),e._timerId=null}),t))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this._d.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(util.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===sniffer$1.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(Plugin);function RotateSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var Rotate=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),(r=t.call(this,e)).rotateDeg=r.config.rotateDeg||0,r}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(VIDEO_RESIZE,(function(){e.rotateDeg&&util.setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var n=this.player;e||(e=0);var r=this.player,i=r.root,o=r.innerContainer,a=this.player.media,s=i.offsetWidth,c=o&&t?o.offsetHeight:i.offsetHeight,l="100%",u="100%",d=0,h=0;.75!==e&&.25!==e||(l="".concat(c,"px"),u="".concat(s,"px"),d=-(c-s)/2,h=-(s-c)/2);var f="translate(".concat(d,"px,").concat(h,"px) rotate(").concat(e,"turn)"),p={transformOrigin:"center center",transform:f,webKitTransform:f,height:u,width:l},g=t?a:i,y=t?n.getPlugin("poster"):null;Object.keys(p).map((function(e){g.style[e]=p[e],y&&y.root&&(y.root.style[e]=p[e])}))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.player;this.rotateDeg||(this.rotateDeg=0);var i=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*i*n)%1,this.updateRotateDeg(this.rotateDeg,t),r.emit(ROTATE,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:RotateSvg}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(Fullscreen$1);function PipIcon(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function PipIconExit(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var PresentationMode={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},PIP=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!0,to:!1}),e.setAttr("data-state","normal")):4===e.player.media.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!1,to:!0}),e.setAttr("data-state","pip"))})),e}return _createClass$5(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this),this.pMode=PresentationMode.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(COMPLETE,(function(){e.config.showIcon&&(util.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:PipIcon,class:"xg-get-pip"},pipIconExit:{icon:PipIconExit,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var n=t.paused;util.setTimeout(e,(function(){!n&&t.mediaPlay()}),0),!n&&t.mediaPlay(),e.setAttr("data-state","normal"),t.emit(PIP_CHANGE,!1)},this.enterPIPCallback=function(n){t.emit(PIP_CHANGE,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var r=t.media.webkitPresentationMode;e.pMode===PresentationMode.FULLSCREEN&&r!==PresentationMode.FULLSCREEN&&t.onFullscreenChange(null,!1),e.pMode=r,r===PresentationMode.PIP?e.enterPIPCallback(n):r===PresentationMode.INLINE&&e.leavePIPCallback(n)},t.media&&(t.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(t.media)&&t.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var r=t.poster;return r&&(e.media.poster="String"===util.typeOf(r)?r:r.poster),n.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(i){return console.error("requestPiP",i),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(t){return console.error("exitPIP",t),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===PresentationMode.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media;return("Boolean"!==util.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===util.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===util.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),n}(Fullscreen$1);function Next(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var PlayNextIcon=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),_defineProperty$5(_assertThisInitialized$4(r=t.call(this,e)),"playNext",(function(e){var t=_assertThisInitialized$4(r).player;e.preventDefault(),e.stopPropagation(),r.idx+1<r.config.urlList.length?(r.idx++,r.nextHandler(r.config.urlList[r.idx],r.idx),t.emit(PLAYNEXT,r.idx+1)):(r.nextHandler(),t.emit(PLAYNEXT))})),r.idx=-1,r}return _createClass$5(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Next}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===sniffer$1.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(Plugin),download={exports:{}},module2;module2=download,module2.exports=function e(t,n,r){var i,o,a=window,s="application/octet-stream",c=r||s,l=t,u=!n&&!r&&l,d=document.createElement("a"),h=function(e){return String(e)},f=a.Blob||a.MozBlob||a.WebKitBlob||h,p=n||"download";if(f=f.call?f.bind(a):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],d.href=u,-1!==d.href.indexOf(u))){var g=new XMLHttpRequest;return g.open("GET",u,!0),g.responseType="blob",g.onload=function(t){e(t.target.response,p,s)},setTimeout((function(){g.send()}),0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&f!==h))return navigator.msSaveBlob?navigator.msSaveBlob(_(l),p):b(l);c=(l=_(l)).type||s}else if(/([\x80-\xff])/.test(l)){for(var y=0,v=new Uint8Array(l.length),m=v.length;y<m;++y)v[y]=l.charCodeAt(y);l=new f([v],{type:c})}function _(e){for(var t=e.split(/[:;,]/),n=t[1],r=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),i=r.length,o=0,a=new Uint8Array(i);o<i;++o)a[o]=r.charCodeAt(o);return new f([a],{type:n})}function b(e,t){if("download"in d)return d.href=e,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout((function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout((function(){a.URL.revokeObjectURL(d.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(i=l instanceof f?l:new f([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(i,p);if(a.URL)b(a.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===h)try{return b("data:"+c+";base64,"+a.btoa(i))}catch(E){return b("data:"+c+","+encodeURIComponent(i))}(o=new FileReader).onload=function(e){b(this.result)},o.readAsDataURL(i)}return!0};var downloadUtil=download.exports;function DownloadSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var Download=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),_defineProperty$5(_assertThisInitialized$4(r=t.call(this,e)),"download",(function(e){if(!r.isLock){r.emitUserAction(e,"download");var t=r.getAbsoluteURL(r.player.src);downloadUtil(t),r.isLock=!0,r.timer=window.setTimeout((function(){r.isLock=!1,window.clearTimeout(r.timer),r.timer=null}),300)}})),r.timer=null,r.isLock=!1,r}return _createClass$5(n,[{key:"afterCreate",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this),this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:DownloadSvg}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(Fullscreen$1),ScreenShot=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(VIDEO_RESIZE,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}},{key:"createCanvans",value:function(e,t){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=e||this.config.width,n.height=t||this.config.height}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then((function(e){t.emit(SCREEN_SHOT,e),t.saveScreenShot(e,t.config.name+t.config.format)}))}},{key:"shot",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},i=this.config,o=this.player,a=r.quality||i.quality,s=r.type||i.type;return new Promise((function(r,c){var l=null;o.media.canvas?l=o.media.canvas:(n.canvas?(n.canvas.width=e||i.width,n.canvas.height=t||i.height):n.createCanvans(e,t),n.canvasCtx.drawImage(o.media,0,0,e||i.width,t||i.height),l=n.canvas);var u=l.toDataURL(s,a).replace(s,"image/octet-stream");r(u=u.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(VIDEO_RESIZE,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>")," \n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(Fullscreen$1),OptionList=function(){function e(t){_classCallCheck$4(this,e),this.config=t.config,this.parent=t.root,this.root=util.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===sniffer$1.device?"touchend":"click";this._delegates=Plugin.delegate.call(this,this.root,"li",n,this.onItemClick)}return _createClass$5(e,[{key:"renderItemList",value:function(e){var t=this,n=this.config,r=this.root;e?n.data=e:e=n.data,n.style&&Object.keys(n.style).map((function(e){r.style[e]=n[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,n){var r=e.selected?"option-item selected":"option-item";e["data-index"]=n,t.root.appendChild(util.createDom("li","<span>".concat(e.showText,"</span>"),e,r))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&util.hasClass(t,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,r=this.root.querySelector(".selected");util.addClass(t,"selected"),r&&util.removeClass(r,"selected"),n(e,{from:r?this.getAttrObj(r,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var n={};t.map((function(t){n[t]=e.getAttribute(t)}));var r=e.getAttribute("data-index");return r&&(n.index=Number(r)),n}},{key:"show",value:function(){util.removeClass(this.root,"hide"),util.addClass(this.root,"active")}},{key:"hide",value:function(){util.removeClass(this.root,"active"),util.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),e}(),IS_MOBILE$2="mobile"===sniffer$1.device,OptionsIcon=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),_defineProperty$5(_assertThisInitialized$4(r=t.call(this,e)),"onEnter",(function(e){e.preventDefault(),e.stopPropagation(),r.emit("icon_mouseenter",{pluginName:r.pluginName}),r.onToggle(!0)})),_defineProperty$5(_assertThisInitialized$4(r),"onLeave",(function(e){e.preventDefault(),e.stopPropagation(),r.emit("icon_mouseleave",{pluginName:r.pluginName}),r.isActive&&r.onToggle(!1)})),r.isIcons=!1,r.isActive=!1,r.curValue=null,r.curIndex=0,r}return _createClass$5(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;this.initIcons(),IS_MOBILE$2&&"middle"!==t.listType&&(t.listType="rightSide"),t.hidePortrait&&util.addClass(this.root,"portrait"),this.once(CANPLAY,(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),IS_MOBILE$2&&this.on(PLAYER_FOCUS,(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),this.activeEvent=IS_MOBILE$2?"touchend":"mouseenter",this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,t=this.icons,n=Object.keys(t),r=!1;n.length>0&&(n.forEach((function(n){e.appendChild(".xgplayer-icon",t[n]),!r&&(r=t[n])})),this.isIcons=r),r||(this.appendChild(".xgplayer-icon",util.createDom("span","",{},"icon-text")),util.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||util.addClass(this.root,"show")}},{key:"hide",value:function(){util.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var r=this.config.list;!n&&(n=this.player.lang),t=!t||util.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=r[e]);try{return"object"===_typeof$3(e[t])?e[t][n]||e[t].zh:e[t]}catch(i){return console.warn(i),""}}},{key:"onToggle",value:function(e){if(e!==this.isActive){var t=this.player.controls,n=this.config.listType;e?("rightSide"===n?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.config,r=n.listType,i=n.list;(IS_MOBILE$2||"rightSide"===r)&&this.onToggle(!1),this.curIndex=t.to.index,this.curItem=i[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}}},{key:"renderItemList",value:function(e,t){var n=this,r=this.config,i=this.optionsList,o=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=r.list[t]),i)return i.renderItemList(e),void this.changeCurrentText();var a={config:{data:e||[],className:"rightSide"===r.listType?"right-side":"",onItemClick:function(e,t){n.onItemClick(e,t)}},root:"rightSide"===r.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new OptionList(a),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon">\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),n}(Plugin),DefinitionIcon=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),(r=t.call(this,e)).curTime=0,r.isPaused=!0,r}return _createClass$5(n,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){e.changeDefinitionList(t)})),this.on(DEFINITION_CHANGE,(function(t){e.renderItemList(e.config.list,t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||util.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,n=e.defaultDefinition;if(t.length>0){var r=null;t.map((function(e){e.definition===n&&(r=e)})),r||(r=t[0]),this.changeDefinition(r)}}},{key:"renderItemList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],r=arguments.length>1?arguments[1]:void 0,i=r&&r.definition?r.definition:this.config.defaultDefinition;r&&t.forEach((function(e){e.selected=!1}));var o=0,a=t.map((function(t,n){var r=_objectSpread2$4(_objectSpread2$4({},t),{},{showText:e.getTextByLang(t)||t.definition,selected:!1});return(t.selected||t.definition&&t.definition==i)&&(r.selected=!0,o=n),r}));_get$2(_getPrototypeOf$4(n.prototype),"renderItemList",this).call(this,a,o)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){var r=this.player.definitionList;_get$2(_getPrototypeOf$4(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to});for(var i=0;i<r.length;i++)t.to&&r[i].definition===t.to.definition&&(t.to.url=r[i].url),t.from&&r[i].definition===t.from.definition&&(t.from.url=r[i].url);this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(OptionsIcon),PlaybackRate=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),(r=t.call(this,e)).curRate=1,r}return _createClass$5(n,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,n=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map((function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this),this.on(RATE_CHANGE,(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&_get$2(_getPrototypeOf$4(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){_get$2(_getPrototypeOf$4(n.prototype),"onItemClick",this).apply(this,arguments);var r=e.delegateTarget,i=Number(r.getAttribute("rate"));if(!i||i===this.curValue)return!1;var o={playbackRate:{from:this.player.playbackRate,to:i}};this.emitUserAction(e,"change_rate",{props:o}),this.curValue=i,this.player.playbackRate=i}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var r=-1,i=this.config.list.map((function(n,i){var o={rate:n.rate};return o.rate===t&&(o.selected=!0,r=i),o.showText=e.getTextByLang(n),o}));_get$2(_getPrototypeOf$4(n.prototype),"renderItemList",this).call(this,i,r)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e,t=this.config.list,n=t[this.curIndex<t.length?this.curIndex:0];e=!n||this.curIndex<0?"".concat(this.player.playbackRate,"x"):this.getTextByLang(n,"iconText"),this.find(".icon-text").innerHTML=e}}},{key:"destroy",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),n}(OptionsIcon);function CssFullSceenSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function ExitCssFullSceenSvg(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var CssFullScreen=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;_get$2(_getPrototypeOf$4(n.prototype),"afterCreate",this).call(this),this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(CSS_FULLSCREEN_CHANGE,(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys,n=this.find(".xg-tips");n&&this.changeLangTextKey(n,e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:CssFullSceenSvg,class:"xg-get-cssfull"},exitCssFullscreen:{icon:ExitCssFullSceenSvg,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){_get$2(_getPrototypeOf$4(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.CSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(Fullscreen$1),ErrorPlugin$1=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(ERROR$3,(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,n=e.errorType,r=t.errorNote?this.i18n[t.errorNote]:"";if(!r)switch(n){case"decoder":r=this.i18n.MEDIA_ERR_DECODE;break;case"network":r=this.i18n.MEDIA_ERR_NETWORK;break;default:r=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=r,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),n}(Plugin),Prompt=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(n){t.root.style[n]=e[n]}))}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=r;var i=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),util.addClass(this.root,"show"),"arrow"===n.mode&&util.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var o="boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide;if(o){var a=n.interval||i;this.intervalId=setTimeout((function(){t.hide()}),a)}}}},{key:"hide",value:function(){util.removeClass(this.root,"show"),util.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(STATE_CLASS.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(Plugin),ISPOT={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function mergeISPOT(e){Object.keys(ISPOT).map((function(t){void 0===e[t]&&(e[t]=ISPOT[t])}))}var APIS={_updateDotDom:function(e,t){if(t){var n=this.calcuPosition(e.time,e.duration),r=e.style||{};r.left="".concat(n.left,"%"),r.width="".concat(n.width,"%"),t.setAttribute("data-text",e.text),t.setAttribute("data-time",e.time),n.isMini?util.addClass(t,"mini"):util.removeClass(t,"mini"),Object.keys(r).map((function(e){t.style[e]=r[e]}))}},initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this.ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(t&&(mergeISPOT(e),this._ispots.push(e)),this.ispotsInit||!t)){var r=this.calcuPosition(e.time,e.duration),i=e.style||{};i.left="".concat(r.left,"%"),i.width="".concat(r.width,"%");var o="xgspot_".concat(e.id," xgplayer-spot");r.isMini&&(o+=" mini");var a=util.createDom("xg-spot",e.template||"",{"data-text":e.text,"data-time":e.time,"data-id":e.id},o);Object.keys(i).map((function(e){a.style[e]=i[e]})),n.outer&&n.outer.appendChild(a)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,n){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var r=this.findDot(e.id);if(r&&Object.keys(e).map((function(t){r[t]=e[t]})),this.ispotsInit){var i=n.find('xg-spot[data-id="'.concat(e.id,'"]'));i&&(this._updateDotDom(e,i),t&&this.showDot(e.id))}}},deleteDot:function(e){var t=this._ispots,n=this.player.plugins.progress;if(n){for(var r=[],i=0;i<t.length;i++)t[i].id===e&&r.push(i);for(var o=r.length-1;o>=0;o--)if(t.splice(r[o],1),this.ispotsInit){var a=n.find('xg-spot[data-id="'.concat(e,'"]'));a&&a.parentElement.removeChild(a)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this.ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),n=t.length-1;n>=0;n--)e.outer.removeChild(t[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this.ispotsInit){this._ispots=[];var r=n.root.getElementsByTagName("xg-spot"),i=r.length;if(i>t.length)for(var o=i-1;o>t.length-1;o--)n.outer.removeChild(r[o]);t.forEach((function(t,n){n<i?(r[n].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t},updateDuration:function(){var e=this,t=this.player.plugins.progress;t&&this._ispots.forEach((function(n){var r=t.find('xg-spot[data-id="'.concat(n.id,'"]'));e._updateDotDom(n,r)}))},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}};function initDotsAPI(e){var t=e.config,n=e.player;Object.keys(APIS).map((function(t){e[t]=APIS[t].bind(e)}));var r=n.config.progressDot||t.ispots||[];e._ispots=r.map((function(e){return mergeISPOT(e),e})),e.ispotsInit=!1,e.on(DURATION_CHANGE,(function(){e.ispotsInit?e.updateDuration():e.initDots()}))}var CALLBACK_MAP={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},ProgressPreview=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),_defineProperty$5(_assertThisInitialized$4(r=t.call(this,e)),"onMousemove",(function(e){r.config.disable||(util.hasClass(e.target,"xg-spot-content")&&r.config.isHideThumbnailHover?r.player.plugins.progress.onMouseLeave(e):(r._state.f||util.hasClass(e.target,"xg-spot-content"))&&(util.event(e),e.stopPropagation()))})),_defineProperty$5(_assertThisInitialized$4(r),"onMousedown",(function(e){r.config.disable||(r._state.f||util.hasClass(e.target,"xg-spot-content"))&&(util.event(e),e.stopPropagation())})),_defineProperty$5(_assertThisInitialized$4(r),"onMouseup",(function(e){if(r.isDrag){var t=r.player.plugins.progress;t&&t.pos&&(t.onMouseUp(e),!t.pos.isEnter&&t.onMouseLeave(e))}})),_defineProperty$5(_assertThisInitialized$4(r),"onDotMouseLeave",(function(e){if(!r.config.disable){r._curDot.removeEventListener("mouseleave",r.onDotMouseLeave),r.blurDot(e.target),r._curDot=null;var t=r.player.plugins.progress;t&&t.enableBlur(),r.show()}})),_defineProperty$5(_assertThisInitialized$4(r),"onProgressMouseOver",(function(e,t){if(!r.config.disable&&util.hasClass(t.target,"xgplayer-spot")&&!r._curDot){r._curDot=t.target,r.focusDot(t.target),r._curDot.children.length>0&&r.hide();var n=r.player.plugins.progress;n&&n.disableBlur(),r._curDot.addEventListener("mouseleave",r.onDotMouseLeave)}})),r._ispots=[],r.videoPreview=null,r.videothumbnail=null,r.thumbnail=null,r.timeStr="",r._state={now:0,f:!1},r}return _createClass$5(n,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(t,n){n.time&&e.player.seek(n.time)})),this.transformTimeHook=this.hook("transformTime",(function(t){e.setTimeContent(util.format(t))})),initDotsAPI(this),this.on(DURATION_CHANGE,(function(){e.show()})),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(n){t.config[n]=e[n]}))}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if(t&&(Object.keys(CALLBACK_MAP).map((function(n){e[CALLBACK_MAP[n]]=e[CALLBACK_MAP[n]].bind(e),t.addCallBack(n,e[CALLBACK_MAP[n]])})),"mobile"!==sniffer$1.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),n(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,t){!this.config.disable&&this.player.duration&&this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!0,this.videoPreview&&util.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!1,this.videoPreview&&util.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,t){if(!this.config.disable&&util.hasClass(t.target,"xgplayer-spot")){t.stopPropagation(),t.preventDefault();var n={};["time","id","text"].map((function(e){n[e]=t.target.getAttribute("data-".concat(e))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(t,n)}}},{key:"updateLinePos",value:function(e,t){var n=this.root,r=this.previewLine,i=this.timePoint,o=this.player,a=this.config,s="flex"===o.controls.mode,c=n.getBoundingClientRect().width;if(c){var l,u,d=i.getBoundingClientRect().width,h=e-(c=this._hasThumnail&&c<a.width?a.width:c)/2;h<0&&!s?(h=0,l=e-c/2,!this.thumbnail&&(u=e-c/2-d/2)):h>t-c&&!s?(l=h-(t-c),!this.thumbnail&&(u=h-(t-c)-d/2),h=t-c):(l=0,!this.thumbnail&&(u=-d/2)),void 0!==l&&(r.style.transform="translateX(".concat(l.toFixed(2),"px)")),void 0!==u&&(i.style.transform="translateX(".concat(u.toFixed(2),"px)")),n.style.transform="translateX(".concat(h.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var t=this.timeText,n=this.timePoint;t.textContent=e,!this.thumbnail&&(n.textContent=e)}},{key:"updatePosition",value:function(e,t,n,r){var i=this.root,o=this.config,a=this._state;if(i){this.updateLinePos(e,t),a.now=n,this.transformTimeHook(n);var s=this.timeStr;r&&r.target&&util.hasClass(r.target,"xgplayer-spot")?(this.showTips(r.target.getAttribute("data-text"),!1,s),this.focusDot(r.target),a.f=!0,o.isFocusDots&&a.f&&(a.now=parseInt(r.target.getAttribute("data-time"),10))):o.defaultText?(a.f=!1,this.showTips(o.defaultText,!0,s)):(a.f=!1,this.hideTips("")),this.updateTimeText(s),this.updateThumbnails(a.now)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var t=this.player,n=this.videoPreview,r=this.config,i=t.plugins.thumbnail;if(i&&i.usable){this.thumbnail&&i.update(this.thumbnail,e,r.width,r.height);var o=n&&n.getBoundingClientRect();this.videothumbnail&&i.update(this.videothumbnail,e,o.width,o.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==sniffer$1.device){var t=this.player,n=this.config,r=t.getPlugin("thumbnail");if(r&&r.setConfig(e),r&&r.usable&&n.isShowThumbnail){util.removeClass(this.root,"short-line no-thumbnail"),"short"===n.mode&&util.addClass(this.root,"short-line"),this._hasThumnail=!0;var i=this.find(".xg-spot-thumbnail");this.thumbnail=r.createThumbnail(i,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=util.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=r.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}else util.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var n=this.player.plugins.progress,r=this.player,i=n.root.getBoundingClientRect().width,o=r.duration/i*6;return e+t>r.duration&&(t=r.duration-e),r.duration,r.duration,{left:e/r.duration*100,width:t/r.duration*100,isMini:t<o}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var n=this.root.getBoundingClientRect().width,r=t.time/this.player.duration*n;this.updatePosition(r,n,t.time)}}},{key:"focusDot",value:function(e,t){e&&(t||(t=e.getAttribute("data-id")),util.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){if(!e){var t=this._activeDotId;e=this.getDotDom(t)}e&&(util.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";util.addClass(this.root,"no-timepoint"),e&&(util.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(util.addClass(this.root,"product"),this.tipText.textContent=e):(util.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){util.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",util.removeClass(this.find(".xg-spot-content"),"show-text"),util.removeClass(this.root,"product")}},{key:"hide",value:function(){util.addClass(this.root,"hide")}},{key:"show",value:function(){util.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,t=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(t.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys(CALLBACK_MAP).map((function(n){t.removeCallBack(n,e[CALLBACK_MAP[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===sniffer$1.device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info hide '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-ext-text"></div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),n}(Plugin),Thumbnail=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(e){var r;return _classCallCheck$4(this,n),(r=t.call(this,e)).ratio=1,r.interval=null,r._preloadMark={},r}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([DURATION_CHANGE],(function(){var t=e.config,n=t.pic_num,r=t.interval;e.usable&&(e.interval=r>0?r:Math.round(1e3*e.player.duration/n)/1e3)}))}},{key:"setConfig",value:function(e){var t=this;if(e){var n=Object.keys(e);n.length<1||(n.forEach((function(n){t.config[n]=e[n]})),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,t=e.urls,n=e.pic_num;return t&&t.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,n=e.height,r=e.pic_num,i=e.interval;this.ratio=t/n*100,this.interval=i||Math.round(this.player.duration/r),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this;if(!this._preloadMark[e]){var n=this.config.urls,r=n.length,i=[];e>0&&i.push(e-1),i.push(e),e>0&&e<r-1&&i.push(e+1),i.map((function(e){!t._preloadMark[e]&&e>=0&&e<r&&(t._preloadMark[e]=1,util.preloadImg(n[e],(function(){t._preloadMark[e]=2})))}))}}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.config,i=r.pic_num,o=r.row,a=r.col,s=r.width,c=r.height;this.interval=Math.round(this.player.duration/i);var l=Math.ceil(e/this.interval),u=(l=l>i?i:l)<o*a?0:Math.ceil(l/(o*a))-1,d=l-u*(a*o),h=d>0?Math.ceil(d/a)-1:0,f=d>0?d-h*a-1:0,p=0,g=0;if(t&&n){var y=t/n;y<s/c?p=(g=n)*(s/c):g=(p=t)/(s/c)}else n?t||(p=(g=n||c)*(s/c)):g=(p=t||s)/(s/c);var v=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:h,colIndex:f,url:v,height:g,width:p,style:{backgroundImage:"url(".concat(v,")"),backgroundSize:"".concat(p*a,"px auto"),backgroundPosition:"-".concat(f*p,"px -").concat(h*g,"px"),width:"".concat(p,"px"),height:"".concat(g,"px")}}}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=this.config,a=o.pic_num,s=o.urls;if(!(a<=0)&&s&&0!==s.length){var c=this.getPosition(t,n,r);this.preload(c.urlIndex),Object.keys(c.style).map((function(t){e.style[t]=c.style[t]})),Object.keys(i).map((function(t){e.style[t]=i[t]}))}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,t){var n=util.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),n}(Plugin),MiniProgress=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(Plugin),MODES={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function nowTime$1(){try{return parseInt(window.performance.now(),10)}catch(e){return(new Date).getTime()}}function checkIsSupportCanvas(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}var isSupportCanvas=null,DynamicBg=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"onLoadedData",(function(t){e.player&&(e._frameCount=e.config.startFrameCount,e.renderOnTimeupdate(t),e.off(TIME_UPDATE,e.renderOnTimeupdate),e.on(TIME_UPDATE,e.renderOnTimeupdate))})),_defineProperty$5(_assertThisInitialized$4(e),"renderOnTimeupdate",(function(t){e._frameCount>0?(e.renderOnce(),e._frameCount--):(e._isLoaded=!0,e.off(TIME_UPDATE,e.renderOnTimeupdate),!e.player.paused&&e._checkIfCanStart()&&e.start())})),_defineProperty$5(_assertThisInitialized$4(e),"start",(function(){var t=e.player.media,n=nowTime$1(),r=e.checkVideoIsSupport(t);r&&e.canvasCtx&&(e.stop(),t.videoWidth&&t.videoHeight&&(e.videoPI=t.videoHeight>0?parseInt(t.videoWidth/t.videoHeight*100,10):0,(e.config.mode===MODES.REAL_TIME||n-e.preTime>=e.interval)&&(t&&t.videoWidth&&e.update(r,e.videoPI),e.preTime=n)),e.frameId=util.requestAnimationFrame(e.start))})),_defineProperty$5(_assertThisInitialized$4(e),"stop",(function(){e.frameId&&(util.cancelAnimationFrame(e.frameId),e.frameId=null)})),e}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var t=this.config,r=t.disable,i=t.mode,o=t.frameRate;r||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/o,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(COMPLETE,(function(){e.player&&(e.init(),e.player.paused||e.start())})),i!==MODES.POSTER&&(i!==MODES.FIRST_FRAME&&(this.on(EMPTIED,(function(){e.stop()})),this.on(PLAY,(function(){e._checkIfCanStart()&&e.start()})),this.on(PAUSE,(function(){e.stop()}))),this.on(LOADED_DATA,this.onLoadedData),this.on(LOAD_START,(function(){e._isLoaded=!1,e.stop()}))))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=n.supportCanvasFilter();try{var r=this.config.isInnerRender&&e.innerContainer||e.root;r.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=r.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(i){XG_DEBUG.logError("plugin:DynamicBg",i)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var t=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(t&&("safari"!==sniffer$1.browser||!/^blob/.test(t.currentSrc)&&!/^blob/.test(t.src)))return t;var n=t?t.tagName.toLowerCase():"";return"canvas"===n||"img"===n?t:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var t="String"===util.typeOf(e)?e:"String"===util.typeOf(e.poster)?e.poster:null;this.updateImg(t)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==MODES.FIRST_FRAME&&e!==MODES.POSTER}},{key:"renderOnce",value:function(){var e=this.player.media;if(e.videoWidth&&e.videoHeight){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var t=this.checkVideoIsSupport(e);t&&e.videoWidth&&this.update(t,this.videoPI)}}},{key:"updateImg",value:function(e){var t=this;if(e){var n=this.canvas.getBoundingClientRect(),r=n.width,i=n.height,o=new window.Image;o.onload=function(){if(t.canvas&&!t.frameId&&!t.isStart){t.canvas.height=i,t.canvas.width=r;var e=parseInt(r/i*100,10);t.update(o,e),o=null}},o.src=e}}},{key:"update",value:function(e,t){if(this.canvas&&this.canvasCtx&&t)try{var n=this._pos,r=this.config,i=this.canvas.getBoundingClientRect(),o=i.width,a=i.height;if(o!==n.width||a!==n.height||n.pi!==t){var s=parseInt(o/a*100,10);n.pi=t,n.width=this.canvas.width=o,n.height=this.canvas.height=a;var c=a,l=o;s<t?l=parseInt(a*t/100,10):s>t&&(c=parseInt(100*o/t,10)),n.rwidth=l*r.multiple,n.rheight=c*r.multiple,n.x=(o-n.rwidth)/2,n.y=(a-n.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=r.filter),this.canvasCtx.drawImage(e,n.x,n.y,n.rwidth,n.rheight)}catch(u){XG_DEBUG.logError("plugin:DynamicBg",u)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof isSupportCanvas?isSupportCanvas:isSupportCanvas=checkIsSupportCanvas()}},{key:"supportCanvasFilter",value:function(){return!("safari"===sniffer$1.browser||"firefox"===sniffer$1.browser)}}]),n}(Plugin),ZH={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u89c6\u9891\u4e0b\u8f7d\u9519\u8bef"},mse:{code:2,msg:"\u6d41\u8ffd\u52a0\u9519\u8bef"},parse:{code:3,msg:"\u89e3\u6790\u9519\u8bef"},format:{code:4,msg:"\u683c\u5f0f\u9519\u8bef"},decoder:{code:5,msg:"\u89e3\u7801\u9519\u8bef"},runtime:{code:6,msg:"\u8bed\u6cd5\u9519\u8bef"},timeout:{code:7,msg:"\u64ad\u653e\u8d85\u65f6"},other:{code:8,msg:"\u5176\u4ed6\u9519\u8bef"}},HAVE_NOTHING:"\u6ca1\u6709\u5173\u4e8e\u97f3\u9891/\u89c6\u9891\u662f\u5426\u5c31\u7eea\u7684\u4fe1\u606f",HAVE_METADATA:"\u97f3\u9891/\u89c6\u9891\u7684\u5143\u6570\u636e\u5df2\u5c31\u7eea",HAVE_CURRENT_DATA:"\u5173\u4e8e\u5f53\u524d\u64ad\u653e\u4f4d\u7f6e\u7684\u6570\u636e\u662f\u53ef\u7528\u7684\uff0c\u4f46\u6ca1\u6709\u8db3\u591f\u7684\u6570\u636e\u6765\u64ad\u653e\u4e0b\u4e00\u5e27/\u6beb\u79d2",HAVE_FUTURE_DATA:"\u5f53\u524d\u53ca\u81f3\u5c11\u4e0b\u4e00\u5e27\u7684\u6570\u636e\u662f\u53ef\u7528\u7684",HAVE_ENOUGH_DATA:"\u53ef\u7528\u6570\u636e\u8db3\u4ee5\u5f00\u59cb\u64ad\u653e",NETWORK_EMPTY:"\u97f3\u9891/\u89c6\u9891\u5c1a\u672a\u521d\u59cb\u5316",NETWORK_IDLE:"\u97f3\u9891/\u89c6\u9891\u662f\u6d3b\u52a8\u7684\u4e14\u5df2\u9009\u53d6\u8d44\u6e90\uff0c\u4f46\u5e76\u672a\u4f7f\u7528\u7f51\u7edc",NETWORK_LOADING:"\u6d4f\u89c8\u5668\u6b63\u5728\u4e0b\u8f7d\u6570\u636e",NETWORK_NO_SOURCE:"\u672a\u627e\u5230\u97f3\u9891/\u89c6\u9891\u6765\u6e90",MEDIA_ERR_ABORTED:"\u53d6\u56de\u8fc7\u7a0b\u88ab\u7528\u6237\u4e2d\u6b62",MEDIA_ERR_NETWORK:"\u7f51\u7edc\u9519\u8bef",MEDIA_ERR_DECODE:"\u89e3\u7801\u9519\u8bef",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4e0d\u652f\u6301\u7684\u97f3\u9891/\u89c6\u9891\u683c\u5f0f",REPLAY:"\u91cd\u64ad",ERROR:"\u7f51\u7edc\u8fde\u63a5\u4f3c\u4e4e\u51fa\u73b0\u4e86\u95ee\u9898",PLAY_TIPS:"\u64ad\u653e",PAUSE_TIPS:"\u6682\u505c",PLAYNEXT_TIPS:"\u4e0b\u4e00\u96c6",DOWNLOAD_TIPS:"\u4e0b\u8f7d",ROTATE_TIPS:"\u65cb\u8f6c",RELOAD_TIPS:"\u91cd\u65b0\u8f7d\u5165",FULLSCREEN_TIPS:"\u8fdb\u5165\u5168\u5c4f",EXITFULLSCREEN_TIPS:"\u9000\u51fa\u5168\u5c4f",CSSFULLSCREEN_TIPS:"\u8fdb\u5165\u6837\u5f0f\u5168\u5c4f",EXITCSSFULLSCREEN_TIPS:"\u9000\u51fa\u6837\u5f0f\u5168\u5c4f",TEXTTRACK:"\u5b57\u5e55",PIP:"\u753b\u4e2d\u753b",SCREENSHOT:"\u622a\u56fe",LIVE:"\u6b63\u5728\u76f4\u64ad",OFF:"\u5173\u95ed",OPEN:"\u5f00\u542f",MINI_DRAG:"\u70b9\u51fb\u6309\u4f4f\u53ef\u62d6\u52a8\u89c6\u9891",MINISCREEN:"\u5c0f\u5c4f\u5e55",REFRESH_TIPS:"\u8bf7\u8bd5\u8bd5",REFRESH:"\u5237\u65b0",FORWARD:"\u5feb\u8fdb\u4e2d",LIVE_TIP:"\u76f4\u64ad"}},$$j=_export,getBuiltIn$4=getBuiltIn$d,apply$6=functionApply,call$8=functionCall,uncurryThis$i=functionUncurryThis,fails$h=fails$L,isArray=isArray$5,isCallable$5=isCallable$u,isObject$8=isObject$n,isSymbol$2=isSymbol$6,arraySlice$7=arraySlice$c,NATIVE_SYMBOL$4=symbolConstructorDetection,$stringify=getBuiltIn$4("JSON","stringify"),exec$2=uncurryThis$i(/./.exec),charAt$4=uncurryThis$i("".charAt),charCodeAt$1=uncurryThis$i("".charCodeAt),replace$4=uncurryThis$i("".replace),numberToString$1=uncurryThis$i(1..toString),tester=/[\uD800-\uDFFF]/g,low=/^[\uD800-\uDBFF]$/,hi=/^[\uDC00-\uDFFF]$/,WRONG_SYMBOLS_CONVERSION=!NATIVE_SYMBOL$4||fails$h((function(){var e=getBuiltIn$4("Symbol")();return"[null]"!=$stringify([e])||"{}"!=$stringify({a:e})||"{}"!=$stringify(Object(e))})),ILL_FORMED_UNICODE=fails$h((function(){return'"\\udf06\\ud834"'!==$stringify("\udf06\ud834")||'"\\udead"'!==$stringify("\udead")})),stringifyWithSymbolsFix=function(e,t){var n=arraySlice$7(arguments),r=t;if((isObject$8(t)||void 0!==e)&&!isSymbol$2(e))return isArray(t)||(t=function(e,t){if(isCallable$5(r)&&(t=call$8(r,this,e,t)),!isSymbol$2(t))return t}),n[1]=t,apply$6($stringify,null,n)},fixIllFormed=function(e,t,n){var r=charAt$4(n,t-1),i=charAt$4(n,t+1);return exec$2(low,e)&&!exec$2(hi,i)||exec$2(hi,e)&&!exec$2(low,r)?"\\u"+numberToString$1(charCodeAt$1(e,0),16):e};$stringify&&$$j({target:"JSON",stat:!0,arity:3,forced:WRONG_SYMBOLS_CONVERSION||ILL_FORMED_UNICODE},{stringify:function(e,t,n){var r=arraySlice$7(arguments),i=apply$6(WRONG_SYMBOLS_CONVERSION?stringifyWithSymbolsFix:$stringify,null,r);return ILL_FORMED_UNICODE&&"string"==typeof i?replace$4(i,tester,fixIllFormed):i}});var fails$g=fails$L,wellKnownSymbol$7=wellKnownSymbol$u,IS_PURE=isPure,ITERATOR$3=wellKnownSymbol$7("iterator"),urlConstructorDetection=!fails$g((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),IS_PURE&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ITERATOR$3]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),anObject$3=anObject$l,iteratorClose=iteratorClose$2,callWithSafeIterationClosing$1=function(e,t,n,r){try{return r?t(anObject$3(n)[0],n[1]):t(n)}catch(error){iteratorClose(e,"throw",error)}},bind$6=functionBindContext,call$7=functionCall,toObject$7=toObject$h,callWithSafeIterationClosing=callWithSafeIterationClosing$1,isArrayIteratorMethod$1=isArrayIteratorMethod$3,isConstructor=isConstructor$4,lengthOfArrayLike$9=lengthOfArrayLike$i,createProperty=createProperty$5,getIterator$2=getIterator$4,getIteratorMethod$2=getIteratorMethod$5,$Array$1=Array,arrayFrom$1=function(e){var t=toObject$7(e),n=isConstructor(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=bind$6(i,r>2?arguments[2]:void 0));var a,s,c,l,u,d,h=getIteratorMethod$2(t),f=0;if(!h||this===$Array$1&&isArrayIteratorMethod$1(h))for(a=lengthOfArrayLike$9(t),s=n?new this(a):$Array$1(a);a>f;f++)d=o?i(t[f],f):t[f],createProperty(s,f,d);else for(u=(l=getIterator$2(t,h)).next,s=n?new this:[];!(c=call$7(u,l)).done;f++)d=o?callWithSafeIterationClosing(l,i,[c.value,f],!0):c.value,createProperty(s,f,d);return s.length=f,s},uncurryThis$h=functionUncurryThis,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\u007E]/,regexSeparators=/[.\u3002\uFF0E\uFF61]/g,OVERFLOW_ERROR="Overflow: input needs wider integers to process",baseMinusTMin=base-tMin,$RangeError$3=RangeError,exec$1=uncurryThis$h(regexSeparators.exec),floor$4=Math.floor,fromCharCode=String.fromCharCode,charCodeAt=uncurryThis$h("".charCodeAt),join$4=uncurryThis$h([].join),push$5=uncurryThis$h([].push),replace$3=uncurryThis$h("".replace),split$2=uncurryThis$h("".split),toLowerCase$1=uncurryThis$h("".toLowerCase),ucs2decode=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=charCodeAt(e,n++);if(i>=55296&&i<=56319&&n<r){var o=charCodeAt(e,n++);56320==(64512&o)?push$5(t,((1023&i)<<10)+(1023&o)+65536):(push$5(t,i),n--)}else push$5(t,i)}return t},digitToBasic=function(e){return e+22+75*(e<26)},adapt=function(e,t,n){var r=0;for(e=n?floor$4(e/damp):e>>1,e+=floor$4(e/t);e>baseMinusTMin*tMax>>1;)e=floor$4(e/baseMinusTMin),r+=base;return floor$4(r+(baseMinusTMin+1)*e/(e+skew))},encode$1=function(e){var t,n,r=[],i=(e=ucs2decode(e)).length,o=initialN,a=0,s=initialBias;for(t=0;t<e.length;t++)(n=e[t])<128&&push$5(r,fromCharCode(n));var c=r.length,l=c;for(c&&push$5(r,delimiter);l<i;){var u=maxInt;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<u&&(u=n);var d=l+1;if(u-o>floor$4((maxInt-a)/d))throw $RangeError$3(OVERFLOW_ERROR);for(a+=(u-o)*d,o=u,t=0;t<e.length;t++){if((n=e[t])<o&&++a>maxInt)throw $RangeError$3(OVERFLOW_ERROR);if(n==o){for(var h=a,f=base;;){var p=f<=s?tMin:f>=s+tMax?tMax:f-s;if(h<p)break;var g=h-p,y=base-p;push$5(r,fromCharCode(digitToBasic(p+g%y))),h=floor$4(g/y),f+=base}push$5(r,fromCharCode(digitToBasic(h))),s=adapt(a,d,l==c),a=0,l++}}a++,o++}return join$4(r,"")},stringPunycodeToAscii=function(e){var t,n,r=[],i=split$2(replace$3(toLowerCase$1(e),regexSeparators,"."),".");for(t=0;t<i.length;t++)n=i[t],push$5(r,exec$1(regexNonASCII,n)?"xn--"+encode$1(n):n);return join$4(r,".")},defineBuiltIn$7=defineBuiltIn$i,defineBuiltIns$2=function(e,t,n){for(var r in t)defineBuiltIn$7(e,r,t[r],n);return e},$$i=_export,global$i=global$H,call$6=functionCall,uncurryThis$g=functionUncurryThis,DESCRIPTORS$7=descriptors,USE_NATIVE_URL$1=urlConstructorDetection,defineBuiltIn$6=defineBuiltIn$i,defineBuiltIns$1=defineBuiltIns$2,setToStringTag$3=setToStringTag$7,createIteratorConstructor=iteratorCreateConstructor,InternalStateModule$5=internalState,anInstance$3=anInstance$5,isCallable$4=isCallable$u,hasOwn$9=hasOwnProperty_1,bind$5=functionBindContext,classof$5=classof$e,anObject$2=anObject$l,isObject$7=isObject$n,$toString$2=toString$h,create$2=objectCreate,createPropertyDescriptor$2=createPropertyDescriptor$7,getIterator$1=getIterator$4,getIteratorMethod$1=getIteratorMethod$5,validateArgumentsLength$2=validateArgumentsLength$4,wellKnownSymbol$6=wellKnownSymbol$u,arraySort=arraySort$1,ITERATOR$2=wellKnownSymbol$6("iterator"),URL_SEARCH_PARAMS="URLSearchParams",URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+"Iterator",setInternalState$4=InternalStateModule$5.set,getInternalParamsState=InternalStateModule$5.getterFor(URL_SEARCH_PARAMS),getInternalIteratorState=InternalStateModule$5.getterFor(URL_SEARCH_PARAMS_ITERATOR),getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,safeGetBuiltIn=function(e){if(!DESCRIPTORS$7)return global$i[e];var t=getOwnPropertyDescriptor(global$i,e);return t&&t.value},nativeFetch=safeGetBuiltIn("fetch"),NativeRequest=safeGetBuiltIn("Request"),Headers$1=safeGetBuiltIn("Headers"),RequestPrototype=NativeRequest&&NativeRequest.prototype,HeadersPrototype=Headers$1&&Headers$1.prototype,RegExp$1=global$i.RegExp,TypeError$4=global$i.TypeError,decodeURIComponent$1=global$i.decodeURIComponent,encodeURIComponent$1=global$i.encodeURIComponent,charAt$3=uncurryThis$g("".charAt),join$3=uncurryThis$g([].join),push$4=uncurryThis$g([].push),replace$2=uncurryThis$g("".replace),shift$1=uncurryThis$g([].shift),splice=uncurryThis$g([].splice),split$1=uncurryThis$g("".split),stringSlice$2=uncurryThis$g("".slice),plus=/\+/g,sequences=Array(4),percentSequence=function(e){return sequences[e-1]||(sequences[e-1]=RegExp$1("((?:%[\\da-f]{2}){"+e+"})","gi"))},percentDecode=function(e){try{return decodeURIComponent$1(e)}catch(error){return e}},deserialize=function(e){var t=replace$2(e,plus," "),n=4;try{return decodeURIComponent$1(t)}catch(error){for(;n;)t=replace$2(t,percentSequence(n--),percentDecode);return t}},find=/[!'()~]|%20/g,replacements={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(e){return replacements[e]},_serialize=function(e){return replace$2(encodeURIComponent$1(e),find,replacer)},URLSearchParamsIterator=createIteratorConstructor((function(e,t){setInternalState$4(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator$1(getInternalParamsState(e).entries),kind:t})}),"Iterator",(function(){var e=getInternalIteratorState(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),URLSearchParamsState=function(e){this.entries=[],this.url=null,void 0!==e&&(isObject$7(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===charAt$3(e,0)?stringSlice$2(e,1):e:$toString$2(e)))};URLSearchParamsState.prototype={type:URL_SEARCH_PARAMS,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,c=getIteratorMethod$1(e);if(c)for(n=(t=getIterator$1(e,c)).next;!(r=call$6(n,t)).done;){if(o=(i=getIterator$1(anObject$2(r.value))).next,(a=call$6(o,i)).done||(s=call$6(o,i)).done||!call$6(o,i).done)throw TypeError$4("Expected sequence with length 2");push$4(this.entries,{key:$toString$2(a.value),value:$toString$2(s.value)})}else for(var l in e)hasOwn$9(e,l)&&push$4(this.entries,{key:l,value:$toString$2(e[l])})},parseQuery:function(e){if(e)for(var t,n,r=split$1(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=split$1(t,"="),push$4(this.entries,{key:deserialize(shift$1(n)),value:deserialize(join$3(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],push$4(n,_serialize(e.key)+"="+_serialize(e.value));return join$3(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var URLSearchParamsConstructor=function(){anInstance$3(this,URLSearchParamsPrototype);var e=arguments.length>0?arguments[0]:void 0;setInternalState$4(this,new URLSearchParamsState(e))},URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;if(defineBuiltIns$1(URLSearchParamsPrototype,{append:function(e,t){validateArgumentsLength$2(arguments.length,2);var n=getInternalParamsState(this);push$4(n.entries,{key:$toString$2(e),value:$toString$2(t)}),n.updateURL()},delete:function(e){validateArgumentsLength$2(arguments.length,1);for(var t=getInternalParamsState(this),n=t.entries,r=$toString$2(e),i=0;i<n.length;)n[i].key===r?splice(n,i,1):i++;t.updateURL()},get:function(e){validateArgumentsLength$2(arguments.length,1);for(var t=getInternalParamsState(this).entries,n=$toString$2(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){validateArgumentsLength$2(arguments.length,1);for(var t=getInternalParamsState(this).entries,n=$toString$2(e),r=[],i=0;i<t.length;i++)t[i].key===n&&push$4(r,t[i].value);return r},has:function(e){validateArgumentsLength$2(arguments.length,1);for(var t=getInternalParamsState(this).entries,n=$toString$2(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){validateArgumentsLength$2(arguments.length,1);for(var n,r=getInternalParamsState(this),i=r.entries,o=!1,a=$toString$2(e),s=$toString$2(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?splice(i,c--,1):(o=!0,n.value=s));o||push$4(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=getInternalParamsState(this);arraySort(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=getInternalParamsState(this).entries,r=bind$5(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new URLSearchParamsIterator(this,"keys")},values:function(){return new URLSearchParamsIterator(this,"values")},entries:function(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0}),defineBuiltIn$6(URLSearchParamsPrototype,ITERATOR$2,URLSearchParamsPrototype.entries,{name:"entries"}),defineBuiltIn$6(URLSearchParamsPrototype,"toString",(function(){return getInternalParamsState(this).serialize()}),{enumerable:!0}),setToStringTag$3(URLSearchParamsConstructor,URL_SEARCH_PARAMS),$$i({global:!0,constructor:!0,forced:!USE_NATIVE_URL$1},{URLSearchParams:URLSearchParamsConstructor}),!USE_NATIVE_URL$1&&isCallable$4(Headers$1)){var headersHas=uncurryThis$g(HeadersPrototype.has),headersSet=uncurryThis$g(HeadersPrototype.set),wrapRequestOptions=function(e){if(isObject$7(e)){var t,n=e.body;if(classof$5(n)===URL_SEARCH_PARAMS)return t=e.headers?new Headers$1(e.headers):new Headers$1,headersHas(t,"content-type")||headersSet(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),create$2(e,{body:createPropertyDescriptor$2(0,$toString$2(n)),headers:createPropertyDescriptor$2(0,t)})}return e};if(isCallable$4(nativeFetch)&&$$i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return nativeFetch(e,arguments.length>1?wrapRequestOptions(arguments[1]):{})}}),isCallable$4(NativeRequest)){var RequestConstructor=function(e){return anInstance$3(this,RequestPrototype),new NativeRequest(e,arguments.length>1?wrapRequestOptions(arguments[1]):{})};RequestPrototype.constructor=RequestConstructor,RequestConstructor.prototype=RequestPrototype,$$i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:RequestConstructor})}}var web_urlSearchParams_constructor={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState},$$h=_export,DESCRIPTORS$6=descriptors,USE_NATIVE_URL=urlConstructorDetection,global$h=global$H,bind$4=functionBindContext,uncurryThis$f=functionUncurryThis,defineBuiltIn$5=defineBuiltIn$i,defineBuiltInAccessor=defineBuiltInAccessor$2,anInstance$2=anInstance$5,hasOwn$8=hasOwnProperty_1,assign$3=objectAssign,arrayFrom=arrayFrom$1,arraySlice$6=arraySliceSimple,codeAt=stringMultibyte.codeAt,toASCII=stringPunycodeToAscii,$toString$1=toString$h,setToStringTag$2=setToStringTag$7,validateArgumentsLength$1=validateArgumentsLength$4,URLSearchParamsModule=web_urlSearchParams_constructor,InternalStateModule$4=internalState,setInternalState$3=InternalStateModule$4.set,getInternalURLState=InternalStateModule$4.getterFor("URL"),URLSearchParams$1=URLSearchParamsModule.URLSearchParams,getInternalSearchParamsState=URLSearchParamsModule.getState,NativeURL=global$h.URL,TypeError$3=global$h.TypeError,parseInt$1=global$h.parseInt,floor$3=Math.floor,pow$1=Math.pow,charAt$2=uncurryThis$f("".charAt),exec=uncurryThis$f(/./.exec),join$2=uncurryThis$f([].join),numberToString=uncurryThis$f(1..toString),pop=uncurryThis$f([].pop),push$3=uncurryThis$f([].push),replace$1=uncurryThis$f("".replace),shift=uncurryThis$f([].shift),split=uncurryThis$f("".split),stringSlice$1=uncurryThis$f("".slice),toLowerCase=uncurryThis$f("".toLowerCase),unshift=uncurryThis$f([].unshift),INVALID_AUTHORITY="Invalid authority",INVALID_SCHEME="Invalid scheme",INVALID_HOST="Invalid host",INVALID_PORT="Invalid port",ALPHA=/[a-z]/i,ALPHANUMERIC=/[\d+-.a-z]/i,DIGIT=/\d/,HEX_START=/^0x/i,OCT=/^[0-7]+$/,DEC=/^\d+$/,HEX=/^[\da-f]+$/i,FORBIDDEN_HOST_CODE_POINT=/[\0\t\n\r #%/:<>?@[\\\]^|]/,FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\0\t\n\r #/:<>?@[\\\]^|]/,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,TAB_AND_NEW_LINE=/[\t\n\r]/g,EOF,parseIPv4=function(e){var t,n,r,i,o,a,s,c=split(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==charAt$2(i,0)&&(o=exec(HEX_START,i)?16:8,i=stringSlice$1(i,8==o?1:2)),""===i)a=0;else{if(!exec(10==o?DEC:8==o?OCT:HEX,i))return e;a=parseInt$1(i,o)}push$3(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=pow$1(256,5-t))return null}else if(a>255)return null;for(s=pop(n),r=0;r<n.length;r++)s+=n[r]*pow$1(256,3-r);return s},parseIPv6=function(e){var t,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,h=function(){return charAt$2(e,d)};if(":"==h()){if(":"!=charAt$2(e,1))return;d+=2,u=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&exec(HEX,h());)t=16*t+parseInt$1(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;d++}if(!exec(DIGIT,h()))return;for(;exec(DIGIT,h());){if(o=parseInt$1(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(a=l-u,l=7;0!=l&&a>0;)s=c[l],c[l--]=c[u+a-1],c[u+--a]=s;else if(8!=l)return;return c},findLongestZeroSequence=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t},serializeHost=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)unshift(t,e%256),e=floor$3(e/256);return join$2(t,".")}if("object"==_typeof$4(e)){for(t="",r=findLongestZeroSequence(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=numberToString(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},C0ControlPercentEncodeSet={},fragmentPercentEncodeSet=assign$3({},C0ControlPercentEncodeSet,{" ":1,'"':1,"<":1,">":1,"`":1}),pathPercentEncodeSet=assign$3({},fragmentPercentEncodeSet,{"#":1,"?":1,"{":1,"}":1}),userinfoPercentEncodeSet=assign$3({},pathPercentEncodeSet,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(e,t){var n=codeAt(e,0);return n>32&&n<127&&!hasOwn$8(t,e)?e:encodeURIComponent(e)},specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isWindowsDriveLetter=function(e,t){var n;return 2==e.length&&exec(ALPHA,charAt$2(e,0))&&(":"==(n=charAt$2(e,1))||!t&&"|"==n)},startsWithWindowsDriveLetter=function(e){var t;return e.length>1&&isWindowsDriveLetter(stringSlice$1(e,0,2))&&(2==e.length||"/"===(t=charAt$2(e,2))||"\\"===t||"?"===t||"#"===t)},isSingleDot=function(e){return"."===e||"%2e"===toLowerCase(e)},isDoubleDot=function(e){return".."===(e=toLowerCase(e))||"%2e."===e||".%2e"===e||"%2e%2e"===e},SCHEME_START={},SCHEME={},NO_SCHEME={},SPECIAL_RELATIVE_OR_AUTHORITY={},PATH_OR_AUTHORITY={},RELATIVE={},RELATIVE_SLASH={},SPECIAL_AUTHORITY_SLASHES={},SPECIAL_AUTHORITY_IGNORE_SLASHES={},AUTHORITY={},HOST={},HOSTNAME={},PORT={},FILE={},FILE_SLASH={},FILE_HOST={},PATH_START={},PATH={},CANNOT_BE_A_BASE_URL_PATH={},QUERY={},FRAGMENT={},URLState=function e(t,n,r){var i,o,a,s=$toString$1(t);if(n){if(o=this.parse(s))throw TypeError$3(o);this.searchParams=null}else{if(void 0!==r&&(i=new e(r,!0)),o=this.parse(s,null,i))throw TypeError$3(o);(a=getInternalSearchParamsState(new URLSearchParams$1)).bindURL(this),this.searchParams=a}};URLState.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s=this,c=t||SCHEME_START,l=0,u="",d=!1,h=!1,f=!1;for(e=$toString$1(e),t||(s.scheme="",s.username="",s.password="",s.host=null,s.port=null,s.path=[],s.query=null,s.fragment=null,s.cannotBeABaseURL=!1,e=replace$1(e,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE,"")),e=replace$1(e,TAB_AND_NEW_LINE,""),r=arrayFrom(e);l<=r.length;){switch(i=r[l],c){case SCHEME_START:if(!i||!exec(ALPHA,i)){if(t)return INVALID_SCHEME;c=NO_SCHEME;continue}u+=toLowerCase(i),c=SCHEME;break;case SCHEME:if(i&&(exec(ALPHANUMERIC,i)||"+"==i||"-"==i||"."==i))u+=toLowerCase(i);else{if(":"!=i){if(t)return INVALID_SCHEME;u="",c=NO_SCHEME,l=0;continue}if(t&&(s.isSpecial()!=hasOwn$8(specialSchemes,u)||"file"==u&&(s.includesCredentials()||null!==s.port)||"file"==s.scheme&&!s.host))return;if(s.scheme=u,t)return void(s.isSpecial()&&specialSchemes[s.scheme]==s.port&&(s.port=null));u="","file"==s.scheme?c=FILE:s.isSpecial()&&n&&n.scheme==s.scheme?c=SPECIAL_RELATIVE_OR_AUTHORITY:s.isSpecial()?c=SPECIAL_AUTHORITY_SLASHES:"/"==r[l+1]?(c=PATH_OR_AUTHORITY,l++):(s.cannotBeABaseURL=!0,push$3(s.path,""),c=CANNOT_BE_A_BASE_URL_PATH)}break;case NO_SCHEME:if(!n||n.cannotBeABaseURL&&"#"!=i)return INVALID_SCHEME;if(n.cannotBeABaseURL&&"#"==i){s.scheme=n.scheme,s.path=arraySlice$6(n.path),s.query=n.query,s.fragment="",s.cannotBeABaseURL=!0,c=FRAGMENT;break}c="file"==n.scheme?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if("/"!=i||"/"!=r[l+1]){c=RELATIVE;continue}c=SPECIAL_AUTHORITY_IGNORE_SLASHES,l++;break;case PATH_OR_AUTHORITY:if("/"==i){c=AUTHORITY;break}c=PATH;continue;case RELATIVE:if(s.scheme=n.scheme,i==EOF)s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,s.path=arraySlice$6(n.path),s.query=n.query;else if("/"==i||"\\"==i&&s.isSpecial())c=RELATIVE_SLASH;else if("?"==i)s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,s.path=arraySlice$6(n.path),s.query="",c=QUERY;else{if("#"!=i){s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,s.path=arraySlice$6(n.path),s.path.length--,c=PATH;continue}s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,s.path=arraySlice$6(n.path),s.query=n.query,s.fragment="",c=FRAGMENT}break;case RELATIVE_SLASH:if(!s.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,c=PATH;continue}c=AUTHORITY}else c=SPECIAL_AUTHORITY_IGNORE_SLASHES;break;case SPECIAL_AUTHORITY_SLASHES:if(c=SPECIAL_AUTHORITY_IGNORE_SLASHES,"/"!=i||"/"!=charAt$2(u,l+1))continue;l++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if("/"!=i&&"\\"!=i){c=AUTHORITY;continue}break;case AUTHORITY:if("@"==i){d&&(u="%40"+u),d=!0,o=arrayFrom(u);for(var p=0;p<o.length;p++){var g=o[p];if(":"!=g||f){var y=percentEncode(g,userinfoPercentEncodeSet);f?s.password+=y:s.username+=y}else f=!0}u=""}else if(i==EOF||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()){if(d&&""==u)return INVALID_AUTHORITY;l-=arrayFrom(u).length+1,u="",c=HOST}else u+=i;break;case HOST:case HOSTNAME:if(t&&"file"==s.scheme){c=FILE_HOST;continue}if(":"!=i||h){if(i==EOF||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()){if(s.isSpecial()&&""==u)return INVALID_HOST;if(t&&""==u&&(s.includesCredentials()||null!==s.port))return;if(a=s.parseHost(u))return a;if(u="",c=PATH_START,t)return;continue}"["==i?h=!0:"]"==i&&(h=!1),u+=i}else{if(""==u)return INVALID_HOST;if(a=s.parseHost(u))return a;if(u="",c=PORT,t==HOSTNAME)return}break;case PORT:if(!exec(DIGIT,i)){if(i==EOF||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()||t){if(""!=u){var v=parseInt$1(u,10);if(v>65535)return INVALID_PORT;s.port=s.isSpecial()&&v===specialSchemes[s.scheme]?null:v,u=""}if(t)return;c=PATH_START;continue}return INVALID_PORT}u+=i;break;case FILE:if(s.scheme="file","/"==i||"\\"==i)c=FILE_SLASH;else{if(!n||"file"!=n.scheme){c=PATH;continue}if(i==EOF)s.host=n.host,s.path=arraySlice$6(n.path),s.query=n.query;else if("?"==i)s.host=n.host,s.path=arraySlice$6(n.path),s.query="",c=QUERY;else{if("#"!=i){startsWithWindowsDriveLetter(join$2(arraySlice$6(r,l),""))||(s.host=n.host,s.path=arraySlice$6(n.path),s.shortenPath()),c=PATH;continue}s.host=n.host,s.path=arraySlice$6(n.path),s.query=n.query,s.fragment="",c=FRAGMENT}}break;case FILE_SLASH:if("/"==i||"\\"==i){c=FILE_HOST;break}n&&"file"==n.scheme&&!startsWithWindowsDriveLetter(join$2(arraySlice$6(r,l),""))&&(isWindowsDriveLetter(n.path[0],!0)?push$3(s.path,n.path[0]):s.host=n.host),c=PATH;continue;case FILE_HOST:if(i==EOF||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&isWindowsDriveLetter(u))c=PATH;else if(""==u){if(s.host="",t)return;c=PATH_START}else{if(a=s.parseHost(u))return a;if("localhost"==s.host&&(s.host=""),t)return;u="",c=PATH_START}continue}u+=i;break;case PATH_START:if(s.isSpecial()){if(c=PATH,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=EOF&&(c=PATH,"/"!=i))continue}else s.fragment="",c=FRAGMENT;else s.query="",c=QUERY;break;case PATH:if(i==EOF||"/"==i||"\\"==i&&s.isSpecial()||!t&&("?"==i||"#"==i)){if(isDoubleDot(u)?(s.shortenPath(),"/"==i||"\\"==i&&s.isSpecial()||push$3(s.path,"")):isSingleDot(u)?"/"==i||"\\"==i&&s.isSpecial()||push$3(s.path,""):("file"==s.scheme&&!s.path.length&&isWindowsDriveLetter(u)&&(s.host&&(s.host=""),u=charAt$2(u,0)+":"),push$3(s.path,u)),u="","file"==s.scheme&&(i==EOF||"?"==i||"#"==i))for(;s.path.length>1&&""===s.path[0];)shift(s.path);"?"==i?(s.query="",c=QUERY):"#"==i&&(s.fragment="",c=FRAGMENT)}else u+=percentEncode(i,pathPercentEncodeSet);break;case CANNOT_BE_A_BASE_URL_PATH:"?"==i?(s.query="",c=QUERY):"#"==i?(s.fragment="",c=FRAGMENT):i!=EOF&&(s.path[0]+=percentEncode(i,C0ControlPercentEncodeSet));break;case QUERY:t||"#"!=i?i!=EOF&&("'"==i&&s.isSpecial()?s.query+="%27":s.query+="#"==i?"%23":percentEncode(i,C0ControlPercentEncodeSet)):(s.fragment="",c=FRAGMENT);break;case FRAGMENT:i!=EOF&&(s.fragment+=percentEncode(i,fragmentPercentEncodeSet))}l++}},parseHost:function(e){var t,n,r;if("["==charAt$2(e,0)){if("]"!=charAt$2(e,e.length-1))return INVALID_HOST;if(!(t=parseIPv6(stringSlice$1(e,1,-1))))return INVALID_HOST;this.host=t}else if(this.isSpecial()){if(e=toASCII(e),exec(FORBIDDEN_HOST_CODE_POINT,e))return INVALID_HOST;if(null===(t=parseIPv4(e)))return INVALID_HOST;this.host=t}else{if(exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT,e))return INVALID_HOST;for(t="",n=arrayFrom(e),r=0;r<n.length;r++)t+=percentEncode(n[r],C0ControlPercentEncodeSet);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return hasOwn$8(specialSchemes,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&isWindowsDriveLetter(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=serializeHost(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+join$2(a,"/"):"",null!==s&&(l+="?"+s),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw TypeError$3(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new URLConstructor(e.path[0]).origin}catch(error){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+serializeHost(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse($toString$1(e)+":",SCHEME_START)},getUsername:function(){return this.username},setUsername:function(e){var t=arrayFrom($toString$1(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=percentEncode(t[n],userinfoPercentEncodeSet)}},getPassword:function(){return this.password},setPassword:function(e){var t=arrayFrom($toString$1(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=percentEncode(t[n],userinfoPercentEncodeSet)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?serializeHost(e):serializeHost(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,HOST)},getHostname:function(){var e=this.host;return null===e?"":serializeHost(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,HOSTNAME)},getPort:function(){var e=this.port;return null===e?"":$toString$1(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=$toString$1(e))?this.port=null:this.parse(e,PORT))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+join$2(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,PATH_START))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=$toString$1(e))?this.query=null:("?"==charAt$2(e,0)&&(e=stringSlice$1(e,1)),this.query="",this.parse(e,QUERY)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=$toString$1(e))?("#"==charAt$2(e,0)&&(e=stringSlice$1(e,1)),this.fragment="",this.parse(e,FRAGMENT)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var URLConstructor=function(e){var t=anInstance$2(this,URLPrototype),n=validateArgumentsLength$1(arguments.length,1)>1?arguments[1]:void 0,r=setInternalState$3(t,new URLState(e,!1,n));DESCRIPTORS$6||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},URLPrototype=URLConstructor.prototype,accessorDescriptor=function(e,t){return{get:function(){return getInternalURLState(this)[e]()},set:t&&function(e){return getInternalURLState(this)[t](e)},configurable:!0,enumerable:!0}};if(DESCRIPTORS$6&&(defineBuiltInAccessor(URLPrototype,"href",accessorDescriptor("serialize","setHref")),defineBuiltInAccessor(URLPrototype,"origin",accessorDescriptor("getOrigin")),defineBuiltInAccessor(URLPrototype,"protocol",accessorDescriptor("getProtocol","setProtocol")),defineBuiltInAccessor(URLPrototype,"username",accessorDescriptor("getUsername","setUsername")),defineBuiltInAccessor(URLPrototype,"password",accessorDescriptor("getPassword","setPassword")),defineBuiltInAccessor(URLPrototype,"host",accessorDescriptor("getHost","setHost")),defineBuiltInAccessor(URLPrototype,"hostname",accessorDescriptor("getHostname","setHostname")),defineBuiltInAccessor(URLPrototype,"port",accessorDescriptor("getPort","setPort")),defineBuiltInAccessor(URLPrototype,"pathname",accessorDescriptor("getPathname","setPathname")),defineBuiltInAccessor(URLPrototype,"search",accessorDescriptor("getSearch","setSearch")),defineBuiltInAccessor(URLPrototype,"searchParams",accessorDescriptor("getSearchParams")),defineBuiltInAccessor(URLPrototype,"hash",accessorDescriptor("getHash","setHash"))),defineBuiltIn$5(URLPrototype,"toJSON",(function(){return getInternalURLState(this).serialize()}),{enumerable:!0}),defineBuiltIn$5(URLPrototype,"toString",(function(){return getInternalURLState(this).serialize()}),{enumerable:!0}),NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL,nativeRevokeObjectURL=NativeURL.revokeObjectURL;nativeCreateObjectURL&&defineBuiltIn$5(URLConstructor,"createObjectURL",bind$4(nativeCreateObjectURL,NativeURL)),nativeRevokeObjectURL&&defineBuiltIn$5(URLConstructor,"revokeObjectURL",bind$4(nativeRevokeObjectURL,NativeURL))}setToStringTag$2(URLConstructor,"URL"),$$h({global:!0,constructor:!0,forced:!USE_NATIVE_URL,sham:!DESCRIPTORS$6},{URL:URLConstructor});var INFO="info",STATS_EVENTS=STATS_EVENTS$1,Stats=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"_recordUserActions",(function(t){var n=e._getTime(),r=Object.assign({},t,{msg:t.msg||t.action});e._stats[INFO].push(_objectSpread2$4(_objectSpread2$4({type:"userAction"},n),{},{payload:r}))})),_defineProperty$5(_assertThisInitialized$4(e),"_onReset",(function(){e.reset()})),_defineProperty$5(_assertThisInitialized$4(e),"_recordInfo",(function(t){e.info(t)})),_defineProperty$5(_assertThisInitialized$4(e),"_downloadStats",(function(){var t=e.getStats(),n=new Blob([JSON.stringify(t)],{type:"application/json"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.style.display="none",i.href=r,i.download="player.txt",i.disabled=!1,i.click()})),e}return _createClass$5(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(USER_ACTION,this._recordUserActions),this.on(STATS_EVENTS.STATS_INFO,this._recordInfo),this.on(STATS_EVENTS.STATS_DOWNLOAD,this._downloadStats),this.on(STATS_EVENTS.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats[INFO].push(_objectSpread2$4(_objectSpread2$4({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var t=_objectSpread2$4({cat:"function",dur:Date.now()-e.startMs,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(t)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(_defineProperty$5(e={},INFO,[]),_defineProperty$5(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player.media,t=[],n=0;n<e.buffered.length;n++)t.push({start:e.buffered.start(n),end:e.buffered.end(n)});var r={currentTime:e.currentTime,readyState:e.readyState,buffered:t,paused:e.paused,ended:e.ended};return this._stats.media=r,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats[INFO].map((function(e){var t=e.payload.data,n="";try{t instanceof Error?n=t.msg:void 0!==t&&(n=JSON.stringify(t))}catch(error){console.log("err",error)}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(n," ")}))}},{key:"_getProfile",value:function(){var e={traceEvents:[]};return this._stats[INFO].forEach((function(t){t.payload.profile&&e.traceEvents.push(t.payload)})),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(BasePlugin),GapJump=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"onGapJump",(function(){var t=_assertThisInitialized$4(e),r=t.player,i=t.config;if(r.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(r.media.seeking){if(!e.seekingEventReceived)return}else e.seekingEventReceived=!1;if(!r.media.paused||0===r.media.currentTime||!e.hasPlayed){var o=r.media.buffered,a=i.smallGapLimit||.5,s=i.gapDetectionThreshold||.3,c=r.media.currentTime,l=e._getIndex(o,c,s);if(null!==l&&0!==l){console.log("GapJump  bufferRange ",o.start(l),o.end(l));var u=o.start(l)+.1;if(!(u>r.media.duration)){var d=u-c,h=d<=a;d<n.BROWSER_GAP_TOLERANCE||h&&(!1!==i.useGapJump&&(r.media.currentTime=e.isSafari?u+.1:u),e.player&&e.player.emit("detectGap"),console.log("gapJump gapIndex",l," isGapSamll:",h," currentTime:",r.media.currentTime," jumpSize:",c-r.media.currentTime),.08!==u&&r&&r.emit("log",{type:"oneevent",end_type:"gap",vid:r.config.vid,ext:{video_postion:Math.floor(1e3*u)}}))}}}}})),e}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;!1!==this.config.useGapJump&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(WAITING,this.onGapJump),this.on(PLAY,(function(){e.hasPlayed=!0})),this.on(SEEKING,(function(){e.seekingEventReceived=!0})))}},{key:"_getIndex",value:function(e,t,n){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var r=this._getBuffered(e),i=null,o=0;o<r.length;o++)if(r[o].start>t&&(0===o||r[o-1].end-t<=n)){i=o;break}return i}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),n}(Plugin);GapJump.BROWSER_GAP_TOLERANCE=.001;var WaitingTimeoutJump=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"onWaiting",(function(){var t=_assertThisInitialized$4(e).config;e.jumpCnt>t.jumpCntMax||e.timer||!1===t.useWaitingTimeoutJump||(e.timer=setTimeout(e.onJump,1e3*t.waitingTime))})),_defineProperty$5(_assertThisInitialized$4(e),"onJump",(function(){var t=_assertThisInitialized$4(e),n=t.player,r=t.config;if(clearTimeout(e.timer),e.timer=null,!(e.jumpCnt>r.jumpCntMax||!1===r.useWaitingTimeoutJump||n.media.paused&&0!==n.media.currentTime&&e.hasPlayed)){e.jumpSize=r.jumpSize*(e.jumpCnt+1),e.jumpCnt===r.jumpSize&&e.jumpSize<6&&(e.jumpSize=6);var i=n.currentTime+e.jumpSize;i>n.media.duration||(console.log("waitintTimeout, currentTime:",n.currentTime,", jumpTo:",i),e.jumpCnt++,n.currentTime=i)}})),e}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.useWaitingTimeoutJump,r=t.jumpSize;!1!==n&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=r,this.on(WAITING,this.onWaiting),this.on([PLAYING,CANPLAY],(function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize})),this.on(PLAY,(function(){e.hasPlayed=!0})))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),n}(Plugin),TestSpeed=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){var e;_classCallCheck$4(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$5(_assertThisInitialized$4(e=t.call.apply(t,[this].concat(i))),"getSpeed",(function(t){if(e.speedListCache.length<=0)return 0;var n=0;return e.speedListCache.map((function(e){n+=e})),Math.floor(n/e.speedListCache.length)})),_defineProperty$5(_assertThisInitialized$4(e),"_onRealSpeedChange",(function(t){t.speed&&e.appendList(t.speed)})),_defineProperty$5(_assertThisInitialized$4(e),"testSpeed",(function(){if(clearTimeout(e.timer),e.timer=null,e.player&&e.config.openSpeed){var t=e.config,n=t.url,r=t.loadSize,i=t.testCnt,o=t.testTimeStep,a=n+(n.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(e.cnt>=i)){e.cnt++;try{var s=(new Date).getTime(),c=null,l=new XMLHttpRequest;e.xhr=l,l.open("GET",a);var u={},d=Math.floor(10*Math.random());u.Range="bytes="+d+"-"+(r+d),u&&Object.keys(u).forEach((function(e){l.setRequestHeader(e,u[e])})),l.onreadystatechange=function(){if(4===l.readyState){e.xhr=null,c=(new Date).getTime();var t=l.getResponseHeader("Content-Length")/1024*8,n=Math.round(1e3*t/(c-s));e.appendList(n),e.timer=setTimeout(e.testSpeed,o)}},l.send()}catch(h){console.error(h)}}}})),_defineProperty$5(_assertThisInitialized$4(e),"appendList",(function(t){var n=e.config.saveSpeedMax;e.speedListCache.length>=n&&e.speedListCache.shift(),e.speedListCache.push(t),e.player&&(e.player.realTimeSpeed=t),e.updateSpeed()})),_defineProperty$5(_assertThisInitialized$4(e),"updateSpeed",(function(){var t=e.getSpeed(),n=_assertThisInitialized$4(e).player;!n||n.avgSpeed&&t===n.avgSpeed||(n.avgSpeed=t,n.emit(DOWNLOAD_SPEED_CHANGE,{speed:t,realTimeSpeed:n.realTimeSpeed}))})),e}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this;this.speedListCache=[];var t=this.config,n=t.openSpeed,r=t.testTimeStep;this.timer=null,this.cnt=0,this.xhr=null,n&&(this.on("real_time_speed",this._onRealSpeedChange),this.on([LOADED_DATA,REPLAY],(function(){util.isMSE(e.player.video)||(e.speedListCache=[],e.cnt=0,e.timer=setTimeout(e.testSpeed,r))})))}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer)return clearTimeout(this.timer),void(this.timer=null);if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){clearTimeout(this.timer),this.timer=null,this.xhr&&4!==this.xhr.readyState&&(this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:204800,testTimeStep:3e3,url:"",saveSpeedMax:5}}}]),n}(Plugin),FpsDetect=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.config;this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,n.disabled||t.media.getVideoPlaybackQuality&&(this.on(PLAY,(function(){e._startTick()})),this.on(PAUSE,(function(){e._stopTick()})),this.on(ENDED,(function(){e._stopTick()})),this.on(EMPTIED,(function(){e._stopTick()})))}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout((function(){e._checkDecodeFPS(),e._startTick()}),this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e){var t=this.player.media,n=document.hidden,r=t.paused;if("boolean"==typeof n&&!n&&!r){for(var i=t.currentTime,o=t.buffered,a=!1,s=0;s<o.length;s++){var c=o.start(s),l=o.end(s);if(c<=i&&i<=l-1){a=!0;break}}4===t.readyState&&a&&(this._currentStuckCount>this.config.stuckCount?(this.emit(FPS_STUCK),this._currentStuckCount=0):(this.config.reportFrame,this._currentStuckCount++))}}},{key:"_checkDecodeFPS",value:function(){if(this.player.media){var e=this.player.media.getVideoPlaybackQuality().totalVideoFrames,t=performance.now();if(e&&this._lastCheckPoint){var n=e-this._lastDecodedFrames;this._checkStuck(n)}this._lastDecodedFrames=e,this._lastCheckPoint=t}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),n}(Plugin);I18N.use(ZH);var DefaultPreset=_createClass$5((function e(t,n){var r,i,o;_classCallCheck$4(this,e);var a=n&&"mobile"===n.isMobileSimulateMode,s=n.isLive,c=[].concat(s?[]:[Progress,MiniProgress,ProgressPreview,Time],[Play,Fullscreen,Rotate,PlayNextIcon,DefinitionIcon,PlaybackRate,Download,ScreenShot,Volume,PIP]),l=[Replay,Poster,Start,Loading,Enter,ErrorPlugin$1,Prompt,Thumbnail,MiniScreen];this.plugins=[Stats,XGLogger].concat(_toConsumableArray(c),l,[GapJump,WaitingTimeoutJump]);var u=a?"mobile":sniffer$1.device;switch(u){case"pc":(r=this.plugins).push.apply(r,[Keyboard,PCPlugin,CssFullScreen,TestSpeed,FpsDetect]);break;case"mobile":(i=this.plugins).push.apply(i,[MobilePlugin]);break;default:(o=this.plugins).push.apply(o,[Keyboard,PCPlugin,CssFullScreen])}(sniffer$1.os.isIpad||"pc"===u)&&this.plugins.push(DynamicBg),sniffer$1.os.isIpad&&this.plugins.push(PCPlugin),this.ignores=[],this.i18n=[]})),PresetPlayer=function(e){_inherits$4(n,e);var t=_createSuper$4(n);function n(){return _classCallCheck$4(this,n),t.apply(this,arguments)}return _createClass$5(n)}(Player);_defineProperty$5(PresetPlayer,"defaultPreset",DefaultPreset),_defineProperty$5(PresetPlayer,"Util",util),_defineProperty$5(PresetPlayer,"Sniffer",sniffer$1),_defineProperty$5(PresetPlayer,"Errors",Errors),_defineProperty$5(PresetPlayer,"Events",Events),_defineProperty$5(PresetPlayer,"Plugin",Plugin),_defineProperty$5(PresetPlayer,"BasePlugin",BasePlugin),_defineProperty$5(PresetPlayer,"I18N",I18N),_defineProperty$5(PresetPlayer,"STATE_CLASS",STATE_CLASS);var zhHk={LANG:"zh-hk",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u8996\u983b\u4e0b\u8f09\u932f\u8aa4"},mse:{code:2,msg:"\u5289\u8ffd\u52a0\u932f\u8aa4"},parse:{code:3,msg:"\u89e3\u6790\u932f\u8aa4"},format:{code:4,msg:"\u683c\u5f0f\u932f\u8aa4"},decoder:{code:5,msg:"\u89e3\u78bc\u932f\u8aa4"},runtime:{code:6,msg:"\u8a9e\u6cd5\u932f\u8aa4"},timeout:{code:7,msg:"\u64ad\u653e\u8d85\u6642"},other:{code:8,msg:"\u5176\u4ed6\u932f\u8aa4"}},HAVE_NOTHING:"\u6c92\u6709\u95dc\u65bc\u97f3\u983b/\u8996\u983b\u662f\u5426\u5c31\u7dd2\u7684\u4fe1\u606f",HAVE_METADATA:"\u97f3\u983b/\u8996\u983b\u7684\u5143\u6578\u64da\u5df2\u5c31\u7dd2",HAVE_CURRENT_DATA:"\u95dc\u65bc\u7576\u524d\u64ad\u653e\u4f4d\u7f6e\u7684\u6578\u64da\u662f\u53ef\u7528\u7684\uff0c\u4f46\u6c92\u6709\u8db3\u5920\u7684\u6578\u64da\u4f86\u64ad\u653e\u4e0b\u58f9\u5e40/\u6beb\u79d2",HAVE_FUTURE_DATA:"\u7576\u524d\u53ca\u81f3\u5c11\u4e0b\u58f9\u5e40\u7684\u6578\u64da\u662f\u53ef\u7528\u7684",HAVE_ENOUGH_DATA:"\u53ef\u7528\u6578\u64da\u8db3\u4ee5\u958b\u59cb\u64ad\u653e",NETWORK_EMPTY:"\u97f3\u983b/\u8996\u983b\u5c1a\u672a\u521d\u59cb\u5316",NETWORK_IDLE:"\u97f3\u983b/\u8996\u983b\u662f\u6d3b\u52d5\u7684\u4e14\u5df2\u9078\u53d6\u8cc7\u6e90\uff0c\u4f46\u4e26\u672a\u4f7f\u7528\u7db2\u7d61",NETWORK_LOADING:"\u700f\u89bd\u5668\u6b63\u5728\u4e0b\u8f09\u6578\u64da",NETWORK_NO_SOURCE:"\u672a\u627e\u5230\u97f3\u983b/\u8996\u983b\u4f86\u6e90",MEDIA_ERR_ABORTED:"\u53d6\u56de\u904e\u7a0b\u88ab\u7528\u6236\u4e2d\u6b62",MEDIA_ERR_NETWORK:"\u4e0b\u8f09\u932f\u8aa4",MEDIA_ERR_DECODE:"\u89e3\u78bc\u932f\u8aa4",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4e0d\u652f\u6301\u7684\u97f3\u983b/\u8996\u983b\u683c\u5f0f",REPLAY:"\u91cd\u64ad",ERROR:"\u7db2\u7d61\u9023\u63a5\u4f3c\u4e4e\u51fa\u73fe\u4e86\u554f\u984c",PLAY_TIPS:"\u64ad\u653e",PAUSE_TIPS:"\u66ab\u505c",PLAYNEXT_TIPS:"\u4e0b\u58f9\u96c6",DOWNLOAD_TIPS:"\u4e0b\u8f09",ROTATE_TIPS:"\u65cb\u8f49",RELOAD_TIPS:"\u91cd\u65b0\u8f09\u5165",FULLSCREEN_TIPS:"\u9032\u5165\u5168\u5c4f",EXITFULLSCREEN_TIPS:"\u9000\u51fa\u5168\u5c4f",CSSFULLSCREEN_TIPS:"\u9032\u5165\u6a23\u5f0f\u5168\u5c4f",EXITCSSFULLSCREEN_TIPS:"\u9000\u51fa\u6a23\u5f0f\u5168\u5c4f",TEXTTRACK:"\u5b57\u5e55",PIP:"\u756b\u4e2d\u756b",SCREENSHOT:"\u622a\u5716",LIVE:"\u6b63\u5728\u76f4\u64ad",OFF:"\u95dc\u9589",OPEN:"\u958b\u555f",MINI_DRAG:"\u9ede\u64ca\u6309\u4f4f\u53ef\u62d6\u52d5\u8996\u983b",MINISCREEN:"\u5c0f\u5c4f\u5e55",REFRESH_TIPS:"\u8acb\u8a66\u8a66",REFRESH:"\u5237\u65b0",FORWARD:"\u5feb\u8fdb\u4e2d",LIVE_TIP:"\u76f4\u64ad"}},jp$1={LANG:"jp",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u30d3\u30c7\u30aa\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30a8\u30e9\u30fc"},mse:{code:2,msg:"\u30b9\u30c8\u30ea\u30fc\u30e0\u8ffd\u52a0\u30a8\u30e9\u30fc"},parse:{code:3,msg:"\u89e3\u6790\u30a8\u30e9\u30fc"},format:{code:4,msg:"\u9593\u9055\u3063\u305f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8"},decoder:{code:5,msg:"\u30c7\u30b3\u30fc\u30c9\u30a8\u30e9\u30fc"},runtime:{code:6,msg:"\u6587\u6cd5\u30a8\u30e9\u30fc"},timeout:{code:7,msg:"\u518d\u751f\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8"},other:{code:8,msg:"\u305d\u306e\u4ed6\u306e\u30a8\u30e9\u30fc"}},HAVE_NOTHING:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u304c\u6e96\u5099\u3067\u304d\u3066\u3044\u308b\u304b\u60c5\u5831\u304c\u3042\u308a\u307e\u305b\u3093",HAVE_METADATA:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u306f\u6e96\u5099\u3067\u304d\u3066\u3044\u307e\u3059",HAVE_CURRENT_DATA:"\u73fe\u5728\u306e\u518d\u751f\u4f4d\u7f6e\u306b\u95a2\u3059\u308b\u30c7\u30fc\u30bf\u306f\u5229\u7528\u53ef\u80fd\u3067\u3059\u304c\u3001\u6b21\u306e\u30d5\u30ec\u30fc\u30e0/\u30df\u30ea\u79d2\u3092\u518d\u751f\u3059\u308b\u306e\u306b\u5341\u5206\u306a\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093",HAVE_FUTURE_DATA:"\u73fe\u5728\u3001\u5c11\u306a\u304f\u3068\u3082\u6b21\u306e\u30d5\u30ec\u30fc\u30e0\u306e\u30c7\u30fc\u30bf\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059",HAVE_ENOUGH_DATA:"\u5229\u7528\u53ef\u80fd\u306a\u30c7\u30fc\u30bf\u306f\u518d\u751f\u3092\u958b\u59cb\u3059\u308b\u306e\u306b\u5341\u5206\u3067\u3059",NETWORK_EMPTY:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u304c\u521d\u671f\u5316\u3055\u308c\u3066\u3044\u307e\u305b\u3093",NETWORK_IDLE:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u306f\u30a2\u30af\u30c6\u30a3\u30d6\u3067\u30ea\u30bd\u30fc\u30b9\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u305b\u3093",NETWORK_LOADING:"\u30d6\u30e9\u30a6\u30b6\u30fc\u306f\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3044\u307e\u3059",NETWORK_NO_SOURCE:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa \u306e\u30bd\u30fc\u30b9\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093",MEDIA_ERR_ABORTED:"\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u30d5\u30a7\u30c3\u30c1\u30d7\u30ed\u30bb\u30b9\u304c\u4e2d\u6b62\u3055\u308c\u307e\u3057\u305f",MEDIA_ERR_NETWORK:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",MEDIA_ERR_DECODE:"\u30c7\u30b3\u30fc\u30c9\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa \u306e\u5f62\u5f0f\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093",REPLAY:"\u30ea\u30d7\u30ec\u30a4",ERROR:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u63a5\u7d9a\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f",PLAY_TIPS:"\u30d7\u30ec\u30a4",PAUSE_TIPS:"\u4e00\u6642\u505c\u6b62",PLAYNEXT_TIPS:"\u6b21\u3092\u30d7\u30ec\u30a4",DOWNLOAD_TIPS:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",ROTATE_TIPS:"\u56de\u8ee2",RELOAD_TIPS:"\u518d\u8aad\u307f\u8fbc\u307f",FULLSCREEN_TIPS:"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3",EXITFULLSCREEN_TIPS:"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3\u3092\u7d42\u4e86",CSSFULLSCREEN_TIPS:"\u30b7\u30a2\u30bf\u30fc\u30e2\u30fc\u30c9",EXITCSSFULLSCREEN_TIPS:"\u30b7\u30a2\u30bf\u30fc\u30e2\u30fc\u30c9\u3092\u7d42\u4e86",TEXTTRACK:"\u5b57\u5e55",PIP:"\u30df\u30cb\u30d7\u30ec\u30fc\u30e4\u30fc",SCREENSHOT:"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8",LIVE:"\u751f\u653e\u9001",OFF:"\u30aa\u30d5",OPEN:"\u958b\u3044\u305f",MINI_DRAG:"\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u50cd\u753b\u3092\u30c9\u30e9\u30c3\u30b0\u3059\u308b",MINISCREEN:"\u5c0f\u3055\u306a\u753b\u9762",REFRESH:"\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5",REFRESH_TIPS:"\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044",FORWARD:"\u65e9\u9001\u308a",LIVE_TIP:"\u751f\u653e\u9001"}};function ownKeys$3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2$3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(n),!0).forEach((function(t){_defineProperty$4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey$2(r.key),r)}}function _createClass$4(e,t,n){return t&&_defineProperties$4(e.prototype,t),n&&_defineProperties$4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$4(e,t,n){return(t=_toPropertyKey$2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits$3(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$3(e,t)}function _getPrototypeOf$3(e){return(_getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf$3(e,t){return(_setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _assertThisInitialized$3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn$3(e,t){if(t&&("object"===_typeof$4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(e)}function _createSuper$3(e){var t=_isNativeReflectConstruct$3();return function(){var n,r=_getPrototypeOf$3(e);if(t){var i=_getPrototypeOf$3(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn$3(this,n)}}function _superPropBase$1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf$3(e)););return e}function _get$1(){return(_get$1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_superPropBase$1(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function _toPrimitive$2(e,t){if("object"!==_typeof$4(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof$4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return"symbol"===_typeof$4(t)?t:String(t)}var es_promise_finally={},$$g=_export,NativePromiseConstructor=promiseNativeConstructor,fails$f=fails$L,getBuiltIn$3=getBuiltIn$d,isCallable$3=isCallable$u,speciesConstructor$1=speciesConstructor$4,promiseResolve=promiseResolve$2,defineBuiltIn$4=defineBuiltIn$i,NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype,NON_GENERIC=!!NativePromiseConstructor&&fails$f((function(){NativePromisePrototype.finally.call({then:function(){}},(function(){}))}));if($$g({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(e){var t=speciesConstructor$1(this,getBuiltIn$3("Promise")),n=isCallable$3(e);return this.then(n?function(n){return promiseResolve(t,e()).then((function(){return n}))}:e,n?function(n){return promiseResolve(t,e()).then((function(){throw n}))}:e)}}),isCallable$3(NativePromiseConstructor)){var method=getBuiltIn$3("Promise").prototype.finally;NativePromisePrototype.finally!==method&&defineBuiltIn$4(NativePromisePrototype,"finally",method,{unsafe:!0})}var $$f=_export,$includes$1=arrayIncludes.includes,fails$e=fails$L,addToUnscopables=addToUnscopables$4,BROKEN_ON_SPARSE=fails$e((function(){return!Array(1).includes()}));$$f({target:"Array",proto:!0,forced:BROKEN_ON_SPARSE},{includes:function(e){return $includes$1(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("includes");var isRegExp=isRegexp,$TypeError$2=TypeError,notARegexp=function(e){if(isRegExp(e))throw $TypeError$2("The method doesn't accept regular expressions");return e},wellKnownSymbol$5=wellKnownSymbol$u,MATCH=wellKnownSymbol$5("match"),correctIsRegexpLogic=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[MATCH]=!1,"/./"[e](t)}catch(r){}}return!1},$$e=_export,uncurryThis$e=functionUncurryThis,notARegExp=notARegexp,requireObjectCoercible$1=requireObjectCoercible$a,toString$5=toString$h,correctIsRegExpLogic=correctIsRegexpLogic,stringIndexOf=uncurryThis$e("".indexOf);$$e({target:"String",proto:!0,forced:!correctIsRegExpLogic("includes")},{includes:function(e){return!!~stringIndexOf(toString$5(requireObjectCoercible$1(this)),toString$5(notARegExp(e)),arguments.length>1?arguments[1]:void 0)}});var VTT_CHECK=/^WEBVTT/,VTT_STYLE=/^STYLE+$/,VTT_CUE=/^\:\:cue/,VTT_CUEND=/^}+$/,ASS_CHECK=/^\[Script Info\].*/,TIME_REGEX_LIST=[/[0-9]{1,3}:[0-9]{2}:[0-9]{2}\.[0-9]{1,3}-->[0-9]{1,3}:[0-9]{2}:[0-9]{2}\.[0-9]{1,3}/,/[0-9]{1,2}:[0-9]{2}\.[0-9]{1,3}-->[0-9]{1,2}:[0-9]{2}\.[0-9]{1,3}/,/[0-9]{1,2}\.[0-9]{1,3}-->[0-9]{1,2}\.[0-9]{1,3}/],MAX_COUNT=50,ASS_FORMAT=/^Format:\s/,ASS_STYLE=/^Style:\s/,ASS_DIALOGUE=/^Dialogue:\s/;function getSecond(e){var t=e.length;return 3===t?(60*(60*Number(e[0])+Number(e[1]))*1e3+1e3*Number(e[2]))/1e3:2===t?(60*Number(e[0])*1e3+1e3*Number(e[1]))/1e3:Number(e[0])}function isNumber$1(e){return/^(\-|\+)?\d+(\.\d+)?$/.test(e)}function htmlEncodeAll(e){return e}function getByIndex(e,t){return e>=0&&e<t.length?t[e]:""}var SubTitleParser=function(){function e(){_classCallCheck$3(this,e)}return _createClass$4(e,null,[{key:"parseJson",value:function(e){for(var t=[],n=0,r=0;r<e.length;r++){if(n>=MAX_COUNT&&(n=0),0===n){var i={start:e[r].start,list:[e[r]],end:e[r].end};t.push(i)}else t[t.length-1].list.push(e[r]),t[t.length-1].end=e[r].end;n++}return t}},{key:"parse",value:function(t,n){var r=e.checkFormat(t);r||n({format:r});try{var i=[];"ass"===r?i=e.parseASS(t):"vtt"===r&&(i=e.parseVTT(t)),n({format:r,list:i.list,styles:i.styles})}catch(error){console.error(error),n({format:r},error)}}},{key:"parseASSItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.split(","),r={},i="";try{var o=n.length-t.length;return i=htmlEncodeAll(i=(i=o>0?n.splice(t.length-1,o+1).join(",")+"":n[n.length-1]+"").replace(/\\n+/g,"")),n[t.length-1]=i,t.map((function(e,t){"end"===e||"start"===e?r[e]=getSecond(n[t].split(":")):"text"===e?r[e]=[n[t]]:"layer"===e?(r[e]=[n[t]],r.textTag=[n[t]]):r[e]="style"===e?[n[t]]:Number(n[t])?Number(n[t]):n[t]})),r}catch(error){return console.error(error),{}}}},{key:"parseASS",value:function(t){for(var n=t.split("\n"),r=[],i=0,o=0,a=[],s=[],c=null;i<n.length;){if(ASS_FORMAT.test(n[i]))s=(s=n[i].replace(ASS_FORMAT,"").replace(/\s+/g,"").split(",")).map((function(e){return e.toLocaleLowerCase()}));else if(ASS_STYLE.test(n[i]))a.push(n[i].replace(ASS_STYLE,"").replace(/\s+/g,""));else if(ASS_DIALOGUE.test(n[i])){var l=e.parseASSItem(n[i].replace(ASS_DIALOGUE,""),s);if(c&&l.start===c.start&&l.end===c.end)try{var u=c,d=u.text,h=u.textTag,f=u.style;d.push(l.text[0]),h.push(l.textTag[0]),f.push(l.style[0])}catch(error){console.error(error)}else{c=l;var p=null;o%MAX_COUNT==0?((p={start:c.start,end:c.end,list:[]}).list.push(c),r.push(p)):((p=r[r.length-1]).end=c.end,p.list.push(c)),o++}}i++}return{list:r,style:{}}}},{key:"parseVTTStyle",value:function(e,t){var n=e.split(":");if(n.length>1){var r=n[0].trim().split("-"),i="";r.length>1?r.map((function(e,t){i+=0===t?e:e.charAt(0).toUpperCase()+e.slice(1)})):i=r[0],t[i]=n[1].trim().replace(/;$/,"")}return t}},{key:"parseVTT",value:function(e){for(var t=(e=e.replace(VTT_CHECK,"")).split("\n"),n=[],r=0,i=0,o=null,a=!1,s=!1,c=null,l=null,u=[];r<t.length;){var d=getByIndex(r,t).trim();if(!d||a&&isNumber$1(d))a=!d;else if(VTT_CUE.test(d)&&VTT_STYLE.test(getByIndex(r-1,t).trim())){s=!0;var h=/\((.+?)\)/g.exec(d);l=h?h[1]:"",c=""}else if(s)VTT_CUEND.test(d)?(u.push({key:l,style:c}),c=null,l=null,s=!1):c+=d;else if(d){a=!1;var f=this.checkIsTime(t[r]);if(f){var p=this.parseVttTime(f);if(!o||p.start!==o.start||p.end!==o.end){(o=p).text=[],o.textTag=[];var g=null;i%MAX_COUNT==0?((g={start:o.start,end:o.end,list:[]}).list.push(o),n.push(g)):((g=n[n.length-1]).end=o.end,g.list.push(o)),i++}}else if(o){var y=o,v=y.text,m=y.textTag,_=this.parseVttText(t[r]);v.push(_.text),m.push(_.tag)}a=!1}r++}return{list:n,styles:u}}},{key:"checkIsTime",value:function(e){e=e.replace(/\s+/g,"");for(var t=0,n=null;t<TIME_REGEX_LIST.length&&!(n=TIME_REGEX_LIST[t].exec(e));)t++;return n?n[0]:null}},{key:"parseVttText",value:function(e){var t=/^(<?.+?>)/g.exec(e),n="",r="default";if(t){r=t[0].replace(/\<|\>|\&/g,"");var i=RegExp("^<".concat(r,">(([\\s\\S])*?)</").concat(r,">$")).exec(e);i?n=i[1]:(n=e,r="")}else n=e;for(var o=/<(\w+).(\w+)>/g,a=o.exec(n);a&&a.length>2;)n=n.replace(a[0],"<".concat(a[1],' class="').concat(a[2],'">')),a=o.exec(n);return{tag:r,text:htmlEncodeAll(n.replace(/\\n+/g,"<br/>"))}}},{key:"parseVttTime",value:function(e){var t,n=e.split("--\x3e"),r=0;if(2===n.length){var i=n[0].split(":"),o=n[1].split(":");t=getSecond(i),r=getSecond(o)}return{start:t,end:r,time:e}}},{key:"isVTT",value:function(e){return VTT_CHECK.test(e)}},{key:"isASS",value:function(e){return ASS_CHECK.test(e)}},{key:"checkFormat",value:function(e){return e?VTT_CHECK.test(e)?"vtt":ASS_CHECK.test(e)?"ass":null:null}}]),e}(),ERROR$2=[{code:0,msg:"SUCCESS"},{code:1,msg:"LOAD_ERROR"},{code:2,msg:"PARSER_ERROR"},{code:3,msg:"FORMAT_NOT_SUPPORTED"},{code:4,msg:"ID_OR_LANGUAGE_NOT_EXIST"},{code:5,msg:"PARAMETERS_ERROR"},{code:6,msg:"ABORT"},{code:7,msg:"UNKNOWN"},{code:8,msg:"DATA_ERROR:subtitle.url is null"},{code:9,msg:"DATA_ERROR:subtitle.url length is 0"}];function _ERROR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={code:ERROR$2[e].code,msg:ERROR$2[e].msg};return Object.keys(t).map((function(e){n[e]=t[e]})),n}var XHR$1=_createClass$4((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,r=t.method,i=void 0===r?"GET":r,o=t.type,a=void 0===o?"arraybuffer":o,s=t.timeout,c=void 0===s?1e4:s,l=t.data,u=void 0===l?{}:l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck$3(this,e),new Promise((function(e,t){var r=new window.XMLHttpRequest,o=i.toUpperCase(),s=[];if(a&&(r.responseType=a),c&&(r.timeout=c),Object.keys(u).forEach((function(e){s.push("k=".concat(u[e]))})),r.onload=function(){200===r.status||206===r.status?e({context:d,res:r}):t(new Error({context:d,res:r,type:"error"}))},r.onerror=function(e){t(new Error({context:d,res:r,type:"error"}))},r.ontimeout=function(e){t(new Error({context:d,res:r,type:"error"}))},r.onabort=function(){t(new Error({context:d,res:r,type:"error"}))},"GET"===o)r.open(o,"".concat(n)),r.send();else{if("post"!==o)throw new Error("xhr ".concat(o," is not supported"));r.open(o,n),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(s.join("&"))}}))})),ProxyPromise=function(){function e(){var t,n;_classCallCheck$3(this,e);var r=new Promise((function(e,r){t=e,n=r}));return r.resolve=function(e){t(e),r.state="fulfilled"},r.reject=function(e){n(e),r.state="rejected",r.isBreak="DESTROYED"===e},r.state="pending",r}return _createClass$4(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}();function hasClass$1(e,t){if(!e)return!1;if(e.classList)return Array.prototype.some.call(e.classList,(function(e){return e===t}));var n=e.className&&"object"===_typeof$2(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function addClass$1(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)})):hasClass$1(e,t)||(e.className&&"object"===_typeof$2(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t))}function removeClass$1(e,t){e&&(e.classList?t.split(/\s+/g).forEach((function(t){e.classList.remove(t)})):hasClass$1(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===_typeof$2(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")})))}function findIndexByTime(e,t,n){var r=t.length;if(r<1)return-1;if(t[n=n<0?0:n>=r?r-1:n].start<=e&&e<t[n].end)return n;for(var i=t[n].end<=e?n+1:0;i<r;i++){if(t[i].start<=e&&e<t[i].end)return i;if(e>t[i].end&&i+1<r&&e<t[i+1].start)return-1;if(e>t[i].end&&i+1>=r)return-1}return-1}function findCIndexByTime(e,t,n){var r=t.length;if(r<1)return[];var i=[];if((n=n<0?0:n>=r?r-1:n)<r)for(var o=t[n].end<=e?n:0;o<r&&(t[o].start<=e&&e<t[o].end&&i.push(o),!(e<t[o].start));o++);return i}function getItemsByIndex(e,t,n){if(0===e.length||t<0||t>e.length-1)return[];var r=e[t].list;if(0===n.length)return[];var i=r.splice(n[0],n.length);return t>0&&e.splice(0,t),0===r.length&&e.splice(0,1),i}function typeOf(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}function createDom(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach((function(t){var r=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&i.setAttribute(r,o):i.setAttribute(r,o)})),i}function isMobile(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e);return/(?:iPhone)/.test(e)&&!o||r||n||o}function addCSS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";e.map((function(e){n+=" ".concat(t," ").concat(e.key," {").concat(e.style,"}")}));var r=document.createElement("style"),i=document.head||document.getElementsByTagName("head")[0];if(r.type="text/css",r.id="ssss",r.styleSheet){var o=function(){try{r.styleSheet.cssText=n}catch(e){}};r.styleSheet.disabled?setTimeout(o,10):o()}else{var a=document.createTextNode(n);r.appendChild(a)}i.appendChild(r)}function parse(e,t,n){if(n||(n=new ProxyPromise),"json"===t){var r=SubTitleParser.parseJson(e);n.resolve({list:r,format:"json"})}else"string"===t&&SubTitleParser.parse(e,(function(e,t){if(t){var r=_ERROR(2,t);n.reject(r,{format:e.format})}else if(e.format)n.resolve({styles:e.styles,list:e.list,format:e.format});else{var i=_ERROR(3);n.reject(i)}}));return n}function loadSubTitle(e,t){return t||(t=new ProxyPromise),new XHR$1({url:e.url,type:"text"}).then((function(n){parse(n.res.response,"string").then((function(n){t.resolve(_objectSpread2$3(_objectSpread2$3({},n),e))})).catch((function(e){t.reject(e)}))})).catch((function(n){var r=_ERROR(1,_objectSpread2$3({statusText:n.statusText,status:n.status,type:n.type,message:"http load error",url:e.src},e));t.reject(r)})),t}function checkSubtitle(e,t){return!!(e.id&&t.id&&e.id===t.id||e.language&&t.language&&e.language===t.language)}var ResizeObserver=function(){function e(){var t=this;_classCallCheck$3(this,e),this.__handlers=[],window.ResizeObserver&&(this.observer=new window.ResizeObserver((function(e){t.__trigger(e)})))}return _createClass$4(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=this.__handlers,r=-1,i=0;i<n.length;i++)n[i]&&e===n[i].target&&(r=i);r>-1?this.__handlers[r].handler.push(t):this.__handlers.push({target:e,handler:[t]})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,r){e===n.target&&(t=r)})),this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e,t){for(var n=this.__handlers,r=0;r<n.length;r++)if(n[r]&&e===n[r].target){n[r].handler&&n[r].handler.forEach((function(n){try{n(e,t)}catch(error){console.error(error)}}));break}}},{key:"__trigger",value:function(e){var t=this;e.map((function(e){var n=e.contentRect;t.__runHandler(e.target,n)}))}}]),e}(),resizeObserver=null;function addObserver(e,t){resizeObserver||(resizeObserver=new ResizeObserver),resizeObserver.addObserver(e,t)}function unObserver(e,t){resizeObserver&&resizeObserver.unObserver(e,t)}var EVENTS$1={RESIZE:"resize",CHANGE:"change",OFF:"off",UPDATE:"update"};function formatUrl(e){var t=[];return e&&"String"===typeOf(e)?t.push({url:e,index:0,start:-1,end:-1}):"Array"===typeOf(e)&&e.forEach((function(e,n){t.push({url:e.url||e.src,index:n,start:e.start||-1,end:e.end||-1})})),t}var IS_MOBILE$1=!1,Subtitle$1=function(e){_inherits$3(n,e);var t=_createSuper$3(n);function n(e){var r;return _classCallCheck$3(this,n),_defineProperty$4(_assertThisInitialized$3(r=t.call(this)),"_onTimeupdate",(function(){if(r._isOpen){var e=r.player.video,t=e.videoWidth,n=e.videoHeight;!r._videoMeta.scale&&t&&n&&r._onResize(r.player.root);var i=r._getPlayerCurrentTime();Math.round(Math.abs(1e3*i-r._ctime))<200||(r._ctime=1e3*i,r.currentText&&r.currentText.list&&("live"===r.config.updateMode?r._liveUpdate(i):r._update(i)))}})),_defineProperty$4(_assertThisInitialized$3(r),"getItemsByIndex",void 0),_defineProperty$4(_assertThisInitialized$3(r),"_onResize",(function(e){var t=_assertThisInitialized$3(r),n=t._videoMeta;if(t.config.domRender){if(e&&e instanceof window.Element||(e=r.player.root),r._iId&&(clearTimeout(r._iId),r._iId=null),!n.scale){if(!r.player.video)return;var i=r.player.video,o=i.videoWidth,a=i.videoHeight;if(!o||!a)return;n.videoWidth=o,n.videoHeight=a,n.scale=parseInt(a/o*100,10)}r.__startResize(e)}})),_defineProperty$4(_assertThisInitialized$3(r),"_onCoreEvents",(function(e){try{switch(e.eventName){case"core.subtitlesegments":r._onSubtitleSegment(e.list||[]);break;case"core.subtitleplaylist":r._onSubtitlePlaylist(e.list||[]);break;case"core.seipayloadtime":r._onCoreSeiintime(e)}}catch(t){console.error(t)}})),_defineProperty$4(_assertThisInitialized$3(r),"destroy",(function(){r.detachPlayer(),r.removeAllListeners(),r.player=null,r.textTrack=null})),IS_MOBILE$1=isMobile(),r.currentText=null,r.currentExtText=null,r.textTrack=[],r._cid=-1,r._gid=-1,r._cids=[],r._iId=null,r._iC=0,r.player=null,r.root=null,r.config={line:"double",bottom:0,mode:"stroke",defaultOpen:!1,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,fitVideo:!0,offsetBottom:2,fontColor:"#fff",domRender:!0,updateMode:"vod",debugger:!1},r._ctime=0,r._loadingTrack={},Object.keys(r.config).map((function(t){void 0!==e[t]&&null!==e[t]&&(r.config[t]=e[t])})),r._isOpen=r.config.defaultOpen||!1,r._videoMeta={scale:0,videoHeight:0,videoWidth:0,lwidth:0,lheight:0,vWidth:0,vHeight:0,vBottom:0,vLeft:0,marginBottom:0},e.subTitles&&"Array"===typeOf(e.subTitles)?(e.player&&r.attachPlayer(e.player),r.seiTime=0,r.lastSeiTime=0,r._curTexts=[],r.setSubTitles(e.subTitles,r.config.defaultOpen),r):_possibleConstructorReturn$3(r)}return _createClass$4(n,[{key:"version",get:function(){return"1.1.0-alpha.2"}},{key:"setSubTitles",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._isOpen||n;r&&this.innerRoot&&this.switchOff(),this.currentText=null,this.textTrack=[],t.forEach((function(t){var n={};Object.keys(t).map((function(e){n[e]=t[e]})),n.url=formatUrl(n.url),n.isDefault&&(e.currentText=n),e.textTrack.push(n)})),this._log("setSubTitles",i),i&&this.switch().catch((function(t){e._log("[switch]",t)})),this.currentText&&this._loadTrack(this.currentText).then((function(t){e.addStyles(t)})),this.emit("reset",{list:this.textTrack,isOpen:i})}},{key:"updateSubTitle",value:function(e){for(var t=this,n=-1,r=0;r<this.textTrack.length;r++)if(checkSubtitle(e,this.textTrack[r])){n=r;break}if(this._log("updateSubTitle",n,e),n>-1){var i=checkSubtitle(this.currentText,this.textTrack[n]);if(this._log("updateSubTitle","_isCurrent",i,"this.isOpen",this.isOpen,this.currentText),!i)return;var o=formatUrl(e.url);this.isOpen?(o.forEach((function(e){t.textTrack[n].url.push(e)})),this._log("updateSubTitle _loadTrackUrls",this.textTrack[n]),this._loadTrackUrls(this.currentText,2)):this.textTrack[n].url=o}}},{key:"addStyles",value:function(e){var t=e.styles,n=e.format;t&&"vtt"===n&&(t.map((function(e){e.key||(e.key="xg-text-track-span")})),addCSS(t,"xg-text-track"))}},{key:"attachPlayer",value:function(e){var t=this;if(this._log("attachPlayer"),e){this.player&&this.detachPlayer();var n=this.config,r=n.fontColor,i=n.mode,o=n.fitVideo,a=n.domRender;this.player=e,a&&(this.root=document.createElement("xg-text-track"),this.root.className="xg-text-track",!this._isOpen&&addClass$1(this.root,"text-track-hide"),!o&&addClass$1(this.root,"text-track-no-fitvideo"),i&&addClass$1(this.root,"text-track-".concat(i)),this.innerRoot=document.createElement("xg-text-track-inner"),this.root.appendChild(this.innerRoot),r&&(this.root.style.color=r),this.currentText&&["language","id","label"].map((function(e){t.root.setAttribute("data-".concat(e),t.currentText[e]||"")})),this.player.root.appendChild(this.root),addObserver(e.root,this._onResize)),this.player.on("destroy",this.destroy),this.player.on("timeupdate",this._onTimeupdate),this.player.on("core_event",this._onCoreEvents),this._isOpen&&this.switch().catch((function(e){t._log("[switch]",e)}))}}},{key:"detachPlayer",value:function(){var e=this.player,t=this.config;e&&(e.off("destroy",this.destroy),e.off("timeupdate",this._onTimeupdate),e.on("core_event",this._onCoreEvents),t.domRender&&(e.root&&(unObserver(e.root,this._onResize),e.root.removeChild(this.root)),this.innerRoot=null,this.root=null),this.player=null)}},{key:"switch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};return this._log("switch",t),this._loadingTrack=t,new Promise((function(n,r){if(t.id||t.language)if(e.currentText&&checkSubtitle(t,e.currentText))e._loadingTrack={},e._updateCurrent(e.currentText),e.switchOn(),n(_ERROR(0));else{var i=null;e.__removeByTime(e._curTexts,0);for(var o=0;o<e.textTrack.length;o++)if(checkSubtitle(t,e.textTrack[o])){i=e.textTrack[o];break}if(e._log("nextSubtitle",i),i)e._emitPlayerSwitch(e.currentText,i),i.list?(e._loadingTrack={},e._updateCurrent(i),e.switchOn(),n(_ERROR(0))):(e._log("this._loadTrack",i),e._updateCurrent(i),e._loadTrack(i).then((function(t){if(e.addStyles(t),e._loadingTrack.id===i.id||e._loadingTrack.language===t.language)e._loadingTrack={},e._updateCurrent(t),e.switchOn(),n(_ERROR(0));else{var o=_ERROR(6,{message:"check _loadingTrack fail id: ".concat(e._loadingTrack.id,"  nextSubtitle:").concat(t.id)});r(o)}})).catch((function(e){r(e)})));else{var a=_ERROR(4,new Error("The is no subtitle with id:[{".concat(t.id,"}] or language:[").concat(t.language,"]")));r(a)}}else{if(e.currentText){e._loadingTrack={},e._updateCurrent(e.currentText),e.switchOn();var s=_ERROR(0,{message:"switch default subtitle success"});return void n(s)}var c=_ERROR(5,{message:"no default subtitle"});r(c)}}))}},{key:"switchExt",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};return new Promise((function(n,r){if(t.id||t.language){for(var i=null,o=0;o<e.textTrack.length;o++)if(checkSubtitle(t,e.textTrack[o])){i=e.textTrack[o];break}i&&!checkSubtitle(i,e.currentText)&&e._loadTrack(i).then((function(t){e.currentExtText=t,n(_ERROR(0))}))}else e.currentExtText=null,n(_ERROR(0))}))}},{key:"switchOn",value:function(){this._log("switchOn"),this._isOpen=!0,this.show(),this.emit(EVENTS$1.CHANGE,this.currentText)}},{key:"switchOff",value:function(){this._isOpen=!1,this.hide(),this.emit(EVENTS$1.OFF)}},{key:"isOpen",get:function(){return this._isOpen}},{key:"_log",value:function(){if(this.config.debugger){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["[xgSubtitle]"].concat(n))}}},{key:"_loadTrack",value:function(e){var t=this;this._log("_loadTrack",e.language,e);var n=new ProxyPromise,r="",i="";if(e.json?(r="json",i=e.json):e.stringContent&&!e.url&&(r="string",i=e.stringContent),i)return parse(i,r).then((function(t){e.format=t.format,e.styles=t.styles,e.list=t.list,n.resolve(e)})).catch((function(e){n.reject(e)})),n;var o=e.url;return 0===o.length?(n.resolve(e),n):(loadSubTitle(o.splice(0,1)[0]).then((function(r){e.format=r.format,e.styles=r.styles,e.list||(e.list=[]),t._pushList(e.list,r.list),o.length>1&&t._loadTrackUrls(e,2),n.resolve(e)})).catch((function(e){n.reject(e)})),n)}},{key:"_emitPlayerSwitch",value:function(e,t){e&&"live"===this.config.updateMode&&(e.list=[],e.url=[]);var n=_objectSpread2$3({lang:t.language},t);this._log("emit subtile_switch ",t,n),this.player&&this.player.emit("switch_subtitle",n)}},{key:"_loadTrackUrls",value:function(e,t,n){var r=this,i=e.url.length,o=i>t?e.url.splice(0,t):e.url.splice(0,i),a=o.length;this._log("_loadTrackUrls",e.language,i,o.length,a),o.forEach((function(t,i){loadSubTitle(_objectSpread2$3(_objectSpread2$3({},t),{},{index:i})).then((function(t){e.format=t.format,e.styles=t.format,e.list||(e.list=[]),r._pushList(e.list,t.list),a--})).catch((function(e){a--})).finally((function(t){0===a&&(n&&n.resolve(e),r._loadTrackUrls(e,2))}))}))}},{key:"_freshUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{url:""},n=-1;e.url.forEach((function(e,r){e.url===t.url&&(n=r)})),n>-1&&e.url.splice(n,1)}},{key:"_pushList",value:function(e,t){var n=t[0].start,r=t[t.length-1].end;if(0===e.length||n>=e[e.length-1].end)t.forEach((function(t){e.push(t)}));else{for(var i=-1,o=0;o<e.length;o++)if(e[o].start>r){i=o;break}i>-1&&t.forEach((function(t,n){e.splice(i+n,0,t)}))}return e}},{key:"_updateCurrent",value:function(e){var t=this;this.currentText=e,this.config.domRender&&this.root&&(["language","id","label"].map((function(e){t.root.setAttribute("data-".concat(e),t.currentText[e]||"")})),this.__remove(this._cids)),this._cids=[],this._gid=-1,this._cid=-1,this._curTexts=[];var n=this._getPlayerCurrentTime();n&&("live"===this.config.updateMode?this._liveUpdate(n):this._update(n))}},{key:"__loadAll",value:function(){var e=this;this.textTrack.forEach((function(t){e._loadTrack(t)}))}},{key:"getDelCid",value:function(e,t){for(var n=[],r=0;r<e.length;r++)t.includes(e[r])||n.push(e[r]);return n}},{key:"getNewCid",value:function(e,t){for(var n=[],r=0;r<t.length;r++)e.includes(t[r])||n.push(t[r]);return n}},{key:"_liveUpdate",value:function(e){var t=this;if(this.currentText&&this.currentText.list&&this.currentText.list.length){var n=[],r=findIndexByTime(e,this.currentText.list,this._gid);if(r>-1&&(n=findCIndexByTime(e,this.currentText.list[r].list,this._cid)),this.__removeByTime(this._curTexts,e),this._log("_liveUpdate",e,r,n,this.currentText.list[0].list[0].start,this.currentText.list[0].list[0].end),n.length>0){var i=getItemsByIndex(this.currentText.list,r,n),o=this._curTexts.length,a=o>0?this._curTexts[o-1].index:0;i.forEach((function(e,n){e.index=n+a,t._curTexts.push(e)})),this.__render(i)}this.emit("update",this._curTexts)}}},{key:"_update",value:function(e){var t=this;if(this.currentText&&this.currentText.list&&this.currentText.list.length){var n=findIndexByTime(e,this.currentText.list,this._gid),r=[];if(n>-1&&(r=findCIndexByTime(e,this.currentText.list[n].list,this._cid)),r.length<1)return this._cids.length>0&&this.config.domRender&&this.__remove(this._cids),void(this._cids=[]);if(this._cids!==r||n!==this._gid){this._gid=n,this._cid=r[0];var i=this.getDelCid(this._cids,r),o=this.getNewCid(this._cids,r);this._cids=r,this.config.domRender&&this.__remove(i);var a=[];o.map((function(e){var r=t.currentText.list[n].list[e];r.index=e,a.push(r)})),this.currentExtText&&o.map((function(e){var r=t.currentText.list[n].list[e];r.index=e,a.push(r)})),this.emit("update",a),this.__render(a,e)}}}},{key:"_getPlayerCurrentTime",value:function(){if(!this.player)return 0;var e=this.player.currentTime;return parseInt(1e3*e+1e3*this.seiTime-1e3*this.lastSeiTime,10)/1e3}},{key:"_onSubtitlePlaylist",value:function(e){this._log("_onSubtitlePlaylist",e);var t=e.map((function(e){return{label:e.name,language:e.lang,id:e.id,isDefault:e.default,url:[],mUrl:e.url}}));this.setSubTitles(t)}},{key:"_onSubtitleSegment",value:function(e){if(this._log("_onSubtitleSegment",e.length,e[0].lang,e[0].sn,e[e.length-1].sn,e[0].start,e[e.length-1].end),e&&0!==e.length){var t={language:e[0].lang,url:e.map((function(e){return{id:e.sn,url:e.url,duration:e.duration,start:e.start,end:e.end}}))};checkSubtitle(t,this.currentText)&&this.updateSubTitle(t)}}},{key:"_onCoreSeiintime",value:function(e){try{var t=e.time/1e3;this._log("_onCoreSeiintime sei",t,this.seiTime,this.lastSeiTime),this.seiTime=t,this.lastSeiTime=this.player?this.player.currentTime:0}catch(n){}}},{key:"resize",value:function(e,t){var n,r=this,i=this.config,o=i.baseSizeX,a=i.baseSizeY,s=i.minMobileSize,c=i.minSize,l=i.fitVideo,u=i.offsetBottom,d=this._videoMeta.scale;this._videoMeta.lwidth=e,this._videoMeta.lheight=t;var h=0;t/e*100>=d?(h=parseInt(d*e,10)/100,n=e):(h=t,n=parseInt(t/d*100,10)),this._videoMeta.vWidth=n,this._videoMeta.vHeight=h;var f=0,p=0;d>120?(f=a,p=parseInt(f*h/1080,10)):(f=o,p=parseInt(f*n/1920,10));var g=IS_MOBILE$1?s:c,y={fontSize:p=p<g?g:p>f?f:p},v=parseInt((t-h)/2,10),m=parseInt((e-n)/2,10),_=parseInt(h*u,10)/100;this._videoMeta.vBottom=v,this._videoMeta.vLeft=m,this._videoMeta.marginBottom=_,l&&(y.bottom=v+_,y.left=y.right=m),Object.keys(y).map((function(e){r.root.style[e]="".concat(y[e],"px")})),this.emit(EVENTS$1.RESIZE,{vLeft:m,vBottom:v,marginBottom:_,vWidth:n,vHeight:h,fontSize:p,scale:d})}},{key:"__startResize",value:function(e){var t=this,n=e.getBoundingClientRect(),r=this._videoMeta,i=n.width,o=n.height;if(this._iId&&(clearTimeout(this._iId),this._iId=null),i>0&&o>0&&(i!==r.lwidth||o!==r.lheight))this._iC=0,this.resize(i,o);else{if(this._iC>=5)return void(this._iC=0);this._iC++,this._iId=setTimeout((function(){t.__startResize(e)}),50)}}},{key:"__removeByTime",value:function(e,t){for(var n=[],r=0;r<e.length;r++)(!t||e[r].end<t)&&n.push(r);0!==n.length&&(e.splice(n[0],n.length),this.config.domRender&&this.__remove(n))}},{key:"__remove",value:function(e){var t=this;if(e&&!(e.length<1)){for(var n=this.innerRoot.children,r=[],i=0;i<n.length;i++){var o=Number(n[i].getAttribute("data-index"));e.includes(o)&&r.push(n[i])}r.map((function(e){t.innerRoot.removeChild(e)}))}}},{key:"__render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._log("__render",t.length,this.config.domRender),t.length>0&&this.config.domRender&&t.map((function(t){var n="text-track-".concat(e.config.line);t.text.map((function(r,i){i>0&&(n+=" text-track-deputy");var o={"data-start":t.start,"data-end":t.end,"data-index":t.index};e.innerRoot.appendChild(createDom("xg-text-track-span",r,o,n))}))}))}},{key:"show",value:function(){this.config.domRender&&removeClass$1(this.root,"text-track-hide")}},{key:"hide",value:function(){this.config.domRender&&(addClass$1(this.root,"text-track-hide"),this.innerRoot.innerHTML="")}},{key:"emit",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=_get$1(_getPrototypeOf$3(n.prototype),"emit",this)).call.apply(r,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=_get$1(_getPrototypeOf$3(n.prototype),"on",this)).call.apply(r,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=_get$1(_getPrototypeOf$3(n.prototype),"once",this)).call.apply(r,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=_get$1(_getPrototypeOf$3(n.prototype),"off",this)).call.apply(r,[this,e,t].concat(o))}},{key:"offAll",value:function(){_get$1(_getPrototypeOf$3(n.prototype),"removeAllListeners",this).call(this)}},{key:"marginBottom",get:function(){var e=this._videoMeta,t=e.bottom,n=e.marginBottom;return this.config.fitVideo?t+n:n}}]),n}(EventEmitter),DefinitionLinked={origin:{index:1,next:"uhd",prev:null},uhd:{index:2,next:"hd",prev:"origin"},hd:{index:3,next:"sd",prev:"uhd"},sd:{index:4,next:"ld",prev:"hd"},ld:{index:5,next:"ao",prev:"sd"},ao:{index:6,next:null,prev:"ld"}},PLAYER_LANGS=["zh","en","jp","zh-hk"],PLAYER_MODE={NORMAL:0,INNER:1,FULLSCREEN:2},VIDEO_STATUS_TYPE=function(e){return e[e.VALID=10]="VALID",e[e.TRANSCODING=30]="TRANSCODING",e[e.NO_SET_AUDIT=1e3]="NO_SET_AUDIT",e[e.OFFLINE=1002]="OFFLINE",e[e.NO_AUTH=2001]="NO_AUTH",e[e.UN_AUTH=2002]="UN_AUTH",e}(VIDEO_STATUS_TYPE||{}),MIN_EXPIRE_INTERVAL=300,dayjs_min={exports:{}};!function(e,t){e.exports=function(){var e=6e4,t=36e5,n="millisecond",r="second",i="minute",o="hour",a="day",s="week",c="month",l="quarter",u="year",d="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),o=n-i<0,a=t.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:s,d:a,D:d,h:o,m:i,s:r,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m="en",_={};_[m]=g;var b=function(e){return e instanceof w},E=function e(t,n,r){var i;if(!t)return m;if("string"==typeof t){var o=t.toLowerCase();_[o]&&(i=o),n&&(_[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;_[s]=t,i=s}return!r&&i&&(m=i),i||!r&&m},S=function(e,t){if(b(e))return e.clone();var n="object"==_typeof$4(t)?t:{};return n.date=e,n.args=arguments,new w(n)},T=v;T.l=E,T.i=b,T.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function g(e){this.$L=E(e.locale,null,!0),this.parse(e)}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return T},y.isValid=function(){return!(this.$d.toString()===h)},y.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return S(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<S(e)},y.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,l=!!T.u(t)||t,h=T.p(e),f=function(e,t){var r=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return l?r:r.endOf(a)},p=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,y=this.$M,v=this.$D,m="set"+(this.$u?"UTC":"");switch(h){case u:return l?f(1,0):f(31,11);case c:return l?f(1,y):f(0,y+1);case s:var _=this.$locale().weekStart||0,b=(g<_?g+7:g)-_;return f(l?v-b:v+(6-b),y);case a:case d:return p(m+"Hours",0);case o:return p(m+"Minutes",1);case i:return p(m+"Seconds",2);case r:return p(m+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var s,l=T.p(e),h="set"+(this.$u?"UTC":""),f=(s={},s[a]=h+"Date",s[d]=h+"Date",s[c]=h+"Month",s[u]=h+"FullYear",s[o]=h+"Hours",s[i]=h+"Minutes",s[r]=h+"Seconds",s[n]=h+"Milliseconds",s)[l],p=l===a?this.$D+(t-this.$W):t;if(l===c||l===u){var g=this.clone().set(d,1);g.$d[f](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[T.p(e)]()},y.add=function(n,l){var d,h=this;n=Number(n);var f=T.p(l),p=function(e){var t=S(h);return T.w(t.date(t.date()+Math.round(e*n)),h)};if(f===c)return this.set(c,this.$M+n);if(f===u)return this.set(u,this.$y+n);if(f===a)return p(1);if(f===s)return p(7);var g=(d={},d[i]=e,d[o]=t,d[r]=1e3,d)[f]||1,y=this.$d.getTime()+n*g;return T.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=T.z(this),o=this.$H,a=this.$m,s=this.$M,c=n.weekdays,l=n.months,u=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},d=function(e){return T.s(o%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:T.s(s+1,2,"0"),MMM:u(n.monthsShort,s,l,3),MMMM:u(l,s),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,c,2),ddd:u(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:T.s(o,2,"0"),h:d(1),hh:d(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:T.s(a,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(e,t){return t||g[e]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,d,h){var f,p=T.p(d),g=S(n),y=(g.utcOffset()-this.utcOffset())*e,v=this-g,m=T.m(this,g);return m=(f={},f[u]=m/12,f[c]=m,f[l]=m/3,f[s]=(v-y)/6048e5,f[a]=(v-y)/864e5,f[o]=v/t,f[i]=v/e,f[r]=v/1e3,f)[p]||v,h?m:T.a(m)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return _[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=E(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return T.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),O=w.prototype;return S.prototype=O,[["$ms",n],["$s",r],["$m",i],["$H",o],["$W",a],["$M",c],["$y",u],["$D",d]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,w,S),e.$i=!0),S},S.locale=E,S.isDayjs=b,S.unix=function(e){return S(1e3*e)},S.en=_[m],S.Ls=_,S.p={},S}()}(dayjs_min);var dayjs=dayjs_min.exports,utc$1={exports:{}};!function(e,t){var n,r,i;e.exports=(n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g,function(e,t,o){var a=t.prototype;o.utc=function(e){return new t({date:e,utc:!0,args:arguments})},a.utc=function(e){var t=o(this.toDate(),{locale:this.$L,utc:!0});return e?t.add(this.utcOffset(),n):t},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var c=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var l=a.utcOffset;a.utcOffset=function(e,t){var o=this.$utils().u;if(o(e))return this.$u?0:o(this.$offset)?l.call(this):this.$offset;if("string"==typeof e&&null===(e=function(e){void 0===e&&(e="");var t=e.match(r);if(!t)return null;var n=(""+t[0]).match(i)||["-",0,0],o=n[0],a=60*+n[1]+ +n[2];return 0===a?0:"+"===o?a:-a}(e)))return this;var a=Math.abs(e)<=16?60*e:e,s=this;if(t)return s.$offset=a,s.$u=0===e,s;if(0!==e){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+c,n)).$offset=a,s.$x.$localOffset=c}else s=this.utc();return s};var u=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var h=a.diff;a.diff=function(e,t,n){if(e&&this.$u===e.$u)return h.call(this,e,t,n);var r=this.local(),i=o(e).local();return h.call(r,i,t,n)}})}(utc$1);var utc=utc$1.exports,dist=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==_typeof$4(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,n){var r=n(12)("wks"),i=n(13),o=n(0).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==_typeof$4(Symbol.iterator)?function(e){return _typeof$4(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof$4(e)};e.exports=function(e){return"object"===(void 0===e?"undefined":r(e))?null!==e:"function"==typeof e}},function(e,t,n){var r=n(6);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports=!n(15)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,n){var r=n(3),i=n(26),o=n(27),a=Object.defineProperty;t.f=n(7)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!1},function(e,t,n){var r=n(8),i=n(1)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(2),i=n(0),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(10)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+i).toString(36))}},function(e,t,n){var r=n(9),i=n(28);e.exports=n(7)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(4),i=n(0).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(0),i=n(14),o=n(18),a=n(13)("src"),s=n(29),c=(""+s).split("toString");n(2).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(l&&(o(n,a)||i(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,n){e.exports={}},function(e,t,n){var r,i,o,a=n(5),s=n(38),c=n(39),l=n(16),u=n(0),d=u.process,h=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,g=u.Dispatch,y=0,v={},m=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){m.call(e.data)};h&&f||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},f=function(e){delete v[e]},"process"==n(8)(d)?r=function(e){d.nextTick(a(m,e,1))}:g&&g.now?r=function(e){g.now(a(m,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",_,!1)):r="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:h,clear:f}},function(e,t,n){var r=n(6);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){e.exports=n(23)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n(24);var r,i=(r=n(48))&&r.__esModule?r:{default:r};t.default={url:i.default},e.exports=t.default},function(e,t,n){var r,i,o,a,s=n(10),c=n(0),l=n(5),u=n(11),d=n(25),h=n(4),f=n(6),p=n(30),g=n(31),y=n(37),v=n(20).set,m=n(40)(),_=n(21),b=n(41),E=n(42),S=n(43),T=c.TypeError,w=c.process,O=w&&w.versions,k=O&&O.v8||"",C=c.Promise,$="process"==u(w),A=function(){},P=i=_.f,I=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[n(1)("species")]=function(e){e(A,A)};return($||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==k.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(r){}}(),x=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var n=e._c;m((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{s?(i||(2==e._h&&M(e),e._h=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),a=!0)),n===t.promise?l(T("Promise-chain cycle")):(o=x(n))?o.call(n,c,l):c(n)):l(r)}catch(d){u&&!a&&u.exit(),l(d)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&D(e)}))}},D=function(e){v.call(c,(function(){var t,n,r,i=e._v,o=L(e);if(o&&(t=b((function(){$?w.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=$||L(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){v.call(c,(function(){var t;$?w.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},j=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw T("Promise can't be resolved itself");(n=x(t))?m((function(){var i={_w:r,_d:!1};try{n.call(t,l(e,i,1),l(N,i,1))}catch(o){N.call(i,o)}})):(r._v=t,r._s=1,R(r,!1))}catch(i){N.call({_w:r,_d:!1},i)}}};I||(C=function(e){p(this,C,"Promise","_h"),f(e),r.call(this);try{e(l(j,this,1),l(N,this,1))}catch(t){N.call(this,t)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(44)(C.prototype,{then:function(e,t){var n=P(y(this,C));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=$?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(j,e,1),this.reject=l(N,e,1)},_.f=P=function(e){return e===C||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!I,{Promise:C}),n(45)(C,"Promise"),n(46)("Promise"),a=n(2).Promise,d(d.S+d.F*!I,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!I),"Promise",{resolve:function(e){return S(s&&this===a?C:this,e)}}),d(d.S+d.F*!(I&&n(47)((function(e){C.all(e).catch(A)}))),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=b((function(){var n=[],o=0,a=1;g(e,!1,(function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=b((function(){g(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(0),i=n(2),o=n(14),a=n(17),s=n(5),c=function e(t,n,c){var l,u,d,h,f=t&e.F,p=t&e.G,g=t&e.P,y=t&e.B,v=p?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,m=p?i:i[n]||(i[n]={}),_=m.prototype||(m.prototype={});for(l in p&&(c=n),c)d=((u=!f&&v&&void 0!==v[l])?v:c)[l],h=y&&u?s(d,r):g&&"function"==typeof d?s(Function.call,d):d,v&&a(v,l,d,t&e.U),m[l]!=d&&o(m,l,h),g&&_[l]!=d&&(_[l]=d)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){e.exports=!n(7)&&!n(15)((function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){e.exports=n(12)("native-function-to-string",Function.toString)},function(e,t,n){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(5),i=n(32),o=n(33),a=n(3),s=n(34),c=n(36),l={},u={},d=e.exports=function(e,t,n,d,h){var f,p,g,y,v=h?function(){return e}:c(e),m=r(n,d,t?2:1),_=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(f=s(e.length);f>_;_++)if((y=t?m(a(p=e[_])[0],p[1]):m(e[_]))===l||y===u)return y}else for(g=v.call(e);!(p=g.next()).done;)if((y=i(g,m,p.value,t))===l||y===u)return y};d.BREAK=l,d.RETURN=u},function(e,t,n){var r=n(3);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e.return;throw void 0!==o&&r(o.call(e)),a}}},function(e,t,n){var r=n(19),i=n(1)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(35),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:r)(e)}},function(e,t,n){var r=n(11),i=n(1)("iterator"),o=n(19);e.exports=n(2).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(3),i=n(6),o=n(1)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(0).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(0),i=n(20).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(8)(a);e.exports=function(){var e,t,n,l=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(l)}}else n=function(){i.call(r,l)};else{var d=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var r=n(0).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(3),i=n(4),o=n(21);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(17);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(9).f,i=n(18),o=n(1)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),i=n(9),o=n(7),a=n(1)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(1)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(s){}return n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==_typeof$4(Symbol.iterator)?function(e){return _typeof$4(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof$4(e)};t.default=function(e,t,n){if(e&&t){var i=void 0;try{i=(0,o.getUri)(e,t,n)}catch(s){return Promise.reject(s.message)}return new a.default({type:"json",method:"GET",url:i}).then((function(e){return e&&e.response?"string"==typeof e.response?JSON.parse(e.response).Result:"object"===r(e.response)?e.response.Result:e.response:e}))}return Promise.reject("vid, host and token can't be empty")};var i,o=n(49),a=(i=n(51))&&i.__esModule?i:{default:i};e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getUri=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{e=JSON.parse((0,r.decode)(e))}catch(s){throw new Error("base64 decode error: "+s.message)}var i=[];for(var o in n)i.push(o+"="+n[o]);var a=(/^http/.test(t)?t:"//"+t)+"?"+e.GetPlayInfoToken+"&ssl=true";return i.length>0&&(a+="&"+i.join("&")),a};var r=n(50)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){var t,n,r,i,o,a,s,c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(a=e.length,o=0,s="";o<a;){do{t=c[255&e.charCodeAt(o++)]}while(o<a&&-1===t);if(-1===t)break;do{n=c[255&e.charCodeAt(o++)]}while(o<a&&-1===n);if(-1===n)break;s+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(r=255&e.charCodeAt(o++)))return s;r=c[r]}while(o<a&&-1===r);if(-1===r)break;s+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(i=255&e.charCodeAt(o++)))return s;i=c[i]}while(o<a&&-1===i);if(-1===i)break;s+=String.fromCharCode((3&r)<<6|i)}return s}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,i=t.method,o=void 0===i?"GET":i,a=(t.type,t.data),s=void 0===a?{}:a,c=t.headers,l=void 0===c?{}:c;return r(this,e),new Promise((function(e,t){var r=new window.XMLHttpRequest,i=o.toUpperCase(),a=[];for(var c in s)a.push(c+"="+s[c]);if("GET"!==i)throw new Error("xhr "+i+" is not supported");for(var u in r.open(i,""+n,!0),r.responseType="",l)r.setRequestHeader(u,""+l[u]);r.send(),r.onload=function(){200===r.status||206===r.status?e(r):t(r)},r.onerror=function(){t(r)},r.ontimeout=function(){t(r)}}))},e.exports=t.default}]);dayjs.extend(utc);var VideoFileTypes=function(e){return e.VIDEO="video",e.EVIDEO="evideo",e}(VideoFileTypes||{}),safeJSONDecode=function(e){try{return JSON.parse(e)}catch(t){return console.warn("[utils/json] decode fail: ".concat(e),t),null}},parseToken=function(e){if(e){var t={},n=isBase64(e)?window.atob(e):e,r=safeJSONDecode(n);return r&&"string"==typeof r.GetPlayInfoToken&&r.GetPlayInfoToken.split("&").map((function(e){var n=e.split("=");n[0]&&n[1]&&(t[n[0]]=n[1])})),t}},getQueryParams=function(e){var t={};return e.split("&").map((function(e){var n=e.split("=");n[0]&&n[1]&&(t[n[0]]=n[1])})),t},isEncryptPlay=function(e){var t,n;if(null==e||!e.playAuthToken)return!1;var r=parseToken(null==e?void 0:e.playAuthToken),i=null!==(t=null==r||null===(n=r.FileType)||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:"video";return!!r&&("evideo"===i||"eaudio"===i)},getFormat=function(e){var t,n,r;if(null==e||!e.playAuthToken)return"";var i=parseToken(null==e?void 0:e.playAuthToken),o=null!==(t=null==i||null===(n=i.FileType)||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:"video";return(null==i||null===(r=i.Format)||void 0===r?void 0:r.toLowerCase())||(Object.values(VideoFileTypes).includes(o)?"mp4":"m4a")},isTokenExpired=function(e){if(!e["X-Expires"]||!e["X-Date"])return!1;var t=parseInt(e["X-Expires"]);if(isNaN(t))return!1;var n=e["X-Date"].replace(/T/g," ").replace(/Z/g,""),r=dayjs.utc(n,"YYYYMMDD hhmmss");return!!r.isValid()&&r.add(t,"seconds").isBefore(dayjs())};function getPlayInfoByAuthToken(e){var t=e.playAuthToken,n=e.playDomain,r=e.reqParams,i=void 0===r?{}:r,o=e.definitionMap,a=e.needThumbs,s=void 0!==a&&a,c=e.needBarrageMask,l=void 0!==c&&c;if(t){var u=_objectSpread2$5(_objectSpread2$5({},i),{},{NeedThumbs:s?1:0,NeedBarrageMask:l?1:0});return new Promise((function(e,r){dist.url(t,n,u).then((function(t){var n=t.Data||t,r=n.Status,i=n.PlayInfoList,a=void 0===i?[]:i,s=n.PosterUrl,c=n.Vid,l=n.Duration,u=n.BarrageMaskUrl,d=n.ThumbInfoList,h=void 0===d?[]:d;if(r===VIDEO_STATUS_TYPE.VALID&&a.length){var f=a.map((function(e){return _objectSpread2$5(_objectSpread2$5({vid:c,lineId:1,lineName:"1",url:e.MainPlayUrl,streamType:e.Format,backUrlList:[e.BackupPlayUrl],bitrate:e.Bitrate,size:e.Size,kid:e.PlayAuthId,vwidth:e.Width,vheight:e.Height,codec:e.Codec},e),getDefinitionInfo(e,o))})).sort((function(e,t){return t.Bitrate&&e.Bitrate?t.Bitrate-e.Bitrate:-1}));e({playList:f,poster:s,vid:c,duration:l,dashOpts:t.Data?t:{Data:t},thumbs:h,barrageMaskUrl:u})}else e({playList:[],poster:s,vid:c,duration:l,dashOpts:t.Data?t:{Data:t},thumbs:h,barrageMaskUrl:u}),console.error("HAS NO VIDEO INFORMATION CORRECTLY, PLEASE CHECK THE TOKEN.")})).catch((function(e){console.log("err",e),r(e)}))}))}return Promise.resolve()}function retryByError(e,t,n,r){return _retryByError.apply(this,arguments)}function _retryByError(){return(_retryByError=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(t,n,r,i){return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:case 15:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!--n||!r(e.t0)){e.next=12;break}return e.abrupt("return",retryByError(t,n,r,i));case 12:if(!i||"function"!=typeof i){e.next=16;break}return e.next=15,i(e.t0);case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var formatDemotePriority=function(e){return(null==e?void 0:e.length)&&e.reduce((function(t,n,r){return t[n]={next:r+1>=e.length?null:e[r+1],pre:0===r?null:e[r-1]},t}),{})},getDefinitionInfo=function(e,t){if(!e||!e.Definition&&!e.Quality)return{definition:"240P"};var n=e.Definition||e.Quality;if(t){var r=t[n];return r?"string"==typeof r?{definition:r}:_objectSpread2$5({},r||{}):{definition:n}}return{definition:n}},IntervalTimer=function(){function e(){_classCallCheck$5(this,e),this.timeID=null,this.func=null}return _createClass$6(e,[{key:"repeat",value:function(e,t){this.timeID=1,this.repeatInterval(e,t)}},{key:"repeatInterval",value:function(e,t){var n=this;this.timeID&&(null===this.func&&(this.func=e),this.func===e&&(this.timeID&&clearTimeout(this.timeID),this.timeID=null,this.timeID=setTimeout((function(){e(),n.repeatInterval(e,t)}),t)))}},{key:"clear",value:function(){clearTimeout(this.timeID),this.timeID=null}}]),e}(),XHR=_createClass$6((function e(t){var n=t.url,r=t.method,i=void 0===r?"GET":r,o=t.type,a=t.timeout,s=void 0===a?1e4:a,c=t.body,l=t.xhrSetup,u=t.cache,d=void 0===u||u;return _classCallCheck$5(this,e),new Promise((function(e,t){var r=new window.XMLHttpRequest,a=i.toUpperCase();if("GET"!==a&&"POST"!==a&&"HEAD"!==a)throw new Error("XHR ".concat(a," is not allowed"));if(o&&(r.responseType=o),s&&(r.timeout=s),r.onload=function(){200===r.status||206===r.status?e(r):t(r)},r.onerror=function(){t(r)},r.ontimeout=function(){t(r)},r.onabort=function(){t(r)},"GET"===a&&!d){var u=/\?/gi.test(n)?"&":"?";n+="".concat(u,"_=").concat((new Date).getTime())}if(r.open(a,"".concat(n),!0),l)try{l(r,n)}catch(h){console.error("xhr setup failure: ".concat(h.stack||h.message))}switch(a){case"POST":"text"===o&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(c);break;case"GET":case"HEAD":r.send()}}))})),isHls=function(e){return e&&0<e.toLowerCase().indexOf(".m3u8")},isMp4=function(e){return e&&0<e.toLowerCase().indexOf(".mp4")},isFlv=function(e){return e&&0<e.toLowerCase().indexOf(".flv")},isRtm=function(e){return e&&0<e.toLowerCase().indexOf(".sdp")},isDash=function(e){return e&&0<e.toLowerCase().indexOf(".mpd")},getStreamType=function(e){return isHls(e)?"hls":isFlv(e)?"flv":isRtm(e)?"rtm":isMp4(e)?"mp4":isDash(e)?"dash":"mp4"},retPromise$1=function(e){return e&&e.then?e:new Promise((function(e){e(null)}))},addUrlParam=function(e,t){if(!t)return e;var n=Object.entries(t).map((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(null!=r?r:"")})).join("&");return e+(-1===e.indexOf("?")?"?":"&")+n},getPluginConfig=function(e,t){var n;if(t&&e)return Object.keys(e).map((function(r){r.toLowerCase()===t.toLowerCase()&&(n=e[r])})),n},handleIcons=function(e){var t={};return e&&Object.entries(e).forEach((function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];i&&"string"!=typeof i&&(t[r]=i)})),t},isHevcSupported=function(){var e=window.navigator.userAgent.toLocaleLowerCase(),t=/(iphone)/.test(e)||/(ipad)/.test(e),n=/(quark)/.test(e);return!!(t&&!n||window.MediaSource&&window.MediaSource.isTypeSupported&&(window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')))};function isBase64(e){return/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)}function getLang(){var e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return"zh-cn"===e&&(e="zh"),e}function exeFunTimeoutWarn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=setTimeout((function(){n&&console.warn(n),r=null}),t);return e.then?e.then((function(){return clearTimeout(r)})):(clearTimeout(r),r=null),e}function isUrl(e){return!!e&&e.indexOf&&/^(?:http|data:|\/)/.test(e)}function retry(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(r,i){e().then(r).catch((function(o){setTimeout((function(){1!==t?retry(e,t-1,n).then(r,i):i(o)}),n)}))}))}function isMSESupport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(!window.MediaSource)return!1;try{return window.MediaSource.isTypeSupported(e)}catch(error){return console.error("mse error",error),!1}}var matchHtmlRegExp=/["'&<>]/,_PLATFORM_API;function escapeHtml(e){var t,n=""+e,r=matchHtmlRegExp.exec(n);if(!r)return n;var i,o="",a=0;for(i=r.index;i<n.length;i++){switch(n.charCodeAt(i)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==i&&(o+=n.substring(a,i)),a=i+1,o+=t}return a!==i?o+n.substring(a,i):o}var PlatformEnum=function(e){return e.VOLC_ENGINE="volcengine",e.BYTE_PLUS="byteplus",e}(PlatformEnum||{}),PLATFORM_API=(_PLATFORM_API={},_defineProperty$6(_PLATFORM_API,"volcengine",{playDomain:"//vod.volcengineapi.com",backupPlayDomain:"//open.volcengineapi.com",licenseUrl:"https://webmedia.zijieapi.com/video/drm/v1/play_licenses",keyDomain:"https://kds.bytedance.com"}),_defineProperty$6(_PLATFORM_API,"byteplus",{playDomain:"//vod.byteplusapi.com",licenseUrl:"https://webmedia.zijieapi.com/video/drm/v1/play_licenses",keyDomain:"https://kds.bytedance.com"}),_PLATFORM_API),_excluded$2=["options","type","isLive","id","root","plugins","defaultConfig","languages","url","codec","playList","streamType","isMobile","useSoftDecoding","enableH265Degrade","checkExpireInterval","expireDetectType","onMediaExpired","onTokenExpired","platform","unionId","isMusic"],PlayerData=function(){function e(t){_classCallCheck$5(this,e),this.id="",this.type="",this.isLive=!1,this.options=null,this.isMobile=!1,this.playList=[],this.plugins=[],this.openSoftDecoding=!1,this.current={lineId:0,language:"",definition:"",streamType:"",codec:void 0};var n=t.options,r=t.type,i=t.isLive,o=t.id,a=t.root,s=t.plugins,c=void 0===s?[]:s,l=t.defaultConfig,u=t.languages;t.url;var d=t.codec;t.playList,t.streamType;var h=t.isMobile,f=void 0!==h&&h,p=t.useSoftDecoding,g=void 0!==p&&p,y=t.enableH265Degrade,v=void 0!==y&&y,m=t.checkExpireInterval,_=void 0===m?400:m,b=t.expireDetectType,E=void 0===b?[]:b,S=t.onMediaExpired,T=t.onTokenExpired,w=t.platform,O=t.unionId,k=t.isMusic,C=void 0!==k&&k,$=_objectWithoutProperties$1(t,_excluded$2);this.configs=t,this.options=Object.assign({},n,$),this.options.poster="string"==typeof this.options.poster?escapeHtml(this.options.poster):void 0,this.options.icons=handleIcons(this.options.icons),this.id=o,this.root=a,this.type=r,this.isLive=!!(null!=i?i:"live"===r),this.defaultConfig=l,this.languageData=this.initI18nData(u),this.isMobile=f||"mobile"===sniffer$1.device,this.openSoftDecoding=g,this.enableH265Degrade=v,this.codec=d,this.checkExpireInterval=_,this.expireDetectType=E,this.onMediaExpired=S,this.onTokenExpired=T,this.initPlayData(t),this.current=MyProxy$1.observe(this.current),this.playList=MyProxy$1.observe(this.playList),this.plugins=_toConsumableArray$1(c),this.isMusic=C,this.platform=w,this.unionId=O,this.apiMap=Object.values(PlatformEnum).includes(this.platform)?PLATFORM_API[this.platform]:PLATFORM_API[PlatformEnum.VOLC_ENGINE]}return _createClass$6(e,[{key:"initPlayData",value:function(e){var t=this.initPlaylistAndGetCurrent(e);this.initCurrent(t)}},{key:"initPlaylistAndGetCurrent",value:function(e){var t,n=e.url,r=e.playList,i=e.streamType,o=void 0===i?"":i,a=null;if(r&&(this.playList=_toConsumableArray$1(r)),n)if(0===this.playList.length)this.playList=[_objectSpread2$5(_objectSpread2$5({},this.current),{},{url:n,streamType:o})];else{var s=this.getUrlList({url:n});s.length>0?a=s[0]:console.log("\u9ed8\u8ba4url\u4e0d\u5728Playlist\u4e2d")}var c=this.getCurrentByDefaultConfig();return c&&(a=c),null!==(t=a)&&void 0!==t?t:this.playList[0]}},{key:"isCurrentH265",value:function(){return!!this.codec&&this.codec.replace(".","").toLowerCase()===CodecType.H265}},{key:"getCurrentByDefaultConfig",value:function(){if(this.defaultConfig){var e=this.defaultConfig,t=e.type,n=e.isLive,r=e.lineId,i=void 0===r?"":r,o=e.definition,a=void 0===o?"":o;if((null!=n?n:"live"===t)===this.isLive){if(!i&&!a)return console.log("\u9ed8\u8ba4\u914d\u7f6e\u672a\u8bbe\u7f6e\u9ed8\u8ba4\u7ebf\u8def\u6216\u9ed8\u8ba4\u6e05\u6670\u5ea6"),void(this.isHitDefault=!1);var s=this.getUrlList({lineId:i,definition:a});return s.length>0?(this.isHitDefault=!0,s[0]):(console.log("playlist\u4e2d\u6ca1\u6709\u6ee1\u8db3\u9ed8\u8ba4\u914d\u7f6e\u7684\u6d41"),void(this.isHitDefault=!1))}}}},{key:"initCurrent",value:function(e){var t=this;Object.keys(this.current).forEach((function(n){t.current[n]=null==e?void 0:e[n]}));var n=(null==e?void 0:e.codec)||(null==e?void 0:e.Codec);n&&1===this.playList.length&&(this.codec=n)}},{key:"initI18nData",value:function(e){var t=[jp$1,zhHk],n=e&&Object.entries(e).reduce((function(e,n){var r=_slicedToArray(n,2),i=r[0],o=r[1];return PLAYER_LANGS.includes(i)?e.push({LANG:"zh"===i?"zh-cn":i,TEXT:o}):t.push({LANG:i,TEXT:o}),e}),[]);return{extraLangList:t,extendLangList:n}}},{key:"getCurrentUrl",value:function(){var e;return null===(e=this.getCurrentStreams()[0])||void 0===e?void 0:e.url}},{key:"getCurrentStreamType",value:function(){var e=this.getCurrentStreams();if(e.length){var t=e[0],n=t.url;return t.streamType||getStreamType(n)}return this.configs.streamType}},{key:"getCurrentStreams",value:function(){var e=this.current;return this.getUrlList(e)}},{key:"getLineList",value:function(){return cloneDeep(uniqBy(this.playList,"lineId"))}},{key:"getLineListByLineId",value:function(e){return this.playList.filter((function(t){var n;return(null==e?void 0:e.toString())===(null===(n=t.lineId)||void 0===n?void 0:n.toString())}))}},{key:"getDefinitionListByLineId",value:function(e){return cloneDeep(uniqBy(this.getLineListByLineId(e),"definition"))}},{key:"getUrlList",value:function(e){return this.playList.filter((function(t){return Object.keys(e).every((function(n){var r,i,o=(null===(r=e[n])||void 0===r?void 0:r.toString())===(null===(i=t[n])||void 0===i?void 0:i.toString()),a=!e[n];return o||a}))}))}},{key:"getNextDefinition",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1?arguments[1]:void 0,i=n?"next":"prev",o=this.current,a=o.definition,s=o.lineId;if(a){var c=null===(e=this.getCurrentStreams())||void 0===e?void 0:e[0],l="auto"===a?c.mapDefinition:a,u=formatDemotePriority(r)||DefinitionLinked,d=Object.keys(u);if(d.includes(l)){for(var h=null===(t=u[l])||void 0===t?void 0:t[i],f=this.getDefinitionListByLineId(s);0===f.filter((function(e){return e.definition===h})).length&&h;){var p;h=null===(p=u[h])||void 0===p?void 0:p[i]}if(h)return"auto"===a&&h&&(c.mapDefinition=h),this.getUrlList({lineId:s,definition:h});console.log("\u5df2\u7ecf\u964d\u81f3\u6700\u4f4e\u7ea7")}}}}]),e}(),index_b={exports:{}},esnext_string_at={},$$d=_export,charAt$1=stringMultibyte.charAt,requireObjectCoercible=requireObjectCoercible$a,toIntegerOrInfinity$5=toIntegerOrInfinity$d,toString$4=toString$h;$$d({target:"String",proto:!0,forced:!0},{at:function(e){var t=toString$4(requireObjectCoercible(this)),n=t.length,r=toIntegerOrInfinity$5(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:charAt$1(t,i)}});var es_symbol={},objectGetOwnPropertyNamesExternal={},classof$4=classofRaw$2,toIndexedObject$4=toIndexedObject$c,$getOwnPropertyNames$1=objectGetOwnPropertyNames.f,arraySlice$5=arraySliceSimple,windowNames="object"==("undefined"==typeof window?"undefined":_typeof$4(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(e){try{return $getOwnPropertyNames$1(e)}catch(error){return arraySlice$5(windowNames)}};objectGetOwnPropertyNamesExternal.f=function(e){return windowNames&&"Window"==classof$4(e)?getWindowNames(e):$getOwnPropertyNames$1(toIndexedObject$4(e))};var wellKnownSymbolWrapped={},wellKnownSymbol$4=wellKnownSymbol$u;wellKnownSymbolWrapped.f=wellKnownSymbol$4;var global$g=global$H,path$1=global$g,path=path$1,hasOwn$7=hasOwnProperty_1,wrappedWellKnownSymbolModule$1=wellKnownSymbolWrapped,defineProperty$3=objectDefineProperty.f,wellKnownSymbolDefine=function(e){var t=path.Symbol||(path.Symbol={});hasOwn$7(t,e)||defineProperty$3(t,e,{value:wrappedWellKnownSymbolModule$1.f(e)})},call$5=functionCall,getBuiltIn$2=getBuiltIn$d,wellKnownSymbol$3=wellKnownSymbol$u,defineBuiltIn$3=defineBuiltIn$i,symbolDefineToPrimitive=function(){var e=getBuiltIn$2("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=wellKnownSymbol$3("toPrimitive");t&&!t[r]&&defineBuiltIn$3(t,r,(function(e){return call$5(n,this)}),{arity:1})},$$c=_export,global$f=global$H,call$4=functionCall,uncurryThis$d=functionUncurryThis,DESCRIPTORS$5=descriptors,NATIVE_SYMBOL$3=symbolConstructorDetection,fails$d=fails$L,hasOwn$6=hasOwnProperty_1,isPrototypeOf$3=objectIsPrototypeOf,anObject$1=anObject$l,toIndexedObject$3=toIndexedObject$c,toPropertyKey$1=toPropertyKey$5,$toString=toString$h,createPropertyDescriptor$1=createPropertyDescriptor$7,nativeObjectCreate=objectCreate,objectKeys$1=objectKeys$4,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertyNamesExternal=objectGetOwnPropertyNamesExternal,getOwnPropertySymbolsModule$1=objectGetOwnPropertySymbols,getOwnPropertyDescriptorModule$1=objectGetOwnPropertyDescriptor,definePropertyModule$1=objectDefineProperty,definePropertiesModule=objectDefineProperties,propertyIsEnumerableModule=objectPropertyIsEnumerable,defineBuiltIn$2=defineBuiltIn$i,shared$2=shared$7.exports,sharedKey=sharedKey$4,hiddenKeys=hiddenKeys$5,uid$1=uid$4,wellKnownSymbol$2=wellKnownSymbol$u,wrappedWellKnownSymbolModule=wellKnownSymbolWrapped,defineWellKnownSymbol=wellKnownSymbolDefine,defineSymbolToPrimitive=symbolDefineToPrimitive,setToStringTag$1=setToStringTag$7,InternalStateModule$3=internalState,$forEach$1=arrayIteration.forEach,HIDDEN=sharedKey("hidden"),SYMBOL="Symbol",PROTOTYPE$1="prototype",setInternalState$2=InternalStateModule$3.set,getInternalState$3=InternalStateModule$3.getterFor(SYMBOL),ObjectPrototype$3=Object[PROTOTYPE$1],$Symbol=global$f.Symbol,SymbolPrototype$1=$Symbol&&$Symbol[PROTOTYPE$1],TypeError$2=global$f.TypeError,QObject=global$f.QObject,nativeGetOwnPropertyDescriptor$1=getOwnPropertyDescriptorModule$1.f,nativeDefineProperty$1=definePropertyModule$1.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule.f,push$2=uncurryThis$d([].push),AllSymbols=shared$2("symbols"),ObjectPrototypeSymbols=shared$2("op-symbols"),WellKnownSymbolsStore=shared$2("wks"),USE_SETTER=!QObject||!QObject[PROTOTYPE$1]||!QObject[PROTOTYPE$1].findChild,setSymbolDescriptor=DESCRIPTORS$5&&fails$d((function(){return 7!=nativeObjectCreate(nativeDefineProperty$1({},"a",{get:function(){return nativeDefineProperty$1(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=nativeGetOwnPropertyDescriptor$1(ObjectPrototype$3,t);r&&delete ObjectPrototype$3[t],nativeDefineProperty$1(e,t,n),r&&e!==ObjectPrototype$3&&nativeDefineProperty$1(ObjectPrototype$3,t,r)}:nativeDefineProperty$1,wrap$1=function(e,t){var n=AllSymbols[e]=nativeObjectCreate(SymbolPrototype$1);return setInternalState$2(n,{type:SYMBOL,tag:e,description:t}),DESCRIPTORS$5||(n.description=t),n},$defineProperty=function e(t,n,r){t===ObjectPrototype$3&&e(ObjectPrototypeSymbols,n,r),anObject$1(t);var i=toPropertyKey$1(n);return anObject$1(r),hasOwn$6(AllSymbols,i)?(r.enumerable?(hasOwn$6(t,HIDDEN)&&t[HIDDEN][i]&&(t[HIDDEN][i]=!1),r=nativeObjectCreate(r,{enumerable:createPropertyDescriptor$1(0,!1)})):(hasOwn$6(t,HIDDEN)||nativeDefineProperty$1(t,HIDDEN,createPropertyDescriptor$1(1,{})),t[HIDDEN][i]=!0),setSymbolDescriptor(t,i,r)):nativeDefineProperty$1(t,i,r)},$defineProperties=function(e,t){anObject$1(e);var n=toIndexedObject$3(t),r=objectKeys$1(n).concat($getOwnPropertySymbols(n));return $forEach$1(r,(function(t){DESCRIPTORS$5&&!call$4($propertyIsEnumerable$1,n,t)||$defineProperty(e,t,n[t])})),e},$create=function(e,t){return void 0===t?nativeObjectCreate(e):$defineProperties(nativeObjectCreate(e),t)},$propertyIsEnumerable$1=function(e){var t=toPropertyKey$1(e),n=call$4(nativePropertyIsEnumerable,this,t);return!(this===ObjectPrototype$3&&hasOwn$6(AllSymbols,t)&&!hasOwn$6(ObjectPrototypeSymbols,t))&&(!(n||!hasOwn$6(this,t)||!hasOwn$6(AllSymbols,t)||hasOwn$6(this,HIDDEN)&&this[HIDDEN][t])||n)},$getOwnPropertyDescriptor=function(e,t){var n=toIndexedObject$3(e),r=toPropertyKey$1(t);if(n!==ObjectPrototype$3||!hasOwn$6(AllSymbols,r)||hasOwn$6(ObjectPrototypeSymbols,r)){var i=nativeGetOwnPropertyDescriptor$1(n,r);return!i||!hasOwn$6(AllSymbols,r)||hasOwn$6(n,HIDDEN)&&n[HIDDEN][r]||(i.enumerable=!0),i}},$getOwnPropertyNames=function(e){var t=nativeGetOwnPropertyNames(toIndexedObject$3(e)),n=[];return $forEach$1(t,(function(e){hasOwn$6(AllSymbols,e)||hasOwn$6(hiddenKeys,e)||push$2(n,e)})),n},$getOwnPropertySymbols=function(e){var t=e===ObjectPrototype$3,n=nativeGetOwnPropertyNames(t?ObjectPrototypeSymbols:toIndexedObject$3(e)),r=[];return $forEach$1(n,(function(e){!hasOwn$6(AllSymbols,e)||t&&!hasOwn$6(ObjectPrototype$3,e)||push$2(r,AllSymbols[e])})),r};NATIVE_SYMBOL$3||($Symbol=function(){if(isPrototypeOf$3(SymbolPrototype$1,this))throw TypeError$2("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?$toString(arguments[0]):void 0,t=uid$1(e),n=function e(n){this===ObjectPrototype$3&&call$4(e,ObjectPrototypeSymbols,n),hasOwn$6(this,HIDDEN)&&hasOwn$6(this[HIDDEN],t)&&(this[HIDDEN][t]=!1),setSymbolDescriptor(this,t,createPropertyDescriptor$1(1,n))};return DESCRIPTORS$5&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype$3,t,{configurable:!0,set:n}),wrap$1(t,e)},SymbolPrototype$1=$Symbol[PROTOTYPE$1],defineBuiltIn$2(SymbolPrototype$1,"toString",(function(){return getInternalState$3(this).tag})),defineBuiltIn$2($Symbol,"withoutSetter",(function(e){return wrap$1(uid$1(e),e)})),propertyIsEnumerableModule.f=$propertyIsEnumerable$1,definePropertyModule$1.f=$defineProperty,definePropertiesModule.f=$defineProperties,getOwnPropertyDescriptorModule$1.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule$1.f=$getOwnPropertySymbols,wrappedWellKnownSymbolModule.f=function(e){return wrap$1(wellKnownSymbol$2(e),e)},DESCRIPTORS$5&&(nativeDefineProperty$1(SymbolPrototype$1,"description",{configurable:!0,get:function(){return getInternalState$3(this).description}}),defineBuiltIn$2(ObjectPrototype$3,"propertyIsEnumerable",$propertyIsEnumerable$1,{unsafe:!0}))),$$c({global:!0,constructor:!0,wrap:!0,forced:!NATIVE_SYMBOL$3,sham:!NATIVE_SYMBOL$3},{Symbol:$Symbol}),$forEach$1(objectKeys$1(WellKnownSymbolsStore),(function(e){defineWellKnownSymbol(e)})),$$c({target:SYMBOL,stat:!0,forced:!NATIVE_SYMBOL$3},{useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),$$c({target:"Object",stat:!0,forced:!NATIVE_SYMBOL$3,sham:!DESCRIPTORS$5},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),$$c({target:"Object",stat:!0,forced:!NATIVE_SYMBOL$3},{getOwnPropertyNames:$getOwnPropertyNames}),defineSymbolToPrimitive(),setToStringTag$1($Symbol,SYMBOL),hiddenKeys[HIDDEN]=!0;var NATIVE_SYMBOL$2=symbolConstructorDetection,symbolRegistryDetection=NATIVE_SYMBOL$2&&!!Symbol.for&&!!Symbol.keyFor,$$b=_export,getBuiltIn$1=getBuiltIn$d,hasOwn$5=hasOwnProperty_1,toString$3=toString$h,shared$1=shared$7.exports,NATIVE_SYMBOL_REGISTRY$1=symbolRegistryDetection,StringToSymbolRegistry=shared$1("string-to-symbol-registry"),SymbolToStringRegistry$1=shared$1("symbol-to-string-registry");$$b({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY$1},{for:function(e){var t=toString$3(e);if(hasOwn$5(StringToSymbolRegistry,t))return StringToSymbolRegistry[t];var n=getBuiltIn$1("Symbol")(t);return StringToSymbolRegistry[t]=n,SymbolToStringRegistry$1[n]=t,n}});var $$a=_export,hasOwn$4=hasOwnProperty_1,isSymbol$1=isSymbol$6,tryToString$1=tryToString$7,shared=shared$7.exports,NATIVE_SYMBOL_REGISTRY=symbolRegistryDetection,SymbolToStringRegistry=shared("symbol-to-string-registry");$$a({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY},{keyFor:function(e){if(!isSymbol$1(e))throw TypeError(tryToString$1(e)+" is not a symbol");if(hasOwn$4(SymbolToStringRegistry,e))return SymbolToStringRegistry[e]}});var $$9=_export,NATIVE_SYMBOL$1=symbolConstructorDetection,fails$c=fails$L,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,toObject$6=toObject$h,FORCED$5=!NATIVE_SYMBOL$1||fails$c((function(){getOwnPropertySymbolsModule.f(1)}));$$9({target:"Object",stat:!0,forced:FORCED$5},{getOwnPropertySymbols:function(e){var t=getOwnPropertySymbolsModule.f;return t?t(toObject$6(e)):[]}});var es_symbol_description={},$$8=_export,DESCRIPTORS$4=descriptors,global$e=global$H,uncurryThis$c=functionUncurryThis,hasOwn$3=hasOwnProperty_1,isCallable$2=isCallable$u,isPrototypeOf$2=objectIsPrototypeOf,toString$2=toString$h,defineProperty$2=objectDefineProperty.f,copyConstructorProperties=copyConstructorProperties$2,NativeSymbol=global$e.Symbol,SymbolPrototype=NativeSymbol&&NativeSymbol.prototype;if(DESCRIPTORS$4&&isCallable$2(NativeSymbol)&&(!("description"in SymbolPrototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:toString$2(arguments[0]),t=isPrototypeOf$2(SymbolPrototype,this)?new NativeSymbol(e):void 0===e?NativeSymbol():NativeSymbol(e);return""===e&&(EmptyStringDescriptionStore[t]=!0),t};copyConstructorProperties(SymbolWrapper,NativeSymbol),SymbolWrapper.prototype=SymbolPrototype,SymbolPrototype.constructor=SymbolWrapper;var NATIVE_SYMBOL="Symbol(test)"==String(NativeSymbol("test")),thisSymbolValue=uncurryThis$c(SymbolPrototype.valueOf),symbolDescriptiveString=uncurryThis$c(SymbolPrototype.toString),regexp=/^Symbol\((.*)\)[^)]+$/,replace=uncurryThis$c("".replace),stringSlice=uncurryThis$c("".slice);defineProperty$2(SymbolPrototype,"description",{configurable:!0,get:function(){var e=thisSymbolValue(this);if(hasOwn$3(EmptyStringDescriptionStore,e))return"";var t=symbolDescriptiveString(e),n=NATIVE_SYMBOL?stringSlice(t,7,-1):replace(t,regexp,"$1");return""===n?void 0:n}}),$$8({global:!0,constructor:!0,forced:!0},{Symbol:SymbolWrapper})}!function(module,exports){var t;t=function t(){var _assign=function(){return(_assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function __values(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}var Hook=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function r(i){t(i),n.off(e,r)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&__spread(this._hooks[e]).forEach((function(e){try{e(t)}catch(n){}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),isObject$1=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},isNumber=function(e){return"number"==typeof e&&!isNaN(e)},isString=function(e){return"string"==typeof e},isArray=function(e){return Array.isArray(e)},getIndex=(lastEventId=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return lastEventId+=1}),lastEventId,decrypto=function(e,t,n){if("string"==typeof e&&"number"==typeof t&&"number"==typeof n){var r,i=[];n=n<=25?n:n%25;var o=String.fromCharCode(n+97);r=e.split(o);for(var a=0;a<r.length;a++){var s=parseInt(r[a],n);s=1*s^t;var c=String.fromCharCode(s);i.push(c)}return i.join("")}},decodeUrl=function(e){return decrypto(e,64,25)},beforePageUnload=function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},getIframeUrl=function(){try{return JSON.parse(atob(window.name))||void 0}catch(e2){return}},loadScript=function(e,t,n){var r=document.createElement("script");r.src=e,r.onerror=function(){n(e)},r.onload=function(){t()},document.getElementsByTagName("head")[0].appendChild(r)},isSupVisChange=function(){var e=0;return["hidden","msHidden","webkitHidden"].forEach((function(t){void 0!==document[t]&&(e=1)})),e},selfAdjust=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,r=Date.now()+t;return n=window.setTimeout((function i(){var o=Date.now()-r;e(),r+=t,n=window.setTimeout(i,Math.max(0,t-o))}),t),function(){window.clearTimeout(n)}},parseURL=function(e){var t=document.createElement("a");return t.href=e,t},parseUrlQuery=function(e){var t={};try{var n=parseURL(e).search;if(!n)return t;(n=n.slice(1)).split("&").forEach((function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(o){t[n]=r}}))}catch(r){}return t},hashCode=function(e){for(var t=0,n=0,r=(e+="").length,i=0;i<r;i++)((t=31*t+e.charCodeAt(n++))>0x7fffffffffff||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var js_cookie=createCommonjsModule((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(l){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(r.read||r)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(u){}if(i[l]=c,e===l)break}catch(u){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},e.exports=n()})),_getCookie=function(e,t){try{return e?js_cookie.get(e,{domain:t||document.domain}):js_cookie.get()}catch(n){return""}},_setCookie=function(e,t,n,r){try{var i=r||document.domain,o=+new Date+(n||6048e5);js_cookie.set(e,t,{expires:new Date(o),path:"/",domain:i})}catch(a){}},Memory=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return _getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){_setCookie(e,t,n,r)},e}();function isSupportLS(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e2){return!1}}function isSupportSession(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e2){return!1}}var local={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(r){}return n||{}}catch(r){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(r){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){}},getCookie:function(e,t){return _getCookie(e,t)},setCookie:function(e,t,n,r){_setCookie(e,t,n,r)},isSupportLS:isSupportLS()},session={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(r){}return n||{}}catch(r){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(r){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(t){}},getCookie:function(e,t){return _getCookie(e,t)},setCookie:function(e,t,n,r){_setCookie(e,t,n,r)},isSupportSession:isSupportSession()},Storage=function(){function e(e,t){this._storage=t&&"session"===t?session:!e&&local.isSupportLS?local:new Memory}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){this._storage.setCookie(e,t,n,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),UTM=function(e,t,n,r){var i=new Storage(!1),o=new Storage(!1,"session"),a=e?"_tea_utm_cache_"+e:"_tea_utm_cache",s=e?"_$utm_from_url_"+e:"_$utm_from_url",c={},l=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],u={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var d=!1;for(var h in u)u[h]&&(-1!==l.indexOf(h)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[h]=u[h]):c[h]=u[h],d=!0);if(d)o.setItem(s,"1"),i.setCookie(a,JSON.stringify(c),r,n);else{var f=i.getCookie(a,n);f&&(c=JSON.parse(f))}o.getItem(s)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch(p){return u}return c},Client=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,r=n?parseURL(n).hostname:"",i=parseUrlQuery(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=UTM(this.appid,i,this.domain,this.cookie_expire);var a=this.browser(),s=this.os();return{browser:a.browser,browser_version:a.browser_version,platform:o,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:n,referrer_host:r,utm:this.utm,latest_data:this.last(n,r)}},e.prototype.last=function(e,t){var n="",r="",i="",o=location.hostname,a=!1;if(e&&t&&o!==t){n=e,r=t,a=!0;var s=parseUrlQuery(e);s.keyword&&(i=s.keyword)}return{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:i,isLast:a}},e.prototype.browser=function(){var e,t,n="",r=""+parseFloat(this.appVersion),i=this.userAgent;return-1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(n="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),r=i.substring(e+5)):(e=i.indexOf("Edg"),r=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!==(e=i.indexOf("Lark"))?(n="Lark",r=i.substring(e+5,e+11)):-1!==(e=i.indexOf("MetaSr"))?(n="sougoubrowser",r=i.substring(e+7,e+10)):-1!==i.indexOf("MQQBrowser")||-1!==i.indexOf("QQBrowser")?(n="qqbrowser",-1!==i.indexOf("MQQBrowser")?(e=i.indexOf("MQQBrowser"),r=i.substring(e+11,e+15)):-1!==i.indexOf("QQBrowser")&&(e=i.indexOf("QQBrowser"),r=i.substring(e+10,e+17))):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("MicroMessenger"))?(n="weixin",r=i.substring(e+15,e+20)):-1!==(e=i.indexOf("360"))?(n="360browser",r=i.substring(i.indexOf("Chrome")+7)):-1!==i.indexOf("baidubrowser")||-1!==i.indexOf("BIDUBrowser")?(-1!==i.indexOf("baidubrowser")?(e=i.indexOf("baidubrowser"),r=i.substring(e+13,e+16)):-1!==i.indexOf("BIDUBrowser")&&(e=i.indexOf("BIDUBrowser"),r=i.substring(e+12,e+15)),n="baidubrowser"):-1!==(e=i.indexOf("xiaomi"))?-1!==i.indexOf("openlanguagexiaomi")?(n="openlanguage xiaomi",r=i.substring(e+7,e+13)):(n="xiaomi",r=i.substring(e-7,e-1)):-1!==(e=i.indexOf("TTWebView"))?(n="TTWebView",r=i.substring(e+10,e+23)):(-1!==(e=i.indexOf("Chrome"))||-1!==(e=i.indexOf("Chrome")))&&(n="Chrome",r=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("QQ"))?(n="qqbrowser",r=i.substring(e+10,e+16)):-1!==(e=i.indexOf("Safari"))&&(n="Safari",r=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))?(n="Firefox",r=i.substring(e+8)):-1!==(e=i.indexOf("MicroMessenger"))?(n="weixin",r=i.substring(e+15,e+20)):-1!==(e=i.indexOf("QQ"))&&(n="qqbrowser",r=i.substring(e+3,e+8)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(")"))&&(r=r.substring(0,t)),{browser:n,browser_version:r}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],r=0;r<n.length;r++){var i=n[r];if(i.r.test(this.userAgent)){"Mac OS X"===(e=i.s)&&this.isNewIpad()&&(e="iOS");break}}var o,a,s=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(a=s(/Android ([\.\_\d]+)/,o=this.userAgent))||(a=s(/Android\/([\.\_\d]+)/,o)),t=a,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios"}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),r=n.indexOf(";");t=n.slice(0,r)}}catch(i){return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),LOG;LOG={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"};var AB_DOMAINS={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},LOG_URL=LOG,SDK_VERSION="5.0.38",SDK_USE_TYPE="npm",SDK_TYPE=SDK_USE_TYPE,VISUAL_EDITOR_RANGERS="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-editor-rangers.js",VISUAL_AB_CORE="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-core.js",VISUAL_AB_LOADER="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-loader.js",HOT_PIC_URL="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/heatmap-core",VISUAL_URL_INSPECTOR="https://lf3-data.volccdn.com/obj/data-static/log-sdk/collect/tester-event-inspector",EventCheck=function(){function e(e,t){this.collector=e,this.config=t,this.eventNameWhiteList=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure"],this.paramsNameWhiteList=["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time","_staging_flag"],this.regStr=new RegExp("^[a-zA-Z0-9][a-z0-9A-Z_.-]{1,255}$")}return e.prototype.checkVerify=function(e){var t=this;if(!e||!e.length)return!1;var n=e[0];if(!n)return!1;var r=n.events,i=n.header;if(!r||!r.length)return!1;var o=!0;return r.forEach((function(e){if(!e)return o=!1,void(e.checkEvent="\u4e8b\u4ef6\u5f02\u5e38");t.checkEventName(e.event)||(o=!1,e.checkEvent="\u4e8b\u4ef6\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934"),t.checkEventParams(e.params)||(o=!1,e.checkParams="\u5c5e\u6027\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934")})),this.checkEventParams(i)||(o=!1),o},e.prototype.checkEventName=function(e){return!!e&&this.calculate(e,"event")},e.prototype.checkEventParams=function(e){var t=e;if("string"==typeof e&&(t=JSON.parse(t)),!Object.keys(t).length)return!0;for(var n in t)return!(!this.calculate(n,"params")||"string"==typeof t[n]&&t[n].length>1024&&(console.warn("params: "+n+" can not over 1024 byte, please check;"),1));return!0},e.prototype.calculate=function(e,t){return-1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||!new RegExp("^\\$").test(e)&&!new RegExp("^__").test(e)||(console.warn(("event"===t?"event":"params")+" name: "+e+" can not start with $ or __, pleace check;"),!1)},e}(),Types,DebuggerMesssge$1,e,e2;e=Types||(Types={}),e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.AbTimeout="ab-timeout",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e.sessionRecord="session-record",e.SessionRecordStart="session-record-start",e.SessionRecordPause="session-record-pause",e.SessionRecordEnd="session-record-end",e.SessionRecordReport="session-record-report",e2=DebuggerMesssge$1||(DebuggerMesssge$1={}),e2.DEBUGGER_MESSAGE="debugger-message",e2.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e2.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e2.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e2.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e2.DEVTOOL_WEB_READY="devtool-web-ready";var Types$1=Types,undef=void 0,date=new Date,timeZoneMin=date.getTimezoneOffset(),timezone=parseInt(""+-timeZoneMin/60,10),tz_offset=60*timeZoneMin,WEBID_URL="/webid",TOB_URL="/tobid",REPORT_URL="/list",EXPIRE_TIME=7776e6,ConfigManager=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new Client(t.app_id,t.cookie_domain||"",t.cookie_expire||EXPIRE_TIME).init();this.eventCheck=new EventCheck(e,t);var r="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new Storage(!1,"session"),this.localStorage=new Storage(!1,"local"),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var i=this.localStorage.getItem(r);i&&1==i?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(r,"1")),this.envInfo={user:{user_unique_id:undef,user_type:undef,user_id:undef,user_is_auth:undef,user_is_login:undef,device_id:undef,web_id:undef,ip_addr_id:undef,user_unique_id_type:undef},header:{app_id:undef,app_name:undef,app_install_id:undef,install_id:undef,app_package:undef,app_channel:undef,app_version:undef,ab_version:undef,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:undef,traffic_type:undef,client_ip:undef,device_brand:undef,os_api:undef,access:undef,language:n.language,region:undef,app_language:undef,app_region:undef,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:undef,rnd:undef,platform:n.platform,sdk_version:SDK_VERSION,sdk_lib:"js",province:undef,city:undef,timezone:timezone,tz_offset:tz_offset,tz_name:undef,sim_region:undef,carrier:undef,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{},wechat_unionid:undef,wechat_openid:undef}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return e.prototype.initDomain=function(){var e=this.initConfig.channel_domain;if(e)this.domain=e;else{var t=this.initConfig.channel;this.domain=decodeUrl(LOG_URL[t])}},e.prototype.setDomain=function(e){this.domain=e},e.prototype.getDomain=function(){return this.domain},e.prototype.initABData=function(){var e="__tea_sdk_ab_version_"+this.initConfig.app_id,t=null;if(this.initConfig.ab_cross){var n=this.localStorage.getCookie(e,this.initConfig.ab_cookie_domain);t=n?JSON.parse(n):null}else t=this.localStorage.getItem(e);this.setAbCache(t)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||REPORT_URL;break;case"webid":t=WEBID_URL;break;case"tobid":t=TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version="+SDK_VERSION+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){void 0!==e[n]&&null!==e[n]||t.delete(n);try{t.eventCheck.calculate(n,"config")}catch(a){}if("traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=_assign({},t.evtParams||{},e.evtParams||{});else if("_staging_flag"===n)t.evtParams=_assign({},t.evtParams||{},{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var r="",i="";if(n.indexOf(".")>-1){var o=n.split(".");r=o[0],i=o[1]}r?"user"===r||"header"===r?t.envInfo[r][i]=e[n]:t.envInfo.header.custom[i]=e[n]:Object.hasOwnProperty.call(t.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):Object.hasOwnProperty.call(t.envInfo.header,n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(t){console.log("get config stringify error "),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(r){console.log("setStore error"),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:r.message})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(t){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(n){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:n.message}),console.log("delete error")}},e}(),Logger=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("[instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("[instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),AppBridge=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(e){return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):n(!1)})):n(!1)}catch(r){console.log("AppLogBridge, error:"+JSON.stringify(r.stack)),n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch(t){console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(n){console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(t){console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(n){console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(t){console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(t){console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge\u57cb\u70b9\u4e0a\u62a5",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(n){console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(t){console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(t){console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(t){console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(t){console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(t){console.error("profileAppend error")}},e}(),ERROR={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function fetch$1(e,t,n,r,i,o,a,s,c){try{var l=new XMLHttpRequest,u=s||"POST";l.open(u,""+e,!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),a&&l.setRequestHeader("X-MCS-AppKey",""+a),r&&(l.withCredentials=!0),n&&(l.timeout=n,l.ontimeout=function(){o&&o(t,ERROR.TIMEOUT)}),l.onload=function(){if(i){var e=null;if(l.responseText){try{e=JSON.parse(l.responseText)}catch(n){e={}}i(e,t)}}},l.onerror=function(){l.abort(),o&&o(t,ERROR.XHR_ON)},c?l.send(t):l.send(JSON.stringify(t))}catch(d){}}var GIF_URL="/gif",ERROR$1={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},isSupportBeacon=function(){return!(!window.navigator||!window.navigator.sendBeacon)},encodePayload=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return"&"===t[0]?t.slice(1):t},sendByImg=function(e,t,n,r){try{var i,o=e.match(/\/v\d\//);i=o?o[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/";var a=e.split(i)[0];if(!a)return void r(e,t,ERROR$1.NO_URL);t.forEach((function(i){var o=encodePayload(i),s=new Image(1,1);s.onload=function(){s=null,n&&n()},s.onerror=function(){s=null,r&&r(e,t,ERROR$1.IMG_ON)},s.src=""+a+GIF_URL+"?"+o}))}catch(s){r&&r(e,t,ERROR$1.IMG_CATCH,s.message)}},request=function(e,t,n,r,i,o,a,s){var c=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===c.indexOf("MSIE 8.0")&&-1===c.indexOf("MSIE 9.0")){if(a)return isSupportBeacon()?void(window.navigator.sendBeacon(e,JSON.stringify(t))?i():o(e,t,ERROR$1.BEACON_FALSE)):void sendByImg(e,t,i,o)}else sendByImg(e,t,i,o);fetch$1(e,t,n,r,i,o,"","",s)},sessionId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},Session=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new Storage(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSession||(this.setSessionId(),this.collect.on(Types$1.SessionReset,(function(){n.resetSessionId()})),this.collect.on(Types$1.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:sessionId(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:sessionId(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime)},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(){var e={sessionId:sessionId(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,e)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:sessionId(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),Event=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new EventCheck(e,t),this.cacheStorgae=new Storage(!0),this.localStorage=new Storage(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.pageId=sessionId(),this.collect.on(Types$1.Ready,(function(){n.reportAll(!1)})),this.collect.on(Types$1.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(Types$1.Event,(function(e){n.event(e)})),this.collect.on(Types$1.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(Types$1.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),beforePageUnload((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;try{var n=__spread(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var r=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),r)}}catch(i){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message})}},e.prototype.beconEvent=function(e){var t=__spread(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.destroyInstance||this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))},e.prototype.reportBecon=function(){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}},e.prototype.report=function(e){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var r;r=e.slice(n,n+this.eventLimit);var i=this.split(this.merge(r));this.send(i,t)}else i=this.split(this.merge(e)),this.send(i,t)},e.prototype.merge=function(e,t){var n=this,r=this.configManager.get(),i=r.header,o=r.user;this.config.enable_pageid&&(i.custom.page_id=this.pageId),i.custom=JSON.stringify(i.custom);var a=this.configManager.get("evtParams"),s=this.configManager.get("user_unique_id_type"),c=e.map((function(e){try{Object.keys(a).length&&!t&&(e.params=_assign({},a,e.params)),s&&(e.params.$user_unique_id_type=s);var r=n.configManager.getAbCache();return r&&r.uuid&&r.uuid===o.user_unique_id&&n.configManager.getAbVersion()&&(e.ab_sdk_version=n.configManager.getAbVersion()),e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(i){return n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message}),e}})),l=JSON.parse(JSON.stringify({events:c,user:o,header:i}));l.local_time=Math.floor(Date.now()/1e3),l.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,l.verbose=1;var u=[];return u.push(l),u},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var r=JSON.parse(JSON.stringify(e));n.config.filter&&((r=n.config.filter(r))||console.warn("filter must return data !!")),n.collect.eventFilter&&r&&((r=n.collect.eventFilter(r))||console.warn("filterEvent api must return data !!"));var i=r||e,o=JSON.parse(JSON.stringify(i));if(n.eventCheck.checkVerify(o),!i.length)return;n.collect.emit(Types$1.SubmitBefore,i),n.collect.emit(Types$1.SubmitVerify,i),request(n.reportUrl,i,n.timeout,n.enable_ttwebid,(function(e,t){e&&0!==e.e?(n.collect.emit(Types$1.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u5931\u8d25",time:Date.now(),data:o,code:e.e,failType:"\u6570\u636e\u5f02\u5e38",status:"fail"})):(n.collect.emit(Types$1.SubmitScuess,{eventData:t,res:e}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:o,code:200,status:"success"}))}),(function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(Types$1.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u7f51\u7edc\u5f02\u5e38",time:Date.now(),data:o,code:t,failType:"\u7f51\u7edc\u5f02\u5e38",status:"fail"})}),t,!1),n.collect.emit(Types$1.SubmitAfter,i)}catch(a){console.warn("something error, "+JSON.stringify(a.stack)),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:a.message})}})))},e}(),b=function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},localWebId=function(){return b().replace(/-/g,"").slice(0,19)},Token=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new Storage(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(Types$1.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(Types$1.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;if(this.enableCookie){var t=this.storage.getCookie(this.tokenKey,this.cookieDomain);this.cacheToken=t&&"string"==typeof t?JSON.parse(t):{}}else this.cacheToken=this.storage.getItem(this.tokenKey)||{};this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(Types$1.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(Types$1.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:localWebId(),user_unique_id:this.configManager.get("user_unique_id")||localWebId()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=parseUrlQuery(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u53d1\u8d77WEBID\u8bf7\u6c42",logType:"fetch",level:"info",time:Date.now(),data:n}),fetch$1(t,n,3e3,!1,(function(t){t&&0===t.e?e.complete({web_id:e.configManager.get("web_id")||t.web_id,user_unique_id:e.configManager.get("user_unique_id")||t.web_id}):(e.collect.emit(Types$1.TokenError),console.warn("[]appid: "+e.config.app_id+" webid error, init error~")),e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u6210\u529f",logType:"fetch",level:"info",time:Date.now(),data:t})}),(function(){e.collect.emit(Types$1.TokenError),e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u7f51\u7edc\u5f02\u5e38",logType:"fetch",level:"error",time:Date.now(),data:null}),console.warn("[]appid: "+e.config.app_id+", get webid error, init error~")}))},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types$1.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types$1.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===r)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(Types$1.TokenChange,"uuid"),this.collect.emit(Types$1.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&this.configManager.get("user_unique_id")!==this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(Types$1.TokenReset,"uuid"))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(Types$1.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(Types$1.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.enableCookie||this.enable_ttwebid?(this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain),this.enable_ttwebid&&(delete e.web_id,this.storage.setItem(this.tokenKey,e))):this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this,t=this.configManager.getUrl("tobid");return new Promise((function(n){fetch$1(t,{app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},3e4,e.enable_ttwebid,(function(e){e&&0===e.e?n(e.tobid):n("")}),(function(){n("")}))}))},e}(),AutoBase=function(e){var t=e.app_id,n=e.channel,r=e.onTokenReady,i=LOG_URL[n]+"/webid",o=new Storage(!1),a="__tea_cache_tokens_"+t,s=o.getItem(a);s&&s.web_id?r(s.web_id):request(i,{app_key:"",app_id:t,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer},3e3,!1,(function(e){if(e&&0===e.e){r(e.web_id);var t={web_id:e.web_id,user_unique_id:e.web_id,timestamp:Date.now()};o.setItem(a,t)}else r("")}),(function(){r("")}),!0)},Debugger=function(){function e(e,t){this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.collect=e,this.config=t,this.app_id=t.app_id,this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"],this.load()}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(n){console.log("devTool load fail, "+n.message)}},e.prototype.load=function(){try{this.loadBaseInfo(),this.loadHook();var e=parseUrlQuery(window.location.href);if(!e.open_devtool_web||parseInt(e.app_id)!==this.app_id)return;this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(t){console.log("debug fail, "+t.message)}},e.prototype.loadDevTool=function(){this.loadScript("https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/devtool/debug-web.js")},e.prototype.loadBaseInfo=function(){var e=this;this.info=[{title:"\u57fa\u672c\u4fe1\u606f",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,"\u4e0a\u62a5\u57df\u540d":this.collect.configManager.getDomain(),"SDK\u7248\u672c":SDK_VERSION,"SDK\u5f15\u5165\u65b9\u5f0f":SDK_TYPE}},{title:"\u7528\u6237\u4fe1\u606f",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"\u70b9\u51fb\u83b7\u53d6SSID"}},{title:"\u516c\u5171\u53c2\u6570\u4fe1\u606f",type:2,infoName:{"\u6d4f\u89c8\u5668":this.collect.configManager.get("browser"),"\u6d4f\u89c8\u5668\u7248\u672c":this.collect.configManager.get("browser_version"),"\u5e73\u53f0":this.collect.configManager.get("platform"),"\u8bbe\u5907\u578b\u53f7":this.collect.configManager.get("device_model"),"\u64cd\u4f5c\u7cfb\u7edf":this.collect.configManager.get("os_name"),"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c":this.collect.configManager.get("os_version"),"\u5c4f\u5e55\u5206\u8fa8\u7387":this.collect.configManager.get("resolution"),"\u6765\u6e90":this.collect.configManager.get("referrer"),"\u81ea\u5b9a\u4e49\u4fe1\u606f":""}},{title:"\u914d\u7f6e\u4fe1\u606f",type:3,infoName:{"\u5168\u57cb\u70b9":!!this.config.autotrack,"\u505c\u7559\u65f6\u957f":!!this.config.enable_stay_duration}},{title:"A/B\u914d\u7f6e\u4fe1\u606f",type:4,infoName:{"A/B\u5b9e\u9a8c":!!this.config.enable_ab_test}},{title:"\u5ba2\u6237\u7aef\u4fe1\u606f",type:3,infoName:{"\u6253\u901a\u5f00\u5173":!!this.config.Native}}],this.log=[],this.event=[],this.collect.on(Types$1.Ready,(function(){e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id,e.info[2].infoName["\u81ea\u5b9a\u4e49\u4fe1\u606f"]=JSON.stringify(e.collect.configManager.get("custom")),e.config.enable_ab_test&&(e.info[4].infoName["\u5df2\u66dd\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["A/B\u57df\u540d"]=e.config.ab_channel_domain||decodeUrl(AB_DOMAINS[e.config.channel]),e.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=e.collect.configManager.getAbData()),e.config.Native&&(e.info[5].infoName["\u662f\u5426\u6253\u901a"]=!!e.collect.bridgeReport)}))},e.prototype.loadHook=function(){var e=this;this.collect.on(DebuggerMesssge$1.DEBUGGER_MESSAGE,(function(t){switch(t.type){case DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.info[4].infoName["\u5df2\u66dd\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=e.collect.configManager.getAbData()):"USER"===t.secType&&(e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id),void e.updateInfo();case DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var r=t.data[0],i=r.events;if(!i.length)return;i.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.success=t.status,n.type=-1!==e.filterEvent.indexOf(n.event)?"sdk":"cus",n.type=e.collect.bridgeReport?"bridge":n.type,n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+"\uff0c msg: "+t.failType})})),e.updateEvent(r)}return}}))},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;console.log("inittttt"),e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.info[1].infoName.ssid=t.tobid,e.updateInfo()}))}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};(window.opener||window.parent).postMessage(n,this.devToolOrigin)}catch(r){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.appendChild(document.createTextNode("#debugger-applog-web {\n      position: absolute;\n      width: 90px;\n      height: 30px;\n      background: #23c243;\n      border-radius: 6px;\n      color: #fff;\n      font-size: 12px;\n      bottom: 5%;\n      right: 10%;\n      text-align: center;\n      line-height: 30px;\n      cursor: pointer;\n      z-index:100;\n    }")),e.appendChild(t);var n=document.createElement("div");n.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web">AppLog\u8c03\u8bd5</div>';var r=document.createElement("div");r.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(n),document.getElementsByTagName("body")[0].appendChild(r),document.getElementById("debugger-applog-web").addEventListener("click",(function(){(window.opener||window.parent).postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),sdk_type="base";sdk_type="full";var Collector$1=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroyInstance=!1,this.sdkReady=!1,this.adapters={},this.name=e,this.hook=new Hook,this.remotePlugin=new Map,this.Types=Types$1,this.adapters.fetch=fetch$1,this.adapters.storage=Storage}return e.usePlugin=function(t,n,r){if(n){for(var i=!1,o=0,a=e.plugins.length;o<a;o++)if(e.plugins[o].name===n){e.plugins[o].plugin=t,e.plugins[o].options=r||{},i=!0;break}i||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===sdk_type&&this.remotePlugin.get(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n=this;this.inited?console.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!"):t&&isObject$1(t)?t.app_id&&isNumber(t.app_id)?!t.app_key||isString(t.app_key)?(t.channel_domain||-1!==["cn","sg","va"].indexOf(t.channel)||(console.warn("channel must be `cn`, `sg`,`va` !!!"),t.channel="cn"),this.logger=new Logger(this.name,t.log),this.appBridge=new AppBridge(this,t.enable_native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new ConfigManager(this,t),this.debugger=new Debugger(this,t),this.initConfig=t,this.emit(Types$1.Init),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cINIT",data:t,level:"info",time:Date.now()}),t.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.set({app_id:t.app_id}),this.eventManager=new Event,this.tokenManager=new Token,this.sessionManager=new Session,Promise.all([new Promise((function(e){n.once(Types$1.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){n.once(Types$1.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var r=t.plugin,i=t.options,o=Object.assign(n.initConfig,i),a=new r;return a.apply(n,o),e.push(a),e}),n.pluginInstances)}catch(r){console.log("load plugin error, "+r.message),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:r.message})}n.sdkReady=!0,n.emit(Types$1.Ready),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u521d\u59cb\u5316\u5b8c\u6210",time:Date.now(),level:"info",data:n.configManager.get("user")}),n.logger.info("appid: "+t.app_id+", userInfo:"+JSON.stringify(n.configManager.get("user"))),n.logger.info("appid: "+t.app_id+", sdk is ready, version is "+SDK_VERSION+", you can report now !!!"),t.disable_auto_pv&&(n.disableAutoPageView=!0);try{(t.enable_ab_test||t.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(r){n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:r.message})}n.pageView(),n.on(Types$1.TokenChange,(function(e){"webid"===e&&n.pageView(),n.logger.info("appid: "+t.app_id+" token change, new userInfo:"+JSON.stringify(n.configManager.get("user"))),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u8bbe\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:n.configManager.get("user")})})),n.on(Types$1.TokenReset,(function(){n.logger.info("appid: "+t.app_id+" token reset, new userInfo:"+JSON.stringify(n.configManager.get("user"))),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u91cd\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:n.configManager.get("user")})})),n.on(Types$1.RouteChange,(function(e){e.init||t.disable_route_report||n.pageView()}));try{(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(r){}})),this.tokenManager.apply(this,t),this.eventManager.apply(this,t),this.sessionManager.apply(this,t)),this.inited=!0):console.warn("app_key param is error, must be string, please check!"):console.warn("app_id param is error, must be number, please check!"):console.warn("init params error,please check")},e.prototype.config=function(e){if(this.inited)if(e&&isObject$1(e))if(this.bridgeReport)this.appBridge.setConfig(e);else{e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv);var t=_assign({},e);if(this.initConfig&&this.initConfig.configPersist){var n=this.configManager.getStore();n&&(t=Object.assign(n,e)),this.configManager.setStore(e)}t.web_id,t.user_unique_id;var r=__rest(t,["web_id","user_unique_id"]);this.configManager.set(r),t.hasOwnProperty("web_id")&&this.emit(Types$1.ConfigWebId,t.web_id),t.hasOwnProperty("user_unique_id")&&this.emit(Types$1.ConfigUuid,t.user_unique_id),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cCONFIG",level:"info",time:Date.now(),data:t})}else console.warn("config params is error, please check");else console.warn("config must be use after function init")},e.prototype.setUserUniqueID=function(e){this.config({user_unique_id:e})},e.prototype.setHeaderInfo=function(e,t){var n={};n[e]=t,this.config(n)},e.prototype.removeHeaderInfo=function(e){var t={};t[e]=void 0,this.config(t)},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(Types$1.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.started=!0,this.emit(Types$1.Start),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cSTART",level:"info",time:Date.now()}),this.bridgeReport&&(this.pageView(),this.emit(Types$1.Ready)))},e.prototype.event=function(e,t){var n=this;try{var r=[];if(Array.isArray(e))e.forEach((function(e){var t=n.processEvent(e[0],e[1]||{});t&&r.push(t)}));else{var i=this.processEvent(e,t);if(!i)return;r.push(i)}this.bridgeReport?r.forEach((function(e){var t=e.event,r=e.params;n.appBridge.onEventV3(t,JSON.stringify(r))})):r.length&&(this.emit(Types$1.Event,r),this.emit(Types$1.SessionResetTime))}catch(o){console.warn("something error, please check"),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:o.message})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))console.warn("beconEvent not support batch report, please check");else{var n=[],r=this.processEvent(e,t||{});r&&(n.push(r),n.length&&(this.emit(Types$1.BeconEvent,n),this.emit(Types$1.SessionResetTime)))}},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return this.logger.warn("eventName is null\uff0c please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var r=t;"object"!=typeof r&&(r={}),r.profile?delete r.profile:r.event_index=getIndex();var i=void 0;return r.local_ms?(i=r.local_ms,delete r.local_ms):i=+new Date,{event:n,params:r,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(o){return this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:o.message}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){void 0===e&&(e={});var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+this.configManager.is_first_time},n=_assign({},t,e);this.event("predefine_pageview",n)},e.prototype.clearEventCache=function(){this.emit(Types$1.CleanEvents)},e.prototype.setWebIDviaUnionID=function(e){if(e){var t=hashCode(e);this.config({web_id:""+t,wechat_unionid:e}),this.emit(Types$1.CustomWebId)}},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setWebIDviaOpenID=function(e){if(e){var t=hashCode(e);this.config({web_id:""+t,wechat_openid:e}),this.emit(Types$1.CustomWebId)}},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(Types$1.ResetStay,{url_path:e,title:t,url:n},Types$1.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(Types$1.SetStay,{url_path:e,title:t,url:n},Types$1.Stay)},e.prototype.getToken=function(e,t){var n=this,r=!1,i=function(t){if(!r){r=!0;var i=n.configManager.get().user;return t&&(i.tobid=t,i["diss".split("").reverse().join("")]=t),e(_assign({},i))}},o=function(){n.tokenManager.getTobId().then((function(e){i(e)}))};this.sdkReady?o():(t&&setTimeout((function(){i()}),t),this.on(Types$1.Ready,(function(){o()})))},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(Types$1.ProfileSet,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(Types$1.ProfileSetOnce,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(Types$1.ProfileIncrement,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(Types$1.ProfileUnset,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(Types$1.ProfileAppend,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(Types$1.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,Types$1.Ab)},e.prototype.getVar=function(e,t,n){this.emit(Types$1.AbVar,{name:e,defaultValue:t,callback:n},Types$1.Ab)},e.prototype.getABconfig=function(e,t){this.emit(Types$1.AbConfig,{params:e,callback:t},Types$1.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(Types$1.AbVersionChangeOn,e,Types$1.Ab),function(){t.emit(Types$1.AbVersionChangeOff,e,Types$1.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(Types$1.AbVersionChangeOff,e,Types$1.Ab)},e.prototype.openOverlayer=function(){this.emit(Types$1.AbOpenLayer,"",Types$1.Ab)},e.prototype.closeOverlayer=function(){this.emit(Types$1.AbCloseLayer,"",Types$1.Ab)},e.prototype.getAllVars=function(e){this.emit(Types$1.AbAllVars,e,Types$1.Ab)},e.prototype.autoInitializationRangers=function(e){AutoBase(e)},e.prototype.destoryInstace=function(){this.destroyInstance||(this.destroyInstance=!0,this.off(Types$1.TokenComplete))},e.plugins=[],e}(),STYLE_ID="__rangers_ab_style__";function openOverlayer(){if(!document.getElementById(STYLE_ID)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id=STYLE_ID,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}function closeOverlayer(){var e=document.getElementById(STYLE_ID);e&&e.parentElement.removeChild(e)}var msgQueueMap={},allowdOrigins=[],addAllowdOrigin=function(e){e.length&&e.forEach((function(e){allowdOrigins.push(e)}))};function dispatchMsg(e,t,n,r){var i=e&&e.source||window.opener||window.parent,o=e&&e.origin||r||"*",a={type:t,payload:n};i.postMessage(JSON.stringify(a),o)}function receiveMsg(e,t){msgQueueMap[e]=msgQueueMap[e]||[],msgQueueMap[e].push(t)}function processMsg(e){if(allowdOrigins.some((function(e){return"*"===e}))||allowdOrigins.some((function(t){return e.origin.indexOf(t)>-1}))){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(i){t=void 0}if(!t)return;var n=t.type,r=t.payload;msgQueueMap[n]&&msgQueueMap[n].forEach((function(t){"function"==typeof t&&t(e,r)}))}}function init(e,t){var n=_assign({},e);delete n.filter,(window.opener||window.parent).postMessage({type:"tea:sdk:info",config:n,version:t},"*"),window.addEventListener("message",processMsg,!1)}var VISUAL_URL="",isLoaded=!1;function loadEditorScript(e){var t=e.event,n=e.editorUrl;e.collectInstance,e.fromSession,isLoaded||(isLoaded=!0,loadScript(n,(function(){dispatchMsg(t,"abEditorScriptloadSuccess")}),(function(){t&&dispatchMsg(t,"abEditorScriptloadError"),isLoaded=!1})))}function readyToLoadEditor(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},addAllowdOrigin(["*"]);var n,r="";init(t,SDK_VERSION);var i="";try{var o=window.performance.getEntriesByType("resource");if(o&&o.length&&(o.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(i=e.name)})),i||document.currentScript&&(i=document.currentScript.src),i&&(n=i.split("/"))&&n.length)){r="https:/";for(var a=2;a<n.length&&a!==n.length-1;a++)r=r+"/"+n[a];r+="/visual-ab-core"}}catch(s){}receiveMsg("tea:openVisualABEditor",(function(n){var i=n.data;if("string"==typeof n.data)try{i=JSON.parse(n.data)}catch(s){i=void 0}if(i){var o=i.lang;if(i.appId!==t.app_id)return dispatchMsg(n,"appIdError"),void console.error("abtest appid is not belong the page appid please check");var a=i.version;VISUAL_URL=a&&r?r+(a?"."+a:".1.0.1")+".js?query="+Date.now():VISUAL_AB_CORE+"?query="+Date.now(),window.TEAVisualEditor.lang=o,window.TEAVisualEditor.__ab_domin=t.channel_domain||"",loadEditorScript({event:n,editorUrl:VISUAL_URL,collectInstance:e})}}))}var loadMuiltlink=function(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.appId=t.app_id,receiveMsg("tea:openTesterEventInspector",(function(t){var n=t.data;if("string"==typeof t.data)try{n=JSON.parse(t.data)}catch(a){n=void 0}if(n){var r=n.referrer,i=n.lang,o=n.appId;window.TEAVisualEditor.__editor_ajax_domain=r||"",window.TEAVisualEditor.__ab_appId=o||"",window.TEAVisualEditor.lang=i||"",loadEditorScript({event:t,editorUrl:VISUAL_URL_INSPECTOR+".js?query="+Date.now(),collectInstance:e})}}))},loadVisual=function(e){window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.__ab_config=e,loadScript(VISUAL_AB_LOADER+"?query="+Date.now(),(function(){console.log("load visual render success")}),(function(){console.log("load visual render fail")}))},CallbackType;!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(CallbackType||(CallbackType={}));var STORAGE_EXPRIRE=2592e6,API="/service/2/abtest_config/",Ab=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="complete",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data=null,this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var r=t.enable_multilink,i=t.ab_channel_domain,o=t.enable_ab_visual,a=t.ab_cross,s=t.ab_cookie_domain,c=i||decodeUrl(AB_DOMAINS[t.channel||"cn"]),l=e.adapters,u=l.storage,d=l.fetch;this.cacheStorgae=new u(!1),this.fetch=d,this.enable_multilink=r,this.enable_ab_visual=o,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=a,this.ab_cookie_domain=s||"",this.fetchUrl=""+c+API,this.reportUrl=""+e.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500;var h=this.collect.Types;this.types=h,this.collect.on(h.TokenChange,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(h.TokenReset,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(h.AbVar,(function(e){var t=e.name,r=e.defaultValue,i=e.callback;n.getVar(t,r,i)})),this.collect.on(h.AbAllVars,(function(e){n.getAllVars(e)})),this.collect.on(h.AbConfig,(function(e){var t=e.params,r=e.callback;n.getABconfig(t,r)})),this.collect.on(h.AbExternalVersion,(function(e){n.setExternalAbVersion(e)})),this.collect.on(h.AbOpenLayer,(function(){n.openOverlayer()})),this.collect.on(h.AbCloseLayer,(function(){n.closeOverlayer()})),this.collect.on(h.AbVersionChangeOn,(function(e){n.changeListener.set(e,e)})),this.collect.on(h.AbVersionChangeOff,(function(e){n.changeListener.get(e)&&n.changeListener.delete(e)})),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(this.fetchAB(),this.readyStatus=!0),this.collect.emit(h.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.loadMode=function(){var e=getIframeUrl(),t="";if(e){var n=e.scenario,r=e.href;n?(this.editMode=!0,t=n):!r||-1===r.indexOf("datatester")&&-1===r.indexOf("visual-editor")||(this.editMode=!0,t="visual-editor")}this.enable_ab_visual&&(readyToLoadEditor(this.collect,this.config),"visual-editor"===t)?this.collect.destoryInstace():this.enable_multilink&&loadMuiltlink(this.collect,this.config)},e.prototype.checkLocal=function(){var e=this.getABCache(),t=e.ab_version,n=e.ab_ext_version,r=e.ab_version_multilink,i=e.data,o=this.checkFromUrl();o?this.mulilinkVersions.push(o):this.mulilinkVersions=r||[],this.extVersions=n||[],this.versions=t||[],this.data=i;var a=this.versions.concat(this.extVersions);this.enable_multilink&&(a=a.concat(this.mulilinkVersions)),this.configVersions(a.join(","))},e.prototype.checkFromUrl=function(){var e=parseUrlQuery(window.location.href);return e&&e.vid?e.vid:""},e.prototype.updateVersions=function(){var e=this.extVersions.length?this.versions.concat(this.extVersions):this.versions;this.enable_multilink&&(e=e.concat(this.mulilinkVersions)),this.configVersions(e.join(",")),this.updateABCache(),this.changeListener.size>0&&this.changeListener.forEach((function(t){"function"==typeof t&&t(e)}))},e.prototype.configVersions=function(e){this.collect.configManager.setAbVersion(e)},e.prototype.getVar=function(e,t,n){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");var r={name:e,defaultValue:t,callback:n,type:CallbackType.Var};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealVar(r,e):this.callbacks.push(r)},e.prototype.getRealVar=function(e,t){var n=e.name,r=e.defaultValue,i=e.callback,o=this.data;if(o){if(isObject$1(o[n])){var a=o[n].vid;return"$ab_url"===t?this.mulilinkVersions.includes(a)||this.mulilinkVersions.push(a):this.versions.includes(a)||this.versions.push(a),this.updateVersions(),this.fechEvent(a,t,r),i(o[n].val),void this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u66dd\u5149\u4e86\u5b9e\u9a8c"+n,level:"info",time:Date.now(),data:o[n]})}this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u8c03\u7528getVar",level:"info",time:Date.now(),data:r}),i(r)}else i(r)},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:CallbackType.All};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealAllVars(t):this.callbacks.push(t)},e.prototype.getRealAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{}),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u8c03\u7528getAllVars",level:"info",time:Date.now(),data:this.data})},e.prototype.fechEvent=function(e,t,n){try{if(this.config.disable_track_event)return;if(!e)return;var r=this.collect.configManager.get(),i=r.header,o=r.user,a=this.getABCache();if(a&&a.uuid&&a.uuid!==o.user_unique_id)return;var s={event:"abtest_exposure",ab_sdk_version:""+e,params:JSON.stringify({app_id:this.config.appId,ab_url:"$ab_url"===t?n:window.location.href}),local_time_ms:Date.now()};i.custom=JSON.stringify(i.custom);var c={events:[s],user:o,header:i};"$ab_url"===t&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,JSON.stringify([c])):this.reportExposure(c)}catch(l){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:l.message})}},e.prototype.reportExposure=function(e){var t=this;this.exposureCache.push(e),this.reportTimeout&&clearTimeout(this.reportTimeout),this.exposureCache.length>=this.exposureLimit?this.report():this.reportTimeout=setTimeout((function(){t.report(),clearTimeout(t.reportTimeout)}),this.ab_batch_time)},e.prototype.report=function(){var e=this;this.fetch(this.reportUrl,this.exposureCache,2e4),this.exposureCache.forEach((function(t){e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:[t],code:200,status:"success"})})),this.exposureCache=[]},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var n=Object.keys(e);n&&n.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.get=function(e){if(this.ab_cross){var t=this.cacheStorgae.getCookie(e,this.ab_cookie_domain);return t?JSON.parse(t):null}return this.cacheStorgae.getItem(e)},e.prototype.set=function(e,t){this.ab_cross?this.cacheStorgae.setCookie(e,t,STORAGE_EXPRIRE,this.ab_cookie_domain):this.cacheStorgae.setItem(e,t),this.collect.configManager.setAbCache(t)},e.prototype.getABCache=function(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.get(this.abKey)||t,Date.now()-t.timestamp>=STORAGE_EXPRIRE?(this.cacheStorgae.removeItem(this.abKey),null):e?t[e]:t},e.prototype.updateABCache=function(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=Date.now(),this.set(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getABCache();t.data=this.data,t.uuid=e,t.timestamp=Date.now(),this.set(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[]},e.prototype.openOverlayer=function(e){var t=this;if(openOverlayer(),e)var n=setTimeout((function(){t.closeOverlayer(),clearTimeout(n)}),e)},e.prototype.closeOverlayer=function(){closeOverlayer()},e.prototype.fetchComplete=function(e,t){var n=this;if(e&&"[object Object]"==Object.prototype.toString.call(e)){this.data=e,this.setAbCache(t);var r=[];Object.keys(e).forEach((function(t){var n=e[t].vid;n&&r.push(n)})),this.versions=this.versions.filter((function(e){return r.includes(e)}));var i=e.$ab_url,o=e.$ab_modification;if(o&&o.val&&this.enable_ab_visual){if(this.collect.destroyInstance)return;this.getVar("$ab_modification",window.location.href,(function(){loadVisual(o.val),n.closeOverlayer()}))}else if(i&&this.enable_multilink){this.mulilinkVersions=this.mulilinkVersions.filter((function(e){return r.includes(e)}));var a=i.val,s=i.vid;a&&s&&this.getVar("$ab_url",a,(function(){n.editMode||(a!==window.location.href?setTimeout((function(){if(!n.collect.destroyInstance){var e=""+a;e=-1===e.indexOf("http")?"https://"+e:e,parseURL(e).host!==location.host?e=e+"&vid="+s:window.history.replaceState("","",e),window.location.href=e}}),100):n.closeOverlayer())}))}this.updateVersions()}else this.closeOverlayer();this.callbacks.forEach((function(e){return n[e.type===CallbackType.Var?"getRealVar":"getRealAllVars"](e,"")})),this.callbacks=[]},e.prototype.fetchAB=function(e){var t=this,n=this.collect.configManager.get(),r={header:_assign({aid:this.config.app_id},n.user||{},n.header||{},{ab_sdk_version:this.collect.configManager.getAbVersion(),ab_url:window.location.href})};this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u53d1\u8d77AB\u5b9e\u9a8c\u8bf7\u6c42",level:"info",logType:"fetch",time:Date.now(),data:r}),this.fetch(this.fetchUrl,r,this.config.ab_timeout||3e3,!1,(function(r){t.fetchStatus="complete",t.refreshFetchStatus="complete";var i=r.data;"success"===r.message?(t.fetchComplete(i,n.user.user_unique_id),e&&e(i)):(t.fetchComplete(null,n.user.user_unique_id),e&&e(null)),t.collect.emit(t.types.AbComplete,i),t.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"AB\u5b9e\u9a8c\u8bf7\u6c42\u6210\u529f",level:"info",logType:"fetch",time:Date.now(),data:i})}),(function(){t.fetchStatus="complete",t.refreshFetchStatus="complete",t.fetchComplete(null,n.user.user_unique_id),t.collect.emit(t.types.AbTimeout),e&&e(null),t.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"AB\u5b9e\u9a8c\u8bf7\u6c42\u7f51\u7edc\u5f02\u5e38",level:"error",logType:"fetch",time:Date.now()})}))},e.prototype.filterUrl=function(e){try{var t="";-1!==e.indexOf("&multilink=true")?t="&multilink=true[\0-\xff]*":-1!==e.indexOf("?multilink=true")&&(t="\\?multilink=true[\0-\xff]*");var n=new RegExp(t,"g");e=e.replace(n,"")}catch(r){}return e},e}(),Et=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(e.adapters.fetch,t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var r=e.Types;e.on(r.SubmitBefore,(function(e){window.navigator.sendBeacon(n.url,JSON.stringify(e))}))}}else console.log("please use correct et_test url")},e}(),Alive=function(){function e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.collect=e,this.config=t,this.pageStartTime=Date.now(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,isObject$1(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration))}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageAlive()},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},e.prototype.sendEvent=function(e,t){void 0===t&&(t=!1);var n=t?this.aliveDTime:Date.now()-this.sessionStartTime;n<0||n>this.aliveDTime||Date.now()-this.pageStartTime>this.maxDuration||(this.collect.beconEvent(this.options.aliveName,_assign({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),duration:n,is_support_visibility_change:isSupVisChange(),startTime:this.sessionStartTime,hidden:document.visibilityState,leave:e},this.options.params)),this.set_path||this.set_title||this.set_url||this.setParams(location.pathname,location.href,document.title),this.sessionStartTime=Date.now())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval((function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)}),1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&&(this.sessionStartTime=Date.now(),this.timerHandler=this.setUpTimer())},e.prototype.beforeunload=function(){document.hidden||this.sendEvent(!0)},e.prototype.enablePageAlive=function(){var e=this;this.timerHandler=this.setUpTimer();var t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),window.addEventListener("pagehide",n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("pagehide",n)}},e}(),Close=function(){function e(e,t){var n=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=Date.now():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=Date.now())},this.beforeunload=function(){if(n.totalTime+=(n.activeEndTime||Date.now())-n.activeStartTime,n.config.autotrack)try{window.sessionStorage.setItem("_tea_cache_duration",JSON.stringify({duration:n.totalTime,page_title:document.title||location.pathname}))}catch(e){}n.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||864e5,this.pageStartTime=Date.now(),isObject$1(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.resetData()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageClose()},e.prototype.disable=function(){this.disableCallback()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0},e.prototype.sendEventPageClose=function(){var e=Date.now()-this.pageStartTime;this.totalTime<0||e<0||this.totalTime>=this.maxDuration||(this.collect.beconEvent(this.options.closeName,_assign({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:isSupVisChange()},this.options.params)),this.pageStartTime=Date.now(),this.set_path||this.set_title||this.set_url||this.setParams(location.pathname,location.href,document.title),this.resetData())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.enablePageClose=function(){var e=this,t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),window.addEventListener("pagehide",n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("pagehide",n)}},e}(),Stay=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_stay_duration){this.title=document.title||location.pathname,this.url=location.href,this.url_path=location.pathname,this.pageAlive=new Alive(e,t),this.pageClose=new Close(e,t);var r=this.collect.Types;this.collect.on(r.ResetStay,(function(e){var t=e.url_path,r=e.title,i=e.url;n.resetStayDuration(t,r,i)})),this.collect.on(r.RouteChange,(function(e){e.init||t.disable_route_report||n.resetStayDuration()})),this.collect.on(r.SetStay,(function(e){var t=e.url_path,r=e.title,i=e.url;n.setStayParmas(t,r,i)})),this.enable(this.url_path,this.title,this.url),this.ready(r.Stay),this.collect.emit(r.StayReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},e.prototype.disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.pageAlive.setParams(e,t,n),this.pageClose.setParams(e,t,n),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884c resetStayParams",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e.prototype.reset=function(e,t,n){this.disable(),this.enable(e,t,n)},e.prototype.resetStayDuration=function(e,t,n){this.reset(e,t,n),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884c resetStayDuration",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e}(),Profile=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.duration=6e4,this.reportUrl=e.configManager.getDomain()+"/profile/list";var r=e.Types,i=e.adapters.fetch;this.eventCheck=new EventCheck(e,t),this.fetch=i,this.cache={},this.collect.on(r.ProfileSet,(function(e){n.setProfile(e)})),this.collect.on(r.ProfileSetOnce,(function(e){n.setOnceProfile(e)})),this.collect.on(r.ProfileUnset,(function(e){n.unsetProfile(e)})),this.collect.on(r.ProfileIncrement,(function(e){n.incrementProfile(e)})),this.collect.on(r.ProfileAppend,(function(e){n.appendProfile(e)})),this.collect.on(r.ProfileClear,(function(){n.cache={}})),this.ready(r.Profile)},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.report=function(e,t){void 0===t&&(t={});try{if(this.config.disable_track_event)return;var n=[];n.push(this.collect.processEvent(e,t));var r=this.collect.eventManager.merge(n);this.fetch(this.reportUrl,r),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:r,code:200,status:"success"})}catch(i){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message})}},e.prototype.setProfile=function(e){var t=this.formatParams(e);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set",_assign({},t,{profile:!0})))},e.prototype.setOnceProfile=function(e){var t=this.formatParams(e,!0);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set_once",_assign({},t,{profile:!0})))},e.prototype.incrementProfile=function(e){e?this.report("__profile_increment",_assign({},e,{profile:!0})):console.warn("please check the params, must be object!!!")},e.prototype.unsetProfile=function(e){if(e){var t={};t[e]="1",this.report("__profile_unset",_assign({},t,{profile:!0}))}else console.warn("please check the key, must be string!!!")},e.prototype.appendProfile=function(e){if(e){var t={};for(var n in e)"string"==typeof e[n]||"Array"===Object.prototype.toString.call(e[n]).slice(8,-1)?t[n]=e[n]:console.warn("please check the value of param: "+n+", must be string or array !!!");Object.keys(t).length&&this.report("__profile_append",_assign({},t,{profile:!0}))}else console.warn("please check the params, must be object!!!")},e.prototype.pushCache=function(e){var t=this;Object.keys(e).forEach((function(n){t.cache[n]={val:t.clone(e[n]),timestamp:Date.now()}}))},e.prototype.formatParams=function(e,t){var n=this;void 0===t&&(t=!1);try{if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void console.warn("please check the params type, must be object !!!");var r={};for(var i in e)"string"==typeof e[i]||"number"==typeof e[i]||"Array"===Object.prototype.toString.call(e[i]).slice(8,-1)?r[i]=e[i]:console.warn("please check the value of params:"+i+", must be string,number,Array !!!");var o=Object.keys(r);if(!o.length)return;if(!this.eventCheck.checkEventParams(r))return;var a=Date.now();return o.filter((function(r){var i=n.cache[r];return t?!i:!(i&&n.compare(i.val,e[r])&&a-i.timestamp<n.duration)})).reduce((function(e,t){return e[t]=r[t],e}),{})}catch(s){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:s.message}),console.log("error")}},e.prototype.compare=function(e,t){try{return JSON.stringify(e)===JSON.stringify(t)}catch(n){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:n.message}),!1}},e.prototype.clone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),e}},e.prototype.unReady=function(){console.warn("sdk is not ready, please use this api after start")},e}(),HeartBeat=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=selfAdjust((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var r=this.collect.Types;this.collect.on(r.SessionReset,(function(){n.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),Monitor=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain){var r=e.adapters.fetch;if(this.fetch=r,!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var i=this.collect.Types;this.collect.on(i.Ready,(function(){n.sdkOnload()})),this.collect.on(i.SubmitError,(function(e){var t=e.type,r=e.eventData,i=e.errorCode;"f_data"===t&&n.sdkError(r,i)}))}}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,r=t.user,i=n.app_id,o=n.app_name,a=n.sdk_version,s=r.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:i,app_name:o||"",sdk_version:a,sdk_type:SDK_TYPE,sdk_config:this.config,sdk_desc:"TOC"}),local_time_ms:Date.now()}],user:{user_unique_id:s},header:{}};setTimeout((function(){e.fetch(e.url,[c],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(l){}},e.prototype.sdkError=function(e,t){var n=this;try{var r=e[0],i=r.user,o=r.header,a=[];e.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var s={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:o.app_id,app_name:o.app_name||"",error_event:e.event,sdk_version:o.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(o),user:JSON.stringify(i)}),local_time_ms:Date.now()}})),user:{user_unique_id:i.user_unique_id},header:{}};setTimeout((function(){n.fetch(n.url,[s],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(c){}},e}();function isNeedElement(e,t){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){if(["LI","TR","DL"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{if(["A","BUTTON"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0}return!1}var isAttrFilter=function(e,t){return!!hasAttributes(e,t)};function getContainer(e){for(var t=e;t&&!isNeedElement(t,"container");){if("HTML"===t.nodeName||"BODY"===t.nodeName)return e;t=t.parentElement}return t||e}function getNodeText(e){var t="";return 3===e.nodeType?t=e.textContent.trim():e.dataset&&e.dataset.hasOwnProperty("teaTitle")||e.hasAttribute("ata-tea-title")?t=e.getAttribute("data-tea-title"):e.hasAttribute("title")?t=e.getAttribute("title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(t=e.getAttribute("alt")),t.slice(0,200)}function getText(e){var t=getContainer(e),n=[];return function e(t){var r=getNodeText(t);if(r&&-1===n.indexOf(r)&&n.push(r),t.childNodes.length>0)for(var i=t.childNodes,o=0;o<i.length;o++)8!==i[o].nodeType&&e(i[o])}(t),n}function getTextSingle(e){var t=getContainer(e),n="";return function e(t){var r=getNodeText(t);if(r&&(n+=r),t.childNodes.length>0)for(var i=t.childNodes,o=0;o<i.length;o++)3===i[o].nodeType&&e(i[o])}(t),n}function ignore(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}var hasAttribute=function(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0},hasAttributes=function(e,t){if("string"==typeof t)return hasAttribute(e,t);if(isArray(t)){for(var n=!1,r=0;r<t.length;r++)if(hasAttribute(e,t[r])){n=!0;break}return n}},getAttributes=function(e,t){var n={};if("string"==typeof t)hasAttribute(e,t)&&(n.attrs=e.getAttribute(t));else if(isArray(t))for(var r=0;r<t.length;r++)hasAttribute(e,t[r])&&(n[t[r]]=e.getAttribute(t[r]));return n},elementLevel=function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some((function(e){return e.children.length>0}))}return!0},isSVG=function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,n=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,n=!0):t=t.parentElement;return n};function isTrack(e,t){if(1!==e.nodeType)return!1;if(!t.svg&&isSVG(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var n=e;return!("none"===n.style.display||!isNeedElement(n,"container")&&!elementLevel(n)&&!t.svg)}var Listener=function(){function e(e,t,n){var r=this;this.clickEvent=function(e){isTrack(e.target,r.options)&&r.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){r.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){r.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&r.eventHandel({eventType:"dom",eventName:"beat"},_assign({beat_type:0},e)),r.eventHandel({eventType:"dom",eventName:"page_view"},e)},this.getPageLoadEvent=function(e){r.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=n.getConfig().eventConfig,this.collect=t,this.options=e,this.beatTime=e.beat,this.statistics=!1}return e.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},e.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e&&(this.config.click&&window.document.addEventListener("click",this.clickEvent,!0),this.config.change&&window.document.addEventListener("change",this.changeEvent,!0),this.config.submit&&window.document.addEventListener("submit",this.submitEvent,!0),this.config.pv&&this.collect.on("route-change",(function(e){var n=e.config,r=e.name;t.getPageViewEvent(n,r)})),this.config.beat)){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",(function(){t.beatEvent(t.beatTime)}));var n=0,r=null;window.addEventListener("scroll",(function(){clearTimeout(r),r=setTimeout(i,500),n=document.documentElement.scrollTop||document.body.scrollTop}));var i=function(){(document.documentElement.scrollTop||document.body.scrollTop)==n&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(a){}try{var o=window.performance&&window.performance.getEntriesByType("paint");o&&o.length?(new PerformanceObserver((function(e){var n=e.getEntries(),r=n[n.length-1],i=r.renderTime||r.loadTime;t.statistics||(t.getPageLoadEvent(i),t.statistics=!0)})).observe({entryTypes:["largest-contentful-paint"]}),setTimeout((function(){t.statistics||(t.getPageLoadEvent(o[0].startTime||0),t.statistics=!0)}),2e3)):this.getPageLoadEvent(0)}catch(a){this.getPageLoadEvent(0)}}},e.prototype.removeListener=function(){window.document.removeEventListener("click",this.clickEvent,!0),window.document.removeEventListener("change",this.changeEvent,!0),window.document.removeEventListener("submit",this.submitEvent,!0)},e.prototype.beatEvent=function(e){var t=this;try{var n;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(n=setInterval((function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})}),e)),beforePageUnload((function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(n)}))}catch(r){}},e}(),defaultConfig$1={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},Config=function(){function e(e,t){this.config=e,this.config.eventConfig=Object.assign(this.config.eventConfig,t)}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();function getPositionData(e){if(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return{left:t.left,top:t.top,element_width:n,element_height:r}}}function getEventData(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.clientX,r=e.clientY,i=t.left,o=t.top,a=n-i>=0?n-i:0,s=r-o>=0?r-o:0;return{touch_x:Math.floor(a),touch_y:Math.floor(s)}}function getXpath(e){for(var t=[];null!==e.parentElement;)t.push(e),e=e.parentElement;var n=[],r=[];return t.forEach((function(e){var t=getXpathIndex(e),i=t.str,o=t.index;n.unshift(i),r.unshift(o)})),{element_path:"/"+n.join("/"),positions:r}}function getXpathIndex(e){if(null===e)return{str:"",index:0};var t=0,n=e.parentElement;if(n)for(var r=n.children,i=0;i<r.length&&r[i]!==e;i++)r[i].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),isNeedElement(e,"list")?"[]":""].join(""),index:t}}function getElementData(e,t,n,r){var i={},o=getPositionData(t),a=getEventData(e,o),s=o.element_width,c=o.element_height,l=a.touch_x,u=a.touch_y,d=getXpath(t),h=d.element_path,f=d.positions,p=getText(t),g=window.performance.timing.navigationStart,y=Date.now()-g,v=f.map((function(e){return""+e})),m=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(m=window.TEAVisualEditor.getOriginXpath({xpath:h,positions:v})),i.element_path=m&&m.xpath||h,i.positions=m&&m.positions||v,r&&!r.text&&(i.texts=p,i.element_title=getTextSingle(t)),i.element_id=t.getAttribute("id")||"",i.element_class_name=t.getAttribute("class")||"",i.element_type=t.nodeType,i.element_width=Math.floor(s),i.element_height=Math.floor(c),i.touch_x=l,i.touch_y=u,i.page_manual_key="",i.elememt_manual_key="",i.since_page_start_ms=y,i.page_start_ms=g,i.page_path=location.pathname,i.page_host=location.host,n.track_attr&&isAttrFilter(t,n.track_attr)){var _=getAttributes(t,n.track_attr);for(var b in _)i[b]=_[b]}var E=getContainer(t);return"A"===E.tagName&&(i.href=E.getAttribute("href")),"IMG"===t.tagName&&(i.src=t.getAttribute("src")),i}var getEventData$1=function(e,t,n,r,i){return _assign({event:e},getElementData(t,n,r,i),{is_html:1,page_key:window.location.href,page_title:document.title})},getExtraEventData=function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(n){return{}}},EventHandle=function(){function e(e,t){this.ignore={text:!1},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics",exposure:"bav2b_exposure"},t&&!1===t.text&&(this.ignore.text=!0),t&&t.exposure&&t.exposure.eventName&&(this.eventName.exposure=t.exposure.eventName)}return e.prototype.handleEvent=function(e,t){try{if(ignore(e.target))return null;var n="bav2b_click";switch(t){case"click":return n=this.eventName.click,getEventData$1(n,e,e.target,this.options,this.ignore);case"exposure":return n=this.eventName.exposure,getEventData$1(n,e,e.target,this.options,this.ignore);case"change":return _assign({},getEventData$1(n="bav2b_change",e,e.target,this.options),getExtraEventData(n,e.target));case"submit":return getEventData$1(n="bav2b_submit",e,e.target,this.options)}}catch(r){return console.error(r),null}},e.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var n=JSON.parse(t);e.refer_page_duration_ms=n?n.duration:""}e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(r){console.log("page event error "+JSON.stringify(r))}return e},e.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var n=e.lcp,r=window.performance.timing,i=r.loadEventEnd-r.navigationStart;t.page_init_cost_ms=parseInt(n||(i>0?i:0)),t.page_start_ms=r.navigationStart}catch(o){console.log("page_statistics event error "+JSON.stringify(o))}return t},e.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=Date.now()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(t){console.log("beat event error "+JSON.stringify(t))}return e},e}(),Request=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var n=e.eventSend,r=t.event;delete t.event,n&&"becon"===n?this.collect.beconEvent(r,t):this.collect.event(r,t)},e.prototype.get=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,n)},e.prototype.post=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,n)},e}(),COOKIE_KEY="_TEA_VE_OPEN",COOKIE_KEY_HOST="_TEA_VE_APIHOST",COOKIE_LANG="lang",COOKIE_EDIT_VERISON="_VISUAL_EDITOR_V",COOKIE_EDIT_URL="_VISUAL_EDITOR_U";function checkSession(){return"1"===js_cookie.get(COOKIE_KEY)}function checkSessionHost(){var e=js_cookie.get(COOKIE_KEY_HOST);try{e=JSON.parse(e)}catch(t){}return e}function checkEditUrl(){return js_cookie.get(COOKIE_EDIT_URL)}function setSession(){try{var e=window.TEAVisualEditor.lang=window.TEAVisualEditor.lang||js_cookie.get(COOKIE_LANG),t=window.TEAVisualEditor.__editor_ajax_domain=window.TEAVisualEditor.__editor_ajax_domain||js_cookie.get(COOKIE_KEY_HOST),n=window.TEAVisualEditor.__editor_verison=window.TEAVisualEditor.__editor_verison||js_cookie.get(COOKIE_EDIT_VERISON),r=window.TEAVisualEditor.__editor_url=window.TEAVisualEditor.__editor_url||js_cookie.get(COOKIE_EDIT_URL),i=+new Date,o=new Date(i+18e5);js_cookie.set(COOKIE_KEY,"1",{expires:o}),js_cookie.set(COOKIE_KEY_HOST,t,{expires:o}),js_cookie.set(COOKIE_EDIT_URL,r,{expires:o}),js_cookie.set(COOKIE_LANG,e,{expires:o}),js_cookie.set(COOKIE_EDIT_VERISON,n||"",{expires:o})}catch(a){console.log("set cookie err")}}var isLoaded$1=!1;function loadEditorScript$1(e){var t=e.event,n=e.editorUrl,r=e.autoTrackInstance;isLoaded$1||(isLoaded$1=!0,loadScript(n,(function(){dispatchMsg(t,"editorScriptloadSuccess"),r.destroy()}),(function(){t&&dispatchMsg(t,"editorScriptloadError"),isLoaded$1=!1})))}function readyToLoadEditor$1(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{};var n="",r=VISUAL_EDITOR_RANGERS+"?query="+Date.now();window.TEAVisualEditor.appId=t.app_id;var i=t.channel_domain,o="";if(addAllowdOrigin(["*"]),i){var a,s="";try{var c=window.performance.getEntriesByType("resource");if(c&&c.length&&(c.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(s=e.name)})),s&&(a=s.split("/"))&&a.length)){o="https:/";for(var l=2;l<a.length&&l!==a.length-1;l++)o=o+"/"+a[l];if(o&&o.indexOf("/5.0")){var u=o.split("/5.0");o=u[0]||o}}}catch(f){}}if(init(t,SDK_VERSION),checkSession()){var d=checkSessionHost(),h="";d&&(window.TEAVisualEditor.__editor_ajax_domain=d,h=checkEditUrl()),loadEditorScript$1({event:null,editorUrl:h||r,autoTrackInstance:e}),setSession()}else try{receiveMsg("tea:openVisualEditor",(function(t){var a=t.data;if("string"==typeof t.data)try{a=JSON.parse(t.data)}catch(f){a=void 0}if(a){var s=a.referrer,c=a.lang;if(s&&(window.TEAVisualEditor.__editor_ajax_domain=s),n=r,i){var l=a.version;n=o?o+(l?"/visual-editor-rangers-v"+l:"/visual-editor-rangers-v1.0.0")+".js":r,window.TEAVisualEditor.__editor_verison=l}window.TEAVisualEditor.__editor_url=n,window.TEAVisualEditor.lang=c,loadEditorScript$1({event:t,editorUrl:n,autoTrackInstance:e}),setSession()}})),window.TEAVisualEditor.openAutotrackEditor=function(){loadEditorScript$1({event:null,editorUrl:window.TEAVisualEditor.__editor_url,autoTrackInstance:e})}}catch(f){console.log("receive message error")}try{receiveMsg("tea:openHeatMapCore",(function(n){var r=HOT_PIC_URL,i=n.data.app_id;i&&i!==t.app_id||loadEditorScript$1({event:n,editorUrl:r+".js?query="+Date.now(),autoTrackInstance:e})}))}catch(f){console.log("openHeatMapCore error")}}var Observer=function(){function e(e){this._instance=null,this._intersection=e,this.init()}return e.prototype.init=function(){var e=this;this._instance=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&e.attributeChangeObserve(t),"childList"===t.type&&e.modifyNodeObserve(t)}))})),this._instance.observe(document.body,{childList:!0,attributes:!0,subtree:!0,attributeOldValue:!1})},e.prototype.attributeChangeObserve=function(e){e.target.hasAttribute("data-exposure")?this.exposureAdd(e,"mutation"):this.exposureRemove(e)},e.prototype.modifyNodeObserve=function(e){var t=this;Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureAdd(e,"intersect"),t.mapChild(e,t.exposureAdd)})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureRemove(e),t.mapChild(e,t.exposureRemove)}))},e.prototype.mapChild=function(e,t){var n=this;1===e.nodeType&&e.children.length&&Array.prototype.forEach.call(e.children,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t(e),n.mapChild(e,t)}))},e.prototype.exposureAdd=function(e,t){this._intersection.exposureAdd(e,t)},e.prototype.exposureRemove=function(e){this._intersection.exposureRemove(e)},e._exposure_observer=null,e}(),Intersection=function(){function e(t,n){this.count=1,this.instance=this.buildObserver(),this.observeMap=e._observer_map,t.autotrack.exposure.ratio?this.Ratio=t.autotrack.exposure.ratio:0===t.autotrack.exposure.ratio?this.Ratio=0:this.Ratio=.5,this.EventHandle=n}return e.prototype.buildObserver=function(){var t=this;if(!e._observer_instance)return IntersectionObserver&&(e._observer_instance=new IntersectionObserver((function(e){e.forEach((function(e){t.observeMap.get(e.target._observeId)&&t.exposureEvent(e)}))}),{threshold:[.01,.25,.5,.75,1]})),e._observer_instance},e.prototype.exposureAdd=function(e,t){var n=e;"mutation"===t&&(n=e.target);var r=n._observeId;if(r||this.observeMap.has(r)){if(!1===n.visible){var i=n.getBoundingClientRect(),o=i.top,a=i.left,s=i.right,c=i.bottom;o>=0&&c<=window.innerHeight&&a>=0&&s<=window.innerWidth&&(n.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e))}}else n._observeId=this.count,n.visible=!1,this.observeMap.set(this.count,n),this.observe(n),this.count++},e.prototype.exposureRemove=function(e){this.observeMap.has(e._observeId)&&(this.observeMap.delete(e._observeId),this.unobserve(e))},e.prototype.exposureEvent=function(e){if(e.intersectionRatio>=this.Ratio&&e.isIntersecting){if("0"===e.target.style.opacity||"hidden"===e.target.style.visibility)return;if(!0===e.target.visible)return;e.target.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e)}else e.target.visible=!1},e.prototype.observe=function(e){this.instance.observe(e)},e.prototype.unobserve=function(e){this.instance.unobserve(e)},e._observer_instance=null,e._observer_map=new Map,e}(),Exposure=function(){function e(e,t){e.autotrack&&e.autotrack.exposure&&(this._intersection=new Intersection(e,t),this._observer=new Observer(this._intersection),this.initObserver())}return e.prototype.initObserver=function(){var e=this;Array.prototype.forEach.call(document.querySelectorAll("[data-exposure]"),(function(t){e._intersection.exposureAdd(t,"intersect")}))},e}(),defaultOpt={hashTag:!1,impr:!1},AutoTrack=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var n=e.Types;t.autotrack&&t.autotrack.collect_url&&!t.autotrack.collect_url()||(this.ready(n.Autotrack),this.collect.emit(n.AutotrackReady))}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==typeof t?t:{},t=Object.assign(defaultOpt,t),this.destroyed=!1,this.options=t,this.Config=new Config(defaultConfig$1,this.options),this.Exposure=new Exposure(this.config,this.handle.bind(this)),this.Listener=new Listener(t,this.collect,this.Config),this.EventHandle=new EventHandle(this.config,t),this.Request=new Request(this.collect),this.autoTrackStart=!0,this.init(),readyToLoadEditor$1(this,this.config)},e.prototype.init=function(){this.Listener.init(this.handle.bind(this))},e.prototype.handle=function(e,t){"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var n=e.eventName;if("click"===n||"exposure"===n||"change"===n||"submit"===n){var r=this.EventHandle.handleEvent(t,n);null!==r&&this.Request.send({eventType:"custom",eventName:"report_"+n+"_event",extra:{methods:"GET"}},r)}else if("page_view"===n||"page_statistics"===n){var i;i="page_view"===n?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},i)}else if("beat"===n){var o=this.EventHandle.handleBeadtEvent(t),a=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:a},o)}}catch(s){console.log("handel dom event error "+JSON.stringify(s))}},e.prototype.destroy=function(){if(!this.autoTrackStart)return console.warn("engine is undefined, make sure you have called autoTrack.start()");this.autoTrackStart=!1,this.Listener.removeListener()},e}(),State;!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(State||(State={}));var EventList={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},Tracer=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.ready=t.app_id&&t.enable_tracer&&!t.disable_track_event,this.ready){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new Map,this.collect=e,this.appid=t.app_id,this.reportUrl=e.configManager.getUrl("event");var r=this.collect.Types,i=e.adapters.fetch;this.fetch=i,this.collect.on(r.Event,(function(){n.addCount("log")})),this.collect.on(r.SubmitError,(function(e){var t=e.type,r=e.eventDate,i=e.errorCode,o=e.response;n.addErrorCount(r,t,i,o)})),this.listener(),this.collect.emit(r.TracerReady)}},e.prototype.addCount=function(e,t,n){void 0===t&&(t="net"),void 0===n&&(n=1);try{this.tracerCache||(this.tracerCache=new Map);var r=void 0;if(this.tracerCache.has(e))(i=this.tracerCache.get(e)).has(t)?(r=i.get(t).params.count,r++,i.set(t,this.processTracer(r,e,t))):(r=n,i.set(t,this.processTracer(n,e,t)));else{var i=new Map;r=n,i.set(t,this.processTracer(n,e,t)),this.tracerCache.set(e,i)}"net"===t&&r>=this.limit[e]&&this.report(!1)}catch(o){console.log(o)}},e.prototype.addErrorCount=function(e,t,n,r){var i=this;try{if(e&&e.length){var o=e[0].events;o&&o.length&&("f_data"===t?(r&&r.hasOwnProperty("sc")?this.addCount("log",t,o.length-r.sc):this.addCount("log",t,o.length),this.errorCode[t]=n):o.forEach((function(e){var r="log";for(var o in EventList)if(-1!==EventList[o].indexOf(e.event)){r=o;break}i.addCount(r,t,1),i.errorCode[t]=n})))}}catch(a){}},e.prototype.report=function(e){if(this.tracerCache){var t=[];this.tracerCache.forEach((function(e){console.log(e),e.forEach((function(e){t.push(e)}))})),t&&t.length&&this.sendTracer(t,e)}},e.prototype.sendTracer=function(e,t){try{var n=this.collect.eventManager.merge(e);t&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,JSON.stringify(n)):this.fetch(this.reportUrl,n),this.tracerCache=null}catch(r){}},e.prototype.processTracer=function(e,t,n){var r={count:e,state:n,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:SDK_VERSION};"f_net"!==n&&"f_data"!==n||(r.errorCode=this.errorCode[n]);var i=this.collect.processEvent("applog_trace",r);if(i&&i.event)return delete i.is_bav,i},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.leavePage()})),beforePageUnload((function(){e.leavePage()}))},e.prototype.leavePage=function(){this.report(!0)},e}(),dayjs_min=createCommonjsModule((function(e,t){e.exports=function(){var e="millisecond",t="second",n="minute",r="hour",i="day",o="week",a="month",s="quarter",c="year",l="date",u="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+p(r,2,"0")+":"+p(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,a),o=n-i<0,s=t.clone().add(r+(o?-1:1),a);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:a,y:c,w:o,d:i,D:l,h:r,m:n,s:t,ms:e,Q:s}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",v={};v[y]=f;var m=function(e){return e instanceof S},_=function(e,t,n){var r;if(!e)return y;if("string"==typeof e)v[e]&&(r=e),t&&(v[e]=t,r=e);else{var i=e.name;v[i]=e,r=i}return!n&&r&&(y=r),r||!n&&y},b=function(e,t){if(m(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},E=g;E.l=_,E.i=m,E.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function f(e){this.$L=_(e.locale,null,!0),this.parse(e)}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(d);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return E},p.isValid=function(){return!(this.$d.toString()===u)},p.isSame=function(e,t){var n=b(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return b(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<b(e)},p.$g=function(e,t,n){return E.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,s){var u=this,d=!!E.u(s)||s,h=E.p(e),f=function(e,t){var n=E.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return d?n:n.endOf(i)},p=function(e,t){return E.w(u.toDate()[e].apply(u.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},g=this.$W,y=this.$M,v=this.$D,m="set"+(this.$u?"UTC":"");switch(h){case c:return d?f(1,0):f(31,11);case a:return d?f(1,y):f(0,y+1);case o:var _=this.$locale().weekStart||0,b=(g<_?g+7:g)-_;return f(d?v-b:v+(6-b),y);case i:case l:return p(m+"Hours",0);case r:return p(m+"Minutes",1);case n:return p(m+"Seconds",2);case t:return p(m+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(o,s){var u,d=E.p(o),h="set"+(this.$u?"UTC":""),f=(u={},u[i]=h+"Date",u[l]=h+"Date",u[a]=h+"Month",u[c]=h+"FullYear",u[r]=h+"Hours",u[n]=h+"Minutes",u[t]=h+"Seconds",u[e]=h+"Milliseconds",u)[d],p=d===i?this.$D+(s-this.$W):s;if(d===a||d===c){var g=this.clone().set(l,1);g.$d[f](p),g.init(),this.$d=g.set(l,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[E.p(e)]()},p.add=function(e,s){var l,u=this;e=Number(e);var d=E.p(s),h=function(t){var n=b(u);return E.w(n.date(n.date()+Math.round(t*e)),u)};if(d===a)return this.set(a,this.$M+e);if(d===c)return this.set(c,this.$y+e);if(d===i)return h(1);if(d===o)return h(7);var f=(l={},l[n]=6e4,l[r]=36e5,l[t]=1e3,l)[d]||1,p=this.$d.getTime()+e*f;return E.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||u;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=E.z(this),o=this.$H,a=this.$m,s=this.$M,c=n.weekdays,l=n.months,d=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},f=function(e){return E.s(o%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:E.s(s+1,2,"0"),MMM:d(n.monthsShort,s,l,3),MMMM:d(l,s),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,c,2),ddd:d(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:E.s(o,2,"0"),h:f(1),hh:f(2),a:p(o,a,!0),A:p(o,a,!1),m:String(a),mm:E.s(a,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:i};return r.replace(h,(function(e,t){return t||g[e]||i.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(e,l,u){var d,h=E.p(l),f=b(e),p=6e4*(f.utcOffset()-this.utcOffset()),g=this-f,y=E.m(this,f);return y=(d={},d[c]=y/12,d[a]=y,d[s]=y/3,d[o]=(g-p)/6048e5,d[i]=(g-p)/864e5,d[r]=g/36e5,d[n]=g/6e4,d[t]=g/1e3,d)[h]||g,u?y:E.a(y)},p.daysInMonth=function(){return this.endOf(a).$D},p.$locale=function(){return v[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=_(e,t,!0);return r&&(n.$L=r),n},p.clone=function(){return E.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),T=S.prototype;return b.prototype=T,[["$ms",e],["$s",t],["$m",n],["$H",r],["$W",i],["$M",a],["$y",c],["$D",l]].forEach((function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),b.extend=function(e,t){return e.$i||(e(t,S,b),e.$i=!0),b},b.locale=_,b.isDayjs=m,b.unix=function(e){return b(1e3*e)},b.en=v[y],b.Ls=v,b.p={},b}()})),duration=createCommonjsModule((function(e,t){var n,r,i,o,a,s,c,l,u,d,h,f,p,g,y,v,m;e.exports=(a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,u={years:s=31536e6,months:c=2592e6,days:o=864e5,hours:i=36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},d=function(e){return e instanceof m},h=function(e,t,n){return new m(e,n,t.$l)},f=function(e){return r.p(e)+"s"},p=function(e){return e<0},g=function(e){return p(e)?Math.ceil(e):Math.floor(e)},y=function(e){return Math.abs(e)},v=function(e,t){return e?p(e)?{negative:!0,format:""+y(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},m=function(){function e(e,t,n){var r=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return h(e*u[f(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(t){r.$d[f(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var i=e.match(l);if(i){var o=i.slice(2).map((function(e){return Number(e)}));return this.$d.years=o[0],this.$d.months=o[1],this.$d.weeks=o[2],this.$d.days=o[3],this.$d.hours=o[4],this.$d.minutes=o[5],this.$d.seconds=o[6],this.calMilliseconds(),this}}return this}var t=e.prototype;return t.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(t,n){return t+(e.$d[n]||0)*u[n]}),0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=g(e/s),e%=s,this.$d.months=g(e/c),e%=c,this.$d.days=g(e/o),e%=o,this.$d.hours=g(e/i),e%=i,this.$d.minutes=g(e/6e4),e%=6e4,this.$d.seconds=g(e/1e3),e%=1e3,this.$d.milliseconds=e},t.toISOString=function(){var e=v(this.$d.years,"Y"),t=v(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=v(n,"D"),i=v(this.$d.hours,"H"),o=v(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var s=v(a,"S"),c=e.negative||t.negative||r.negative||i.negative||o.negative||s.negative,l=i.format||o.format||s.format?"T":"",u=(c?"-":"")+"P"+e.format+t.format+r.format+l+i.format+o.format+s.format;return"P"===u||"-P"===u?"P0D":u},t.toJSON=function(){return this.toISOString()},t.format=function(e){var t=e||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return t.replace(a,(function(e,t){return t||String(n[e])}))},t.as=function(e){return this.$ms/u[f(e)]},t.get=function(e){var t=this.$ms,n=f(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?g(t/u[n]):this.$d[n],0===t?0:t},t.add=function(e,t,n){var r;return r=t?e*u[f(t)]:d(e)?e.$ms:h(e,this).$ms,h(this.$ms+r*(n?-1:1),this)},t.subtract=function(e,t){return this.add(e,t,!0)},t.locale=function(e){var t=this.clone();return t.$l=e,t},t.clone=function(){return h(this.$ms,this)},t.humanize=function(e){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},e}(),function(e,t,i){n=i,r=i().$utils(),i.duration=function(e,t){var n=i.locale();return h(e,{$l:n},t)},i.isDuration=d;var o=t.prototype.add,a=t.prototype.subtract;t.prototype.add=function(e,t){return d(e)&&(e=e.asMilliseconds()),o.bind(this)(e,t)},t.prototype.subtract=function(e,t){return d(e)&&(e=e.asMilliseconds()),a.bind(this)(e,t)}})}));dayjs_min.extend(duration);var ignoreList=["__cep_sdk_onboard","__cep_trigger_sdk","_be_active"],moreOP=["and","or","not"],CepRule=function(){function CepRule(){this.support=!0,this.currentPlan=1,this.shouldSendEvent=!1,this.staing=!1,this.test=!1,this.cepReady=!1,this.eventCache=[]}return CepRule.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.cep){var r=e.adapters,i=r.fetch,o=r.storage,a=e.Types;this.types=a,this.storage=new o(!1),this.fetch=i,this.configManager=e.configManager,this.url=t.cep_url?""+t.cep_url:e.configManager.getDomain()+"/service/2/cep_settings/",this.reportUrl=e.configManager.getUrl("event"),this.key="__tea_cep_plan_"+t.app_id,this.quotasKey="__tea_cep_plan_quotas_"+t.app_id,this.isWait=!1,this.eventCache=[],this.test=e.configManager.staging,this.collect.on(a.SubmitAfter,(function(e){n.matchEvent(e)})),this.init()}},CepRule.prototype.init=function(){var e=this,t=!0,n=0,r=0,i=0,o=!1,a=this.storage.getItem(this.key)||{};if(a&&Object.keys(a).length&&(o=!0,n=a.last_update_time,r=a.fetch_interval,i=a.config_version||0,t=Date.now()-n>1e3*r),t){var s=this.configManager.get(),c=s.header,l=s.user;this.fetch(this.url,{header:c,user:l,local_time:Date.now(),config_version:i},1e4,!1,(function(t){t&&0===t.code?(a.fetch_interval=t.fetch_interval,a.data=t.data,a.last_update_time=Date.now(),a.config_version=t.config_version,e.clearQuotas(),e.initState(t.data),e.storage.setItem(e.key,a),t.data.forEach((function(t){e.event("__cep_sdk_onboard",t.plan_id)}))):304!==t.code&&400!==t.code||!o?console.log("code: "+t.code+", request error\uff0cplease try leater"):(console.log("code: "+t.code+", use old rules~"),a.last_update_time=Date.now(),e.storage.setItem(e.key,a),e.initState(a.data))}),(function(){o?(e.planData=a.data,e.initState(a.data)):(e.support=!1,console.log("request error\uff0cplease try leater"))}))}else a.last_update_time=Date.now(),this.storage.setItem(this.key,a),console.log("rule still work, use cache"),this.initState(a.data)},CepRule.prototype.initState=function(e){var t=this;e&&e.length&&(this.stateArray=new Map,this.waitArray=new Map,this.planData=e,e.forEach((function(e){var n=new Map;if(e.pattern&&e.pattern.events){var r=1===e.pattern.events.length;e.pattern.events.forEach((function(e){n.set(e.id,{id:e.id,isMatch:!1,event:null,after:e.after||null,connection:e.connection||null,window:e.window||null,matchTime:0,initTime:Date.now(),singleRule:r})})),t.stateArray.set(e.plan_id,{patternState:n,singleRule:r,pattern:{aid:e.aid,biz_id:e.biz_id,end_time:e.end_time,start_time:e.start_time,web_sdk_version:e.web_sdk_version,stage:e.stage},quotas:e.quotas})}})),this.cepReady=!0,this.dealCache(),this.collect.emit(this.types.CepReady))},CepRule.prototype.check=function(e){var t=Date.now();return Date.now()>1e3*e.end_time?(console.log("event rules:"+e.plan_id+" is over"),!1):t<1e3*e.start_time||t>1e3*e.end_time?(console.log("rule:"+e.plan_id+" time error"),!1):(this.staing="testing"===e.staing,!(SDK_VERSION<e.web_sdk_version&&(this.support=!1,console.log("you sdk version is old\uff0cplease update to "+e.web_sdk_version+" at least"),1)))},CepRule.prototype.dealCache=function(){var e=this;if(this.eventCache.length){var t=1;this.eventCache.forEach((function(n){e.matchEvent(n),t++})),t===this.eventCache.length&&(this.eventCache=[])}},CepRule.prototype.matchEvent=function(e){if(this.support&&(!this.staing||this.test)&&e&&e.length)try{if(!this.cepReady)return void this.eventCache.push(e);var t=e[0],n=t.header,r=t.user,i=t.events;i.length&&i.reverse();for(var o=0;o<i.length;o++){var a=i[o].event;if(-1!==ignoreList.indexOf(a))return!1;this.matchRule(n,r,i[o])}}catch(s){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:s.message}),void console.log(s.message)}},CepRule.prototype.matchRule=function(e,t,n){try{for(var r=0;r<this.planData.length;r++){var i=this.planData[r],o=i.plan_id;if(this.check(i)&&this.checkQuotas(o)&&i.pattern&&i.pattern.events)for(var a=i.pattern.events,s=0;s<a.length;s++)if(this.rule(e,t,n,a[s].condition)){var c=this.stateArray.get(o).patternState,l=c.get(a[s].id);if(this.stateArray.get(o).singleRule){this.changeStatus(o,a[s].id,n),this.publish([n],o,a[s].id);break}if(!l.isMatch){l.after&&c.get(l.after).isMatch?this.changeStatus(o,a[s].id,n):l.after||this.changeStatus(o,a[s].id,n);break}}}this.statusCheck()}catch(u){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:u.message}),void console.log(u.message)}},CepRule.prototype.changeStatus=function(e,t,n){var r=this.stateArray.get(e),i=r.patternState.get(t);i.isMatch=!0,i.event=n,i.matchTime=n.local_time_ms||Date.now(),r.patternState.set(t,i),this.stateArray.set(e,r)},CepRule.prototype.statusCheck=function(){var e,t,n,r;try{for(var i=__values(this.stateArray),o=i.next();!o.done;o=i.next()){var a=__read(o.value,2),s=a[0],c=a[1],l=c.patternState;if(c.isSingle)break;try{for(var u=__values(l),d=u.next();!d.done;d=u.next()){var h=__read(d.value,2),f=h[0],p=h[1];if(p.after&&(!p.after||l.get(p.after).isMatch)){if("NOT_FOLLOWED_BY"===p.connection){p.isMatch?this.reset(s,f):Date.now()-l.get(p.after).matchTime>p.window?this.publish([l.get(p.after).event,p.event],s,f):this.startWait(s,f,p);break}p.isMatch?p.matchTime-l.get(p.after).matchTime<=p.window?this.publish([l.get(p.after).event,p.event],s,f):this.reset(s,f):Date.now()-l.get(p.after).matchTime>p.window?this.reset(s,f):this.startWait(s,f,p);break}}}catch(g){n={error:g}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(y){e={error:y}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},CepRule.prototype.startWait=function(e,t,n){var r=this;try{this.waitArray.get(e)||this.waitArray.set(e,new Map);var i=this.waitArray.get(e);if(!i.get(t)){var o=setTimeout((function(){var i=r.stateArray.get(e).patternState,o=i.get(t);if("NOT_FOLLOWED_BY"===o.connection)!o.isMatch&&i.get(o.after).isMatch||o.matchTime-i.get(o.after).matchTime>n.window?((a=r.waitArray.get(e).get(t)).triggerWait=!0,r.waitArray.set(e,r.waitArray.get(e).set(t,a)),r.publish([i.get(o.after).event],e,t)):r.reset(e,t);else if("FOLLOWED_BY"===o.connection){var a;o.isMatch&&i.get(o.after).isMatch?((a=r.waitArray.get(e).get(t)).triggerWait=!0,r.waitArray.set(e,r.waitArray.get(e).set(t,a)),r.publish([i.get(o.after).event],e,t)):r.reset(e,t)}}),n.window);i.set(t,{waitFn:o,triggerWait:!1}),this.waitArray.set(e,i)}}catch(a){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:a.message}),console.log(a.message,a.stack)}},CepRule.prototype.rule=function(e,t,n,r){var i=this;try{var o=n.event,a=n.params;if(a=JSON.parse(a),-1!==moreOP.indexOf(r.op)){if(r.conditions&&r.conditions.length){var s=r.conditions,c=0,l=new Map;l.set(c,{op:r.op,result:void 0,resultList:[],resultKey:[],resultLength:s.length}),function n(r,s){for(var u=0;u<r.length;u++)if(c++,-1!==moreOP.indexOf(r[u].op)&&r[u].hasOwnProperty("conditions"))l.set(c,{op:r[u].op,result:void 0,fatherKey:s,resultList:[],resultKey:[],resultLength:r[u].conditions.length}),n(r[u].conditions,c);else{var d=i.scope(r[u].key),h=d.scope,f=d.key,p=d.key2,g=h?"header"===h?p?JSON.parse(e[p])[f]:e[f]:"user"===h?t[f]:a[f]:o,y=i.calculate(r[u].op,g,r[u].value);l.set(c,{op:r[u].op,result:y,fatherKey:s})}}(s,c);for(var u=l.get(0);void 0===u.result||u.resultList.length<u.resultLength;)l.forEach((function(e,t){if(void 0!==e.result&&void 0!==e.fatherKey){var n=l.get(e.fatherKey);n.resultList.length<n.resultLength&&-1===n.resultKey.indexOf(t)&&(n.resultKey.push(t),n.resultList.push(e.result),l.set(e.fatherKey,n))}})),l.forEach((function(e){e.resultList&&e.resultList.length===e.resultLength&&("and"===e.op&&(e.result=-1===e.resultList.indexOf(!1)),"or"===e.op&&(e.result=-1!==e.resultList.indexOf(!0)))}));return l.get(0).result}return!1}var d=this.scope(r.key),h=d.scope,f=d.key,p=d.key2,g=h?"header"===h?p?JSON.parse(e[p])[f]:e[f]:"user"===h?t[f]:a[f]:o;return this.calculate(r.op,g,r.value)}catch(y){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:y.message}),console.log(y.message),!1}},CepRule.prototype.publish=function(e,t,n){try{var r=this.configManager.get().user,i={biz_id:this.stateArray.get(t).pattern.biz_id,plan_id:t,uid:r.user_id||"",did:r.device_id||"",uuid:r.user_unique_id,events:e,extra:{url:window.location.href}};this.collect.emit("__cep_match",i),(window.opener||window.parent).postMessage({type:"__cep_match",data:i},"*"),this.event("__cep_trigger_sdk",t),this.addQuotas(t),this.reset(t,n),console.log(this.stateArray)}catch(o){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:o.message}),void console.log(o.message)}},CepRule.prototype.addQuotas=function(e){var t=this.stateArray.get(e).quotas;if(t&&t.length){var n=this.storage.getItem(this.quotasKey)||{};n[e]||(n[e]={value:0,lastTime:Date.now()});var r=n[e].value;0===r&&(n[e].lastTime=Date.now()),n[e].value=r+1,this.storage.setItem(this.quotasKey,n)}},CepRule.prototype.checkQuotas=function(e){var t=this.stateArray.get(e).quotas,n=this.storage.getItem(this.quotasKey)||{};if(n[e]||(n[e]={value:0,lastTime:Date.now()}),t&&t.length){var r=t[0].granularity,i=t[0].value;if("per_keyid"!==t[0].type)return!0;var o=this.release(r);return"all"===o?!(n[e].value>=i&&(console.log("plan:"+e+" limit"),1)):Date.now()-n[e].lastTime>=o?(n[e].value=0,n[e].lastTime=Date.now(),this.storage.setItem(this.quotasKey,n),!0):!(n[e].value>=i&&(console.log("plan:"+e+" limit"),1))}return!0},CepRule.prototype.clearQuotas=function(){this.storage.setItem(this.quotasKey,null)},CepRule.prototype.release=function(e){if("all"===e)return e;var t=dayjs_min.duration(e);return t?t.asMilliseconds():"all"},CepRule.prototype.reset=function(e,t){var n=this.stateArray.get(e);if(n.singleRule){var r=n.patternState.get(t);r.isMatch=!1,r.event=null,r.matchTime=0,r.initTime=Date.now(),n.patternState.set(t,r)}else n.patternState.forEach((function(e){e.isMatch=!1,e.event=null,e.matchTime=0,e.initTime=Date.now()}));this.stateArray.set(e,n);var i=this.waitArray.get(e);i&&i.get(t)&&(clearTimeout(i.get(t).waitFn),i.delete(t))},CepRule.prototype.event=function(e,t){try{var n={event:e,params:JSON.stringify({plan_id:t||"",biz_id:this.stateArray.get(t).pattern.biz_id}),local_time_ms:Date.now()},r=this.configManager.get(),i=r.header,o=r.user;i.custom=JSON.stringify(i.custom);var a={events:[n],user:o,header:i};this.fetch(this.reportUrl,[a])}catch(s){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:s.message}),void console.log(s.message)}},CepRule.prototype.scope=function(e){var t="",n="";if(e.indexOf(".")>-1){var r=e.split(".");t=r[0],e=r[1],"header"===t&&"custom"===e&&(e=r[2],n=r[1])}return{scope:t,key:e,key2:n}},CepRule.prototype.calculate=function(op,paramA,paramB){try{if("="===op)return paramA===paramB;if(-1!==["=","<",">",">=","<=","!="].indexOf(op))return eval(""+paramA+op+paramB);if(-1!==["in","contains"].indexOf(op))return-1!==paramB.indexOf(paramA);if(-1!==["is not null","is null"].indexOf(op))return"is null"===op?null==paramA:null!=paramA;if(-1!==["startswith","endswith"].indexOf(op)){if("startswith"===op)return 0===paramA.indexOf(paramB);var start=paramA.length-paramB.length,str=paramA.substr(start,paramB.length);return str===paramB}}catch(e2){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message}),console.log(e2.message),!1}},CepRule}(),pluginExtendList={autotrack:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/autotrack.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/ab.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/stay.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/route.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/cep.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"},object:"LogCep"},tracer:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/tracer.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"},visual:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/visual.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/visual.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/visual.js"},object:"LogVisual"}},getLogPluginSpace=function(){return"undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null},pluginObject=getLogPluginSpace(),PluginExtend=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){if("sdk"===t)if(pluginExtendList.hasOwnProperty(n)){var r=pluginExtendList[n].object,i=pluginExtendList[n].src[e.channel]+"?query="+Date.now();e.exist(n,r,i)}else console.warn("your "+n+" is not exist\uff0cplease check plugin name");else"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(t){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,n){var r=this;pluginObject[t]?(this.process(e,pluginObject[t]),console.log("\u5df2\u6709"+e+"\u63d2\u4ef6\uff0c\u907f\u514d\u91cd\u590d\u52a0\u8f7d~")):this.loadPlugin(e,n,(function(){r.process(e,pluginObject[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","\u2013","load plugin:"+e+" success","-")}),(function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","\u2013","load plugin:"+e+" error","-")}))},e.prototype.process=function(e,t,n){try{if(n){var r=new t;r.apply&&r.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(i){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message}),console.log("excude "+e+" error, message:"+i.message)}},e.prototype.loadPlugin=function(e,t,n,r){var i=this;try{var o=document.createElement("script");o.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),o.onerror=function(){r(t)},o.onload=function(){i._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(o)}catch(a){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:a.message})}},e}(),Verify=function(){function e(){this.verifyReady=!1,this.waitTime=5e3,this.cleanStatus=!1}return e.prototype.apply=function(e,t){var n=this;this.collector=e,this.config=t;var r=e.adapters.storage;this.cacheStorgae=new r(!1,"session"),this.eventStorage=[],this.collector.on("submit-verify",(function(e){e&&e.length&&n.eventStore(e[0])})),this.checkCache()},e.prototype.checkCache=function(){var e=this;this.verifyCookieKey="__applog_verify_set_"+this.config.app_id,this.cacheStorgae.getCookie(this.verifyCookieKey);var t=this.cacheStorgae.getItem(this.verifyCookieKey);this.sign=t&&t.sign||"",this.origin=t&&t.origin||"*";var n=setTimeout((function(){e.cleanVerify(),clearTimeout(n),e.collector.off("submit-verify")}),this.waitTime);window.addEventListener("message",(function(t){t&&t.data&&"simulator:verify"===t.data.type&&(clearTimeout(n),e.receMessage(t))}),!0)},e.prototype.receMessage=function(e){if(!this.cleanStatus){var t=e.data;this.verifyReady=!0,this.sign=t.sign,this.origin=e.origin,this.cacheStorgae.setItem(this.verifyCookieKey,JSON.stringify({sign:t.sign,origin:e.origin})),this.eventStorage.length&&this.postVerify(this.eventStorage,t.sign,e.origin)}},e.prototype.eventStore=function(e){this.cleanStatus||(this.verifyReady?this.postVerify(e,this.sign,this.origin):this.eventStorage.push(e))},e.prototype.cleanVerify=function(){this.cleanStatus=!0,this.eventStorage=[]},e.prototype.postVerify=function(e,t,n){try{var r=[];isArray(e)?e.forEach((function(e){r.push(e)})):r.push(e);var i={type:"simulator:verify:event",sign:t,pageUrl:window.location.href,events:r};(window.opener||window.parent).postMessage(i,n)}catch(o){console.log("web verify post message error ~")}},e}(),RuotePage=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var n=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(n.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:location.href,refer_title:document.title||location.pathname,refer_manual_key:""},this.config.autotrack&&"object"==typeof this.config.autotrack&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(this.cache_key,this.cache)},e.prototype.hack=function(){var e=this,t=window.history.pushState;history.pushState=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];"function"==typeof history.onpushstate&&history.onpushstate({state:n});var o=t.call.apply(t,__spread([history,n],r));if(e.lastLocation!==location.href){var a=e.getPopStateChangeEventData();return e.lastLocation=location.href,e.sendPv(a,"pushState"),o}};var n=history.replaceState;history.replaceState=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t});var o=n.call.apply(n,__spread([history,t],r));if(e.lastLocation!==location.href){var a=e.getPopStateChangeEventData();return e.lastLocation=location.href,e.sendPv(a),o}}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this,t=null;window.addEventListener("hashchange",(function(n){if(e.lastLocation!==window.location.href&&(clearTimeout(t),e.allowHash)){e.lastLocation=window.location.href;var r=e.getPopStateChangeEventData();e.sendPv(r)}})),window.addEventListener("popstate",(function(n){e.lastLocation!==window.location.href&&(t=setTimeout((function(){e.lastLocation=window.location.href;var t=e.getPopStateChangeEventData();e.sendPv(t)}),10))}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){try{var e,t,n=this.storage.getItem(this.cache_key)||{};e=document.referrer?document.referrer:n&&n.refer_key||"";var r=this.storage.getItem("__tea_cache_first_"+this.appid);return t=!r||1!=r,{is_html:1,url:location.href,referrer:e,page_key:location.href,refer_page_key:e,page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:n&&n.refer_manual_key||"",refer_page_title:n&&n.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+t}}catch(i){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message}),{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e}();Collector$1.usePlugin(PluginExtend,"extend"),Collector$1.usePlugin(Ab,"ab"),Collector$1.usePlugin(Stay,"stay"),Collector$1.usePlugin(AutoTrack,"autotrack"),Collector$1.usePlugin(Verify,"verify"),Collector$1.usePlugin(Et,"et"),Collector$1.usePlugin(Profile,"profile"),Collector$1.usePlugin(CepRule,"cep"),Collector$1.usePlugin(HeartBeat,"heartbeat"),Collector$1.usePlugin(Monitor,"monitor"),Collector$1.usePlugin(RuotePage,"route"),Collector$1.usePlugin(Tracer,"tracer"),new Collector$1("default");var Collector$1$1=Collector$1;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}var DEBUG="undefined"!=typeof window&&window.location.href.indexOf("loggerdebug")>-1;function computeWatchDur(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,n=0;n<e.length;n++)isNaN(Number(e[n].end))||isNaN(Number(e[n].begin))||e[n].begin<0||e[n].end<0||e[n].end<e[n].begin||(t+=e[n].end-e[n].begin);return parseInt(1e3*t,10)}function getHostFromUrl(e){if(null==e||""===e||"string"!=typeof e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n}function generateSessionId(e){var t=(new Date).getTime();try{e=parseInt(e)}catch(e2){e=0}return t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}function isType(e){return function(t){return Object.prototype.toString.call(t)==="[object ".concat(e,"]")}}function getResponseHeaders(e){var t={};if(e instanceof window.XMLHttpRequest)try{e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var n=e.split(": "),r=n.shift(),i=n.join(": ");t[r]=i}))}catch(n){}return t}function log(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];DEBUG&&(t=console).log.apply(t,["[logger]",e].concat(r))}function nowTime(){try{return Math.round(window.performance.now())}catch(e2){return(new Date).getTime()}}function curTimestamp(){return(new Date).getTime()}function formatData(e,t){var n={ext:e.ext||{},data:{}};return Object.keys(e).map((function(r){t[r]?n.data[t[r]]=e[r]:"ext"!==r&&(n.ext[r]=e[r])})),n}function getXhr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){try{e||r(new Error("url is undefined"));var i=nowTime(),o=i,a={},s=new window.XMLHttpRequest;s.open("get",e),s.onreadystatechange=function(){2===s.readyState&&(a.headers=getResponseHeaders(s),a.connectTime=nowTime()-o,a.status=s.status,a.statusText=s.statusText,i=nowTime())},s.onload=function(){n(a)},s.onprogress=function(e){var t,n=nowTime()-i;t=parseInt(e.loaded/1e3/(n/1e3),10),a.speed=0|t,a.costTime=n},s.onerror=function(e){a.status||(a.status=-1,a.costTime=nowTime()-i),r(a)},s.ontimeout=function(){a.status||(a.status=-2,a.costTime=nowTime()-i),n(a)},s.onabort=function(){n(a)},s.responseType="arraybuffer",s.timeout=t.timeout||1e4,s.setRequestHeader("Range","bytes=".concat(t.range||"0-1048576")),s.send()}catch(e2){r(e2)}}))}function checkVideoSrcIsEmpty(e){return!e||window.location.href.indexOf(e)>-1}function checkIsBlob(e){return!!e&&/^blob:/.test(e)}var KEYMAP={x_response_sinfo:"x-response-sinfo",x_response_cache:"x-response-cache",x_response_cinfo:"x-response-cinfo"};function transformHeader(e){if(!e)return{};var t={};return Object.keys(KEYMAP).map((function(n){if(e[n]||"string"!=typeof KEYMAP[n]){if(!e[n]&&KEYMAP[n]instanceof Array){var r=KEYMAP[n].filter((function(t){return void 0!==e[t]}));r.length>0?t[n]=e[r[0]]:t[n]=""}}else t[n]=e[KEYMAP[n]]||""})),t}function appendData(e,t){return!e||"string"!=typeof t&&"number"!=typeof t?t:e+""+t}function typeOf(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}function parseTempData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object.keys(t).map((function(r){e[r]="append"===n?appendData(e[r],t[r]):t[r]})),e}function hasClass(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(e2){var n=e.className&&"object"===_typeof(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}}function formatDefinition(e){return"String"===typeOf(e)?e.replace("P","p"):e?"Number"===typeOf(e)?"".concat(e):void 0:""}function toJsonString(e){try{return JSON.stringify(e)}catch(e2){return""}}function checkUrlIsExpired(e){if(!e||"String"!==typeOf(e))return 0;var t=0;try{var n=new RegExp("(\\?|&)x-tos-expires=([^&]*)(&|$)"),r=e.match(n);if(null!==r)t=parseInt(r[2],10);else{var i=e.split("/");i.length>5&&8===i[4].length&&(t=parseInt(i[4],16))}return t>0?t<parseInt((new Date).getTime()/1e3,10)?1:2:0}catch(e2){return 0}}var ENTRIES=[],MAX_COUNT=30;function findPerformanceInfo(e){var t={};try{e=e.replace(/^http:|^https:/,"");for(var n=ENTRIES||[],r=function(r){if(n[r].name.replace(/^http:|^https:/,"")===e)return["domainLookupEnd","domainLookupStart","startTime","requestStart","responseEnd","responseStart","connectStart","connectEnd","fetchStart"].map((function(e){t[e]=Math.round(n[r][e])})),t.url=n[r].name,t.duration=Math.round(n[r].duration),t.domainDuration=t.domainLookupEnd-t.domainLookupStart,t.connectDuration=t.connectEnd-t.connectStart,"break"},i=n.length-1;i>=0&&"break"!==r(i);i--);return t}catch(e2){return t}}function addPerformaceObserver(){try{new window.PerformanceObserver((function(e,t){var n=e.getEntriesByType("resource");ENTRIES.length>MAX_COUNT&&ENTRIES.splice(0,ENTRIES.length-MAX_COUNT);for(var r=0;r<n.length;r++)ENTRIES.push(n[r])})).observe({entryTypes:["resource"]})}catch(e2){console.warn("PerformanceObserver not support",e2)}}"undefined"!=typeof window&&addPerformaceObserver();var REPORT_EVENTS={ONE_PLAY:"videoplayer_oneplay",ONE_OPERA:"videoplayer_oneopera",ONE_ERROR:"videoplayer_oneerror",ONE_EVENT:"videoplayer_oneevent",ONE_TEMP:"videoplayer_onetemp"},ERROR_TYPES={data:1e3,runtime:1002,parse:1004,network:1003,no_error_handler:9997,custom_error:9998,other:9999,notSupport:1005},ERROR_CODES={1:-499991,2:-499992,3:-499993,4:-499994,5:-499995},PLAYBACK_STATE={STOP:0,PLAYING:1,PAUSE:2,ERROR:3,LOADING:4},LOAD_STATES={UNKNOWN:0,PLAYABLE:1,STALLED:2,ERROR:3},ENDED_TYPE={ERROR:1,NEXT:2,ENDED:3,UNLOAD:4,DESTROY:5,PLAY_CATCH:6,PLAY_ERROR:7},LOGTYPES={RETRY:"error_retry",ONEERROR:"oneerror",ONEEVENT:"oneevent",ONETEMP:"onetemp"},CACHE_FILE_TYPE={NO_CACHE:0,CACHED:1},MAX_TIME=432e5,MAX_COST=36e5,COMMON_KEYS=["tag","subtag","device_type"],MIN_WAITIONG=200,MAX_STALL_TIME=6e4,isSupport=_isLocalStorageUsable();function probeSupport(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(e2){return!1}}function checkIfLocalStorageThrows(){var e="_localstorage_support_test";try{return window.localStorage.setItem(e,!0),window.localStorage.removeItem(e),!1}catch(e2){return!0}}function _isLocalStorageUsable(){return probeSupport()&&!checkIfLocalStorageThrows()}var Strorage=isSupport?window.localStorage:{},LOGKEY="__xgplayerlogkey",LOCAL_LOG={set:function(e){try{var t=this.get();t.push(e),Strorage.setItem(LOGKEY,JSON.stringify(t))}catch(n){}},get:function(){try{var e=Strorage.getItem(LOGKEY);return e?JSON.parse(e):[]}catch(t){return[]}},remove:function(){try{Strorage.removeItem(LOGKEY)}catch(e2){}},clear:function(){try{Strorage.clear()}catch(e2){}}},RegMap=[{key:"QQBrowser",reg:/(qqbrowser)\/([\d.]+)/},{key:"QIHU360EE",reg:/qihu 360ee/},{key:"QIHU360SE",reg:/qihu 360se/},{key:"2345Explorer",reg:/(2345explorer)\/([\d.]+)/},{key:"Sogou",reg:/(metasr)/},{key:"Wexin",reg:/(micromessenger)\/([\d.]+)/},{key:"Openlanguage",reg:/(openlanguage)\/([\d.]+)/},{key:"NewsArticle",reg:/(newsarticle)\/([\d.]+)/},{key:"VideoArticle",reg:/(videoarticle)\/([\d.]+)/},{key:"Hotsoon",reg:/(live_stream)_([\d.]+)/},{key:"Aweme",reg:/(aweme)_([\d.]+)/},{key:"Lark",reg:/(lark)\/([\d.]+)/},{key:"PlayStation",reg:/(playstation)/},{key:"BingPreview",reg:/(bingpreview)\/([\d.]+)/},{key:"Baiduspider",reg:/(baiduspider-render)\/([\d.]+)/},{key:"YandexBot",reg:/(yandexbot)\/([\d.]+)/},{key:"Chrome",reg:/(chrome)\/([\d.]+)/},{key:"Safari",reg:/(version)\/([\d.]+)\s*(safari)/}],IERegMap=[{key:"Trident",reg:/(rv:)([\d.]+)/},{key:"Trident",reg:/(msie)\s*([\d.]+)/}];function isSupportMP4(){var e={isSupport:!1,mime:""};if("undefined"==typeof document)return e;var t=document.createElement("video");return"function"==typeof t.canPlayType?(["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"].map((function(n){"probably"===t.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(e.isSupport=!0,e.mime+="||".concat(n))})),e):(t=null,e)}var SPIDER_UA=["Baiduspider","YandexBot"];function checkIsSpider(e,t){var n=!1;return SPIDER_UA.map((function(t){t===e&&(n=!0)})),/(\+http|; http|\(http):\/\/([\w.]+\/?)\S*/.test(t)&&(n=!0),n}function detect(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.toLocaleLowerCase();var t=/(iphone)/.test(e)||/(ipad)/.test(e),n=/(android)/.test(e),r=/(windows phone)/.test(e),i=t||n||r,o={isIOS:t,isAndroid:n,isMobile:i,isPC:!i,isPad:/(ipad)/.test(e)},a=isSupportMP4();o.isSupportMP4=a.isSupport,o.mime=a.mime;var s="",c=0,l=[],u=RegMap;/trident/.test(e)&&(u=IERegMap);for(var d=0;d<u.length;d++)if(l=u[d].reg.exec(e)){s=u[d].key,c=l.length>2?l[2]:"";break}if(s)o["is".concat(s)]=!0,o.name=s,o.appVersion=c;else{var h=checkIs360();h&&(o.name="360EE")}if(o.name&&"Trident"!==o.name){var f=/(trident)/.exec(e);f&&(o.name=o.name?"".concat(o.name,"_Trident"):"Trident")}return o.isSpider=checkIsSpider(o.name),o}function checkIs360(){var e=navigator.mimeTypes;if(e){for(var t=0;t<e.length;t++){if(e[t].type&&e[t].type.indexOf("360")>-1)return!0;if(e[t].type&&e[t].type.indexOf("application/vnd.chromium.remoting-viewer")>-1)return!0;if(e[t].description&&e[t].description.indexOf("360")>-1)return!0}return!1}}var Browser="undefined"!=typeof navigator&&detect(navigator.userAgent);function isHevcSupported(){return!("undefined"==typeof MediaSource||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))}function probeConfigSupported(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"==typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var n=e.video||{},r=e.audio||{};try{var i=MediaSource.isTypeSupported(n.contentType),o=MediaSource.isTypeSupported(r.contentType);return Promise.resolve({supported:i&&o,smooth:!1,powerEfficient:!1})}catch(e2){return Promise.resolve(t)}}var defaultConfig={range:"0-1048576",timer:6e4,timeout:15e3},SpeedCheckTask=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),Object.keys(defaultConfig).map((function(e){void 0!==t[e]&&null!==t[e]||(t[e]=defaultConfig[e])})),this.options=t,this._headers={},this.intervalId=null,this.ishangUp=!1,this._data={contentLength:0,statusText:"",status:-1,speed:0,costTime:0,connectTime:0,contentType:""},this.url=[]}return _createClass(e,[{key:"setData",value:function(e,t){var n=this;if(Object.keys(e).map((function(t){"headers"!==t&&(n._data[t]=e[t])})),e.headers&&Object.keys(e.headers).length>0){this._headers=transformHeader(e.headers),e.headers["content-type"]&&(this._data.contentType=e.headers["content-type"]);var r=(e.headers["content-range"]||"").split("/");r&&r.length>1&&(this._data.contentLength=parseInt(r[1]))}}},{key:"contentLength",get:function(){return this._data.length||0}},{key:"trigger",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start",r=this.options;this.url=e,!this.url||"start"!==n&&(this.ishangUp||this.intervalId)?log("task>>cant`t trigger url",this.ishangUp,this.intervalId):(log("task>>trigger url ",e),this.ishangUp=!0,this.intervalId&&this.clear(),this.intervalId=setTimeout((function(){t.clear()}),"start"===n?500:r.timer),getXhr(this.url,{range:"start"===n?"0-1024":r.range,timeout:r.timeout}).then((function(e){log("getXhr>>check result ",e),t.setData(e||{}),t.ishangUp=!1})).catch((function(e){log("getXhr>>error ",e),t.ishangUp=!1,t._data.status=-1})))}},{key:"url",get:function(){return this.options.url},set:function(e){e&&(this.options.url=e)}},{key:"serverIp",get:function(){return this._headers.x_response_sinfo||""}},{key:"headers",get:function(){return this._headers||{}}},{key:"status",get:function(){return this._data.status||-1}},{key:"speed",get:function(){return this._data.speed}},{key:"clear",value:function(){clearTimeout(this.intervalId),this.intervalId=null}}]),e}(),VERSION="0.11.15";log("xgVodLogger version is ".concat(VERSION));var isObject=isType("Object"),TEA_ID=1300,LS_KEY="__tea_cache_tokens_".concat(TEA_ID),DEFAULT_INTERVAL=-1,AB_SDK_VERSION="",Collector=null,__support=Browser.isSupportMP4?1:0;__support=isHevcSupported()?__support+2:__support,probeConfigSupported({type:"file",video:{contentType:'video/mp4;codecs="hev1.1.6.L120.90"',width:1920,height:1080,bitrate:1e4,framerate:30}}).then((function(e){e&&e.supported&&(__support+=1)})).catch((function(e){}));var XGPlayerAppLogger=function(){function e(t,n){var r=this;if(_classCallCheck(this,e),_defineProperty(this,"initializeUrlLog",(function(e){var t=e&&e.url?e.url:"String"===typeOf(e)?e:"";"String"!==typeOf(t)&&(t=""),r.urlLog={initial_url:t,initial_host:getHostFromUrl(t),initial_ip:""}})),_defineProperty(this,"onXgLogCache",(function(){var e,t,n=null===(e=r.player)||void 0===e?void 0:e.getLogCache();n&&(r._templog={vtype:null===(t=r.player)||void 0===t?void 0:t.vtype,log:n},r.onOneTemp())})),_defineProperty(this,"onMediaFormatError",(function(e){r.onOneEvent({end_type:(e.error_type||"")+"Error"})})),_defineProperty(this,"onDrmTypeChange",(function(e){r.addIfExist("drm_type",{drm_type:e},r._options)})),_defineProperty(this,"onReplayBtnClick",(function(){r.resetLoggerParams()})),_defineProperty(this,"onBeforeDefinitionChange",(function(){r.resLogs.ldst=nowTime(),r._endType="switch"})),_defineProperty(this,"onDefinitionChange",(function(e){var t=e.from,n=e.to;r.changeResolution({from:t,to:n,startTime:r.resLogs.ldst,operaType:"switch"}),log("onDefinitionChange from:".concat(t,", to:").concat(n))})),_defineProperty(this,"onDefiChangeSuccess",(function(){log("onDefinitionChangeSuccess"),r.updateVideoSize(),r.triggerTask("start")})),_defineProperty(this,"onAbrChange",(function(e){var t=e.prev,n=e.cur,i=e.abrInfo;if(r.player.abrInstance){var o=r.player.abrInstance.eventInfo;log("abrChange",o),o.last_definition=t,o.now_definition=n,r.abrInfo.abr_event_info.video_switch.push(o),r.changeResolution({from:t,to:n,startTime:nowTime(),operaType:"abr_switch",abrInfo:i})}})),_defineProperty(this,"onAbrPrestallEnd",(function(e){r.abrInfo.abr_user_info.cancel_abr=e?1:0})),_defineProperty(this,"onTimeUpdate",(function(){var e=r.playlogs,t=r.resLogs,n=r.player;if(r.errorLog.try_err_c=0,e.vt||1!==r.startStep||(e.vt=curTimestamp(),log("onTimeUpdate: first frame inited","currentTime11:".concat(n.currentTime," vt-pt:").concat(e.vt-e.pt," vt-nt:").concat(e.vt-e.nt," vt-rt:").concat(e.vt-e.rt)),r.startStep=2),!t.initial_resolution){var i=n.currentDefitionFromPler&&n.currentDefitionFromPlayer.definition?n.currentDefitionFromPlayer.definition:n.config.defaultDefinition||n.video.videoHeight+"p"||"";i=formatDefinition(i),t.initial_resolution=i}t.final_resolution||(t.final_resolution=t.initial_resolution);var o=e.played.length;o<1?e.played.push({begin:n.currentTime,end:-1}):e.played[o-1].end=n.currentTime;var a=t.played.length;a<1?t.played.push({begin:n.currentTime,end:-1}):t.played[a-1].end=n.currentTime,r.lastVideoTime=n.currentTime||0})),_defineProperty(this,"onCanplay",(function(){log("onCanplay","this.startStep:".concat(r.startStep," ").concat(curTimestamp())),r.setVt()})),_defineProperty(this,"onLoadeddata",(function(){log("onLoadeddata","this.startStep:".concat(r.startStep," ").concat(curTimestamp())),r.setVt(),r.updateVideoSize()})),_defineProperty(this,"onLoadStart",(function(){var e=checkVideoSrcIsEmpty(r.player.currentSrc);r.triggerTask("start"),log("onLoadStart","this.startStep:".concat(r.startStep," ").concat(curTimestamp()," isSrcEmpty:").concat(e," player.src:").concat(r.player.src)),0!==r.startStep||e||"visible"!==document.visibilityState||r.setPt()})),_defineProperty(this,"onDashStateChange",(function(e){log("onDashStateChange","this.startStep:".concat(r.startStep," ").concat(nowTime()," state:").concat(e));var t=r.playlogs;if(r.startStep<2)switch(e){case"player_start":t.dash_pst=nowTime();break;case"wasm_start":t.dash_wst=nowTime();break;case"wasm_ready":t.dash_wrt=nowTime();break;case"init_finished":t.dash_ift=nowTime();break;case"core_start":t.dash_cst=nowTime();break;case"start_play":t.dash_spt=nowTime()}})),_defineProperty(this,"onBufferedChange",(function(){var e=r.player.video&&r.player.video.buffered;if(e){var t=e.length;t>0&&e.end(t-1)+1>r.player.duration&&(r.bft=curTimestamp())}})),_defineProperty(this,"onPlayerInited",(function(){log("player init"),r._playerCreatedTime=curTimestamp(),r.playlogs.rt=curTimestamp()})),_defineProperty(this,"onNotAutoPlay",(function(){log("onNotAutoPlay","autoplay:".concat(r.isAutoplay)),0===r.isAutoplay?r.isAutoplay=2:1===r.isAutoplay&&(r.isAutoplay=3)})),_defineProperty(this,"onDashError",(function(e){e=e||{};var t=r.errorLog;t.last_errors.push(e.errorCode),t.accu_errc++,r.onOneError({errorType:e.errorTypeCode,code:e.errorCode,url:e.url||"",headers:e.headers||{}},0)})),_defineProperty(this,"onPlayerError",(function(e){e=e||{};var t=r.errorLog,n=r.player;if(log("onPlayerError","this.player.type:".concat(r.player.type," this.player.replayRunning:").concat(r.player.replayRunning," isSupportMP4:").concat(Browser.isSupportMP4," isPC:").concat(Browser.isPC)),log("onPlayerError",e),r.load_state=LOAD_STATES.ERROR,r._endType="error",r.suspendWaitingStatus("onPlayerError"),"dash"!==n.type||!n.replayRunning){if(e.url||(e.url=r.player.currentSrc),Browser.isPC&&!Browser.isSupportMP4||Browser.isSpider)return t.errc=ERROR_CODES[5],t.errt=ERROR_TYPES.notSupport,r.onOneError({errorType:t.errt,code:t.errc,url:e.url,headers:e.headers||{},message:e.message||""},0),void(r._isOnePlayReport=!0);t.errt=e.errorTypeCode||(e.errorType&&ERROR_TYPES[e.errorType]?ERROR_TYPES[e.errorType]:9999),e.errorCode?t.errc=e.errorCode>0&&ERROR_CODES[e.errorCode]?ERROR_CODES[e.errorCode]:e.errorCode:e.code&&(t.errc=e.code>0&&ERROR_CODES[e.code]?ERROR_CODES[e.code]:e.code),t.last_errors.push(t.errc),0===t.fir_errc&&(t.fir_errc=t.errc),r.onOnePlay(ENDED_TYPE.ERROR),r.onOneTemp(ENDED_TYPE.ERROR),r.sendDegradeLog("playCatch_end",r.playlogs.degrade);var i=!1;!r._options.needXhrCheck||4!==e.errorCode&&2!==e.errorCode||(i=!0),r.onOneError({endState:ENDED_TYPE.PLAY_ERROR,errorType:t.errt,code:t.errc,url:e.url,headers:e.headers||{},message:e.message||""},0,i),r.sendEventsQueue()}})),_defineProperty(this,"onPlayInterfaceInfo",(function(e){log("onPlayInterfaceInfo",e);var t=r.errorLog,n=r.apiLog,i=r.playlogs;if(e&&Object.keys(e).map((function(t){"code"===t?n.vsc=e[t]:"message"===t?n.vsc_message=e.message||"success\uff0c\u89c6\u9891\u53ef\u6b63\u5e38\u64ad\u653e":n[t]=e[t]})),i.at=e.timestamep||(new Date).getTime(),(!e.error||-9988!==e.error.errc)&&(n.vsc=e.code||10,n.vsc_message=e.message||"success\uff0c\u89c6\u9891\u53ef\u6b63\u5e38\u64ad\u653e",e.error)){var o=e.error;t.errt=1e3,t.errc=o.errc||-9998,t.last_errors.push(o.errc||-9998),0===t.fir_errc&&(t.fir_errc=o.errc||-9998),t.accu_errc++,1===t.accu_errc&&(t.fir_errt=nowTime()),r.onOneError({errorType:1e3,code:o.errc||-9998,url:"",headers:{}})}})),_defineProperty(this,"onProgressEvent",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.netLog;if(e.speed){var n=e.speed>1e6?Math.floor(e.speed/1e3):e.speed;t.downloadSpeed=n,t.totalSpeed+=n,t.rqCount++}"oversize"!==e.type&&t.requestCount++,e.connectTime&&(t.connectCost=e.connectTime);var i=t.rqCount<7?100:e.costTime>=5e3?20:10;if(!("success"===e.type&&parseInt(100*Math.random(),10)<=i)){var o=findPerformanceInfo(e.cdnUrl),a=e.xhr||{},s=e.type?"progress_".concat(e.type):"progress",c=e.headers;c||(c=getResponseHeaders(a));var l=_objectSpread2(_objectSpread2({},c=transformHeader(c)),{},{download_speed:t.downloadSpeed,connect_cost:t.connectCost,c_dur:o.connectDuration||0,d_dur:o.domainDuration||0,r_dur:o.duration||0,rqtt:(new Date).getTime(),x_cache:c.x_response_cache||"",server_ip:c.x_response_sinfo});e.status?t.status=e.status:a&&a instanceof window.XMLHttpRequest&&(t.status=a.status||0),l.status=t.status;var u=e.cdnUrl||e.url;"error"===e.type&&r.merror.cdn.push(_objectSpread2(_objectSpread2({costTime:e.costTime,cur_play_pos:e.pos,cdn_url:u,cdn_host:getHostFromUrl(u)},l),c)),r.onOneEvent({costTime:e.costTime,vid:e.vid,end_type:s,cur_play_pos:e.pos,cdn_url:u,cdn_host:getHostFromUrl(u)},l,"error"===e.type?0:2)}})),_defineProperty(this,"onNext",(function(e){if(log("onNext:startStep:",r.startStep),r.startStep>0){if(r._reportInvalidVV(ENDED_TYPE.NEXT))return;r.onOnePlay(ENDED_TYPE.NEXT),r.onOneTemp(ENDED_TYPE.NEXT),r.sendEventsQueue()}r.vtype=null,r.playlogs.lc=0,r.resetLoggerParams()})),_defineProperty(this,"onNextEnded",(function(){var e=r.player,t=r.resLogs,n=formatDefinition(e.config.defaultDefinition||"");t.initial_resolution=n,t.final_resolution=n})),_defineProperty(this,"onXgLogWaiting",(function(e){var t=r.playlogs,n=r.resLogs,i=r.stall;if(r._options.checkByInnerLog&&0===e.type){log("onXgLogWaiting",e);var o=e.endType,a=e.costTime,s=e.start,c={download_speed:r.realSpeed,avg_speed:r.avgSpeed,mse_op:r.mp4MseOpLength,mp4_load_range:r.mp4LoadSegmentTimeRange,bitrate:r.curBitrate};if("waitingStart"===e.eventType)return r.onOneEvent({costTime:a,end_type:"waitstart"},c,2),void r.appendStallInfo("start",s);if("waitingEnd"===e.eventType){var l=nowTime();log("onXgLogWaiting>>".concat(o,"|costTime:").concat(a,"  vt:").concat(t.vt)),r.appendStallInfo("end",l,o),t.bc++,r.checkInBuffer(r.player.currentTime)?(t.de_bu_acu_t+=a,t.dbc++):(t.nbc++,t.n_bu_acu_t+=a),n.bc++,t.bu_acu_t+=a,n.bu_acu_t+=a,i.stall_end=l,i.stall_last_interval=i.stall_end-i.stall_start,i.stall_acc_time+=i.stall_last_interval,1===i.sc&&(i.first_buf_endt=l),r.onOneEvent({costTime:a,end_type:"waitend"},c,2)}}})),_defineProperty(this,"onSeeking",(function(){if(!checkVideoSrcIsEmpty(r.player.src)){var e=r.resLogs,t=r.playlogs,n=r.player,i=r.seekLog;log("onSeeking","currentTime:".concat(n.currentTime)),0===r.startStep&&r.setPt(),r.suspendWaitingStatus("seek"),r.isSeeking&&r.suspendSeekStatus("seek",!1),r.isSeeking=!0,t.played.push({begin:r.player.currentTime,end:-1}),e.played.push({begin:r.player.currentTime,end:-1}),i.lastSeekStartTime=nowTime(),i.seekBefore=r.lastVideoTime.toString(),i.intervalId=setTimeout((function(){r.isSeeking&&r.suspendSeekStatus("seekTimeout",!0)}),MAX_STALL_TIME)}})),_defineProperty(this,"onSeeked",(function(){checkVideoSrcIsEmpty(r.player.src)||r.isSeeking&&r.suspendSeekStatus("seeked",!0)})),_defineProperty(this,"onPlaying",(function(){r.suspendWaitingStatus("play"),r.load_state=LOAD_STATES.PLAYABLE;var e=nowTime();r.pauseLog.isPausing&&(r.pauseLog.isPausing=!1,r.pauseLog.pause_acu_t+=e-r.pauseLog.pause_start)})),_defineProperty(this,"onPlayCatch",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0};if(log("onPlayCatch",e,t),e){switch(e){case"mp42dash":r.vtype="DASH_2";break;case"dash2mp4":r.vtype="MP4_2";break;case"dash1mp4":r.vtype="MP4_1";break;default:r.vtype=e}var n=r.errorLog,i=r.playlogs,o=r.merror;o.playCatch.push(_objectSpread2({errc:t.errorCode,errt:t.errorType},t.headers)),r.setBr("playcatch"),n.accu_errc++,n.try_err_c++,n.fir_errc=t.errorCode,t.errorCode&&n.last_errors.push(t.errorCode),r.suspendWaitingStatus("playcatch"),r.sendDegradeLog("playCatch",i.degrade,{cdn_url:t.url}),i.degrade=e,r.onOneError({errorType:t.errorTypeCode,code:t.errorCode,url:t.url||"",status:t.httpCode||t.status,headers:t.headers||{},vid:t.vid||r.vid,preload_hit:t.preloadHit||0,preload_cached:t.preloadCached||0,endState:ENDED_TYPE.PLAY_CATCH,costTime:t.costTime,message:t.errorMessage||t.message},0)}})),_defineProperty(this,"onMediaExpied",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0},t=r.errorLog,n=r.playlogs;log("onMediaExpied",e),r.suspendWaitingStatus("expied"),r.setBr("expied"),t.accu_errc++,t.try_err_c++,t.last_errors.push(e.errorCode),n.at=(new Date).getTime(),r.merror.expied.push(_objectSpread2({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status},transformHeader(e.headers||{}))),r.onOneError({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status,headers:e.headers||{}},0)})),_defineProperty(this,"onLog",(function(e){log("onLog",e);var t=e.type;if(delete e.type,t)switch(t){case LOGTYPES.RETRY:break;case LOGTYPES.ONETEMP:r._templog||(r._templog={}),r._templog=parseTempData(r._templog,e.data,e.action),r._templog.preload_hit&&(r._cacheFile=CACHE_FILE_TYPE.CACHED);break;case LOGTYPES.ONEERROR:var n=r.errorLog;n.accu_errc++,n.try_err_c++,r.setBr("mp4error"),n.last_errors.push(e.code),r.onOneError(e,0);break;case LOGTYPES.ONEEVENT:var i=formatData(e,{costTime:"costTime",vid:"vid",end_type:"end_type",pos:"cur_play_pos",cdnUrl:"cdn_url"});i.ext&&["start","end"].map((function(e){i.ext[e]&&(i.ext["ext_".concat(e)]=i.ext[e],delete i.ext[e])})),r.onOneEvent(i.data,i.ext,2)}})),_defineProperty(this,"onPlay",(function(){log("onPlay","this.startStep :".concat(r.startStep," this.isEnded:").concat(r.isEnded)),r.isEnded&&(r.resetLoggerParams(),r.setPt())})),_defineProperty(this,"onPause",(function(){log("onPause");var e=r.pauseLog;e.isPausing=!0,e.pause_start=nowTime()})),_defineProperty(this,"onWaiting",(function(){var e=r.stall,t=r._options;r.updateCurBuffer("onWaiting"),t.checkByInnerLog||(log("onWaiting>","isSeeking:".concat(r.isSeeking," startStep:").concat(r.startStep," intervalId:").concat(e.intervalId)),r.isSeeking||0===r.playlogs.vt||r.inWaitingStart>0||(e.intervalId&&(window.clearTimeout(e.intervalId),e.intervalId=null),r.inWaitingStart=nowTime(),e.intervalId=window.setTimeout((function(){var e=r.stall;log("stall.intervalId>>".concat(e.intervalId," cost: ").concat(nowTime()-r.inWaitingStart)),r._endType="wait",r.load_state=LOAD_STATES.STALLED,r.vtype.indexOf("MP4")>-1&&r.player.currentTime>10&&r.task&&(r.triggerTask("waiting",r.initial_url),r.requestCount++),e.stall_start=r.inWaitingStart,1===e.sc&&(e.first_buf_startt=r.inWaitingStart),window.clearTimeout(e.intervalId),e.intervalId=null,r.startWaitingStatus(r.inWaitingStart,nowTime()-r.inWaitingStart),e.intervalId=setTimeout((function(){r.inWaitingStart>0&&r.suspendWaitingStatus("waitTimeout")}),MAX_STALL_TIME)}),MIN_WAITIONG)))})),_defineProperty(this,"onEnded",(function(){if(r.initial_url){log("onEnded","watchDur:".concat(r.watchDur," vt:").concat(r.vt," pt:").concat(r.pt)),r.isEnded=!0;var e=r.resLogs.df;r.changeResolution({from:e,to:e,startTime:nowTime(),operaType:"leave_switch",endType:"ended"}),r.onOnePlay(ENDED_TYPE.ENDED),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r.onOneTemp(ENDED_TYPE.ENDED),r.sendEventsQueue(),r.playlogs.lc++}})),_defineProperty(this,"onUnload",(function(){0!==r.startStep&&r.initial_url&&(r.onOneTemp(ENDED_TYPE.UNLOAD),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r._reportInvalidVV(ENDED_TYPE.UNLOAD)||r.onOnePlay(ENDED_TYPE.UNLOAD,!0))})),_defineProperty(this,"onVisibilitychange",(function(){var e=r.playlogs.vt;"visible"===document.visibilityState&&(e||r.setPt())})),_defineProperty(this,"onDestroy",(function(){log("onDestroy:this.startStep:".concat(r.startStep," initial_url:").concat(r.initial_url," ").concat(!!r.initial_url)),r.onOnePlay(ENDED_TYPE.DESTROY),r.startStep>0&&r.initial_url&&(r.onOneTemp(ENDED_TYPE.DESTROY),r.sendDegradeLog("playCatch_end",r.playlogs.degrade));var e=r.resLogs.df;r.changeResolution({from:e,to:e,startTime:nowTime(),operaType:"leave_switch",endType:"destroy"}),r.sendEventsQueue(),Browser.isPC?window.removeEventListener("beforeunload",r.onUnload):(Browser.isMobile||Browser.isPad)&&window.removeEventListener("pagehide",r.onUnload),document.removeEventListener("visibilitychange",r.onVisibilitychange),r.listeners.forEach((function(e){r.player.off(e.evt,e.handler)})),r.clearTimers(),r.player.off("destroy",r.onDestroy),r.task&&r.task.clear()})),_defineProperty(this,"onOnePlay",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(log("onOnePlay _isOnePlayReport:".concat(r._isOnePlayReport," isLeave: ").concat(t," endState:").concat(e)),!r._isOnePlayReport){var n=r.errorLog,i=r.playlogs,o=r.abrInfo,a=r.resLogs,s=r.player,c=r.apiLog,l=r.pauseLog,u=r.stall,d=r.netLog,h=r.watchDur;r._isOnePlayReport=!0;var f=curTimestamp(),p=r.getBufferTime(s),g=r.getPerformance();r.setExt();var y=_objectSpread2(_objectSpread2(_objectSpread2({local_time:(new Date).getTime(),log_type:"video_playq",plugin_exception:0,player_create_exception:"",v:r.vid,initial_url:r.initial_url,initial_host:r.initial_host,initial_ip:r.curHeaders.x_response_sinfo||0,initial_type:r.initial_type},r.curHeaders),{},{initial_resolution:a.initial_resolution,final_resolution:a.final_resolution,pt:r.pt,prepare_start_time:i.nt,prepare_end_time:i.rt||curTimestamp(),vt:r.vt,lt:r.lt,lpt:r.lpt,fvt:r.fvt,nvt:r.nvt,bft:r.bft,sc:r.seekLog.sc,sat:r.seekLog.sat,bc:r.bc,dbc:i.dbc||0,nbc:i.nbc||0,video_net_s:r.videoNetworkState,status:r.curStatus,first_buf_startt:u.first_buf_startt,first_buf_endt:u.first_buf_endt,lc:i.lc,bu_acu_t:r.bu_acu_t>MAX_TIME?0:r.bu_acu_t,de_bu_acu_t:i.de_bu_acu_t||0,n_bu_acu_t:i.n_bu_acu_t||0,pause_acu_t:l.pause_acu_t,cur_play_pos:r.cur_play_pos,load_state:r.load_state,play_speed:r.playbackRate,playback_state:r.playback_state,end_state:e,watch_dur:h>MAX_TIME?0:h,switch_resolution_c:r.switchResolutionCount,is_start_play_automatically:r.isAutoplay,start_time:r.start_time,finish:r.finish,errt:n.errt,errc:n.errc,vsc:c.vsc,vsc_message:c.vsc_message,api_str:c.api_str,auth:c.auth||c.logid,width:r.videoWidth,height:r.videoHeight,vd:r.vd,video_length:parseInt(p.video,10),audio_length:parseInt(p.audio,10),df:r.resolution,lf:a.lf,play_c:0,player_created_t:r.player_created_t,fir_errt:n.fir_errt,fir_errc:n.fir_errc,lv_method:0,ldst:a.ldst,ldet:a.ldet,is_disable_short_seek:0,mute:r.mute,volume:r.volume,download_speed:r.realSpeed?r.realSpeed:r.task&&r.task.speed?r.task.speed:d.downloadSpeed,avg_speed:r.avgSpeed?r.avgSpeed:d.rqCount>0?parseInt(d.totalSpeed/d.rqCount,10):0,bitrate:r.curBitrate,preload_state:r.preloadState,preload_hit:r.preLoadData.hit||0,preload_cached:r.preLoadData.duration||r.preLoadData.byteLength||0,mdl_req_num:d.requestCount,watingcost:r.watingCost,br:i.br,fbrt:i.fbrt,try_err_c:n.try_err_c,accu_errc:n.accu_errc,dash_pst:r.dash_pst,dash_wst:r.dash_wst,dash_wrt:r.dash_wrt,dash_ift:r.dash_ift,dash_cst:r.dash_cst,dash_spt:r.dash_spt,dash_break:2===s.dashBufferBreak?1:0,merror:toJsonString(r.merror),ex:toJsonString(r.exInfo),perf:toJsonString(g),bufs:toJsonString(r.buffers.allBuffer),vs:a.vs,vds:a.vds,vps:a.vps},r.buffers.curBuffer),{},{degrade:i.degrade,cache_file:r._cacheFile});if(0!==r.vt&&(y.et=f),s&&s.dashState&&(y.dash_state=s.dashState),s.abrInstance){var v=s.abrInstance;if(r.updateAbrInfo(o,v,s.playbackRate),v.getAbrVVStats){var m=v.getAbrVVStats();Object.keys(m).forEach((function(e){y[e]=m[e]}))}}if(o.abr_init_opts=s.config.autoBitrateOpts||{},y.abr_info=toJsonString(r.abrInfo),t){var _=!r._options.disableLocalCache;r.reportLog(REPORT_EVENTS.ONE_PLAY,y,_?1:0)}else r.reportLog(REPORT_EVENTS.ONE_PLAY,y)}})),_defineProperty(this,"onOneEvent",(function(e){var t=e.costTime,n=e.vid,i=e.end_type,o=e.cur_play_pos,a=e.cdn_url,s=e.cdn_host,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;log("onOneEvent",i);var u=r.buffers.curBuffer,d=_objectSpread2({local_time:(new Date).getTime(),v:n||r.vid,cost_time:t,end_type:i||r.end_type,cdn_url:a||r.url,cdn_host:s||"",initial_type:r.initial_type,resolution:r.resolution,play_speed:r.playbackRate,first_frame_interval:nowTime()-r.pt,last_switch_interval:r.getLastInterval("lastSwitchStartTime",r.resLogs,!1),last_seek_interval:r.updateSeekPt(!1),last_event_interval:r.getLastInterval("lastEventTime"),cur_play_pos:o||r.cur_play_pos,video_ready_s:r.videoReadyState,video_seeking:r.videoSeeking,video_paused:r.videoPaused,bufs:toJsonString(r.buffers.allBuffer),retry_count:r._retryCount,at:r.playlogs.at,stay_seconds:parseInt(((new Date).getTime()-r.playlogs.at)/1e3,10),preload_state:r.preloadState,preload_hit:r.preLoadData.hit,preload_cached:r.preLoadData.duration||r.preLoadData.byteLength},u);if("waitstart"===i&&"function"==typeof r._options.getPageFPS){var h=r._options.getPageFPS();d.cur_fps=h.curFPS||0,d.avg_fps=h.avgFPS||0}var f=r.player;f&&f.dashState&&(d.dash_state=r.player.dashState),Object.keys(c).forEach((function(e){d[e]=c[e]})),d.ex=toJsonString(r.getPlayerExt()),r.addIfExist("drm_type",r._options,d),r.reportLog(REPORT_EVENTS.ONE_EVENT,d,l)})),_defineProperty(this,"onOneTemp",(function(){if(log("onOneTemp>>",!r._templog),r._templog){var e=r.player,t=r.playlogs,n=r.pauseLog,i=r.errorLog,o=r.resLogs,a=r.watchDur,s=_objectSpread2(_objectSpread2(_objectSpread2({local_time:(new Date).getTime()},r._templog),{},{v:r.vid,initial_type:r.initial_type,pt:r.pt,vt:r.vt,lt:r.lt,fvt:r.fvt,bc:r.bc,bu_acu_t:r.bu_acu_t>MAX_TIME?0:r.bu_acu_t,pause_acu_t:n.pause_acu_t,cur_play_pos:r.cur_play_pos,watch_dur:a>MAX_TIME?0:a,finish:r.finish,errt:i.errt,errc:i.errc,vd:r.vd,df:r.resolution,lf:o.lf,br:t.br,fbrt:t.fbrt,try_err_c:i.try_err_c,accu_errc:i.accu_errc,dash_break:2===e.dashBufferBreak?1:0,bufs:toJsonString(r.buffers.allBuffer),vs:o.vs,vds:o.vds,vps:o.vps},r.buffers.curBuffer),{},{degrade:t.degrade});0!==r.vt&&(s.et=curTimestamp()),["drm_type","dynamic_type"].forEach((function(e){r.addIfExist(e,r._options,s)})),r.reportLog(REPORT_EVENTS.ONE_TEMP,s,0),r._templog=null}})),this.player=t,void 0===this.player||null===this.player)throw new Error("player is ".concat(this.player));if(n&&n.line_app_id){n.isTask&&(this.task=new SpeedCheckTask),this.eventQueue=[],this._instanceCreateTime=(new Date).getTime(),n.codec_type=n.codec_type||"h264",this._options=n,!this._options.maxQueueCount&&(this._options.maxQueueCount=5),this.line_app_id=parseInt(n.line_app_id,10)||0,this.line_user_id=(n.line_user_id||"").toString(),this.playerCoreVersion=t.version,this.playerVersion=n.playerVersion,this.closeSeekLog=n.closeSeekLog||!1,this.start_time=1e3*(n.start_time||0),this._initial_resolution="",this.__vtype=null,this.__dt="",this.resetLoggerParams();try{this.initializeTracker(),this.sendLocalLog(),this.bindEvt(),log("logger constructor:"+this.player.video)}catch(e2){console.error(e2)}}else console.warn("player.config.vodLogOpts.line_app_id is necessary for plugin xgVodLogger")}return _createClass(e,[{key:"resetLoggerParams",value:function(){log("resetLoggerParams");var e=this.playlogs?this.playlogs.lc:0;this.playlogs={nt:curTimestamp(),vt:0,rt:this.isEnded?curTimestamp():0,at:0,pt:0,bu_acu_t:0,bc:0,br:0,fbrt:"",dbc:0,de_bu_acu_t:0,nbc:0,n_bu_acu_t:0,played:[{begin:0,end:-1}],dash_pst:0,dash_wst:0,dash_wrt:0,dash_ift:0,dash_cst:0,dash_spt:0,interruptCount:0,degrade:"none",lc:e},this.degradeLog={bu_acu_t:0,bc:0,watch_dur:0,hasSendEnd:!1},this.buffers={allBuffer:[],curBuffer:{buf_diff:0,buf_s_pos:0,buf_e_pos:0,buf_include:0}},this.netLog={downloadSpeed:0,requestCount:0,connectCost:0,totalSpeed:0,rqCount:0,status:0},this.merror={cdn:[],player:[],playCatch:[],expied:[]},this.exInfo={stall:[]},this._templog=null,this._isOnePlayReport=!1,this.startStep=0,this.bft=0,this.initializeLogDatas(),this.initializeUrlLog()}},{key:"initializeLogDatas",value:function(){this.startStep=0,this.inWaitingStart=0,this.lastVideoTime=0,this._endType="",this._retryCount=0,this.lastOperaTime=DEFAULT_INTERVAL,this.lastEventTime=DEFAULT_INTERVAL,this.seekLog={intervalId:0,lastSeekStartTime:nowTime(),seekBefore:0,sat:0,sc:0},this.resLogs={lastSwitchStartTime:DEFAULT_INTERVAL,switch_count:0,abr_switch_count:0,initial_resolution:"",final_resolution:"",ldst:0,ldet:0,df:"",lf:"",played:[],bc:0,bu_acu_t:0,sc:0,sat:0,buf:0,lbuf:0,lplayed:0,vs:0,vds:0,vps:0,vis:0,bitrate:0},this.apiLog={code:0,message:"",logid:"",api:"",auth:"",error:{}},this.errorLog={accu_errc:0,try_err_c:0,errt:0,errc:0,fir_errt:0,fir_errc:Browser.isSupportMP4?0:1005,last_errors:[]},this.pauseLog={pause_acu_t:0,isPausing:!1,pause_start:0},this.stall={intervalId:0,stall_count:0,first_buf_startt:0,first_buf_endt:0,stall_start:0,stall_end:0,stall_last_interval:0,stall_acc_time:0},this._playerCreatedTime=0,this.load_state=LOAD_STATES.UNKNOWN,this.lv_method=6,this.isSeeking=!1,this.isEnded=!1,this.startStep=0,this.isAutoplay=this.player.config&&this.player.config.autoplay?1:0,this.abrInfo={abr_general_info:{},abr_event_info:{video_switch:[],video_stall:[],video_exit:{}},abr_play_info:{start_play_time_ms:0,is_hint:0,playback_info:{internet_speed_record:[],play_bitrate_record:[],buffer_length_record:[],play_speed_record:[]}},abr_user_info:{cancel_abr:0},abr_init_opts:this.player.config.autoBitrateOpts||{}},this._cacheFile=CACHE_FILE_TYPE.NO_CACHE}},{key:"initSessionId",value:function(){var e="0";try{e=window.localStorage.getItem(LS_KEY).web_id||"0"}catch(t){e="0"}this._sessionId=generateSessionId(e),log("sessionId ".concat(this._sessionId))}},{key:"initializeTracker",value:function(){var e=this,t=this._options;if(window.__xgplayer_vod_log__)this.tracker=window.__xgplayer_vod_log__;else{this.tracker=window.__xgplayer_vod_log__=new Collector("tracker");var n=t.channel||"cn",r={app_id:"cn"===(n="va"===n||"sg"===n?n:"cn")?TEA_ID:1300===TEA_ID?323254:TEA_ID,channel:n,log:!1,disable_sdk_monitor:!0};t.channelDomain&&(r.channel_domain=t.channelDomain),r.enable_ab_test=!!t.enableAbTest,this.tracker.init(r)}this.initSessionId();var i=navigator?navigator.hardwareConcurrency:0,o=navigator?navigator.deviceMemory:0;this.commonParams={play_type:0,source_type:"vid",sdk_version:VERSION,pc:this.playerCoreVersion,pv:this.playerVersion,line_app_id:this.line_app_id,line_user_id:this.line_user_id,app_version:t.appVersion||"",platform:Browser.isPad?"pad":Browser.isMobile?"mobile":"pc",cpu_core:Number(i)||0,memory_size:Number(o)||0,support:__support,webdriver:navigator&&navigator.webdriver?1:0},log("commonParams ",this.commonParams);var a={evtParams:this.commonParams,disable_auto_pv:!0};log("Browser.name ",Browser.name),!Browser.name||Browser.isChrome||Browser.isSafari||(a.browser=Browser.name,Browser.appVersion&&(a.browser_version=Browser.appVersion)),this.line_user_id&&(a.user_unique_id=this.line_user_id,a.web_id=this.line_user_id),t.referrer&&(a.referrer=t.referrer,a.referrer_host=getHostFromUrl(t.referrer)),t.ext&&Object.keys(t.ext).map((function(n){e.exInfo[n]=t.ext[n]})),this.tracker.config(a),this.tracker.start()}},{key:"resetDefiInfo",value:function(){var e=this.resLogs;e.played=[],e.bc=0,e.bu_acu_t=0,e.sc=0,e.sat=0}},{key:"sendLocalLog",value:function(){var e=this,t=LOCAL_LOG.get();LOCAL_LOG.remove(),t.map((function(t){Object.keys(t).map((function(n){if(log("sendLocalLog",n,t[n]),e.player){e.player.emit("abLog",n,t[n]);var r=e._options.sendLocalCallback;r&&"function"==typeof r&&r(n,t[n])}e._track(n,t[n])}))}))}},{key:"_track",value:function(e,t){"function"==typeof this.tracker?this.tracker(e,t):this.tracker.event(e,t)}},{key:"bindEvt",value:function(){var e=this;this.listeners=[{evt:"play",handler:this.onPlay},{evt:"playing",handler:this.onPlaying},{evt:"pause",handler:this.onPause},{evt:"waiting",handler:this.onWaiting},{evt:"playInterfaceInfo",handler:this.onPlayInterfaceInfo},{evt:"DRM_ERROR",handler:this.onDashError},{evt:"ended",handler:this.onEnded},{evt:"loadeddata",handler:this.onLoadeddata},{evt:"loadstart",handler:this.onLoadStart},{evt:"canplay",handler:this.onCanplay},{evt:"dashStateChange",handler:this.onDashStateChange},{evt:"autoplay was prevented",handler:this.onNotAutoPlay},{evt:"autoplay_was_prevented",handler:this.onNotAutoPlay},{evt:"seeking",handler:this.onSeeking},{evt:"seeked",handler:this.onSeeked},{evt:"complete",handler:this.onPlayerInited},{evt:"timeupdate",handler:this.onTimeUpdate},{evt:"bufferedChange",handler:this.onBufferedChange},{evt:"beforeDefinitionChange",handler:this.onBeforeDefinitionChange},{evt:"definitionChange",handler:this.onDefinitionChange},{evt:"definitionChangeSuccess",handler:this.onDefiChangeSuccess},{evt:"drmTypeChange",handler:this.onDrmTypeChange},{evt:"replayBtnClick",handler:this.onReplayBtnClick},{evt:"initialUrl",handler:this.initializeUrlLog},{evt:"ABR_CHANGE",handler:this.onAbrChange},{evt:"playCatch",handler:this.onPlayCatch},{evt:"log",handler:this.onLog},{evt:"ABR_PRESTALL_END",handler:this.onAbrPrestallEnd},{evt:"progress_event",handler:this.onProgressEvent},{evt:"logger_next",handler:this.onNext},{evt:"playnext",handler:this.onNext},{evt:"nextEnded",handler:this.onNextEnded},{evt:"media_format_error",handler:this.onMediaFormatError},{evt:"xglog",handler:this.onXgLogWaiting},{evt:"xglog_cache",handler:this.onXgLogCache}];var t=this.player.config.errorKey;log(">>>errorKey",t);var n={evt:"error",handler:this.onPlayerError};t&&(n.evt=t),this.listeners.push(n),this.listeners.forEach((function(t){e.player.on(t.evt,t.handler)})),this.bindUnload()}},{key:"addIfExist",value:function(e,t,n){if(isObject(t)){var r=t[e];null!=r&&(n[e]=r)}}},{key:"changeResolution",value:function(e){var t=e.from,n=e.to,r=e.startTime,i=e.operaType,o=e.abrInfo,a=e.endType,s=void 0===a?"":a,c=this.resLogs;t=formatDefinition(t),n=formatDefinition(n),c.ldet=nowTime(),c.df=n,c.lf=t,c.final_resolution=n,c.switch_count++;var l=c.ldet-r,u={bc:c.bc,bu_acu_t:c.bu_acu_t,sc:c.sc,sat:c.sat,watch_dur:computeWatchDur(c.played)};o&&(u.abrInfo=o),this.updateVds(),this.resetDefiInfo(),this._options.closeResolutionLog||this.onOneOperator({costTime:l,operaType:i,endType:s,stateBefore:t,stateAfter:n},u,0)}},{key:"getLastInterval",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t[e],i=nowTime(),o=r===DEFAULT_INTERVAL?DEFAULT_INTERVAL:i-r;return n&&(t[e]=i),o}},{key:"updateSeekPt",value:function(e){return this.getLastInterval("lastSeekStartTime",this.seekLog,e)}},{key:"_reportInvalidVV",value:function(e){return!!this._isInvaidVV()&&(this.onOneError({endState:e,errorType:9998,code:-1,url:this.player.currentSrc,headers:{}},0),this._isOnePlayReport=!0,!0)}},{key:"_isInvaidVV",value:function(){return 0===this.vt&&-1===this.curStatus}},{key:"bindUnload",value:function(){Browser.isPC?window.addEventListener("beforeunload",this.onUnload):(Browser.isMobile||Browser.isPad)&&window.addEventListener("pagehide",this.onUnload),document.addEventListener("visibilitychange",this.onVisibilitychange),this.player.once("destroy",this.onDestroy)}},{key:"clearTimers",value:function(){var e=this.seekLog,t=this.stall;e.intervalId&&window.clearTimeout(e.intervalId),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"sendDegradeLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playCatch",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};log("sendDegradeLog",e,t,n);var r=this.degradeLog;if(!(r.hasSendEnd||"playCatch_end"===e&&"none"===t)){"playCatch_end"===e&&(r.hasSendEnd=!0);var i=this.bu_acu_t-r.bu_acu_t;this.onOneEvent({costTime:this.vd,vid:this.vid,end_type:e,cur_play_pos:this.player.currentTime,cdn_url:n.url},_objectSpread2({degrade:t,vt:this.vt,pt:this.pt,fvt:this.fvt,bc:this.bc-r.bc,bu_acu_t:i>MAX_TIME?0:i,watch_dur:this.watchDur-r.watch_dur},n),0)}}},{key:"getBufferTime",value:function(e){var t=0,n=0,r=e.video&&e.video.buffered;if(r){for(var i=r.length,o=0,a=0;a<i;a++)o+=r.end(a)-r.start(a);t=n=1e3*o}return{video:t,audio:n}}},{key:"updateAbrInfo",value:function(e,t,n){e.abr_general_info=t.generalInfo,e.abr_event_info.video_exit={local_time_ms:(new Date).getTime(),buffer_length:t.bufferLength,internet_speed:t.downloadSpeed,now_bitrate:t.nowBitrate,play_speed:n},t.getAbrPlayInfo&&(e.abr_play_info=t.getAbrPlayInfo())}},{key:"getPerformance",value:function(){return this.player.performance||{}}},{key:"setExt",value:function(){var e=this,t=this.player.ext||{};t.performance&&delete t.performance,Object.keys(t).map((function(n){"performance"!==n&&(e.exInfo[n]=t[n])}))}},{key:"onOneOperator",value:function(e){var t=e.costTime,n=e.operaType,r=e.stateBefore,i=e.stateAfter,o=e.endType,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=this.getLastInterval("lastOperaTime"),l={local_time:(new Date).getTime(),v:this.vid,opera_type:n,state_before:r,state_after:i,cost_time:t,end_type:o||this.end_type,cdn_url:this.url,resolution:this.resolution,last_interval:c,bufs:toJsonString(this.buffers.allBuffer),cur_play_pos:this.cur_play_pos,retry_count:this._retryCount},u=this.player;u&&u.dashState&&(l.dash_state=this.player.dashState),Object.keys(a).forEach((function(e){l[e]=a[e]})),this.addIfExist("drm_type",this._options,l),this.reportLog(REPORT_EVENTS.ONE_OPERA,l,s)}},{key:"onOneError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorType:0,code:0,url:"",headers:{},costTime:0,vid:"",message:"",preload_hit:0,preload_cached:0},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];log("onOneError",t);var i=this.errorLog,o=this.apiLog,a=this.resLogs,s=this.player,c=this.playlogs,l=transformHeader(t.headers||{}),u=this.getPerformance();this.setExt();var d=_objectSpread2(_objectSpread2(_objectSpread2({v:t.vid||this.vid,video_pos:this.cur_play_pos,local_time:(new Date).getTime(),cost_time:t&&t.costTime?t.costTime:0,errt:t.errorType,errc:t.code,es:this.es,cdn_url:t.url||this.url,bufs:toJsonString(this.buffers.allBuffer),resolution:a.final_resolution,last_errors:i.last_errors.join(";"),vsc:o.vsc,vsc_message:t.message||o.vsc_message,server_ip:l.x_response_sinfo||0,initial_url:this.initial_url,initial_host:this.initial_host},l),{},{cur_play_pos:this.cur_play_pos},this.buffers.curBuffer),{},{degrade:c.degrade,end_state:t.endState||ENDED_TYPE.ERROR,preload_hit:t.preload_hit||0,preload_cached:t.preload_cached||0,ex:toJsonString(this.exInfo),pref:toJsonString(u),video_ready_s:this.videoReadyState});s&&s.dashState&&(d.dash_state=s.dashState);var h=this.player.currentSrc,f=checkIsBlob(h)?checkIsBlob(t.url)?this.initial_url:t.url:h,p={connectTime:0,status:0,statusText:"",isexpired:0,isBlob:checkIsBlob(h)?1:0};if(r&&"String"===typeOf(f)){var g={};getXhr(f,{range:"0-8",timeout:2e3}).then((function(e){log("getXhr>>check result ",e);var t=transformHeader(e.headers||{});d.server_ip=t.x_response_sinfo,g=_objectSpread2(_objectSpread2({},p),{},{statusText:e.statusText||"",status:e.status||0,connectTime:0|e.connectTime,sinfo:t.x_response_sinfo||"",cinfo:t.x_response_cinfo||""})})).catch((function(e){g=_objectSpread2(_objectSpread2({},p),{},{statusText:-2===e.status?"timeout":"error",status:e.status})})).finally((function(){var t=checkUrlIsExpired(f);g.isexpired=t,d.net=toJsonString(g),e.reportLog(REPORT_EVENTS.ONE_ERROR,d,n)}))}else d.net=toJsonString(p),this.reportLog(REPORT_EVENTS.ONE_ERROR,d,n)}},{key:"reportLog",value:function(t,n,r){var i=this,o=this._options,a=this.player.ABTestTag,s=this.commonParams;!n.player_sessionid&&(n.player_sessionid=this.sessionId),!n.web_url&&(n.web_url=window.location.href),n.user_agent=navigator.userAgent,n.dynamic_type=this.dynamicType;var c="Array"===typeOf(o.absdkVersion)?o.absdkVersion.join(","):o.absdkVersion;n.absdkVersion=c||e.AB_SDK_VERSION,null!=a&&(n.abtest_tag=a);var l=this._options;if(n.codec_type=this.codecType,isObject(l)&&(COMMON_KEYS.forEach((function(e){i.addIfExist(e,l,n)})),Object.keys(s).forEach((function(e){i.addIfExist(e,s,n)})),n.vtype=this.vtype),1===r){var u={};return u[t]=n,void LOCAL_LOG.set(u)}2!==r?(this.player&&this.player.emit("abLog",t,n),this._track(t,n)):this.addEventsQueue(t,n)}},{key:"addEventsQueue",value:function(e,t){this.eventQueue.push({event:e,params:t}),this.eventQueue.length>=this._options.maxQueueCount&&this.sendEventsQueue()}},{key:"sendEventsQueue",value:function(){for(;this.eventQueue.length>0;){var e=this.eventQueue.pop();this._track(e.event,e.params)}}},{key:"startWaitingStatus",value:function(e,t){this.onOneEvent({costTime:t,end_type:"waitstart"},{},2),this.appendStallInfo("start",e),this.updateCurBuffer("startWaitingStatus")}},{key:"triggerTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",t=arguments.length>1?arguments[1]:void 0;log("triggerTask>>",e);var n=checkVideoSrcIsEmpty(t=t||this.player.src);!n&&this.vtype.indexOf("MP4")>-1&&this.task&&this.task.trigger(t,e)}},{key:"appendStallInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!this.player.ext){this.exInfo.stall||(this.exInfo.stall=[]);var r=this.exInfo.stall;if("start"===e){r.length>6&&r.splice(0,r.length-6);var i=this.buffers.curBuffer;r.push({start:t,end:-1,endType:"waitstart",cost:0,cur:this.cur_play_pos,buf_s:i.buf_s_pos,buf_e:i.buf_e_pos,buf_i:i.buf_include})}else if("end"===e){var o=r.length-1;if(o<0)return;r[o].end<0&&(r[o].end=t,r[o].endType=n,r[o].cost=t-r[o].start)}log("appendStallInfo",r)}}},{key:"suspendWaitingStatus",value:function(e){var t=nowTime(),n=this.playlogs,r=this.resLogs,i=this.stall,o=this.inWaitingStart;if(!(o<=0||this.isSeeking||n.vt<=0)){if(log("suspendWaitingStatus>>".concat(e,"|costTime:").concat(t-o," isSeeking:").concat(this.isSeeking," vt:").concat(n.vt)),this.appendStallInfo("end",t,e),t-o>MIN_WAITIONG){var a=t-this.inWaitingStart;if(n.bc++,this.checkInBuffer(this.player.currentTime)?(n.de_bu_acu_t+=a,n.dbc++):(n.nbc++,n.n_bu_acu_t+=a),r.bc++,n.bu_acu_t+=a,r.bu_acu_t+=a,i.stall_end=t,i.stall_last_interval=i.stall_end-i.stall_start,i.stall_acc_time+=i.stall_last_interval,1===i.sc&&(i.first_buf_endt=t),this.player.abrInstance&&!this.isSeeking&&this.playlogs.vt){var s=this.player.abrInstance;this.abrInfo.abr_event_info.video_stall.push({local_time_ms:(new Date).getTime(),stall_duration:parseFloat((a/1e3).toFixed(2)),buffer_length:s.bufferLength,internet_speed:s.downloadSpeed,now_bitrate:s.nowBitrate,play_speed:this.player.playbackRate,is_abr:s.isCurrentInAbr?1:0})}this.onOneEvent({costTime:a,end_type:e||"wait"},{},2)}this._endType="",this.load_state=LOAD_STATES.PLAYABLE,this.inWaitingStart=0,window.clearTimeout(i.intervalId),i.intervalId=null}}},{key:"suspendSeekStatus",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isSeeking){var n=this.seekLog,r=this.resLogs,i=this.player,o=nowTime()-n.lastSeekStartTime;log("suspendSeekStatus>>","".concat(e," currentTime:").concat(i.currentTime," costTime:").concat(o," sat:").concat(n.sat," resLogs.sat:").concat(r.sat)),n.intervalId&&window.clearTimeout(n.intervalId),n.intervalId=null,this.isSeeking=!1;var a=this._endType="seek",s=n.seekBefore,c=(i.currentTime||0).toString();n.sc++,n.sat+=o>MAX_COST?0:o,r.sc++,r.sat+=o>MAX_COST?0:o,this.updateSeekPt(!0),!this.closeSeekLog&&t&&this.onOneOperator({costTime:o,operaType:a,stateBefore:s,stateAfter:c,endType:e})}}},{key:"setPt",value:function(){var e=this.playlogs;this.startStep=1,!e.pt&&this.player.currentTime&&(this.isSeeking=!0),e.pt||(e.pt=curTimestamp(),log("setPt","init pt :".concat(e.pt,", document.visibilityState:").concat(document.visibilityState)))}},{key:"setVt",value:function(){var e=this.playlogs;1===this.startStep&&(e.vt||(e.vt=curTimestamp(),log("setVt: first frame inited","vt-pt:".concat(e.vt-e.pt," vt-nt:").concat(e.vt-e.nt))),this.startStep=2)}},{key:"setBr",value:function(e){var t=this.playlogs;t.vt>0&&(0===t.br&&(t.fbrt=e||""),t.br++)}},{key:"codecType",get:function(){var e=this.player;return e&&e.config&&e.config.codecType?e.config.codecType:this._options.codec_type||"h264"}},{key:"url",get:function(){var e=this.player;return e&&e.config?e.config.url:""}},{key:"vid",get:function(){var e=this.player;return e&&e.config?e.config.vid:""}},{key:"bc",get:function(){return this.playlogs.bc}},{key:"bu_acu_t",get:function(){return this.playlogs.bu_acu_t}},{key:"pt",get:function(){return this.playlogs.pt||curTimestamp()}},{key:"vt",get:function(){var e=this.playlogs,t=e.vt;return e.pt>0?t:0}},{key:"fvt",get:function(){var e=this.playlogs,t=e.vt,n=e.pt;return t>0&&n>0?parseInt(t-n,10):0}},{key:"nvt",get:function(){var e=this.playlogs,t=e.vt,n=e.nt;return t>0&&n>0?parseInt(t-n,10):0}},{key:"dash_pst",get:function(){return this.playlogs.dash_pst}},{key:"dash_wst",get:function(){return this.playlogs.dash_wst}},{key:"dash_wrt",get:function(){return this.playlogs.dash_wrt}},{key:"dash_ift",get:function(){return this.playlogs.dash_ift}},{key:"dash_cst",get:function(){return this.playlogs.dash_cst}},{key:"dash_spt",get:function(){return this.playlogs.dash_spt}},{key:"vd",get:function(){var e=this.player;return e.duration&&"number"==typeof e.duration&&e.duration>0?parseInt(1e3*e.duration,10):e.config.duration&&"number"==typeof e.config.duration?parseInt(1e3*e.config.duration,10):0}},{key:"cur_play_pos",get:function(){return parseInt(1e3*this.player.currentTime,10)}},{key:"volume",get:function(){return this.player.volume}},{key:"buffer_time",get:function(){var e=0;try{var t=this.player.getBufferedRange();e=t[1]-t[0]}catch(e2){e=0}return e}},{key:"player_created_t",get:function(){return this._playerCreatedTime}},{key:"playbackRate",get:function(){return this.player.playbackRate}},{key:"mute",get:function(){return this.player.muted?0:1}},{key:"videoWidth",get:function(){var e=this.player;return e&&e.video?e.video.videoWidth:0}},{key:"videoHeight",get:function(){var e=this.player;return e&&e.video?e.video.videoHeight:0}},{key:"preload",get:function(){var e=this.player;return!(!e||!e.video)&&e.video.preload}},{key:"initial_url",get:function(){var e=this.player.currentSrc;return e.indexOf("blob:")>-1&&this.urlLog.initial_url?this.urlLog.initial_url:checkVideoSrcIsEmpty(e)?"":e}},{key:"initial_host",get:function(){var e=this.player.currentSrc;return e.indexOf("blob:")>-1&&this.urlLog.initial_host?this.urlLog.initial_host:getHostFromUrl(checkVideoSrcIsEmpty(e)?"":e)}},{key:"curHeaders",get:function(){var e=this.player,t=this.task;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?transformHeader(e.__dash__.curReqVideoSegInfo.headers||{}):t?t.headers:{}}},{key:"curStatus",get:function(){var e=this.task,t=this.vtype,n=this.netLog;return t.indexOf("MP4")>-1?e?e.status:0:n.status}},{key:"play_type",get:function(){return 0}},{key:"resolution",get:function(){var e=this.player.curDefinition;return e?e.definition+"":this.resLogs.df}},{key:"sessionId",get:function(){return this._sessionId}},{key:"finish",get:function(){return this.isEnded?1:0}},{key:"end_type",get:function(){return this._endType}},{key:"avgSpeed",get:function(){return this.player&&this.player.avgSpeed?this.player.avgSpeed:0}},{key:"realSpeed",get:function(){return this.player&&this.player.realTimeSpeed?this.player.realTimeSpeed:0}},{key:"mp4MseOpLength",get:function(){if(!this.player||!this.player.plugins)return-1;var e=this.player.plugins.mp4encryptplayer;return e?e.opQueueLen||0:-1}},{key:"mp4LoadSegmentTimeRange",get:function(){if(!this.player||!this.player.plugins)return"";var e=this.player.plugins.mp4encryptplayer;return e?e.loadSegmentTimeRange.join(","):""}},{key:"preLoadData",get:function(){if(!this.player||!this.player.plugins)return[];var e=this.player.plugins.mp4encryptplayer;if(e&&e.preLoadData)return{hit:1,duration:e.preLoadData.duration,length:e.preLoadData.byteLength};var t=this.player.stat||{};if(t.preLoadData){var n=t.preLoadData.length;return{hit:n>0,length:n}}return{hit:0,duration:0,length:0}}},{key:"preloadState",get:function(){if(!this.player||!this.player.plugins)return 0;if(void 0!==this.player.preloadState)return this.player.preloadState||0;var e=this.player.plugins.mp4encryptplayer;return e&&e.preloadState?e.preloadState:0}},{key:"curBitrate",get:function(){var e=this.player,t=e.config,n=e.curDefinition;return n&&n.bitrate?n.bitrate:t.defaultBitrate?t.defaultBitrate:0}},{key:"videoReadyState",get:function(){var e=this.player;return e&&e.video?e.video.readyState:-1}},{key:"videoSeeking",get:function(){var e=this.player;return e&&e.video&&e.video.seeking?1:0}},{key:"videoPaused",get:function(){var e=this.player;return e&&e.video&&e.video.paused?1:0}},{key:"switchResolutionCount",get:function(){return this.resLogs.switch_count}},{key:"isError",get:function(){return this.player._isError||this.player.video.error}},{key:"isPlaying",get:function(){return hasClass(this.player.root,"xgplayer-playing")}},{key:"isStop",get:function(){return hasClass(this.player.root,"xgplayer-ended")||hasClass(this.player.root,"xgplayer-nostart")}},{key:"isPause",get:function(){return hasClass(this.player.root,"xgplayer-pause")}},{key:"isLoading",get:function(){return hasClass(this.player.root,"xgplayer-isloading")}},{key:"es",get:function(){return this.isPlaying?"playing":"beforePlay"}},{key:"lt",get:function(){var e=0;return 0===this.vt&&(log("lt init",this.playlogs.lt),e=curTimestamp()),e}},{key:"lpt",get:function(){return this.lt?this.lt-this.pt:0}},{key:"playback_state",get:function(){return this.isError?PLAYBACK_STATE.ERROR:this.isStop?PLAYBACK_STATE.STOP:this.isPause?PLAYBACK_STATE.PAUSE:this.isLoading?PLAYBACK_STATE.LOADING:PLAYBACK_STATE.PLAYING}},{key:"is_start_play_automatically",get:function(){return this.isAutoplay+""}},{key:"watchDur",get:function(){var e=this.player,t=this.playlogs,n=e.cumulateTime?e.cumulateTime:computeWatchDur(t.played);return n>=0?n:0}},{key:"vtype",get:function(){return this.__vtype?this.__vtype:(this.player?this.player.vtype||this.player.config.vtype:"")||(this.player.dash?"DASH":this._options.vtype||"MP4")},set:function(e){this.__vtype=e}},{key:"getPlayerExt",value:function(){var e=this.player.ext;if(e)return e}},{key:"watingCost",get:function(){if(this.inWaitingStart>0){var e=nowTime()-this.inWaitingStart;return e>MAX_COST?0:e}return 0}},{key:"videoNetworkState",get:function(){var e=this.player;return e&&e.video?e.video.networkState:-1}},{key:"eagleid",get:function(){var e=this.player;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?(e.__dash__.curReqVideoSegInfo.headers||{}).eagleid:""}},{key:"initial_type",get:function(){var e=this.player.config||{};return e&&e.vodLogOpts&&void 0!==e.vodLogOpts.currentDashType?parseInt(e.vodLogOpts.currentDashType,10):-1}},{key:"dynamicType",get:function(){var e=this.player;return this.__dt?this.__dt:e&&e.__dash__&&e.__dash__.dash&&e.__dash__.dash.mpd?(this.__dt=e.__dash__.dash.mpd.dashType,this.__dt):""}},{key:"updateCurBuffer",value:function(e){var t=this.player,n=t.buffered,r=t.currentTime,i={buf_s_pos:0,buf_e_pos:0,buf_include:0,buf_diff:0},o=[];if(!n||n.length<1)return i;for(var a=-1,s=-1,c=parseInt(1e3*r,10),l=n.length-1;l>-1;l--){var u=parseInt(1e3*n.start(l),10),d=parseInt(1e3*n.end(l),10);o.push({start:u,end:d}),c>u&&c<d?(i.buf_include=1,i.buf_s_pos=u,i.buf_e_pos=d,i.buf_diff=d-c):c<u&&(a<0||u-c<a)?(a=u-c,s=l):c>d&&(a<0||c-d<a)&&(a=c-d,s=l)}1!==i.buf_include&&(s<0&&(s=n.length-1),i.buf_s_pos=parseInt(1e3*n.start(s),10),i.buf_e_pos=parseInt(1e3*n.end(s),10)),this.buffers.allBuffer=o,this.buffers.curBuffer=i}},{key:"checkInBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.player.buffered;if(!n)return!1;e=parseInt(1e3*e,10);for(var r=0;r<n.length;r++){var i=parseInt(1e3*n.start(r),10)+t,o=parseInt(1e3*n.end(r),10)+t;if(e>i&&e<o)return!0}return!1}},{key:"updateVideoSize",value:function(){var e=this._options,t=this.player,n=this.resLogs,r=0,i=0;if(t.__dash__&&t.__dash__.dash&&t.__dash__.dash.mpd.mediaList){var o=t.__dash__.dash.mpd.mediaList.video,a=o[o.selectedIdx];log("updateVideoSize\u300b\u300bvideoItem",a),i=a?a.bitrate||a.bandwidth:0,r=a?a.size:0}else{var s=this.player.curDefinition;s?(i=s.bitrate||t.config.bitrate||0,r=parseInt(s.bitrate*t.duration/8,10)):(r=e.videoSize||t.config.videoSize||0,i=e.bitrate||t.config.bitrate||0)}log("updateVideoSize","bitrate:".concat(i,", vs:").concat(r)),r&&(n.vs=r,n.vis=parseInt(r/t.duration,10),n.bitrate=i||n.vis)}},{key:"updateVds",value:function(){var e=this.resLogs,t=this.playlogs,n=this.player;if(0!==e.vis){for(var r=parseInt(computeWatchDur(t.played)/1e3,10),i=n.buffered,o=0,a=0;a<i.length;a++)o+=parseInt(i.end(a)-i.start(a),10);log("updateVds","pdur:".concat(r," bdur:").concat(o," \n         lbuf:").concat(e.lbuf," lplayed:").concat(e.lplayed," bitrate: ").concat(e.bitrate," vis:").concat(e.vis," vs:").concat(e.vs)),e.vps+=parseInt((r-e.lplayed)*e.vis,10),e.vds+=parseInt((o-e.lbuf)*e.vis,10),e.lplayed=r,e.lbuf=o}else log("updateVds","vis:".concat(e.vis))}}],[{key:"TEA_ID",get:function(){return TEA_ID},set:function(e){LS_KEY="__tea_cache_tokens_".concat(TEA_ID=e)}},{key:"AB_SDK_VERSION",get:function(){return AB_SDK_VERSION},set:function(e){AB_SDK_VERSION="Array"===typeOf(e)?e.join(","):e}},{key:"Collector",set:function(e){Collector=e}},{key:"defaultConfig",value:function(){return{line_app_id:"",line_user_id:"",isTask:!1,codec_type:"",playerCoreVersion:"",playerVersion:"",start_time:0,maxQueueCount:5,channel:"cn",channelDomain:"",absdkVersion:"",checkByInnerLog:!0,drm_type:0,vtype:"MP4",tag:"\u666e\u901a\u89c6\u9891",subtag:"",dynamic_type:"",sendLocalCallback:function(e,t){},disableLocalCache:!1,closeResolutionLog:!1,closeSeekLog:!1,needXhrCheck:!1}}}]),e}();XGPlayerAppLogger.TEA_ID=4951,XGPlayerAppLogger.Collector=Collector$1$1;var xgVodLogger=function(e){if(e&&e.player){var t=e.player.config.vodLogOpts||{};e.player.vodLogger=new XGPlayerAppLogger(e.player,t),e.player.plugins.xgVodLogger=e.player.vodLogger}else this.vodLogger=new XGPlayerAppLogger(this,this.config.vodLogOpts||{})};return xgVodLogger.pluginName="__xgVodLogger",xgVodLogger.playerConfig={},xgVodLogger.Collector=Collector$1$1,xgVodLogger.setABSdkVersion=function(e){XGPlayerAppLogger.AB_SDK_VERSION=e},xgVodLogger},module.exports=t(es_array_concat,es_array_map,es_object_keys,esnext_string_at,es_object_toString,es_regexp_toString,web_domCollections_forEach,es_number_constructor,es_function_name,es_array_join,es_promise,es_promise_finally,es_array_splice,es_number_toFixed,es_regexp_exec,es_string_replace,es_string_split,es_string_trim,es_array_filter,es_string_match,es_regexp_constructor,es_symbol,es_symbol_description)}(index_b);var xgVodLogger=index_b.exports,index_tcpy={exports:{}};!function(module,exports){var t;t=function t(){var _assign2=function(){return(_assign2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function __values(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}var Hook=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function r(i){t(i),n.off(e,r)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&__spread(this._hooks[e]).forEach((function(e){try{e(t)}catch(n){}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),isObject$1=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},isNumber=function(e){return"number"==typeof e&&!isNaN(e)},isString=function(e){return"string"==typeof e},isArray=function(e){return Array.isArray(e)},getIndex=(lastEventId=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return lastEventId+=1}),lastEventId,decrypto=function(e,t,n){if("string"==typeof e&&"number"==typeof t&&"number"==typeof n){var r,i=[];n=n<=25?n:n%25;var o=String.fromCharCode(n+97);r=e.split(o);for(var a=0;a<r.length;a++){var s=parseInt(r[a],n);s=1*s^t;var c=String.fromCharCode(s);i.push(c)}return i.join("")}},decodeUrl=function(e){return decrypto(e,64,25)},beforePageUnload=function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},getIframeUrl=function(){try{return JSON.parse(atob(window.name))||void 0}catch(e2){return}},loadScript=function(e,t,n){var r=document.createElement("script");r.src=e,r.onerror=function(){n(e)},r.onload=function(){t()},document.getElementsByTagName("head")[0].appendChild(r)},isSupVisChange=function(){var e=0;return["hidden","msHidden","webkitHidden"].forEach((function(t){void 0!==document[t]&&(e=1)})),e},selfAdjust=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,r=Date.now()+t;return n=window.setTimeout((function i(){var o=Date.now()-r;e(),r+=t,n=window.setTimeout(i,Math.max(0,t-o))}),t),function(){window.clearTimeout(n)}},parseURL=function(e){var t=document.createElement("a");return t.href=e,t},parseUrlQuery=function(e){var t={};try{var n=parseURL(e).search;(n=n.slice(1)).split("&").forEach((function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(o){t[n]=r}}))}catch(r){}return t},hashCode=function(e){for(var t=0,n=0,r=(e+="").length,i=0;i<r;i++)((t=31*t+e.charCodeAt(n++))>0x7fffffffffff||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var js_cookie=createCommonjsModule((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(l){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(r.read||r)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(u){}if(i[l]=c,e===l)break}catch(u){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},e.exports=n()})),_getCookie=function(e,t){try{return js_cookie.get(e,{domain:t||document.domain})}catch(n){return""}},_setCookie=function(e,t,n,r){try{var i=r||document.domain,o=+new Date+(n||6048e5);js_cookie.set(e,t,{expires:new Date(o),path:"/",domain:i})}catch(a){}},Memory=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return _getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){_setCookie(e,t,n,r)},e}();function isSupportLS(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e2){return!1}}function isSupportSession(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e2){return!1}}var local={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(r){}return n||{}}catch(r){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(r){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){}},getCookie:function(e,t){return _getCookie(e,t)},setCookie:function(e,t,n,r){_setCookie(e,t,n,r)},isSupportLS:isSupportLS()},session={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(r){}return n||{}}catch(r){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(r){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(t){}},getCookie:function(e,t){return _getCookie(e,t)},setCookie:function(e,t,n,r){_setCookie(e,t,n,r)},isSupportSession:isSupportSession()},Storage=function(){function e(e,t){this._storage=t&&"session"===t?session:!e&&local.isSupportLS?local:new Memory}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){this._storage.setCookie(e,t,n,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),UTM=function(e,t,n,r){var i=new Storage(!1),o=new Storage(!1,"session"),a=e?"_tea_utm_cache_"+e:"_tea_utm_cache",s=e?"_$utm_from_url_"+e:"_$utm_from_url",c={},l=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],u={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var d=!1;for(var h in u)u[h]&&(-1!==l.indexOf(h)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[h]=u[h]):c[h]=u[h],d=!0);if(d)o.setItem(s,"1"),i.setCookie(a,JSON.stringify(c),r,n);else{var f=i.getCookie(a,n);f&&(c=JSON.parse(f))}o.getItem(s)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch(p){return u}return c},Client=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,r=n?parseURL(n).hostname:"",i=parseUrlQuery(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=UTM(this.appid,i,this.domain,this.cookie_expire);var a=this.browser(),s=this.os();return{browser:a.browser,browser_version:a.browser_version,platform:o,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:n,referrer_host:r,utm:this.utm,latest_data:this.last(n,r)}},e.prototype.last=function(e,t){var n="",r="",i="",o=location.hostname,a=!1;if(e&&t&&o!==t){n=e,r=t,a=!0;var s=parseUrlQuery(e);s.keyword&&(i=s.keyword)}return{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:i,isLast:a}},e.prototype.browser=function(){var e,t,n="",r=""+parseFloat(this.appVersion),i=this.userAgent;return-1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(n="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),r=i.substring(e+5)):(e=i.indexOf("Edg"),r=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!==(e=i.indexOf("Lark"))?(n="Lark",r=i.substring(e+5,e+11)):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("TTWebView"))?(n="TTWebView",r=i.substring(e+10,e+23)):(-1!==(e=i.indexOf("Chrome"))||-1!==(e=i.indexOf("Chrome")))&&(n="Chrome",r=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("Safari"))&&(n="Safari",r=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))&&(n="Firefox",r=i.substring(e+8)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(")"))&&(r=r.substring(0,t)),{browser:n,browser_version:r}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],r=0;r<n.length;r++){var i=n[r];if(i.r.test(this.userAgent)){"Mac OS X"===(e=i.s)&&this.isNewIpad()&&(e="iOS");break}}var o,a,s=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(a=s(/Android ([\.\_\d]+)/,o=this.userAgent))||(a=s(/Android\/([\.\_\d]+)/,o)),t=a,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios"}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),r=n.indexOf(";");t=n.slice(0,r)}}catch(i){return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),LOG_URL={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},AB_DOMAINS={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},SDK_USE_TYPE="npm",SDK_TYPE=SDK_USE_TYPE,LOG_URL_TCPY={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k"},LOG_URL_TTP={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az23z21z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az23z21z4az22z1gz1iz22z1mz1iz4az1az1mz1k"},SDK_VERSION="5.0.31_oversea",VISUAL_EDITOR_RANGERS="https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/visual-editor-rangers.js",VISUAL_AB_CORE="https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/visual-ab-core.js",VISUAL_AB_LOADER="https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/visual-ab-loader.js",HOT_PIC_URL="https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/heatmap-core",VISUAL_URL_INSPECTOR="https://lf16-data.bytepluscdn.com/obj/data-static-sg/log-sdk/collect/tester-event-inspector",EventCheck=function(){function e(e,t){this.collector=e,this.config=t,this.eventNameWhiteList=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure"],this.paramsNameWhiteList=["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time","_staging_flag"],this.regStr=new RegExp("^[a-zA-Z0-9][a-z0-9A-Z_.-]{1,255}$")}return e.prototype.checkVerify=function(e){var t=this;if(!e||!e.length)return!1;var n=e[0];if(!n)return!1;var r=n.events,i=n.header;if(!r||!r.length)return!1;var o=!0;return r.forEach((function(e){if(!e)return o=!1,void(e.checkEvent="\u4e8b\u4ef6\u5f02\u5e38");t.checkEventName(e.event)||(o=!1,e.checkEvent="\u4e8b\u4ef6\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934"),t.checkEventParams(e.params)||(o=!1,e.checkParams="\u5c5e\u6027\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934")})),this.checkEventParams(i)||(o=!1),o},e.prototype.checkEventName=function(e){return!!e&&this.calculate(e,"event")},e.prototype.checkEventParams=function(e){var t=e;if("string"==typeof e&&(t=JSON.parse(t)),!Object.keys(t).length)return!0;for(var n in t)return!(!this.calculate(n,"params")||"string"==typeof t[n]&&t[n].length>1024&&(console.warn("params: "+n+" can not over 1024 byte, please check;"),1));return!0},e.prototype.calculate=function(e,t){return-1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||!new RegExp("^\\$").test(e)&&!new RegExp("^__").test(e)||(console.warn(("event"===t?"event":"params")+" name: "+e+" can not start with $ or __, pleace check;"),!1)},e}(),Types,DebuggerMesssge$1,e,e2;e=Types||(Types={}),e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.AbTimeout="ab-timeout",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e.sessionRecord="session-record",e.SessionRecordStart="session-record-start",e.SessionRecordPause="session-record-pause",e.SessionRecordEnd="session-record-end",e.SessionRecordReport="session-record-report",e2=DebuggerMesssge$1||(DebuggerMesssge$1={}),e2.DEBUGGER_MESSAGE="debugger-message",e2.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e2.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e2.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e2.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e2.DEVTOOL_WEB_READY="devtool-web-ready";var Types$1=Types,undef=void 0,date=new Date,timeZoneMin=date.getTimezoneOffset(),timezone=parseInt(""+-timeZoneMin/60,10),tz_offset=60*timeZoneMin,COOKIE_EXPIRE=6048e5,ConfigManager=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new Client(t.app_id,t.cookie_domain||"",t.cookie_expire||COOKIE_EXPIRE).init();this.eventCheck=new EventCheck(e,t);var r="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new Storage(!1,"session"),this.localStorage=new Storage(!1,"local"),this.channelUrl="tcpy"===t.channel_type||"ttp"===t.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"},t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var i=this.localStorage.getItem(r);i&&1==i?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(r,"1")),this.envInfo={user:{user_unique_id:undef,user_type:undef,user_id:undef,user_is_auth:undef,user_is_login:undef,device_id:undef,web_id:undef,ip_addr_id:undef,user_unique_id_type:undef},header:{app_id:undef,app_name:undef,app_install_id:undef,install_id:undef,app_package:undef,app_channel:undef,app_version:undef,ab_version:undef,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:undef,traffic_type:undef,client_ip:undef,device_brand:undef,os_api:undef,access:undef,language:n.language,region:undef,app_language:undef,app_region:undef,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:undef,rnd:undef,platform:n.platform,sdk_version:SDK_VERSION,sdk_lib:"js",province:undef,city:undef,timezone:timezone,tz_offset:tz_offset,tz_name:undef,sim_region:undef,carrier:undef,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{},wechat_unionid:undef,wechat_openid:undef}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return e.prototype.initDomain=function(e){var t=this.initConfig.channel_domain;if(t)this.domain=t;else{var n=e||this.initConfig.channel,r=this.initConfig&&this.initConfig.channel_type?"tcpy"===this.initConfig.channel_type?LOG_URL_TCPY[n]:LOG_URL_TTP[n]:LOG_URL[n];this.domain=decodeUrl(r)}},e.prototype.setDomain=function(e){this.customDomain=!0,this.domain=e},e.prototype.getDomain=function(e){return this.customDomain||e&&this.initDomain(e),this.domain},e.prototype.initABData=function(){var e="__tea_sdk_ab_version_"+this.initConfig.app_id,t=null;if(this.initConfig.ab_cross){var n=this.localStorage.getCookie(e,this.initConfig.ab_cookie_domain);t=n?JSON.parse(n):null}else t=this.localStorage.getItem(e);this.setAbCache(t)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||this.channelUrl.REPORT_URL;break;case"webid":t=this.channelUrl.WEBID_URL;break;case"tobid":t=this.channelUrl.TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version="+SDK_VERSION+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){void 0!==e[n]&&null!==e[n]||t.delete(n);try{t.eventCheck.calculate(n,"config")}catch(a){}if("traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=_assign2({},t.evtParams||{},e.evtParams||{});else if("_staging_flag"===n)t.evtParams=_assign2({},t.evtParams||{},{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var r="",i="";if(n.indexOf(".")>-1){var o=n.split(".");r=o[0],i=o[1]}r?"user"===r||"header"===r?t.envInfo[r][i]=e[n]:t.envInfo.header.custom[i]=e[n]:Object.hasOwnProperty.call(t.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):Object.hasOwnProperty.call(t.envInfo.header,n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(t){console.log("get config stringify error "),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(r){console.log("setStore error"),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:r.message})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(t){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(n){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:n.message}),console.log("delete error")}},e}(),Logger=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("[instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("[instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),AppBridge=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(e){return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):n(!1)})):n(!1)}catch(r){console.log("AppLogBridge, error:"+JSON.stringify(r.stack)),n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch(t){console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(n){console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(t){console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(n){console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(t){console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(t){console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge\u57cb\u70b9\u4e0a\u62a5",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(n){console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(t){console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(t){console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(t){console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(t){console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(t){console.error("profileAppend error")}},e}(),ERROR={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function fetch$1(e,t,n,r,i,o,a,s,c){try{var l=new XMLHttpRequest,u=s||"POST";l.open(u,""+e,!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),a&&l.setRequestHeader("X-MCS-AppKey",""+a),r&&(l.withCredentials=!0),l.onload=function(){if(i){var e=null;if(l.responseText){try{e=JSON.parse(l.responseText)}catch(n){e={}}i(e,t)}}},n&&(l.timeout=n,l.ontimeout=function(){o&&o(t,ERROR.TIMEOUT)}),l.onerror=function(){l.abort(),o&&o(t,ERROR.XHR_ON)},c?l.send(t):l.send(JSON.stringify(t))}catch(d){}}var GIF_URL="/gif",ERROR$1={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},isSupportBeacon=function(){return!(!window.navigator||!window.navigator.sendBeacon)},encodePayload=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return"&"===t[0]?t.slice(1):t},sendByImg=function(e,t,n,r){try{var i,o=e.match(/\/v\d\//);i=o?o[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/";var a=e.split(i)[0];if(!a)return void r(e,t,ERROR$1.NO_URL);t.forEach((function(i){var o=encodePayload(i),s=new Image(1,1);s.onload=function(){s=null,n&&n()},s.onerror=function(){s=null,r&&r(e,t,ERROR$1.IMG_ON)},s.src=""+a+GIF_URL+"?"+o}))}catch(s){r&&r(e,t,ERROR$1.IMG_CATCH,s.message)}},request=function(e,t,n,r,i,o,a,s){var c=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===c.indexOf("MSIE 8.0")&&-1===c.indexOf("MSIE 9.0")){if(a)return isSupportBeacon()?void(window.navigator.sendBeacon(e,JSON.stringify(t))?i():o(e,t,ERROR$1.BEACON_FALSE)):void sendByImg(e,t,i,o)}else sendByImg(e,t,i,o);fetch$1(e,t,n,r,i,o,"","",s)},Event=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new EventCheck(e,t),this.cacheStorgae=new Storage(!0),this.localStorage=new Storage(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.collect.on(Types$1.Ready,(function(){n.reportAll(!1)})),this.collect.on(Types$1.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(Types$1.Event,(function(e){n.event(e)})),this.collect.on(Types$1.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(Types$1.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),beforePageUnload((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;try{var n=__spread(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var r=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),r)}}catch(i){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message})}},e.prototype.beconEvent=function(e){var t=__spread(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.destroyInstance||this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))},e.prototype.reportBecon=function(){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}},e.prototype.report=function(e){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var r;r=e.slice(n,n+this.eventLimit);var i=this.split(this.merge(r));this.send(i,t)}else i=this.split(this.merge(e)),this.send(i,t)},e.prototype.merge=function(e,t){var n=this,r=this.configManager.get(),i=r.header,o=r.user;i.custom=JSON.stringify(i.custom);var a=this.configManager.get("evtParams"),s=this.configManager.get("user_unique_id_type"),c=e.map((function(e){try{Object.keys(a).length&&!t&&(e.params=_assign2({},a,e.params)),s&&(e.params.$user_unique_id_type=s);var r=n.configManager.getAbCache();return r&&r.uuid&&r.uuid===o.user_unique_id&&n.configManager.getAbVersion()&&(e.ab_sdk_version=n.configManager.getAbVersion()),e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(i){return n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message}),e}})),l=JSON.parse(JSON.stringify({events:c,user:o,header:i}));l.local_time=Math.floor(Date.now()/1e3),l.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,l.verbose=1;var u=[];return u.push(l),u},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var r=JSON.parse(JSON.stringify(e));n.config.filter&&((r=n.config.filter(r))||console.warn("filter must return data !!")),n.collect.eventFilter&&r&&((r=n.collect.eventFilter(r))||console.warn("filterEvent api must return data !!"));var i=r||e,o=JSON.parse(JSON.stringify(i));if(n.eventCheck.checkVerify(o),!i.length)return;n.collect.emit(Types$1.SubmitBefore,i),n.collect.emit(Types$1.SubmitVerify,i),request(n.reportUrl,i,n.timeout,n.enable_ttwebid,(function(e,t){e&&0!==e.e?(n.collect.emit(Types$1.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u5931\u8d25",time:Date.now(),data:o,code:e.e,failType:"\u6570\u636e\u5f02\u5e38",status:"fail"})):(n.collect.emit(Types$1.SubmitScuess,{eventData:t,res:e}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:o,code:200,status:"success"}))}),(function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(Types$1.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u7f51\u7edc\u5f02\u5e38",time:Date.now(),data:o,code:t,failType:"\u7f51\u7edc\u5f02\u5e38",status:"fail"})}),t,!1),n.collect.emit(Types$1.SubmitAfter,i)}catch(a){console.warn("something error, "+JSON.stringify(a.stack)),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:a.message})}})))},e}(),b=function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},localWebId=function(){return b().replace(/-/g,"").slice(0,19)},Token=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new Storage(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(Types$1.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(Types$1.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;if(this.enableCookie){var t=this.storage.getCookie(this.tokenKey,this.cookieDomain);this.cacheToken=t&&"string"==typeof t?JSON.parse(t):{}}else this.cacheToken=this.storage.getItem(this.tokenKey)||{};this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(Types$1.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(Types$1.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:localWebId(),user_unique_id:this.configManager.get("user_unique_id")||localWebId()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=parseUrlQuery(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u53d1\u8d77WEBID\u8bf7\u6c42",logType:"fetch",level:"info",time:Date.now(),data:n}),fetch$1(t,n,3e3,!1,(function(t){t&&0===t.e?e.complete({web_id:e.configManager.get("web_id")||t.web_id,user_unique_id:e.configManager.get("user_unique_id")||t.web_id}):(e.collect.emit(Types$1.TokenError),console.warn("[]appid: "+e.config.app_id+" webid error, init error~")),e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u6210\u529f",logType:"fetch",level:"info",time:Date.now(),data:t})}),(function(){e.collect.emit(Types$1.TokenError),e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u7f51\u7edc\u5f02\u5e38",logType:"fetch",level:"error",time:Date.now(),data:null}),console.warn("[]appid: "+e.config.app_id+", get webid error, init error~")}))},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types$1.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types$1.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===r)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(Types$1.TokenChange,"uuid"),this.collect.emit(Types$1.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(Types$1.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(Types$1.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(Types$1.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.enableCookie||this.enable_ttwebid?(this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain),this.enable_ttwebid&&(delete e.web_id,this.storage.setItem(this.tokenKey,e))):this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this,t=this.configManager.getUrl("tobid");return new Promise((function(n){fetch$1(t,{app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},3e4,e.enable_ttwebid,(function(e){e&&0===e.e?n(e.tobid):n("")}),(function(){n("")}))}))},e}(),sessionId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},Session=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new Storage(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSession||(this.setSessionId(),this.collect.on(Types$1.SessionReset,(function(){n.resetSessionId()})),this.collect.on(Types$1.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:sessionId(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:sessionId(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime)},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(){var e={sessionId:sessionId(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,e)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:sessionId(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),AutoBase=function(e){var t=e.app_id,n=e.channel,r=e.onTokenReady,i=LOG_URL[n]+"/webid",o=new Storage(!1),a="__tea_cache_tokens_"+t,s=o.getItem(a);s&&s.web_id?r(s.web_id):request(i,{app_key:"",app_id:t,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer},3e3,!1,(function(e){if(e&&0===e.e){r(e.web_id);var t={web_id:e.web_id,user_unique_id:e.web_id,timestamp:Date.now()};o.setItem(a,t)}else r("")}),(function(){r("")}),!0)},Debugger=function(){function e(e,t){this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.collect=e,this.config=t,this.app_id=t.app_id,this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"],this.load()}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(n){console.log("devTool load fail, "+n.message)}},e.prototype.load=function(){try{this.loadBaseInfo(),this.loadHook();var e=parseUrlQuery(window.location.href);if(!e.open_devtool_web||parseInt(e.app_id)!==this.app_id)return;this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(t){console.log("debug fail, "+t.message)}},e.prototype.loadDevTool=function(){this.loadScript("https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/devtool/debug-web.js")},e.prototype.loadBaseInfo=function(){var e=this;this.info=[{title:"\u57fa\u672c\u4fe1\u606f",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,"\u4e0a\u62a5\u57df\u540d":this.collect.configManager.getDomain(),"SDK\u7248\u672c":SDK_VERSION,"SDK\u5f15\u5165\u65b9\u5f0f":SDK_TYPE}},{title:"\u7528\u6237\u4fe1\u606f",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"\u70b9\u51fb\u83b7\u53d6SSID"}},{title:"\u516c\u5171\u53c2\u6570\u4fe1\u606f",type:2,infoName:{"\u6d4f\u89c8\u5668":this.collect.configManager.get("browser"),"\u6d4f\u89c8\u5668\u7248\u672c":this.collect.configManager.get("browser_version"),"\u5e73\u53f0":this.collect.configManager.get("platform"),"\u8bbe\u5907\u578b\u53f7":this.collect.configManager.get("device_model"),"\u64cd\u4f5c\u7cfb\u7edf":this.collect.configManager.get("os_name"),"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c":this.collect.configManager.get("os_version"),"\u5c4f\u5e55\u5206\u8fa8\u7387":this.collect.configManager.get("os_version"),"\u6765\u6e90":this.collect.configManager.get("referrer"),"\u81ea\u5b9a\u4e49\u4fe1\u606f":""}},{title:"\u914d\u7f6e\u4fe1\u606f",type:3,infoName:{"\u5168\u57cb\u70b9":!!this.config.autotrack,"\u505c\u7559\u65f6\u957f":!!this.config.enable_stay_duration}},{title:"A/B\u914d\u7f6e\u4fe1\u606f",type:4,infoName:{"A/B\u5b9e\u9a8c":!!this.config.enable_ab_test}},{title:"\u5ba2\u6237\u7aef\u4fe1\u606f",type:3,infoName:{"\u6253\u901a\u5f00\u5173":!!this.config.Native}}],this.log=[],this.event=[],this.collect.on(Types$1.Ready,(function(){e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id,e.info[2].infoName["\u81ea\u5b9a\u4e49\u4fe1\u606f"]=JSON.stringify(e.collect.configManager.get("custom")),e.config.enable_ab_test&&(e.info[4].infoName["\u5df2\u66dd\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["A/B\u57df\u540d"]=e.config.ab_channel_domain||decodeUrl(AB_DOMAINS[e.config.channel]),e.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=e.collect.configManager.getAbData()),e.config.Native&&(e.info[5].infoName["\u662f\u5426\u6253\u901a"]=!!e.collect.bridgeReport)}))},e.prototype.loadHook=function(){var e=this;this.collect.on(DebuggerMesssge$1.DEBUGGER_MESSAGE,(function(t){switch(t.type){case DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.info[4].infoName["\u5df2\u66dd\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=e.collect.configManager.getAbData()):"USER"===t.secType&&(e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id),void e.updateInfo();case DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var r=t.data[0],i=r.events;if(!i.length)return;i.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.success=t.status,n.type=-1!==e.filterEvent.indexOf(n.event)?"sdk":"cus",n.type=e.collect.bridgeReport?"bridge":n.type,n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+"\uff0c msg: "+t.failType})})),e.updateEvent(r)}return}}))},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;console.log("inittttt"),e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.info[1].infoName.ssid=t.tobid,e.updateInfo()}))}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};(window.opener||window.parent).postMessage(n,this.devToolOrigin)}catch(r){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.appendChild(document.createTextNode("#debugger-applog-web {\n      position: absolute;\n      width: 90px;\n      height: 30px;\n      background: #23c243;\n      border-radius: 6px;\n      color: #fff;\n      font-size: 12px;\n      bottom: 5%;\n      right: 10%;\n      text-align: center;\n      line-height: 30px;\n      cursor: pointer;\n      z-index:100;\n    }")),e.appendChild(t);var n=document.createElement("div");n.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web">AppLog\u8c03\u8bd5</div>';var r=document.createElement("div");r.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(n),document.getElementsByTagName("body")[0].appendChild(r),document.getElementById("debugger-applog-web").addEventListener("click",(function(){(window.opener||window.parent).postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),sdk_type="base";sdk_type="full";var Collector$1=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroyInstance=!1,this.sdkReady=!1,this.adapters={},this.name=e,this.hook=new Hook,this.remotePlugin=new Map,this.Types=Types$1,this.adapters.fetch=fetch$1,this.adapters.storage=Storage}return e.usePlugin=function(t,n,r){if(n){for(var i=!1,o=0,a=e.plugins.length;o<a;o++)if(e.plugins[o].name===n){e.plugins[o].plugin=t,e.plugins[o].options=r||{},i=!0;break}i||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===sdk_type&&this.remotePlugin.get(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n=this;if(this.inited)console.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(t&&isObject$1(t))if(t.app_id&&isNumber(t.app_id))if(!t.app_key||isString(t.app_key)){var r=t.channel_type&&"tcpy"===t.channel_type?["sg","va","in"]:["sg","va"];t.channel_domain||-1!==r.indexOf(t.channel)||(console.warn("channel must "+r.join(" ,")+"!!!"),t.channel="sg"),this.inited=!0,this.logger=new Logger(this.name,t.log),this.appBridge=new AppBridge(this,t.enable_native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new ConfigManager(this,t),this.debugger=new Debugger(this,t),this.initConfig=t,this.emit(Types$1.Init),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cINIT",data:t,level:"info",time:Date.now()}),t.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.set({app_id:t.app_id}),this.eventManager=new Event,this.tokenManager=new Token,this.sessionManager=new Session,Promise.all([new Promise((function(e){n.once(Types$1.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){n.once(Types$1.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var r=t.plugin,i=t.options,o=Object.assign(n.initConfig,i),a=new r;return a.apply(n,o),e.push(a),e}),n.pluginInstances)}catch(r){console.log("load plugin error, "+r.message),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:r.message})}n.sdkReady=!0,n.emit(Types$1.Ready),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u521d\u59cb\u5316\u5b8c\u6210",time:Date.now(),level:"info",data:n.configManager.get("user")}),n.logger.info("appid: "+t.app_id+", userInfo:"+JSON.stringify(n.configManager.get("user"))),n.logger.info("appid: "+t.app_id+", sdk is ready, version is "+SDK_VERSION+", you can report now !!!"),t.disable_auto_pv&&(n.disableAutoPageView=!0);try{(t.enable_ab_test||t.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(r){n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:r.message})}n.pageView(),n.on(Types$1.TokenChange,(function(e){"webid"===e&&n.pageView(),n.logger.info("appid: "+t.app_id+" token change, new userInfo:"+JSON.stringify(n.configManager.get("user"))),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u8bbe\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:n.configManager.get("user")})})),n.on(Types$1.TokenReset,(function(){n.logger.info("appid: "+t.app_id+" token reset, new userInfo:"+JSON.stringify(n.configManager.get("user"))),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u91cd\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:n.configManager.get("user")})})),n.on(Types$1.RouteChange,(function(e){e.init||t.disable_route_report||n.pageView()}));try{(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(r){}})),this.tokenManager.apply(this,t),this.eventManager.apply(this,t),this.sessionManager.apply(this,t)),this.inited=!0}else console.warn("app_key param is error, must be string, please check!");else console.warn("app_id param is error, must be number, please check!");else console.warn("init params error,please check")},e.prototype.config=function(e){if(this.inited)if(e&&isObject$1(e))if(this.bridgeReport)this.appBridge.setConfig(e);else{e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv);var t=_assign2({},e);if(this.initConfig&&this.initConfig.configPersist){var n=this.configManager.getStore();n&&(t=Object.assign(n,e)),this.configManager.setStore(e)}t.web_id,t.user_unique_id;var r=__rest(t,["web_id","user_unique_id"]);t.hasOwnProperty("web_id")&&this.emit(Types$1.ConfigWebId,t.web_id),t.hasOwnProperty("user_unique_id")&&this.emit(Types$1.ConfigUuid,t.user_unique_id),this.configManager.set(r),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cCONFIG",level:"info",time:Date.now(),data:t})}else console.warn("config params is error, please check");else console.warn("config must be use after function init")},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(Types$1.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(Types$1.Start),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cSTART",level:"info",time:Date.now()}),this.bridgeReport&&(this.pageView(),this.emit(Types$1.Ready)))},e.prototype.event=function(e,t){var n=this;try{var r=[];if(Array.isArray(e))e.forEach((function(e){var t=n.processEvent(e[0],e[1]||{});t&&r.push(t)}));else{var i=this.processEvent(e,t);if(!i)return;r.push(i)}this.bridgeReport?r.forEach((function(e){var t=e.event,r=e.params;n.appBridge.onEventV3(t,JSON.stringify(r))})):r.length&&(this.emit(Types$1.Event,r),this.emit(Types$1.SessionResetTime))}catch(o){console.warn("something error, please check"),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:o.message})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))console.warn("beconEvent not support batch report, please check");else{var n=[],r=this.processEvent(e,t||{});r&&(n.push(r),n.length&&(this.emit(Types$1.BeconEvent,n),this.emit(Types$1.SessionResetTime)))}},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return this.logger.warn("eventName is null\uff0c please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var r=t;"object"!=typeof r&&(r={}),r.profile?delete r.profile:r.event_index=getIndex();var i=void 0;return r.local_ms?(i=r.local_ms,delete r.local_ms):i=+new Date,{event:n,params:r,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(o){return this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:o.message}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){void 0===e&&(e={});var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+this.configManager.is_first_time},n=_assign2({},t,e);this.event("predefine_pageview",n)},e.prototype.clearEventCache=function(){this.emit(Types$1.CleanEvents)},e.prototype.setWebIDviaUnionID=function(e){if(e){var t=hashCode(e);this.config({web_id:""+t,wechat_unionid:e}),this.emit(Types$1.CustomWebId)}},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setWebIDviaOpenID=function(e){if(e){var t=hashCode(e);this.config({web_id:""+t,wechat_openid:e}),this.emit(Types$1.CustomWebId)}},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(Types$1.ResetStay,{url_path:e,title:t,url:n},Types$1.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(Types$1.SetStay,{url_path:e,title:t,url:n},Types$1.Stay)},e.prototype.getToken=function(e,t){var n=this,r=!1,i=function(t){if(!r){r=!0;var i=n.configManager.get().user;return t&&(i.tobid=t,i["diss".split("").reverse().join("")]=t),e(_assign2({},i))}},o=function(){n.tokenManager.getTobId().then((function(e){i(e)}))};this.sdkReady?o():(t&&setTimeout((function(){i()}),t),this.on(Types$1.Ready,(function(){o()})))},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(Types$1.ProfileSet,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(Types$1.ProfileSetOnce,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(Types$1.ProfileIncrement,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(Types$1.ProfileUnset,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(Types$1.ProfileAppend,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(Types$1.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,Types$1.Ab)},e.prototype.getVar=function(e,t,n){this.emit(Types$1.AbVar,{name:e,defaultValue:t,callback:n},Types$1.Ab)},e.prototype.getABconfig=function(e,t){this.emit(Types$1.AbConfig,{params:e,callback:t},Types$1.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(Types$1.AbVersionChangeOn,e,Types$1.Ab),function(){t.emit(Types$1.AbVersionChangeOff,e,Types$1.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(Types$1.AbVersionChangeOff,e,Types$1.Ab)},e.prototype.openOverlayer=function(){this.emit(Types$1.AbOpenLayer,"",Types$1.Ab)},e.prototype.closeOverlayer=function(){this.emit(Types$1.AbCloseLayer,"",Types$1.Ab)},e.prototype.getAllVars=function(e){this.emit(Types$1.AbAllVars,e,Types$1.Ab)},e.prototype.sessionRecordStart=function(){this.emit(Types$1.SessionRecordStart,Types$1.sessionRecord)},e.prototype.sessionRecordPause=function(){this.emit(Types$1.SessionRecordPause,Types$1.sessionRecord)},e.prototype.sessionRecordEnd=function(){this.emit(Types$1.SessionRecordEnd,Types$1.sessionRecord)},e.prototype.sessionRecordReport=function(e){this.emit(Types$1.SessionRecordReport,{callback:e},Types$1.sessionRecord)},e.prototype.autoInitializationRangers=function(e){AutoBase(e)},e.prototype.destoryInstace=function(){this.destroyInstance||(this.destroyInstance=!0,this.off(Types$1.TokenComplete))},e.plugins=[],e}(),STYLE_ID="__rangers_ab_style__";function openOverlayer(){if(!document.getElementById(STYLE_ID)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id=STYLE_ID,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}function closeOverlayer(){var e=document.getElementById(STYLE_ID);e&&e.parentElement.removeChild(e)}var msgQueueMap={},allowdOrigins=[],addAllowdOrigin=function(e){e.length&&e.forEach((function(e){allowdOrigins.push(e)}))};function dispatchMsg(e,t,n,r){var i=e&&e.source||window.opener||window.parent,o=e&&e.origin||r||"*",a={type:t,payload:n};i.postMessage(JSON.stringify(a),o)}function receiveMsg(e,t){msgQueueMap[e]=msgQueueMap[e]||[],msgQueueMap[e].push(t)}function processMsg(e){if(allowdOrigins.some((function(e){return"*"===e}))||allowdOrigins.some((function(t){return e.origin.indexOf(t)>-1}))){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(i){t=void 0}if(!t)return;var n=t.type,r=t.payload;msgQueueMap[n]&&msgQueueMap[n].forEach((function(t){"function"==typeof t&&t(e,r)}))}}function init(e,t){var n=_assign2({},e);delete n.filter,(window.opener||window.parent).postMessage({type:"tea:sdk:info",config:n,version:t},"*"),window.addEventListener("message",processMsg,!1)}var VISUAL_URL="",isLoaded=!1;function loadEditorScript(e){var t=e.event,n=e.editorUrl;e.collectInstance,e.fromSession,isLoaded||(isLoaded=!0,loadScript(n,(function(){dispatchMsg(t,"abEditorScriptloadSuccess")}),(function(){t&&dispatchMsg(t,"abEditorScriptloadError"),isLoaded=!1})))}function readyToLoadEditor(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},addAllowdOrigin(["*"]);var n,r="";init(t,SDK_VERSION);var i="";try{var o=window.performance.getEntriesByType("resource");if(o&&o.length&&(o.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(i=e.name)})),i||document.currentScript&&(i=document.currentScript.src),i&&(n=i.split("/"))&&n.length)){r="https:/";for(var a=2;a<n.length&&a!==n.length-1;a++)r=r+"/"+n[a];r+="/visual-ab-core"}}catch(s){}receiveMsg("tea:openVisualABEditor",(function(n){var i=n.data;if("string"==typeof n.data)try{i=JSON.parse(n.data)}catch(s){i=void 0}if(i){var o=i.lang;if(i.appId!==t.app_id)return dispatchMsg(n,"appIdError"),void console.error("abtest appid is not belong the page appid please check");var a=i.version;VISUAL_URL=a&&r?r+(a?"."+a:".1.0.1")+".js?query="+Date.now():VISUAL_AB_CORE+"?query="+Date.now(),window.TEAVisualEditor.lang=o,window.TEAVisualEditor.__ab_domin=t.channel_domain||"",loadEditorScript({event:n,editorUrl:VISUAL_URL,collectInstance:e})}}))}var loadMuiltlink=function(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.appId=t.app_id,receiveMsg("tea:openTesterEventInspector",(function(t){var n=t.data;if("string"==typeof t.data)try{n=JSON.parse(t.data)}catch(a){n=void 0}if(n){var r=n.referrer,i=n.lang,o=n.appId;window.TEAVisualEditor.__editor_ajax_domain=r||"",window.TEAVisualEditor.__ab_appId=o||"",window.TEAVisualEditor.lang=i||"",loadEditorScript({event:t,editorUrl:VISUAL_URL_INSPECTOR+".js?query="+Date.now(),collectInstance:e})}}))},loadVisual=function(e){window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.__ab_config=e,loadScript(VISUAL_AB_LOADER+"?query="+Date.now(),(function(){console.log("load visual render success")}),(function(){console.log("load visual render fail")}))},CallbackType;!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(CallbackType||(CallbackType={}));var STORAGE_EXPRIRE=2592e6,API="/service/2/abtest_config/",Ab=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="complete",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data=null,this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var r=t.enable_multilink,i=t.ab_channel_domain,o=t.enable_ab_visual,a=t.ab_cross,s=t.ab_cookie_domain,c=i||decodeUrl(AB_DOMAINS[t.channel||"sg"]),l=e.adapters,u=l.storage,d=l.fetch;this.cacheStorgae=new u(!1),this.fetch=d,this.enable_multilink=r,this.enable_ab_visual=o,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=a,this.ab_cookie_domain=s||"",this.fetchUrl=""+c+API,this.reportUrl=""+e.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500;var h=this.collect.Types;this.types=h,this.collect.on(h.TokenChange,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(h.AbVar,(function(e){var t=e.name,r=e.defaultValue,i=e.callback;n.getVar(t,r,i)})),this.collect.on(h.AbAllVars,(function(e){n.getAllVars(e)})),this.collect.on(h.AbConfig,(function(e){var t=e.params,r=e.callback;n.getABconfig(t,r)})),this.collect.on(h.AbExternalVersion,(function(e){n.setExternalAbVersion(e)})),this.collect.on(h.AbOpenLayer,(function(){n.openOverlayer()})),this.collect.on(h.AbCloseLayer,(function(){n.closeOverlayer()})),this.collect.on(h.AbVersionChangeOn,(function(e){n.changeListener.set(e,e)})),this.collect.on(h.AbVersionChangeOff,(function(e){n.changeListener.get(e)&&n.changeListener.delete(e)})),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(this.fetchAB(),this.readyStatus=!0),this.collect.emit(h.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.loadMode=function(){var e=getIframeUrl(),t="";if(e){var n=e.scenario,r=e.href;n?(this.editMode=!0,t=n):!r||-1===r.indexOf("datatester")&&-1===r.indexOf("visual-editor")||(this.editMode=!0,t="visual-editor")}this.enable_ab_visual&&(readyToLoadEditor(this.collect,this.config),"visual-editor"===t)?this.collect.destoryInstace():this.enable_multilink&&loadMuiltlink(this.collect,this.config)},e.prototype.checkLocal=function(){var e=this.getABCache(),t=e.ab_version,n=e.ab_ext_version,r=e.ab_version_multilink,i=e.data,o=this.checkFromUrl();o?this.mulilinkVersions.push(o):this.mulilinkVersions=r||[],this.extVersions=n||[],this.versions=t||[],this.data=i;var a=this.versions.concat(this.extVersions);this.enable_multilink&&(a=a.concat(this.mulilinkVersions)),this.configVersions(a.join(","))},e.prototype.checkFromUrl=function(){var e=parseUrlQuery(window.location.href);return e&&e.vid?e.vid:""},e.prototype.updateVersions=function(){var e=this.extVersions.length?this.versions.concat(this.extVersions):this.versions;this.enable_multilink&&(e=e.concat(this.mulilinkVersions)),this.configVersions(e.join(",")),this.updateABCache(),this.changeListener.size>0&&this.changeListener.forEach((function(t){"function"==typeof t&&t(e)}))},e.prototype.configVersions=function(e){this.collect.configManager.setAbVersion(e)},e.prototype.getVar=function(e,t,n){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");var r={name:e,defaultValue:t,callback:n,type:CallbackType.Var};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealVar(r,e):this.callbacks.push(r)},e.prototype.getRealVar=function(e,t){var n=e.name,r=e.defaultValue,i=e.callback,o=this.data;if(o){if(isObject$1(o[n])){var a=o[n].vid;return"$ab_url"===t?this.mulilinkVersions.includes(a)||this.mulilinkVersions.push(a):this.versions.includes(a)||this.versions.push(a),this.updateVersions(),this.fechEvent(a,t,r),i(o[n].val),void this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u66dd\u5149\u4e86\u5b9e\u9a8c"+n,level:"info",time:Date.now(),data:o[n]})}this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u8c03\u7528getVar",level:"info",time:Date.now(),data:r}),i(r)}else i(r)},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:CallbackType.All};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealAllVars(t):this.callbacks.push(t)},e.prototype.getRealAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{}),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK \u8c03\u7528getAllVars",level:"info",time:Date.now(),data:this.data})},e.prototype.fechEvent=function(e,t,n){try{if(this.config.disable_track_event)return;if(!e)return;var r=this.collect.configManager.get(),i=r.header,o=r.user,a=this.getABCache();if(a&&a.uuid&&a.uuid!==o.user_unique_id)return;var s={event:"abtest_exposure",ab_sdk_version:""+e,params:JSON.stringify({app_id:this.config.appId,ab_url:"$ab_url"===t?n:window.location.href}),local_time_ms:Date.now()};i.custom=JSON.stringify(i.custom);var c={events:[s],user:o,header:i};"$ab_url"===t&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,JSON.stringify([c])):this.reportExposure(c)}catch(l){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:l.message})}},e.prototype.reportExposure=function(e){var t=this;this.exposureCache.push(e),this.reportTimeout&&clearTimeout(this.reportTimeout),this.exposureCache.length>=this.exposureLimit?this.report():this.reportTimeout=setTimeout((function(){t.report(),clearTimeout(t.reportTimeout)}),this.ab_batch_time)},e.prototype.report=function(){var e=this;this.fetch(this.reportUrl,this.exposureCache,2e4),this.exposureCache.forEach((function(t){e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:[t],code:200,status:"success"})})),this.exposureCache=[]},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var n=Object.keys(e);n&&n.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.get=function(e){if(this.ab_cross){var t=this.cacheStorgae.getCookie(e,this.ab_cookie_domain);return t?JSON.parse(t):null}return this.cacheStorgae.getItem(e)},e.prototype.set=function(e,t){this.ab_cross?this.cacheStorgae.setCookie(e,t,STORAGE_EXPRIRE,this.ab_cookie_domain):this.cacheStorgae.setItem(e,t),this.collect.configManager.setAbCache(t)},e.prototype.getABCache=function(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.get(this.abKey)||t,Date.now()-t.timestamp>=STORAGE_EXPRIRE?(this.cacheStorgae.removeItem(this.abKey),null):e?t[e]:t},e.prototype.updateABCache=function(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=Date.now(),this.set(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getABCache();t.data=this.data,t.uuid=e,t.timestamp=Date.now(),this.set(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[]},e.prototype.openOverlayer=function(e){var t=this;if(openOverlayer(),e)var n=setTimeout((function(){t.closeOverlayer(),clearTimeout(n)}),e)},e.prototype.closeOverlayer=function(){closeOverlayer()},e.prototype.fetchComplete=function(e,t){var n=this;if(e&&"[object Object]"==Object.prototype.toString.call(e)){this.data=e,this.setAbCache(t);var r=[];Object.keys(e).forEach((function(t){var n=e[t].vid;n&&r.push(n)})),this.versions=this.versions.filter((function(e){return r.includes(e)}));var i=e.$ab_url,o=e.$ab_modification;if(o&&o.val&&this.enable_ab_visual){if(this.collect.destroyInstance)return;this.getVar("$ab_modification",window.location.href,(function(){loadVisual(o.val),n.closeOverlayer()}))}else if(i&&this.enable_multilink){this.mulilinkVersions=this.mulilinkVersions.filter((function(e){return r.includes(e)}));var a=i.val,s=i.vid;a&&s&&this.getVar("$ab_url",a,(function(){n.editMode||(a!==window.location.href?setTimeout((function(){if(!n.collect.destroyInstance){var e=""+a;e=-1===e.indexOf("http")?"https://"+e:e,parseURL(e).host!==location.host?e=e+"&vid="+s:window.history.replaceState("","",e),window.location.href=e}}),100):n.closeOverlayer())}))}this.updateVersions()}else this.closeOverlayer();this.callbacks.forEach((function(e){return n[e.type===CallbackType.Var?"getRealVar":"getRealAllVars"](e,"")})),this.callbacks=[]},e.prototype.fetchAB=function(e){var t=this,n=this.collect.configManager.get(),r={header:_assign2({aid:this.config.app_id},n.user||{},n.header||{},{ab_sdk_version:this.collect.configManager.getAbVersion(),ab_url:window.location.href})};this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u53d1\u8d77AB\u5b9e\u9a8c\u8bf7\u6c42",level:"info",logType:"fetch",time:Date.now(),data:r}),this.fetch(this.fetchUrl,r,this.config.ab_timeout||3e3,!1,(function(r){t.fetchStatus="complete",t.refreshFetchStatus="complete";var i=r.data;"success"===r.message?(t.fetchComplete(i,n.user.user_unique_id),e&&e(i)):(t.fetchComplete(null,n.user.user_unique_id),e&&e(null)),t.collect.emit(t.types.AbComplete,i),t.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"AB\u5b9e\u9a8c\u8bf7\u6c42\u6210\u529f",level:"info",logType:"fetch",time:Date.now(),data:i})}),(function(){t.fetchStatus="complete",t.refreshFetchStatus="complete",t.fetchComplete(null,n.user.user_unique_id),t.collect.emit(t.types.AbTimeout),e&&e(null),t.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"AB\u5b9e\u9a8c\u8bf7\u6c42\u7f51\u7edc\u5f02\u5e38",level:"error",logType:"fetch",time:Date.now()})}))},e.prototype.filterUrl=function(e){try{var t="";-1!==e.indexOf("&multilink=true")?t="&multilink=true[\0-\xff]*":-1!==e.indexOf("?multilink=true")&&(t="\\?multilink=true[\0-\xff]*");var n=new RegExp(t,"g");e=e.replace(n,"")}catch(r){}return e},e}(),Et=function(){function e(){}return e.prototype.apply=function(e,t){var n=this,r=e.adapters.fetch;if(t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var i=e.Types;e.on(i.SubmitBefore,(function(e){r(n.url,e,3e4)}))}}else console.log("please use correct et_test url")},e}(),Alive=function(){function e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.collect=e,this.config=t,this.pageStartTime=Date.now(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,isObject$1(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration))}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageAlive()},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},e.prototype.sendEvent=function(e,t){void 0===t&&(t=!1);var n=t?this.aliveDTime:Date.now()-this.sessionStartTime;n<0||n>this.aliveDTime||Date.now()-this.pageStartTime>this.maxDuration||(this.collect.beconEvent(this.options.aliveName,_assign2({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),duration:n,is_support_visibility_change:isSupVisChange(),startTime:this.sessionStartTime,hidden:document.visibilityState,leave:e},this.options.params)),this.sessionStartTime=Date.now())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval((function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)}),1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&&(this.sessionStartTime=Date.now(),this.timerHandler=this.setUpTimer())},e.prototype.beforeunload=function(){document.hidden||this.sendEvent(!0)},e.prototype.enablePageAlive=function(){var e=this;this.timerHandler=this.setUpTimer();var t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),beforePageUnload(n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}},e}(),Close=function(){function e(e,t){var n=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=Date.now():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=Date.now())},this.beforeunload=function(){if(n.totalTime+=(n.activeEndTime||Date.now())-n.activeStartTime,n.config.autotrack)try{window.sessionStorage.setItem("_tea_cache_duration",JSON.stringify({duration:n.totalTime,page_title:document.title||location.pathname}))}catch(e){}n.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||864e5,this.pageStartTime=Date.now(),isObject$1(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.resetData()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageClose()},e.prototype.disable=function(){this.disableCallback()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0},e.prototype.sendEventPageClose=function(){var e=Date.now()-this.pageStartTime;this.totalTime<0||e<0||this.totalTime>=this.maxDuration||(this.collect.beconEvent(this.options.closeName,_assign2({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:isSupVisChange()},this.options.params)),this.pageStartTime=Date.now(),this.resetData())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.enablePageClose=function(){var e=this,t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),beforePageUnload(n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}},e}(),Stay=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_stay_duration){this.title=document.title||location.pathname,this.url=location.href,this.url_path=location.pathname,this.pageAlive=new Alive(e,t),this.pageClose=new Close(e,t);var r=this.collect.Types;this.collect.on(r.ResetStay,(function(e){var t=e.url_path,r=e.title,i=e.url;n.resetStayDuration(t,r,i)})),this.collect.on(r.RouteChange,(function(e){e.init||t.disable_route_report||n.resetStayDuration()})),this.collect.on(r.SetStay,(function(e){var t=e.url_path,r=e.title,i=e.url;n.setStayParmas(t,r,i)})),this.enable(this.url_path,this.title,this.url),this.ready(r.Stay),this.collect.emit(r.StayReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},e.prototype.disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.pageAlive.setParams(e,t,n),this.pageClose.setParams(e,t,n),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884c resetStayParams",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e.prototype.reset=function(e,t,n){this.disable(),this.enable(e,t,n)},e.prototype.resetStayDuration=function(e,t,n){this.reset(e,t,n),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884c resetStayDuration",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e}(),Profile=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.duration=6e4,this.reportUrl=e.configManager.getDomain()+"/profile/list";var r=e.Types,i=e.adapters.fetch;this.eventCheck=new EventCheck(e,t),this.fetch=i,this.cache={},this.collect.on(r.ProfileSet,(function(e){n.setProfile(e)})),this.collect.on(r.ProfileSetOnce,(function(e){n.setOnceProfile(e)})),this.collect.on(r.ProfileUnset,(function(e){n.unsetProfile(e)})),this.collect.on(r.ProfileIncrement,(function(e){n.incrementProfile(e)})),this.collect.on(r.ProfileAppend,(function(e){n.appendProfile(e)})),this.collect.on(r.ProfileClear,(function(){n.cache={}})),this.ready(r.Profile)},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.report=function(e,t){void 0===t&&(t={});try{if(this.config.disable_track_event)return;var n=[];n.push(this.collect.processEvent(e,t));var r=this.collect.eventManager.merge(n);this.fetch(this.reportUrl,r),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:r,code:200,status:"success"})}catch(i){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message})}},e.prototype.setProfile=function(e){var t=this.formatParams(e);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set",_assign2({},t,{profile:!0})))},e.prototype.setOnceProfile=function(e){var t=this.formatParams(e,!0);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set_once",_assign2({},t,{profile:!0})))},e.prototype.incrementProfile=function(e){e?this.report("__profile_increment",_assign2({},e,{profile:!0})):console.warn("please check the params, must be object!!!")},e.prototype.unsetProfile=function(e){if(e){var t={};t[e]="1",this.report("__profile_unset",_assign2({},t,{profile:!0}))}else console.warn("please check the key, must be string!!!")},e.prototype.appendProfile=function(e){if(e){var t={};for(var n in e)"string"==typeof e[n]||"Array"===Object.prototype.toString.call(e[n]).slice(8,-1)?t[n]=e[n]:console.warn("please check the value of param: "+n+", must be string or array !!!");Object.keys(t).length&&this.report("__profile_append",_assign2({},t,{profile:!0}))}else console.warn("please check the params, must be object!!!")},e.prototype.pushCache=function(e){var t=this;Object.keys(e).forEach((function(n){t.cache[n]={val:t.clone(e[n]),timestamp:Date.now()}}))},e.prototype.formatParams=function(e,t){var n=this;void 0===t&&(t=!1);try{if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void console.warn("please check the params type, must be object !!!");var r={};for(var i in e)"string"==typeof e[i]||"number"==typeof e[i]||"Array"===Object.prototype.toString.call(e[i]).slice(8,-1)?r[i]=e[i]:console.warn("please check the value of params:"+i+", must be string,number,Array !!!");var o=Object.keys(r);if(!o.length)return;if(!this.eventCheck.checkEventParams(r))return;var a=Date.now();return o.filter((function(r){var i=n.cache[r];return t?!i:!(i&&n.compare(i.val,e[r])&&a-i.timestamp<n.duration)})).reduce((function(e,t){return e[t]=r[t],e}),{})}catch(s){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:s.message}),console.log("error")}},e.prototype.compare=function(e,t){try{return JSON.stringify(e)===JSON.stringify(t)}catch(n){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:n.message}),!1}},e.prototype.clone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),e}},e.prototype.unReady=function(){console.warn("sdk is not ready, please use this api after start")},e}(),HeartBeat=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=selfAdjust((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var r=this.collect.Types;this.collect.on(r.SessionReset,(function(){n.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),Monitor=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain&&!t.disable_track_event&&!t.disable_sdk_monitor){var r=e.adapters.fetch;this.fetch=r,this.url=e.configManager.getUrl("event");var i=this.collect.Types;this.collect.on(i.Ready,(function(){n.sdkOnload()})),this.collect.on(i.SubmitError,(function(e){var t=e.type,r=e.eventData,i=e.errorCode;"f_data"===t&&n.sdkError(r,i)}))}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,r=t.user,i=n.app_id,o=n.app_name,a=n.sdk_version,s=r.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:i,app_name:o||"",sdk_version:a,sdk_type:SDK_TYPE,sdk_config:this.config,sdk_desc:"TOC_OVERSEA"}),local_time_ms:Date.now()}],user:{user_unique_id:s},header:{}};setTimeout((function(){e.fetch(e.url,[c],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(l){}},e.prototype.sdkError=function(e,t){var n=this;try{var r=e[0],i=r.user,o=r.header,a=[];e.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var s={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:o.app_id,app_name:o.app_name||"",error_event:e.event,sdk_version:o.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(o),user:JSON.stringify(i)}),local_time_ms:Date.now()}})),user:{user_unique_id:i.user_unique_id},header:{}};setTimeout((function(){n.fetch(n.url,[s],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(c){}},e}();function isNeedElement(e,t){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){if(["LI","TR","DL"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{if(["A","BUTTON"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0}return!1}var isAttrFilter=function(e,t){return!!hasAttributes(e,t)};function getContainer(e){for(var t=e;t&&!isNeedElement(t,"container");){if("HTML"===t.nodeName||"BODY"===t.nodeName)return e;t=t.parentElement}return t||e}function getNodeText(e){var t="";return 3===e.nodeType?t=e.textContent.trim():e.dataset&&e.dataset.hasOwnProperty("teaTitle")||e.hasAttribute("ata-tea-title")?t=e.getAttribute("data-tea-title"):e.hasAttribute("title")?t=e.getAttribute("title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(t=e.getAttribute("alt")),t.slice(0,200)}function getText(e){var t=getContainer(e),n=[];return function e(t){var r=getNodeText(t);if(r&&-1===n.indexOf(r)&&n.push(r),t.childNodes.length>0)for(var i=t.childNodes,o=0;o<i.length;o++)8!==i[o].nodeType&&e(i[o])}(t),n}function getTextSingle(e){var t=getContainer(e),n="";return function e(t){var r=getNodeText(t);if(r&&(n+=r),t.childNodes.length>0)for(var i=t.childNodes,o=0;o<i.length;o++)3===i[o].nodeType&&e(i[o])}(t),n}function ignore(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}var hasAttribute=function(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0},hasAttributes=function(e,t){if("string"==typeof t)return hasAttribute(e,t);if(isArray(t)){for(var n=!1,r=0;r<t.length;r++)if(hasAttribute(e,t[r])){n=!0;break}return n}},getAttributes=function(e,t){var n={};if("string"==typeof t)hasAttribute(e,t)&&(n.attrs=e.getAttribute(t));else if(isArray(t))for(var r=0;r<t.length;r++)hasAttribute(e,t[r])&&(n[t[r]]=e.getAttribute(t[r]));return n},elementLevel=function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some((function(e){return e.children.length>0}))}return!0},isSVG=function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,n=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,n=!0):t=t.parentElement;return n};function isTrack(e,t){if(1!==e.nodeType)return!1;if(!t.svg&&isSVG(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var n=e;return!("none"===n.style.display||!isNeedElement(n,"container")&&!elementLevel(n)&&!t.svg)}var Listener=function(){function e(e,t,n){var r=this;this.clickEvent=function(e){isTrack(e.target,r.options)&&r.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){r.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){r.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&r.eventHandel({eventType:"dom",eventName:"beat"},_assign2({beat_type:0},e)),r.eventHandel({eventType:"dom",eventName:"page_view"},e)},this.getPageLoadEvent=function(e){r.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=n.getConfig().eventConfig,this.collect=t,this.options=e,this.beatTime=e.beat,this.statistics=!1}return e.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},e.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e&&(this.config.click&&window.document.addEventListener("click",this.clickEvent,!0),this.config.change&&window.document.addEventListener("change",this.changeEvent,!0),this.config.submit&&window.document.addEventListener("submit",this.submitEvent,!0),this.config.pv&&this.collect.on("route-change",(function(e){var n=e.config,r=e.name;t.getPageViewEvent(n,r)})),this.config.beat)){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",(function(){t.beatEvent(t.beatTime)}));var n=0,r=null;window.addEventListener("scroll",(function(){clearTimeout(r),r=setTimeout(i,500),n=document.documentElement.scrollTop||document.body.scrollTop}));var i=function(){(document.documentElement.scrollTop||document.body.scrollTop)==n&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(a){}try{var o=window.performance&&window.performance.getEntriesByType("paint");o&&o.length?(new PerformanceObserver((function(e){var n=e.getEntries(),r=n[n.length-1],i=r.renderTime||r.loadTime;t.statistics||(t.getPageLoadEvent(i),t.statistics=!0)})).observe({entryTypes:["largest-contentful-paint"]}),setTimeout((function(){t.statistics||(t.getPageLoadEvent(o[0].startTime||0),t.statistics=!0)}),2e3)):this.getPageLoadEvent(0)}catch(a){this.getPageLoadEvent(0)}}},e.prototype.removeListener=function(){window.document.removeEventListener("click",this.clickEvent,!0),window.document.removeEventListener("change",this.changeEvent,!0),window.document.removeEventListener("submit",this.submitEvent,!0)},e.prototype.beatEvent=function(e){var t=this;try{var n;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(n=setInterval((function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})}),e)),beforePageUnload((function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(n)}))}catch(r){}},e}(),defaultConfig$1={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},Config=function(){function e(e,t){this.config=e,this.config.eventConfig=Object.assign(this.config.eventConfig,t)}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();function getPositionData(e){if(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return{left:t.left,top:t.top,element_width:n,element_height:r}}}function getEventData(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.clientX,r=e.clientY,i=t.left,o=t.top,a=n-i>=0?n-i:0,s=r-o>=0?r-o:0;return{touch_x:Math.floor(a),touch_y:Math.floor(s)}}function getXpath(e){for(var t=[];null!==e.parentElement;)t.push(e),e=e.parentElement;var n=[],r=[];return t.forEach((function(e){var t=getXpathIndex(e),i=t.str,o=t.index;n.unshift(i),r.unshift(o)})),{element_path:"/"+n.join("/"),positions:r}}function getXpathIndex(e){if(null===e)return{str:"",index:0};var t=0,n=e.parentElement;if(n)for(var r=n.children,i=0;i<r.length&&r[i]!==e;i++)r[i].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),isNeedElement(e,"list")?"[]":""].join(""),index:t}}function getElementData(e,t,n,r){var i={},o=getPositionData(t),a=getEventData(e,o),s=o.element_width,c=o.element_height,l=a.touch_x,u=a.touch_y,d=getXpath(t),h=d.element_path,f=d.positions,p=getText(t),g=window.performance.timing.navigationStart,y=Date.now()-g,v=f.map((function(e){return""+e})),m=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(m=window.TEAVisualEditor.getOriginXpath({xpath:h,positions:v})),i.element_path=m&&m.xpath||h,i.positions=m&&m.positions||v,r&&!r.text&&(i.texts=p,i.element_title=getTextSingle(t)),i.element_id=t.getAttribute("id")||"",i.element_class_name=t.getAttribute("class")||"",i.element_type=t.nodeType,i.element_width=Math.floor(s),i.element_height=Math.floor(c),i.touch_x=l,i.touch_y=u,i.page_manual_key="",i.elememt_manual_key="",i.since_page_start_ms=y,i.page_start_ms=g,i.page_path=location.pathname,i.page_host=location.host,n.track_attr&&isAttrFilter(t,n.track_attr)){var _=getAttributes(t,n.track_attr);for(var b in _)i[b]=_[b]}var E=getContainer(t);return"A"===E.tagName&&(i.href=E.getAttribute("href")),"IMG"===t.tagName&&(i.src=t.getAttribute("src")),i}var getEventData$1=function(e,t,n,r,i){return _assign2({event:e},getElementData(t,n,r,i),{is_html:1,page_key:window.location.href,page_title:document.title})},getExtraEventData=function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(n){return{}}},EventHandle=function(){function e(e,t){this.ignore={text:!0},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics",exposure:"bav2b_exposure"},t&&!0===t.text&&(this.ignore.text=!1),t&&t.exposure&&t.exposure.eventName&&(this.eventName.exposure=t.exposure.eventName)}return e.prototype.handleEvent=function(e,t){try{if(ignore(e.target))return null;var n="bav2b_click";switch(t){case"click":return n=this.eventName.click,getEventData$1(n,e,e.target,this.options,this.ignore);case"exposure":return n=this.eventName.exposure,getEventData$1(n,e,e.target,this.options,this.ignore);case"change":return _assign2({},getEventData$1(n="bav2b_change",e,e.target,this.options),getExtraEventData(n,e.target));case"submit":return getEventData$1(n="bav2b_submit",e,e.target,this.options)}}catch(r){return console.error(r),null}},e.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var n=JSON.parse(t);e.refer_page_duration_ms=n?n.duration:""}e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(r){console.log("page event error "+JSON.stringify(r))}return e},e.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var n=e.lcp,r=window.performance.timing,i=r.loadEventEnd-r.navigationStart;t.page_init_cost_ms=parseInt(n||(i>0?i:0)),t.page_start_ms=r.navigationStart}catch(o){console.log("page_statistics event error "+JSON.stringify(o))}return t},e.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=Date.now()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(t){console.log("beat event error "+JSON.stringify(t))}return e},e}(),Request=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var n=e.eventSend,r=t.event;delete t.event,n&&"becon"===n?this.collect.beconEvent(r,t):this.collect.event(r,t)},e.prototype.get=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,n)},e.prototype.post=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,n)},e}(),COOKIE_KEY="_TEA_VE_OPEN",COOKIE_KEY_HOST="_TEA_VE_APIHOST",COOKIE_LANG="lang",COOKIE_EDIT_VERISON="_VISUAL_EDITOR_V",COOKIE_EDIT_URL="_VISUAL_EDITOR_U";function checkSession(){return"1"===js_cookie.get(COOKIE_KEY)}function checkSessionHost(){var e=js_cookie.get(COOKIE_KEY_HOST);try{e=JSON.parse(e)}catch(t){}return e}function checkEditUrl(){return js_cookie.get(COOKIE_EDIT_URL)}function setSession(){try{var e=window.TEAVisualEditor.lang=window.TEAVisualEditor.lang||js_cookie.get(COOKIE_LANG),t=window.TEAVisualEditor.__editor_ajax_domain=window.TEAVisualEditor.__editor_ajax_domain||js_cookie.get(COOKIE_KEY_HOST),n=window.TEAVisualEditor.__editor_verison=window.TEAVisualEditor.__editor_verison||js_cookie.get(COOKIE_EDIT_VERISON),r=window.TEAVisualEditor.__editor_url=window.TEAVisualEditor.__editor_url||js_cookie.get(COOKIE_EDIT_URL),i=+new Date,o=new Date(i+18e5);js_cookie.set(COOKIE_KEY,"1",{expires:o}),js_cookie.set(COOKIE_KEY_HOST,t,{expires:o}),js_cookie.set(COOKIE_EDIT_URL,r,{expires:o}),js_cookie.set(COOKIE_LANG,e,{expires:o}),js_cookie.set(COOKIE_EDIT_VERISON,n||"",{expires:o})}catch(a){console.log("set cookie err")}}var isLoaded$1=!1;function loadEditorScript$1(e){var t=e.event,n=e.editorUrl,r=e.autoTrackInstance;isLoaded$1||(isLoaded$1=!0,loadScript(n,(function(){dispatchMsg(t,"editorScriptloadSuccess"),r.destroy()}),(function(){t&&dispatchMsg(t,"editorScriptloadError"),isLoaded$1=!1})))}function readyToLoadEditor$1(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{};var n="",r=VISUAL_EDITOR_RANGERS+"?query="+Date.now();window.TEAVisualEditor.appId=t.app_id;var i=t.channel_domain,o="";if(addAllowdOrigin(["*"]),i){var a,s="";try{var c=window.performance.getEntriesByType("resource");if(c&&c.length&&(c.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(s=e.name)})),s&&(a=s.split("/"))&&a.length)){o="https:/";for(var l=2;l<a.length&&l!==a.length-1;l++)o=o+"/"+a[l];if(o&&o.indexOf("/5.0")){var u=o.split("/5.0");o=u[0]||o}}}catch(f){}}if(init(t,SDK_VERSION),checkSession()){var d=checkSessionHost(),h="";d&&(window.TEAVisualEditor.__editor_ajax_domain=d,h=checkEditUrl()),loadEditorScript$1({event:null,editorUrl:h||r,autoTrackInstance:e}),setSession()}else try{receiveMsg("tea:openVisualEditor",(function(t){var a=t.data;if("string"==typeof t.data)try{a=JSON.parse(t.data)}catch(f){a=void 0}if(a){var s=a.referrer,c=a.lang;if(s&&(window.TEAVisualEditor.__editor_ajax_domain=s),n=r,i){var l=a.version;n=o?o+(l?"/visual-editor-rangers-v"+l:"/visual-editor-rangers-v1.0.0")+".js":r,window.TEAVisualEditor.__editor_verison=l}window.TEAVisualEditor.__editor_url=n,window.TEAVisualEditor.lang=c,loadEditorScript$1({event:t,editorUrl:n,autoTrackInstance:e}),setSession()}})),window.TEAVisualEditor.openAutotrackEditor=function(){loadEditorScript$1({event:null,editorUrl:window.TEAVisualEditor.__editor_url,autoTrackInstance:e})}}catch(f){console.log("receive message error")}try{receiveMsg("tea:openHeatMapCore",(function(n){var r=HOT_PIC_URL,i=n.data.app_id;i&&i!==t.app_id||loadEditorScript$1({event:n,editorUrl:r+".js?query="+Date.now(),autoTrackInstance:e})}))}catch(f){console.log("openHeatMapCore error")}}var Observer=function(){function e(e){this._instance=null,this._intersection=e,this.init()}return e.prototype.init=function(){var e=this;this._instance=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&e.attributeChangeObserve(t),"childList"===t.type&&e.modifyNodeObserve(t)}))})),this._instance.observe(document.body,{childList:!0,attributes:!0,subtree:!0,attributeOldValue:!1})},e.prototype.attributeChangeObserve=function(e){e.target.hasAttribute("data-exposure")?this.exposureAdd(e,"mutation"):this.exposureRemove(e)},e.prototype.modifyNodeObserve=function(e){var t=this;Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureAdd(e,"intersect"),t.mapChild(e,t.exposureAdd)})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureRemove(e),t.mapChild(e,t.exposureRemove)}))},e.prototype.mapChild=function(e,t){var n=this;1===e.nodeType&&e.children.length&&Array.prototype.forEach.call(e.children,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t(e),n.mapChild(e,t)}))},e.prototype.exposureAdd=function(e,t){this._intersection.exposureAdd(e,t)},e.prototype.exposureRemove=function(e){this._intersection.exposureRemove(e)},e._exposure_observer=null,e}(),Intersection=function(){function e(t,n){this.count=1,this.instance=this.buildObserver(),this.observeMap=e._observer_map,t.autotrack.exposure.ratio?this.Ratio=t.autotrack.exposure.ratio:0===t.autotrack.exposure.ratio?this.Ratio=0:this.Ratio=.5,this.EventHandle=n}return e.prototype.buildObserver=function(){var t=this;if(!e._observer_instance)return IntersectionObserver&&(e._observer_instance=new IntersectionObserver((function(e){e.forEach((function(e){t.observeMap.get(e.target._observeId)&&t.exposureEvent(e)}))}),{threshold:[.01,.25,.5,.75,1]})),e._observer_instance},e.prototype.exposureAdd=function(e,t){var n=e;"mutation"===t&&(n=e.target);var r=n._observeId;if(r||this.observeMap.has(r)){if(!1===n.visible){var i=n.getBoundingClientRect(),o=i.top,a=i.left,s=i.right,c=i.bottom;o>=0&&c<=window.innerHeight&&a>=0&&s<=window.innerWidth&&(n.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e))}}else n._observeId=this.count,n.visible=!1,this.observeMap.set(this.count,n),this.observe(n),this.count++},e.prototype.exposureRemove=function(e){this.observeMap.has(e._observeId)&&(this.observeMap.delete(e._observeId),this.unobserve(e))},e.prototype.exposureEvent=function(e){if(e.intersectionRatio>=this.Ratio&&e.isIntersecting){if("0"===e.target.style.opacity||"hidden"===e.target.style.visibility)return;if(!0===e.target.visible)return;e.target.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e)}else e.target.visible=!1},e.prototype.observe=function(e){this.instance.observe(e)},e.prototype.unobserve=function(e){this.instance.unobserve(e)},e._observer_instance=null,e._observer_map=new Map,e}(),Exposure=function(){function e(e,t){e.autotrack&&e.autotrack.exposure&&(this._intersection=new Intersection(e,t),this._observer=new Observer(this._intersection),this.initObserver())}return e.prototype.initObserver=function(){var e=this;Array.prototype.forEach.call(document.querySelectorAll("[data-exposure]"),(function(t){e._intersection.exposureAdd(t,"intersect")}))},e}(),defaultOpt={hashTag:!1,impr:!1},AutoTrack=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var n=e.Types;t.autotrack&&t.autotrack.collect_url&&!t.autotrack.collect_url()||(this.ready(n.Autotrack),this.collect.emit(n.AutotrackReady))}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==typeof t?t:{},t=Object.assign(defaultOpt,t),this.destroyed=!1,this.options=t,this.Config=new Config(defaultConfig$1,this.options),this.Exposure=new Exposure(this.config,this.handle.bind(this)),this.Listener=new Listener(t,this.collect,this.Config),this.EventHandle=new EventHandle(this.config,t),this.Request=new Request(this.collect),this.autoTrackStart=!0,this.init(),readyToLoadEditor$1(this,this.config)},e.prototype.init=function(){this.Listener.init(this.handle.bind(this))},e.prototype.handle=function(e,t){"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var n=e.eventName;if("click"===n||"exposure"===n||"change"===n||"submit"===n){var r=this.EventHandle.handleEvent(t,n);null!==r&&this.Request.send({eventType:"custom",eventName:"report_"+n+"_event",extra:{methods:"GET"}},r)}else if("page_view"===n||"page_statistics"===n){var i;i="page_view"===n?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},i)}else if("beat"===n){var o=this.EventHandle.handleBeadtEvent(t),a=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:a},o)}}catch(s){console.log("handel dom event error "+JSON.stringify(s))}},e.prototype.destroy=function(){if(!this.autoTrackStart)return console.warn("engine is undefined, make sure you have called autoTrack.start()");this.autoTrackStart=!1,this.Listener.removeListener()},e}(),State;!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(State||(State={}));var EventList={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},Tracer=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.ready=t.app_id&&t.enable_tracer&&!t.disable_track_event,this.ready){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new Map,this.collect=e,this.appid=t.app_id,this.reportUrl=e.configManager.getUrl("event");var r=this.collect.Types,i=e.adapters.fetch;this.fetch=i,this.collect.on(r.Event,(function(e){isArray(e)?e.forEach((function(e){n.addCount("log")})):n.addCount("log")})),this.collect.on(r.SubmitError,(function(e){var t=e.type,r=e.eventDate,i=e.errorCode,o=e.response;n.addErrorCount(r,t,i,o)})),this.listener(),this.collect.emit(r.TracerReady)}},e.prototype.addCount=function(e,t,n){void 0===t&&(t="net"),void 0===n&&(n=1);try{this.tracerCache||(this.tracerCache=new Map);var r=void 0;if(this.tracerCache.has(e))(i=this.tracerCache.get(e)).has(t)?(r=i.get(t).params.count,r++,i.set(t,this.processTracer(r,e,t))):(r=n,i.set(t,this.processTracer(n,e,t)));else{var i=new Map;r=n,i.set(t,this.processTracer(n,e,t)),this.tracerCache.set(e,i)}"net"===t&&r>=this.limit[e]&&this.report(!1)}catch(o){console.log(o)}},e.prototype.addErrorCount=function(e,t,n,r){var i=this;try{if(e&&e.length){var o=e[0].events;o&&o.length&&("f_data"===t?(r&&r.hasOwnProperty("sc")?this.addCount("log",t,o.length-r.sc):this.addCount("log",t,o.length),this.errorCode[t]=n):o.forEach((function(e){var r="log";for(var o in EventList)if(-1!==EventList[o].indexOf(e.event)){r=o;break}i.addCount(r,t,1),i.errorCode[t]=n})))}}catch(a){}},e.prototype.report=function(e){if(this.tracerCache){var t=[];this.tracerCache.forEach((function(e){console.log(e),e.forEach((function(e){t.push(e)}))})),t&&t.length&&this.sendTracer(t,e)}},e.prototype.sendTracer=function(e,t){try{var n=this.collect.eventManager.merge(e);t&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,JSON.stringify(n)):this.fetch(this.reportUrl,n),this.tracerCache=null}catch(r){}},e.prototype.processTracer=function(e,t,n){try{var r={count:e,state:n,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:SDK_VERSION};"f_net"!==n&&"f_data"!==n||(r.errorCode=this.errorCode[n]);var i=this.collect.processEvent("applog_trace",r);if(i&&i.event)return delete i.is_bav,i}catch(o){console.warn("something error")}},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.leavePage()})),beforePageUnload((function(){e.leavePage()}))},e.prototype.leavePage=function(){this.report(!0)},e}(),dayjs_min=createCommonjsModule((function(e,t){e.exports=function(){var e="millisecond",t="second",n="minute",r="hour",i="day",o="week",a="month",s="quarter",c="year",l="date",u="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+p(r,2,"0")+":"+p(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,a),o=n-i<0,s=t.clone().add(r+(o?-1:1),a);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:a,y:c,w:o,d:i,D:l,h:r,m:n,s:t,ms:e,Q:s}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",v={};v[y]=f;var m=function(e){return e instanceof S},_=function(e,t,n){var r;if(!e)return y;if("string"==typeof e)v[e]&&(r=e),t&&(v[e]=t,r=e);else{var i=e.name;v[i]=e,r=i}return!n&&r&&(y=r),r||!n&&y},b=function(e,t){if(m(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},E=g;E.l=_,E.i=m,E.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function f(e){this.$L=_(e.locale,null,!0),this.parse(e)}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(d);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return E},p.isValid=function(){return!(this.$d.toString()===u)},p.isSame=function(e,t){var n=b(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return b(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<b(e)},p.$g=function(e,t,n){return E.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,s){var u=this,d=!!E.u(s)||s,h=E.p(e),f=function(e,t){var n=E.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return d?n:n.endOf(i)},p=function(e,t){return E.w(u.toDate()[e].apply(u.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},g=this.$W,y=this.$M,v=this.$D,m="set"+(this.$u?"UTC":"");switch(h){case c:return d?f(1,0):f(31,11);case a:return d?f(1,y):f(0,y+1);case o:var _=this.$locale().weekStart||0,b=(g<_?g+7:g)-_;return f(d?v-b:v+(6-b),y);case i:case l:return p(m+"Hours",0);case r:return p(m+"Minutes",1);case n:return p(m+"Seconds",2);case t:return p(m+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(o,s){var u,d=E.p(o),h="set"+(this.$u?"UTC":""),f=(u={},u[i]=h+"Date",u[l]=h+"Date",u[a]=h+"Month",u[c]=h+"FullYear",u[r]=h+"Hours",u[n]=h+"Minutes",u[t]=h+"Seconds",u[e]=h+"Milliseconds",u)[d],p=d===i?this.$D+(s-this.$W):s;if(d===a||d===c){var g=this.clone().set(l,1);g.$d[f](p),g.init(),this.$d=g.set(l,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[E.p(e)]()},p.add=function(e,s){var l,u=this;e=Number(e);var d=E.p(s),h=function(t){var n=b(u);return E.w(n.date(n.date()+Math.round(t*e)),u)};if(d===a)return this.set(a,this.$M+e);if(d===c)return this.set(c,this.$y+e);if(d===i)return h(1);if(d===o)return h(7);var f=(l={},l[n]=6e4,l[r]=36e5,l[t]=1e3,l)[d]||1,p=this.$d.getTime()+e*f;return E.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||u;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=E.z(this),o=this.$H,a=this.$m,s=this.$M,c=n.weekdays,l=n.months,d=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},f=function(e){return E.s(o%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:E.s(s+1,2,"0"),MMM:d(n.monthsShort,s,l,3),MMMM:d(l,s),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,c,2),ddd:d(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:E.s(o,2,"0"),h:f(1),hh:f(2),a:p(o,a,!0),A:p(o,a,!1),m:String(a),mm:E.s(a,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:i};return r.replace(h,(function(e,t){return t||g[e]||i.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(e,l,u){var d,h=E.p(l),f=b(e),p=6e4*(f.utcOffset()-this.utcOffset()),g=this-f,y=E.m(this,f);return y=(d={},d[c]=y/12,d[a]=y,d[s]=y/3,d[o]=(g-p)/6048e5,d[i]=(g-p)/864e5,d[r]=g/36e5,d[n]=g/6e4,d[t]=g/1e3,d)[h]||g,u?y:E.a(y)},p.daysInMonth=function(){return this.endOf(a).$D},p.$locale=function(){return v[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=_(e,t,!0);return r&&(n.$L=r),n},p.clone=function(){return E.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),T=S.prototype;return b.prototype=T,[["$ms",e],["$s",t],["$m",n],["$H",r],["$W",i],["$M",a],["$y",c],["$D",l]].forEach((function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),b.extend=function(e,t){return e.$i||(e(t,S,b),e.$i=!0),b},b.locale=_,b.isDayjs=m,b.unix=function(e){return b(1e3*e)},b.en=v[y],b.Ls=v,b.p={},b}()})),duration=createCommonjsModule((function(e,t){var n,r,i,o,a,s,c,l,u,d,h,f,p,g,y,v,m;e.exports=(a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,u={years:s=31536e6,months:c=2592e6,days:o=864e5,hours:i=36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},d=function(e){return e instanceof m},h=function(e,t,n){return new m(e,n,t.$l)},f=function(e){return r.p(e)+"s"},p=function(e){return e<0},g=function(e){return p(e)?Math.ceil(e):Math.floor(e)},y=function(e){return Math.abs(e)},v=function(e,t){return e?p(e)?{negative:!0,format:""+y(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},m=function(){function e(e,t,n){var r=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return h(e*u[f(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(t){r.$d[f(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var i=e.match(l);if(i){var o=i.slice(2).map((function(e){return Number(e)}));return this.$d.years=o[0],this.$d.months=o[1],this.$d.weeks=o[2],this.$d.days=o[3],this.$d.hours=o[4],this.$d.minutes=o[5],this.$d.seconds=o[6],this.calMilliseconds(),this}}return this}var t=e.prototype;return t.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(t,n){return t+(e.$d[n]||0)*u[n]}),0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=g(e/s),e%=s,this.$d.months=g(e/c),e%=c,this.$d.days=g(e/o),e%=o,this.$d.hours=g(e/i),e%=i,this.$d.minutes=g(e/6e4),e%=6e4,this.$d.seconds=g(e/1e3),e%=1e3,this.$d.milliseconds=e},t.toISOString=function(){var e=v(this.$d.years,"Y"),t=v(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=v(n,"D"),i=v(this.$d.hours,"H"),o=v(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var s=v(a,"S"),c=e.negative||t.negative||r.negative||i.negative||o.negative||s.negative,l=i.format||o.format||s.format?"T":"",u=(c?"-":"")+"P"+e.format+t.format+r.format+l+i.format+o.format+s.format;return"P"===u||"-P"===u?"P0D":u},t.toJSON=function(){return this.toISOString()},t.format=function(e){var t=e||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return t.replace(a,(function(e,t){return t||String(n[e])}))},t.as=function(e){return this.$ms/u[f(e)]},t.get=function(e){var t=this.$ms,n=f(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?g(t/u[n]):this.$d[n],0===t?0:t},t.add=function(e,t,n){var r;return r=t?e*u[f(t)]:d(e)?e.$ms:h(e,this).$ms,h(this.$ms+r*(n?-1:1),this)},t.subtract=function(e,t){return this.add(e,t,!0)},t.locale=function(e){var t=this.clone();return t.$l=e,t},t.clone=function(){return h(this.$ms,this)},t.humanize=function(e){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},e}(),function(e,t,i){n=i,r=i().$utils(),i.duration=function(e,t){var n=i.locale();return h(e,{$l:n},t)},i.isDuration=d;var o=t.prototype.add,a=t.prototype.subtract;t.prototype.add=function(e,t){return d(e)&&(e=e.asMilliseconds()),o.bind(this)(e,t)},t.prototype.subtract=function(e,t){return d(e)&&(e=e.asMilliseconds()),a.bind(this)(e,t)}})}));dayjs_min.extend(duration);var ignoreList=["__cep_sdk_onboard","__cep_trigger_sdk","_be_active"],moreOP=["and","or","not"],CepRule=function(){function CepRule(){this.support=!0,this.currentPlan=1,this.shouldSendEvent=!1,this.staing=!1,this.test=!1,this.cepReady=!1,this.eventCache=[]}return CepRule.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.cep){var r=e.adapters,i=r.fetch,o=r.storage,a=e.Types;this.types=a,this.storage=new o(!1),this.fetch=i,this.configManager=e.configManager,this.url=t.cep_url?""+t.cep_url:e.configManager.getDomain()+"/service/2/cep_settings/",this.reportUrl=e.configManager.getUrl("event"),this.key="__tea_cep_plan_"+t.app_id,this.quotasKey="__tea_cep_plan_quotas_"+t.app_id,this.isWait=!1,this.eventCache=[],this.test=e.configManager.staging,this.collect.on(a.SubmitAfter,(function(e){n.matchEvent(e)})),this.init()}},CepRule.prototype.init=function(){var e=this,t=!0,n=0,r=0,i=0,o=!1,a=this.storage.getItem(this.key)||{};if(a&&Object.keys(a).length&&(o=!0,n=a.last_update_time,r=a.fetch_interval,i=a.config_version||0,t=Date.now()-n>1e3*r),t){var s=this.configManager.get(),c=s.header,l=s.user;this.fetch(this.url,{header:c,user:l,local_time:Date.now(),config_version:i},1e4,!1,(function(t){t&&0===t.code?(a.fetch_interval=t.fetch_interval,a.data=t.data,a.last_update_time=Date.now(),a.config_version=t.config_version,e.clearQuotas(),e.initState(t.data),e.storage.setItem(e.key,a),t.data.forEach((function(t){e.event("__cep_sdk_onboard",t.plan_id)}))):304!==t.code&&400!==t.code||!o?console.log("code: "+t.code+", request error\uff0cplease try leater"):(console.log("code: "+t.code+", use old rules~"),a.last_update_time=Date.now(),e.storage.setItem(e.key,a),e.initState(a.data))}),(function(){o?(e.planData=a.data,e.initState(a.data)):(e.support=!1,console.log("request error\uff0cplease try leater"))}))}else a.last_update_time=Date.now(),this.storage.setItem(this.key,a),console.log("rule still work, use cache"),this.initState(a.data)},CepRule.prototype.initState=function(e){var t=this;e&&e.length&&(this.stateArray=new Map,this.waitArray=new Map,this.planData=e,e.forEach((function(e){var n=new Map;if(e.pattern&&e.pattern.events){var r=1===e.pattern.events.length;e.pattern.events.forEach((function(e){n.set(e.id,{id:e.id,isMatch:!1,event:null,after:e.after||null,connection:e.connection||null,window:e.window||null,matchTime:0,initTime:Date.now(),singleRule:r})})),t.stateArray.set(e.plan_id,{patternState:n,singleRule:r,pattern:{aid:e.aid,biz_id:e.biz_id,end_time:e.end_time,start_time:e.start_time,web_sdk_version:e.web_sdk_version,stage:e.stage},quotas:e.quotas})}})),this.cepReady=!0,this.dealCache(),this.collect.emit(this.types.CepReady))},CepRule.prototype.check=function(e){var t=Date.now();return Date.now()>1e3*e.end_time?(console.log("event rules:"+e.plan_id+" is over"),!1):t<1e3*e.start_time||t>1e3*e.end_time?(console.log("rule:"+e.plan_id+" time error"),!1):(this.staing="testing"===e.staing,!(SDK_VERSION<e.web_sdk_version&&(this.support=!1,console.log("you sdk version is old\uff0cplease update to "+e.web_sdk_version+" at least"),1)))},CepRule.prototype.dealCache=function(){var e=this;if(this.eventCache.length){var t=1;this.eventCache.forEach((function(n){e.matchEvent(n),t++})),t===this.eventCache.length&&(this.eventCache=[])}},CepRule.prototype.matchEvent=function(e){if(this.support&&(!this.staing||this.test)&&e&&e.length)try{if(!this.cepReady)return void this.eventCache.push(e);var t=e[0],n=t.header,r=t.user,i=t.events;i.length&&i.reverse();for(var o=0;o<i.length;o++){var a=i[o].event;if(-1!==ignoreList.indexOf(a))return!1;this.matchRule(n,r,i[o])}}catch(s){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:s.message}),void console.log(s.message)}},CepRule.prototype.matchRule=function(e,t,n){try{for(var r=0;r<this.planData.length;r++){var i=this.planData[r],o=i.plan_id;if(this.check(i)&&this.checkQuotas(o)&&i.pattern&&i.pattern.events)for(var a=i.pattern.events,s=0;s<a.length;s++)if(this.rule(e,t,n,a[s].condition)){var c=this.stateArray.get(o).patternState,l=c.get(a[s].id);if(this.stateArray.get(o).singleRule){this.changeStatus(o,a[s].id,n),this.publish([n],o,a[s].id);break}if(!l.isMatch){l.after&&c.get(l.after).isMatch?this.changeStatus(o,a[s].id,n):l.after||this.changeStatus(o,a[s].id,n);break}}}this.statusCheck()}catch(u){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:u.message}),void console.log(u.message)}},CepRule.prototype.changeStatus=function(e,t,n){var r=this.stateArray.get(e),i=r.patternState.get(t);i.isMatch=!0,i.event=n,i.matchTime=n.local_time_ms||Date.now(),r.patternState.set(t,i),this.stateArray.set(e,r)},CepRule.prototype.statusCheck=function(){var e,t,n,r;try{for(var i=__values(this.stateArray),o=i.next();!o.done;o=i.next()){var a=__read(o.value,2),s=a[0],c=a[1],l=c.patternState;if(c.isSingle)break;try{for(var u=__values(l),d=u.next();!d.done;d=u.next()){var h=__read(d.value,2),f=h[0],p=h[1];if(p.after&&(!p.after||l.get(p.after).isMatch)){if("NOT_FOLLOWED_BY"===p.connection){p.isMatch?this.reset(s,f):Date.now()-l.get(p.after).matchTime>p.window?this.publish([l.get(p.after).event,p.event],s,f):this.startWait(s,f,p);break}p.isMatch?p.matchTime-l.get(p.after).matchTime<=p.window?this.publish([l.get(p.after).event,p.event],s,f):this.reset(s,f):Date.now()-l.get(p.after).matchTime>p.window?this.reset(s,f):this.startWait(s,f,p);break}}}catch(g){n={error:g}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(y){e={error:y}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},CepRule.prototype.startWait=function(e,t,n){var r=this;try{this.waitArray.get(e)||this.waitArray.set(e,new Map);var i=this.waitArray.get(e);if(!i.get(t)){var o=setTimeout((function(){var i=r.stateArray.get(e).patternState,o=i.get(t);if("NOT_FOLLOWED_BY"===o.connection)!o.isMatch&&i.get(o.after).isMatch||o.matchTime-i.get(o.after).matchTime>n.window?((a=r.waitArray.get(e).get(t)).triggerWait=!0,r.waitArray.set(e,r.waitArray.get(e).set(t,a)),r.publish([i.get(o.after).event],e,t)):r.reset(e,t);else if("FOLLOWED_BY"===o.connection){var a;o.isMatch&&i.get(o.after).isMatch?((a=r.waitArray.get(e).get(t)).triggerWait=!0,r.waitArray.set(e,r.waitArray.get(e).set(t,a)),r.publish([i.get(o.after).event],e,t)):r.reset(e,t)}}),n.window);i.set(t,{waitFn:o,triggerWait:!1}),this.waitArray.set(e,i)}}catch(a){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:a.message}),console.log(a.message,a.stack)}},CepRule.prototype.rule=function(e,t,n,r){var i=this;try{var o=n.event,a=n.params;if(a=JSON.parse(a),-1!==moreOP.indexOf(r.op)){if(r.conditions&&r.conditions.length){var s=r.conditions,c=0,l=new Map;l.set(c,{op:r.op,result:void 0,resultList:[],resultKey:[],resultLength:s.length}),function n(r,s){for(var u=0;u<r.length;u++)if(c++,-1!==moreOP.indexOf(r[u].op)&&r[u].hasOwnProperty("conditions"))l.set(c,{op:r[u].op,result:void 0,fatherKey:s,resultList:[],resultKey:[],resultLength:r[u].conditions.length}),n(r[u].conditions,c);else{var d=i.scope(r[u].key),h=d.scope,f=d.key,p=d.key2,g=h?"header"===h?p?JSON.parse(e[p])[f]:e[f]:"user"===h?t[f]:a[f]:o,y=i.calculate(r[u].op,g,r[u].value);l.set(c,{op:r[u].op,result:y,fatherKey:s})}}(s,c);for(var u=l.get(0);void 0===u.result||u.resultList.length<u.resultLength;)l.forEach((function(e,t){if(void 0!==e.result&&void 0!==e.fatherKey){var n=l.get(e.fatherKey);n.resultList.length<n.resultLength&&-1===n.resultKey.indexOf(t)&&(n.resultKey.push(t),n.resultList.push(e.result),l.set(e.fatherKey,n))}})),l.forEach((function(e){e.resultList&&e.resultList.length===e.resultLength&&("and"===e.op&&(e.result=-1===e.resultList.indexOf(!1)),"or"===e.op&&(e.result=-1!==e.resultList.indexOf(!0)))}));return l.get(0).result}return!1}var d=this.scope(r.key),h=d.scope,f=d.key,p=d.key2,g=h?"header"===h?p?JSON.parse(e[p])[f]:e[f]:"user"===h?t[f]:a[f]:o;return this.calculate(r.op,g,r.value)}catch(y){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:y.message}),console.log(y.message),!1}},CepRule.prototype.publish=function(e,t,n){try{var r=this.configManager.get().user,i={biz_id:this.stateArray.get(t).pattern.biz_id,plan_id:t,uid:r.user_id||"",did:r.device_id||"",uuid:r.user_unique_id,events:e,extra:{url:window.location.href}};this.collect.emit("__cep_match",i),(window.opener||window.parent).postMessage({type:"__cep_match",data:i},"*"),this.event("__cep_trigger_sdk",t),this.addQuotas(t),this.reset(t,n),console.log(this.stateArray)}catch(o){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:o.message}),void console.log(o.message)}},CepRule.prototype.addQuotas=function(e){var t=this.stateArray.get(e).quotas;if(t&&t.length){var n=this.storage.getItem(this.quotasKey)||{};n[e]||(n[e]={value:0,lastTime:Date.now()});var r=n[e].value;0===r&&(n[e].lastTime=Date.now()),n[e].value=r+1,this.storage.setItem(this.quotasKey,n)}},CepRule.prototype.checkQuotas=function(e){var t=this.stateArray.get(e).quotas,n=this.storage.getItem(this.quotasKey)||{};if(n[e]||(n[e]={value:0,lastTime:Date.now()}),t&&t.length){var r=t[0].granularity,i=t[0].value;if("per_keyid"!==t[0].type)return!0;var o=this.release(r);return"all"===o?!(n[e].value>=i&&(console.log("plan:"+e+" limit"),1)):Date.now()-n[e].lastTime>=o?(n[e].value=0,n[e].lastTime=Date.now(),this.storage.setItem(this.quotasKey,n),!0):!(n[e].value>=i&&(console.log("plan:"+e+" limit"),1))}return!0},CepRule.prototype.clearQuotas=function(){this.storage.setItem(this.quotasKey,null)},CepRule.prototype.release=function(e){if("all"===e)return e;var t=dayjs_min.duration(e);return t?t.asMilliseconds():"all"},CepRule.prototype.reset=function(e,t){var n=this.stateArray.get(e);if(n.singleRule){var r=n.patternState.get(t);r.isMatch=!1,r.event=null,r.matchTime=0,r.initTime=Date.now(),n.patternState.set(t,r)}else n.patternState.forEach((function(e){e.isMatch=!1,e.event=null,e.matchTime=0,e.initTime=Date.now()}));this.stateArray.set(e,n);var i=this.waitArray.get(e);i&&i.get(t)&&(clearTimeout(i.get(t).waitFn),i.delete(t))},CepRule.prototype.event=function(e,t){try{var n={event:e,params:JSON.stringify({plan_id:t||"",biz_id:this.stateArray.get(t).pattern.biz_id}),local_time_ms:Date.now()},r=this.configManager.get(),i=r.header,o=r.user;i.custom=JSON.stringify(i.custom);var a={events:[n],user:o,header:i};this.fetch(this.reportUrl,[a])}catch(s){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:s.message}),void console.log(s.message)}},CepRule.prototype.scope=function(e){var t="",n="";if(e.indexOf(".")>-1){var r=e.split(".");t=r[0],e=r[1],"header"===t&&"custom"===e&&(e=r[2],n=r[1])}return{scope:t,key:e,key2:n}},CepRule.prototype.calculate=function(op,paramA,paramB){try{if("="===op)return paramA===paramB;if(-1!==["=","<",">",">=","<=","!="].indexOf(op))return eval(""+paramA+op+paramB);if(-1!==["in","contains"].indexOf(op))return-1!==paramB.indexOf(paramA);if(-1!==["is not null","is null"].indexOf(op))return"is null"===op?null==paramA:null!=paramA;if(-1!==["startswith","endswith"].indexOf(op)){if("startswith"===op)return 0===paramA.indexOf(paramB);var start=paramA.length-paramB.length,str=paramA.substr(start,paramB.length);return str===paramB}}catch(e2){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message}),console.log(e2.message),!1}},CepRule}(),pluginExtendList={autotrack:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"},object:"LogCep"},tracer:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"},visual:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/visual.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/visual.js"},object:"LogVisual"}},getLogPluginSpace=function(){return"undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null},pluginObject=getLogPluginSpace(),PluginExtend=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){if("sdk"===t)if(pluginExtendList.hasOwnProperty(n)){var r=pluginExtendList[n].object,i=""+pluginExtendList[n].src[e.channel];e.exist(n,r,i)}else console.warn("your "+n+" is not exist\uff0cplease check plugin name");else"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(t){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,n){var r=this;pluginObject[t]?(this.process(e,pluginObject[t]),console.log("\u5df2\u6709"+e+"\u63d2\u4ef6\uff0c\u907f\u514d\u91cd\u590d\u52a0\u8f7d~")):this.loadPlugin(e,n,(function(){r.process(e,pluginObject[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","\u2013","load plugin:"+e+" success","-")}),(function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","\u2013","load plugin:"+e+" error","-")}))},e.prototype.process=function(e,t,n){try{if(n){var r=new t;r.apply&&r.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(i){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message}),console.log("excude "+e+" error, message:"+i.message)}},e.prototype.loadPlugin=function(e,t,n,r){var i=this;try{var o=document.createElement("script");o.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),o.onerror=function(){r(t)},o.onload=function(){i._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(o)}catch(a){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:a.message})}},e}(),Verify=function(){function e(){this.verifyReady=!1,this.waitTime=5e3,this.cleanStatus=!1}return e.prototype.apply=function(e,t){var n=this;this.collector=e,this.config=t;var r=e.adapters.storage;this.cacheStorgae=new r(!1,"session"),this.eventStorage=[],this.collector.on("submit-verify",(function(e){e&&e.length&&n.eventStore(e[0])})),this.checkCache()},e.prototype.checkCache=function(){var e=this;this.verifyCookieKey="__applog_verify_set_"+this.config.app_id,this.cacheStorgae.getCookie(this.verifyCookieKey);var t=this.cacheStorgae.getItem(this.verifyCookieKey);this.sign=t&&t.sign||"",this.origin=t&&t.origin||"*";var n=setTimeout((function(){e.cleanVerify(),clearTimeout(n),e.collector.off("submit-verify")}),this.waitTime);window.addEventListener("message",(function(t){t&&t.data&&"simulator:verify"===t.data.type&&(clearTimeout(n),e.receMessage(t))}),!0)},e.prototype.receMessage=function(e){if(!this.cleanStatus){var t=e.data;this.verifyReady=!0,this.sign=t.sign,this.origin=e.origin,this.cacheStorgae.setItem(this.verifyCookieKey,JSON.stringify({sign:t.sign,origin:e.origin})),this.eventStorage.length&&this.postVerify(this.eventStorage,t.sign,e.origin)}},e.prototype.eventStore=function(e){this.cleanStatus||(this.verifyReady?this.postVerify(e,this.sign,this.origin):this.eventStorage.push(e))},e.prototype.cleanVerify=function(){this.cleanStatus=!0,this.eventStorage=[]},e.prototype.postVerify=function(e,t,n){try{var r=[];isArray(e)?e.forEach((function(e){r.push(e)})):r.push(e);var i={type:"simulator:verify:event",sign:t,pageUrl:window.location.href,events:r};(window.opener||window.parent).postMessage(i,n)}catch(o){console.log("web verify post message error ~")}},e}(),RuotePage=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var n=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(n.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:location.href,refer_title:document.title||location.pathname,refer_manual_key:""},this.config.autotrack&&"object"==typeof this.config.autotrack&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(this.cache_key,this.cache)},e.prototype.hack=function(){var e=this,t=window.history.pushState;history.pushState=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];"function"==typeof history.onpushstate&&history.onpushstate({state:n});var o=t.call.apply(t,__spread([history,n],r));if(e.lastLocation!==location.href){var a=e.getPopStateChangeEventData();return e.lastLocation=location.href,e.sendPv(a,"pushState"),o}};var n=history.replaceState;history.replaceState=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t});var o=n.call.apply(n,__spread([history,t],r));if(e.lastLocation!==location.href){var a=e.getPopStateChangeEventData();return e.lastLocation=location.href,e.sendPv(a),o}}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this,t=null;window.addEventListener("hashchange",(function(n){if(e.lastLocation!==window.location.href&&(clearTimeout(t),e.allowHash)){e.lastLocation=window.location.href;var r=e.getPopStateChangeEventData();e.sendPv(r)}})),window.addEventListener("popstate",(function(n){e.lastLocation!==window.location.href&&(t=setTimeout((function(){e.lastLocation=window.location.href;var t=e.getPopStateChangeEventData();e.sendPv(t)}),10))}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){try{var e,t,n=this.storage.getItem(this.cache_key)||{};e=document.referrer?document.referrer:n&&n.refer_key||"";var r=this.storage.getItem("__tea_cache_first_"+this.appid);return t=!r||1!=r,{is_html:1,url:location.href,referrer:e,page_key:location.href,refer_page_key:e,page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:n&&n.refer_manual_key||"",refer_page_title:n&&n.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+t}}catch(i){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:i.message}),{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e}();Collector$1.usePlugin(PluginExtend,"extend"),Collector$1.usePlugin(Tracer,"tracer"),Collector$1.usePlugin(Ab,"ab"),Collector$1.usePlugin(Stay,"stay"),Collector$1.usePlugin(AutoTrack,"autotrack"),Collector$1.usePlugin(Verify,"verify"),Collector$1.usePlugin(Et,"et"),Collector$1.usePlugin(Profile,"profile"),Collector$1.usePlugin(CepRule,"cep"),Collector$1.usePlugin(HeartBeat,"heartbeat"),Collector$1.usePlugin(Monitor,"monitor"),Collector$1.usePlugin(RuotePage,"route"),Collector$1.usePlugin(Tracer,"tracer"),new Collector$1("default");var Collector$1$1=Collector$1;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}var DEBUG="undefined"!=typeof window&&window.location.href.indexOf("loggerdebug")>-1;function computeWatchDur(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,n=0;n<e.length;n++)isNaN(Number(e[n].end))||isNaN(Number(e[n].begin))||e[n].begin<0||e[n].end<0||e[n].end<e[n].begin||(t+=e[n].end-e[n].begin);return parseInt(1e3*t,10)}function getHostFromUrl(e){if(null==e||""===e||"string"!=typeof e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n}function generateSessionId(e){var t=(new Date).getTime();try{e=parseInt(e)}catch(e2){e=0}return t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}function isType(e){return function(t){return Object.prototype.toString.call(t)==="[object ".concat(e,"]")}}function getResponseHeaders(e){var t={};if(e instanceof window.XMLHttpRequest)try{e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var n=e.split(": "),r=n.shift(),i=n.join(": ");t[r]=i}))}catch(n){}return t}function log(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];DEBUG&&(t=console).log.apply(t,["[logger]",e].concat(r))}function nowTime(){try{return Math.round(window.performance.now())}catch(e2){return(new Date).getTime()}}function curTimestamp(){return(new Date).getTime()}function formatData(e,t){var n={ext:e.ext||{},data:{}};return Object.keys(e).map((function(r){t[r]?n.data[t[r]]=e[r]:"ext"!==r&&(n.ext[r]=e[r])})),n}function getXhr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){try{e||r(new Error("url is undefined"));var i=nowTime(),o=i,a={},s=new window.XMLHttpRequest;s.open("get",e),s.onreadystatechange=function(){2===s.readyState&&(a.headers=getResponseHeaders(s),a.connectTime=nowTime()-o,a.status=s.status,a.statusText=s.statusText,i=nowTime())},s.onload=function(){n(a)},s.onprogress=function(e){var t,n=nowTime()-i;t=parseInt(e.loaded/1e3/(n/1e3),10),a.speed=0|t,a.costTime=n},s.onerror=function(e){a.status||(a.status=-1,a.costTime=nowTime()-i),r(a)},s.ontimeout=function(){a.status||(a.status=-2,a.costTime=nowTime()-i),n(a)},s.onabort=function(){n(a)},s.responseType="arraybuffer",s.timeout=t.timeout||1e4,s.setRequestHeader("Range","bytes=".concat(t.range||"0-1048576")),s.send()}catch(e2){r(e2)}}))}function checkVideoSrcIsEmpty(e){return!e||window.location.href.indexOf(e)>-1}function checkIsBlob(e){return!!e&&/^blob:/.test(e)}var KEYMAP={x_response_sinfo:"x-response-sinfo",x_response_cache:"x-response-cache",x_response_cinfo:"x-response-cinfo"};function transformHeader(e){if(!e)return{};var t={};return Object.keys(KEYMAP).map((function(n){if(e[n]||"string"!=typeof KEYMAP[n]){if(!e[n]&&KEYMAP[n]instanceof Array){var r=KEYMAP[n].filter((function(t){return void 0!==e[t]}));r.length>0?t[n]=e[r[0]]:t[n]=""}}else t[n]=e[KEYMAP[n]]||""})),t}function appendData(e,t){return!e||"string"!=typeof t&&"number"!=typeof t?t:e+""+t}function typeOf(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}function parseTempData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object.keys(t).map((function(r){e[r]="append"===n?appendData(e[r],t[r]):t[r]})),e}function hasClass(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(e2){var n=e.className&&"object"===_typeof(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}}function formatDefinition(e){return"String"===typeOf(e)?e.replace("P","p"):e?"Number"===typeOf(e)?"".concat(e):void 0:""}function toJsonString(e){try{return JSON.stringify(e)}catch(e2){return""}}function checkUrlIsExpired(e){if(!e||"String"!==typeOf(e))return 0;var t=0;try{var n=new RegExp("(\\?|&)x-tos-expires=([^&]*)(&|$)"),r=e.match(n);if(null!==r)t=parseInt(r[2],10);else{var i=e.split("/");i.length>5&&8===i[4].length&&(t=parseInt(i[4],16))}return t>0?t<parseInt((new Date).getTime()/1e3,10)?1:2:0}catch(e2){return 0}}var ENTRIES=[],MAX_COUNT=30;function findPerformanceInfo(e){var t={};try{e=e.replace(/^http:|^https:/,"");for(var n=ENTRIES||[],r=function(r){if(n[r].name.replace(/^http:|^https:/,"")===e)return["domainLookupEnd","domainLookupStart","startTime","requestStart","responseEnd","responseStart","connectStart","connectEnd","fetchStart"].map((function(e){t[e]=Math.round(n[r][e])})),t.url=n[r].name,t.duration=Math.round(n[r].duration),t.domainDuration=t.domainLookupEnd-t.domainLookupStart,t.connectDuration=t.connectEnd-t.connectStart,"break"},i=n.length-1;i>=0&&"break"!==r(i);i--);return t}catch(e2){return t}}function addPerformaceObserver(){try{new window.PerformanceObserver((function(e,t){var n=e.getEntriesByType("resource");ENTRIES.length>MAX_COUNT&&ENTRIES.splice(0,ENTRIES.length-MAX_COUNT);for(var r=0;r<n.length;r++)ENTRIES.push(n[r])})).observe({entryTypes:["resource"]})}catch(e2){console.warn("PerformanceObserver not support",e2)}}"undefined"!=typeof window&&addPerformaceObserver();var REPORT_EVENTS={ONE_PLAY:"videoplayer_oneplay",ONE_OPERA:"videoplayer_oneopera",ONE_ERROR:"videoplayer_oneerror",ONE_EVENT:"videoplayer_oneevent",ONE_TEMP:"videoplayer_onetemp"},ERROR_TYPES={data:1e3,runtime:1002,parse:1004,network:1003,no_error_handler:9997,custom_error:9998,other:9999,notSupport:1005},ERROR_CODES={1:-499991,2:-499992,3:-499993,4:-499994,5:-499995},PLAYBACK_STATE={STOP:0,PLAYING:1,PAUSE:2,ERROR:3,LOADING:4},LOAD_STATES={UNKNOWN:0,PLAYABLE:1,STALLED:2,ERROR:3},ENDED_TYPE={ERROR:1,NEXT:2,ENDED:3,UNLOAD:4,DESTROY:5,PLAY_CATCH:6,PLAY_ERROR:7},LOGTYPES={RETRY:"error_retry",ONEERROR:"oneerror",ONEEVENT:"oneevent",ONETEMP:"onetemp"},CACHE_FILE_TYPE={NO_CACHE:0,CACHED:1},MAX_TIME=432e5,MAX_COST=36e5,COMMON_KEYS=["tag","subtag","device_type"],MIN_WAITIONG=200,MAX_STALL_TIME=6e4,isSupport=_isLocalStorageUsable();function probeSupport(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(e2){return!1}}function checkIfLocalStorageThrows(){var e="_localstorage_support_test";try{return window.localStorage.setItem(e,!0),window.localStorage.removeItem(e),!1}catch(e2){return!0}}function _isLocalStorageUsable(){return probeSupport()&&!checkIfLocalStorageThrows()}var Strorage=isSupport?window.localStorage:{},LOGKEY="__xgplayerlogkey",LOCAL_LOG={set:function(e){try{var t=this.get();t.push(e),Strorage.setItem(LOGKEY,JSON.stringify(t))}catch(n){}},get:function(){try{var e=Strorage.getItem(LOGKEY);return e?JSON.parse(e):[]}catch(t){return[]}},remove:function(){try{Strorage.removeItem(LOGKEY)}catch(e2){}},clear:function(){try{Strorage.clear()}catch(e2){}}},RegMap=[{key:"QQBrowser",reg:/(qqbrowser)\/([\d.]+)/},{key:"QIHU360EE",reg:/qihu 360ee/},{key:"QIHU360SE",reg:/qihu 360se/},{key:"2345Explorer",reg:/(2345explorer)\/([\d.]+)/},{key:"Sogou",reg:/(metasr)/},{key:"Wexin",reg:/(micromessenger)\/([\d.]+)/},{key:"Openlanguage",reg:/(openlanguage)\/([\d.]+)/},{key:"NewsArticle",reg:/(newsarticle)\/([\d.]+)/},{key:"VideoArticle",reg:/(videoarticle)\/([\d.]+)/},{key:"Hotsoon",reg:/(live_stream)_([\d.]+)/},{key:"Aweme",reg:/(aweme)_([\d.]+)/},{key:"Lark",reg:/(lark)\/([\d.]+)/},{key:"PlayStation",reg:/(playstation)/},{key:"BingPreview",reg:/(bingpreview)\/([\d.]+)/},{key:"Baiduspider",reg:/(baiduspider-render)\/([\d.]+)/},{key:"YandexBot",reg:/(yandexbot)\/([\d.]+)/},{key:"Chrome",reg:/(chrome)\/([\d.]+)/},{key:"Safari",reg:/(version)\/([\d.]+)\s*(safari)/}],IERegMap=[{key:"Trident",reg:/(rv:)([\d.]+)/},{key:"Trident",reg:/(msie)\s*([\d.]+)/}];function isSupportMP4(){var e={isSupport:!1,mime:""};if("undefined"==typeof document)return e;var t=document.createElement("video");return"function"==typeof t.canPlayType?(["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"].map((function(n){"probably"===t.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(e.isSupport=!0,e.mime+="||".concat(n))})),e):(t=null,e)}var SPIDER_UA=["Baiduspider","YandexBot"];function checkIsSpider(e,t){var n=!1;return SPIDER_UA.map((function(t){t===e&&(n=!0)})),/(\+http|; http|\(http):\/\/([\w.]+\/?)\S*/.test(t)&&(n=!0),n}function detect(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.toLocaleLowerCase();var t=/(iphone)/.test(e)||/(ipad)/.test(e),n=/(android)/.test(e),r=/(windows phone)/.test(e),i=t||n||r,o={isIOS:t,isAndroid:n,isMobile:i,isPC:!i,isPad:/(ipad)/.test(e)},a=isSupportMP4();o.isSupportMP4=a.isSupport,o.mime=a.mime;var s="",c=0,l=[],u=RegMap;/trident/.test(e)&&(u=IERegMap);for(var d=0;d<u.length;d++)if(l=u[d].reg.exec(e)){s=u[d].key,c=l.length>2?l[2]:"";break}if(s)o["is".concat(s)]=!0,o.name=s,o.appVersion=c;else{var h=checkIs360();h&&(o.name="360EE")}if(o.name&&"Trident"!==o.name){var f=/(trident)/.exec(e);f&&(o.name=o.name?"".concat(o.name,"_Trident"):"Trident")}return o.isSpider=checkIsSpider(o.name),o}function checkIs360(){var e=navigator.mimeTypes;if(e){for(var t=0;t<e.length;t++){if(e[t].type&&e[t].type.indexOf("360")>-1)return!0;if(e[t].type&&e[t].type.indexOf("application/vnd.chromium.remoting-viewer")>-1)return!0;if(e[t].description&&e[t].description.indexOf("360")>-1)return!0}return!1}}var Browser="undefined"!=typeof navigator&&detect(navigator.userAgent);function isHevcSupported(){return!("undefined"==typeof MediaSource||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))}function probeConfigSupported(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"==typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var n=e.video||{},r=e.audio||{};try{var i=MediaSource.isTypeSupported(n.contentType),o=MediaSource.isTypeSupported(r.contentType);return Promise.resolve({supported:i&&o,smooth:!1,powerEfficient:!1})}catch(e2){return Promise.resolve(t)}}var defaultConfig={range:"0-1048576",timer:6e4,timeout:15e3},SpeedCheckTask=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),Object.keys(defaultConfig).map((function(e){void 0!==t[e]&&null!==t[e]||(t[e]=defaultConfig[e])})),this.options=t,this._headers={},this.intervalId=null,this.ishangUp=!1,this._data={contentLength:0,statusText:"",status:-1,speed:0,costTime:0,connectTime:0,contentType:""},this.url=[]}return _createClass(e,[{key:"setData",value:function(e,t){var n=this;if(Object.keys(e).map((function(t){"headers"!==t&&(n._data[t]=e[t])})),e.headers&&Object.keys(e.headers).length>0){this._headers=transformHeader(e.headers),e.headers["content-type"]&&(this._data.contentType=e.headers["content-type"]);var r=(e.headers["content-range"]||"").split("/");r&&r.length>1&&(this._data.contentLength=parseInt(r[1]))}}},{key:"contentLength",get:function(){return this._data.length||0}},{key:"trigger",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start",r=this.options;this.url=e,!this.url||"start"!==n&&(this.ishangUp||this.intervalId)?log("task>>cant`t trigger url",this.ishangUp,this.intervalId):(log("task>>trigger url ",e),this.ishangUp=!0,this.intervalId&&this.clear(),this.intervalId=setTimeout((function(){t.clear()}),"start"===n?500:r.timer),getXhr(this.url,{range:"start"===n?"0-1024":r.range,timeout:r.timeout}).then((function(e){log("getXhr>>check result ",e),t.setData(e||{}),t.ishangUp=!1})).catch((function(e){log("getXhr>>error ",e),t.ishangUp=!1,t._data.status=-1})))}},{key:"url",get:function(){return this.options.url},set:function(e){e&&(this.options.url=e)}},{key:"serverIp",get:function(){return this._headers.x_response_sinfo||""}},{key:"headers",get:function(){return this._headers||{}}},{key:"status",get:function(){return this._data.status||-1}},{key:"speed",get:function(){return this._data.speed}},{key:"clear",value:function(){clearTimeout(this.intervalId),this.intervalId=null}}]),e}(),VERSION="0.11.15";log("xgVodLogger version is ".concat(VERSION));var isObject=isType("Object"),TEA_ID=1300,LS_KEY="__tea_cache_tokens_".concat(TEA_ID),DEFAULT_INTERVAL=-1,AB_SDK_VERSION="",Collector=null,__support=Browser.isSupportMP4?1:0;__support=isHevcSupported()?__support+2:__support,probeConfigSupported({type:"file",video:{contentType:'video/mp4;codecs="hev1.1.6.L120.90"',width:1920,height:1080,bitrate:1e4,framerate:30}}).then((function(e){e&&e.supported&&(__support+=1)})).catch((function(e){}));var XGPlayerAppLogger=function(){function e(t,n){var r=this;if(_classCallCheck(this,e),_defineProperty(this,"initializeUrlLog",(function(e){var t=e&&e.url?e.url:"String"===typeOf(e)?e:"";"String"!==typeOf(t)&&(t=""),r.urlLog={initial_url:t,initial_host:getHostFromUrl(t),initial_ip:""}})),_defineProperty(this,"onXgLogCache",(function(){var e,t,n=null===(e=r.player)||void 0===e?void 0:e.getLogCache();n&&(r._templog={vtype:null===(t=r.player)||void 0===t?void 0:t.vtype,log:n},r.onOneTemp())})),_defineProperty(this,"onMediaFormatError",(function(e){r.onOneEvent({end_type:(e.error_type||"")+"Error"})})),_defineProperty(this,"onDrmTypeChange",(function(e){r.addIfExist("drm_type",{drm_type:e},r._options)})),_defineProperty(this,"onReplayBtnClick",(function(){r.resetLoggerParams()})),_defineProperty(this,"onBeforeDefinitionChange",(function(){r.resLogs.ldst=nowTime(),r._endType="switch"})),_defineProperty(this,"onDefinitionChange",(function(e){var t=e.from,n=e.to;r.changeResolution({from:t,to:n,startTime:r.resLogs.ldst,operaType:"switch"}),log("onDefinitionChange from:".concat(t,", to:").concat(n))})),_defineProperty(this,"onDefiChangeSuccess",(function(){log("onDefinitionChangeSuccess"),r.updateVideoSize(),r.triggerTask("start")})),_defineProperty(this,"onAbrChange",(function(e){var t=e.prev,n=e.cur,i=e.abrInfo;if(r.player.abrInstance){var o=r.player.abrInstance.eventInfo;log("abrChange",o),o.last_definition=t,o.now_definition=n,r.abrInfo.abr_event_info.video_switch.push(o),r.changeResolution({from:t,to:n,startTime:nowTime(),operaType:"abr_switch",abrInfo:i})}})),_defineProperty(this,"onAbrPrestallEnd",(function(e){r.abrInfo.abr_user_info.cancel_abr=e?1:0})),_defineProperty(this,"onTimeUpdate",(function(){var e=r.playlogs,t=r.resLogs,n=r.player;if(r.errorLog.try_err_c=0,e.vt||1!==r.startStep||(e.vt=curTimestamp(),log("onTimeUpdate: first frame inited","currentTime11:".concat(n.currentTime," vt-pt:").concat(e.vt-e.pt," vt-nt:").concat(e.vt-e.nt," vt-rt:").concat(e.vt-e.rt)),r.startStep=2),!t.initial_resolution){var i=n.currentDefitionFromPler&&n.currentDefitionFromPlayer.definition?n.currentDefitionFromPlayer.definition:n.config.defaultDefinition||n.video.videoHeight+"p"||"";i=formatDefinition(i),t.initial_resolution=i}t.final_resolution||(t.final_resolution=t.initial_resolution);var o=e.played.length;o<1?e.played.push({begin:n.currentTime,end:-1}):e.played[o-1].end=n.currentTime;var a=t.played.length;a<1?t.played.push({begin:n.currentTime,end:-1}):t.played[a-1].end=n.currentTime,r.lastVideoTime=n.currentTime||0})),_defineProperty(this,"onCanplay",(function(){log("onCanplay","this.startStep:".concat(r.startStep," ").concat(curTimestamp())),r.setVt()})),_defineProperty(this,"onLoadeddata",(function(){log("onLoadeddata","this.startStep:".concat(r.startStep," ").concat(curTimestamp())),r.setVt(),r.updateVideoSize()})),_defineProperty(this,"onLoadStart",(function(){var e=checkVideoSrcIsEmpty(r.player.currentSrc);r.triggerTask("start"),log("onLoadStart","this.startStep:".concat(r.startStep," ").concat(curTimestamp()," isSrcEmpty:").concat(e," player.src:").concat(r.player.src)),0!==r.startStep||e||"visible"!==document.visibilityState||r.setPt()})),_defineProperty(this,"onDashStateChange",(function(e){log("onDashStateChange","this.startStep:".concat(r.startStep," ").concat(nowTime()," state:").concat(e));var t=r.playlogs;if(r.startStep<2)switch(e){case"player_start":t.dash_pst=nowTime();break;case"wasm_start":t.dash_wst=nowTime();break;case"wasm_ready":t.dash_wrt=nowTime();break;case"init_finished":t.dash_ift=nowTime();break;case"core_start":t.dash_cst=nowTime();break;case"start_play":t.dash_spt=nowTime()}})),_defineProperty(this,"onBufferedChange",(function(){var e=r.player.video&&r.player.video.buffered;if(e){var t=e.length;t>0&&e.end(t-1)+1>r.player.duration&&(r.bft=curTimestamp())}})),_defineProperty(this,"onPlayerInited",(function(){log("player init"),r._playerCreatedTime=curTimestamp(),r.playlogs.rt=curTimestamp()})),_defineProperty(this,"onNotAutoPlay",(function(){log("onNotAutoPlay","autoplay:".concat(r.isAutoplay)),0===r.isAutoplay?r.isAutoplay=2:1===r.isAutoplay&&(r.isAutoplay=3)})),_defineProperty(this,"onDashError",(function(e){e=e||{};var t=r.errorLog;t.last_errors.push(e.errorCode),t.accu_errc++,r.onOneError({errorType:e.errorTypeCode,code:e.errorCode,url:e.url||"",headers:e.headers||{}},0)})),_defineProperty(this,"onPlayerError",(function(e){e=e||{};var t=r.errorLog,n=r.player;if(log("onPlayerError","this.player.type:".concat(r.player.type," this.player.replayRunning:").concat(r.player.replayRunning," isSupportMP4:").concat(Browser.isSupportMP4," isPC:").concat(Browser.isPC)),log("onPlayerError",e),r.load_state=LOAD_STATES.ERROR,r._endType="error",r.suspendWaitingStatus("onPlayerError"),"dash"!==n.type||!n.replayRunning){if(e.url||(e.url=r.player.currentSrc),Browser.isPC&&!Browser.isSupportMP4||Browser.isSpider)return t.errc=ERROR_CODES[5],t.errt=ERROR_TYPES.notSupport,r.onOneError({errorType:t.errt,code:t.errc,url:e.url,headers:e.headers||{},message:e.message||""},0),void(r._isOnePlayReport=!0);t.errt=e.errorTypeCode||(e.errorType&&ERROR_TYPES[e.errorType]?ERROR_TYPES[e.errorType]:9999),e.errorCode?t.errc=e.errorCode>0&&ERROR_CODES[e.errorCode]?ERROR_CODES[e.errorCode]:e.errorCode:e.code&&(t.errc=e.code>0&&ERROR_CODES[e.code]?ERROR_CODES[e.code]:e.code),t.last_errors.push(t.errc),0===t.fir_errc&&(t.fir_errc=t.errc),r.onOnePlay(ENDED_TYPE.ERROR),r.onOneTemp(ENDED_TYPE.ERROR),r.sendDegradeLog("playCatch_end",r.playlogs.degrade);var i=!1;!r._options.needXhrCheck||4!==e.errorCode&&2!==e.errorCode||(i=!0),r.onOneError({endState:ENDED_TYPE.PLAY_ERROR,errorType:t.errt,code:t.errc,url:e.url,headers:e.headers||{},message:e.message||""},0,i),r.sendEventsQueue()}})),_defineProperty(this,"onPlayInterfaceInfo",(function(e){log("onPlayInterfaceInfo",e);var t=r.errorLog,n=r.apiLog,i=r.playlogs;if(e&&Object.keys(e).map((function(t){"code"===t?n.vsc=e[t]:"message"===t?n.vsc_message=e.message||"success\uff0c\u89c6\u9891\u53ef\u6b63\u5e38\u64ad\u653e":n[t]=e[t]})),i.at=e.timestamep||(new Date).getTime(),(!e.error||-9988!==e.error.errc)&&(n.vsc=e.code||10,n.vsc_message=e.message||"success\uff0c\u89c6\u9891\u53ef\u6b63\u5e38\u64ad\u653e",e.error)){var o=e.error;t.errt=1e3,t.errc=o.errc||-9998,t.last_errors.push(o.errc||-9998),0===t.fir_errc&&(t.fir_errc=o.errc||-9998),t.accu_errc++,1===t.accu_errc&&(t.fir_errt=nowTime()),r.onOneError({errorType:1e3,code:o.errc||-9998,url:"",headers:{}})}})),_defineProperty(this,"onProgressEvent",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.netLog;if(e.speed){var n=e.speed>1e6?Math.floor(e.speed/1e3):e.speed;t.downloadSpeed=n,t.totalSpeed+=n,t.rqCount++}"oversize"!==e.type&&t.requestCount++,e.connectTime&&(t.connectCost=e.connectTime);var i=t.rqCount<7?100:e.costTime>=5e3?20:10;if(!("success"===e.type&&parseInt(100*Math.random(),10)<=i)){var o=findPerformanceInfo(e.cdnUrl),a=e.xhr||{},s=e.type?"progress_".concat(e.type):"progress",c=e.headers;c||(c=getResponseHeaders(a));var l=_objectSpread2(_objectSpread2({},c=transformHeader(c)),{},{download_speed:t.downloadSpeed,connect_cost:t.connectCost,c_dur:o.connectDuration||0,d_dur:o.domainDuration||0,r_dur:o.duration||0,rqtt:(new Date).getTime(),x_cache:c.x_response_cache||"",server_ip:c.x_response_sinfo});e.status?t.status=e.status:a&&a instanceof window.XMLHttpRequest&&(t.status=a.status||0),l.status=t.status;var u=e.cdnUrl||e.url;"error"===e.type&&r.merror.cdn.push(_objectSpread2(_objectSpread2({costTime:e.costTime,cur_play_pos:e.pos,cdn_url:u,cdn_host:getHostFromUrl(u)},l),c)),r.onOneEvent({costTime:e.costTime,vid:e.vid,end_type:s,cur_play_pos:e.pos,cdn_url:u,cdn_host:getHostFromUrl(u)},l,"error"===e.type?0:2)}})),_defineProperty(this,"onNext",(function(e){if(log("onNext:startStep:",r.startStep),r.startStep>0){if(r._reportInvalidVV(ENDED_TYPE.NEXT))return;r.onOnePlay(ENDED_TYPE.NEXT),r.onOneTemp(ENDED_TYPE.NEXT),r.sendEventsQueue()}r.vtype=null,r.playlogs.lc=0,r.resetLoggerParams()})),_defineProperty(this,"onNextEnded",(function(){var e=r.player,t=r.resLogs,n=formatDefinition(e.config.defaultDefinition||"");t.initial_resolution=n,t.final_resolution=n})),_defineProperty(this,"onXgLogWaiting",(function(e){var t=r.playlogs,n=r.resLogs,i=r.stall;if(r._options.checkByInnerLog&&0===e.type){log("onXgLogWaiting",e);var o=e.endType,a=e.costTime,s=e.start,c={download_speed:r.realSpeed,avg_speed:r.avgSpeed,mse_op:r.mp4MseOpLength,mp4_load_range:r.mp4LoadSegmentTimeRange,bitrate:r.curBitrate};if("waitingStart"===e.eventType)return r.onOneEvent({costTime:a,end_type:"waitstart"},c,2),void r.appendStallInfo("start",s);if("waitingEnd"===e.eventType){var l=nowTime();log("onXgLogWaiting>>".concat(o,"|costTime:").concat(a,"  vt:").concat(t.vt)),r.appendStallInfo("end",l,o),t.bc++,r.checkInBuffer(r.player.currentTime)?(t.de_bu_acu_t+=a,t.dbc++):(t.nbc++,t.n_bu_acu_t+=a),n.bc++,t.bu_acu_t+=a,n.bu_acu_t+=a,i.stall_end=l,i.stall_last_interval=i.stall_end-i.stall_start,i.stall_acc_time+=i.stall_last_interval,1===i.sc&&(i.first_buf_endt=l),r.onOneEvent({costTime:a,end_type:"waitend"},c,2)}}})),_defineProperty(this,"onSeeking",(function(){if(!checkVideoSrcIsEmpty(r.player.src)){var e=r.resLogs,t=r.playlogs,n=r.player,i=r.seekLog;log("onSeeking","currentTime:".concat(n.currentTime)),0===r.startStep&&r.setPt(),r.suspendWaitingStatus("seek"),r.isSeeking&&r.suspendSeekStatus("seek",!1),r.isSeeking=!0,t.played.push({begin:r.player.currentTime,end:-1}),e.played.push({begin:r.player.currentTime,end:-1}),i.lastSeekStartTime=nowTime(),i.seekBefore=r.lastVideoTime.toString(),i.intervalId=setTimeout((function(){r.isSeeking&&r.suspendSeekStatus("seekTimeout",!0)}),MAX_STALL_TIME)}})),_defineProperty(this,"onSeeked",(function(){checkVideoSrcIsEmpty(r.player.src)||r.isSeeking&&r.suspendSeekStatus("seeked",!0)})),_defineProperty(this,"onPlaying",(function(){r.suspendWaitingStatus("play"),r.load_state=LOAD_STATES.PLAYABLE;var e=nowTime();r.pauseLog.isPausing&&(r.pauseLog.isPausing=!1,r.pauseLog.pause_acu_t+=e-r.pauseLog.pause_start)})),_defineProperty(this,"onPlayCatch",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0};if(log("onPlayCatch",e,t),e){switch(e){case"mp42dash":r.vtype="DASH_2";break;case"dash2mp4":r.vtype="MP4_2";break;case"dash1mp4":r.vtype="MP4_1";break;default:r.vtype=e}var n=r.errorLog,i=r.playlogs,o=r.merror;o.playCatch.push(_objectSpread2({errc:t.errorCode,errt:t.errorType},t.headers)),r.setBr("playcatch"),n.accu_errc++,n.try_err_c++,n.fir_errc=t.errorCode,t.errorCode&&n.last_errors.push(t.errorCode),r.suspendWaitingStatus("playcatch"),r.sendDegradeLog("playCatch",i.degrade,{cdn_url:t.url}),i.degrade=e,r.onOneError({errorType:t.errorTypeCode,code:t.errorCode,url:t.url||"",status:t.httpCode||t.status,headers:t.headers||{},vid:t.vid||r.vid,preload_hit:t.preloadHit||0,preload_cached:t.preloadCached||0,endState:ENDED_TYPE.PLAY_CATCH,costTime:t.costTime,message:t.errorMessage||t.message},0)}})),_defineProperty(this,"onMediaExpied",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0},t=r.errorLog,n=r.playlogs;log("onMediaExpied",e),r.suspendWaitingStatus("expied"),r.setBr("expied"),t.accu_errc++,t.try_err_c++,t.last_errors.push(e.errorCode),n.at=(new Date).getTime(),r.merror.expied.push(_objectSpread2({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status},transformHeader(e.headers||{}))),r.onOneError({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status,headers:e.headers||{}},0)})),_defineProperty(this,"onLog",(function(e){log("onLog",e);var t=e.type;if(delete e.type,t)switch(t){case LOGTYPES.RETRY:break;case LOGTYPES.ONETEMP:r._templog||(r._templog={}),r._templog=parseTempData(r._templog,e.data,e.action),r._templog.preload_hit&&(r._cacheFile=CACHE_FILE_TYPE.CACHED);break;case LOGTYPES.ONEERROR:var n=r.errorLog;n.accu_errc++,n.try_err_c++,r.setBr("mp4error"),n.last_errors.push(e.code),r.onOneError(e,0);break;case LOGTYPES.ONEEVENT:var i=formatData(e,{costTime:"costTime",vid:"vid",end_type:"end_type",pos:"cur_play_pos",cdnUrl:"cdn_url"});i.ext&&["start","end"].map((function(e){i.ext[e]&&(i.ext["ext_".concat(e)]=i.ext[e],delete i.ext[e])})),r.onOneEvent(i.data,i.ext,2)}})),_defineProperty(this,"onPlay",(function(){log("onPlay","this.startStep :".concat(r.startStep," this.isEnded:").concat(r.isEnded)),r.isEnded&&(r.resetLoggerParams(),r.setPt())})),_defineProperty(this,"onPause",(function(){log("onPause");var e=r.pauseLog;e.isPausing=!0,e.pause_start=nowTime()})),_defineProperty(this,"onWaiting",(function(){var e=r.stall,t=r._options;r.updateCurBuffer("onWaiting"),t.checkByInnerLog||(log("onWaiting>","isSeeking:".concat(r.isSeeking," startStep:").concat(r.startStep," intervalId:").concat(e.intervalId)),r.isSeeking||0===r.playlogs.vt||r.inWaitingStart>0||(e.intervalId&&(window.clearTimeout(e.intervalId),e.intervalId=null),r.inWaitingStart=nowTime(),e.intervalId=window.setTimeout((function(){var e=r.stall;log("stall.intervalId>>".concat(e.intervalId," cost: ").concat(nowTime()-r.inWaitingStart)),r._endType="wait",r.load_state=LOAD_STATES.STALLED,r.vtype.indexOf("MP4")>-1&&r.player.currentTime>10&&r.task&&(r.triggerTask("waiting",r.initial_url),r.requestCount++),e.stall_start=r.inWaitingStart,1===e.sc&&(e.first_buf_startt=r.inWaitingStart),window.clearTimeout(e.intervalId),e.intervalId=null,r.startWaitingStatus(r.inWaitingStart,nowTime()-r.inWaitingStart),e.intervalId=setTimeout((function(){r.inWaitingStart>0&&r.suspendWaitingStatus("waitTimeout")}),MAX_STALL_TIME)}),MIN_WAITIONG)))})),_defineProperty(this,"onEnded",(function(){if(r.initial_url){log("onEnded","watchDur:".concat(r.watchDur," vt:").concat(r.vt," pt:").concat(r.pt)),r.isEnded=!0;var e=r.resLogs.df;r.changeResolution({from:e,to:e,startTime:nowTime(),operaType:"leave_switch",endType:"ended"}),r.onOnePlay(ENDED_TYPE.ENDED),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r.onOneTemp(ENDED_TYPE.ENDED),r.sendEventsQueue(),r.playlogs.lc++}})),_defineProperty(this,"onUnload",(function(){0!==r.startStep&&r.initial_url&&(r.onOneTemp(ENDED_TYPE.UNLOAD),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r._reportInvalidVV(ENDED_TYPE.UNLOAD)||r.onOnePlay(ENDED_TYPE.UNLOAD,!0))})),_defineProperty(this,"onVisibilitychange",(function(){var e=r.playlogs.vt;"visible"===document.visibilityState&&(e||r.setPt())})),_defineProperty(this,"onDestroy",(function(){log("onDestroy:this.startStep:".concat(r.startStep," initial_url:").concat(r.initial_url," ").concat(!!r.initial_url)),r.onOnePlay(ENDED_TYPE.DESTROY),r.startStep>0&&r.initial_url&&(r.onOneTemp(ENDED_TYPE.DESTROY),r.sendDegradeLog("playCatch_end",r.playlogs.degrade));var e=r.resLogs.df;r.changeResolution({from:e,to:e,startTime:nowTime(),operaType:"leave_switch",endType:"destroy"}),r.sendEventsQueue(),Browser.isPC?window.removeEventListener("beforeunload",r.onUnload):(Browser.isMobile||Browser.isPad)&&window.removeEventListener("pagehide",r.onUnload),document.removeEventListener("visibilitychange",r.onVisibilitychange),r.listeners.forEach((function(e){r.player.off(e.evt,e.handler)})),r.clearTimers(),r.player.off("destroy",r.onDestroy),r.task&&r.task.clear()})),_defineProperty(this,"onOnePlay",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(log("onOnePlay _isOnePlayReport:".concat(r._isOnePlayReport," isLeave: ").concat(t," endState:").concat(e)),!r._isOnePlayReport){var n=r.errorLog,i=r.playlogs,o=r.abrInfo,a=r.resLogs,s=r.player,c=r.apiLog,l=r.pauseLog,u=r.stall,d=r.netLog,h=r.watchDur;r._isOnePlayReport=!0;var f=curTimestamp(),p=r.getBufferTime(s),g=r.getPerformance();r.setExt();var y=_objectSpread2(_objectSpread2(_objectSpread2({local_time:(new Date).getTime(),log_type:"video_playq",plugin_exception:0,player_create_exception:"",v:r.vid,initial_url:r.initial_url,initial_host:r.initial_host,initial_ip:r.curHeaders.x_response_sinfo||0,initial_type:r.initial_type},r.curHeaders),{},{initial_resolution:a.initial_resolution,final_resolution:a.final_resolution,pt:r.pt,prepare_start_time:i.nt,prepare_end_time:i.rt||curTimestamp(),vt:r.vt,lt:r.lt,lpt:r.lpt,fvt:r.fvt,nvt:r.nvt,bft:r.bft,sc:r.seekLog.sc,sat:r.seekLog.sat,bc:r.bc,dbc:i.dbc||0,nbc:i.nbc||0,video_net_s:r.videoNetworkState,status:r.curStatus,first_buf_startt:u.first_buf_startt,first_buf_endt:u.first_buf_endt,lc:i.lc,bu_acu_t:r.bu_acu_t>MAX_TIME?0:r.bu_acu_t,de_bu_acu_t:i.de_bu_acu_t||0,n_bu_acu_t:i.n_bu_acu_t||0,pause_acu_t:l.pause_acu_t,cur_play_pos:r.cur_play_pos,load_state:r.load_state,play_speed:r.playbackRate,playback_state:r.playback_state,end_state:e,watch_dur:h>MAX_TIME?0:h,switch_resolution_c:r.switchResolutionCount,is_start_play_automatically:r.isAutoplay,start_time:r.start_time,finish:r.finish,errt:n.errt,errc:n.errc,vsc:c.vsc,vsc_message:c.vsc_message,api_str:c.api_str,auth:c.auth||c.logid,width:r.videoWidth,height:r.videoHeight,vd:r.vd,video_length:parseInt(p.video,10),audio_length:parseInt(p.audio,10),df:r.resolution,lf:a.lf,play_c:0,player_created_t:r.player_created_t,fir_errt:n.fir_errt,fir_errc:n.fir_errc,lv_method:0,ldst:a.ldst,ldet:a.ldet,is_disable_short_seek:0,mute:r.mute,volume:r.volume,download_speed:r.realSpeed?r.realSpeed:r.task&&r.task.speed?r.task.speed:d.downloadSpeed,avg_speed:r.avgSpeed?r.avgSpeed:d.rqCount>0?parseInt(d.totalSpeed/d.rqCount,10):0,bitrate:r.curBitrate,preload_state:r.preloadState,preload_hit:r.preLoadData.hit||0,preload_cached:r.preLoadData.duration||r.preLoadData.byteLength||0,mdl_req_num:d.requestCount,watingcost:r.watingCost,br:i.br,fbrt:i.fbrt,try_err_c:n.try_err_c,accu_errc:n.accu_errc,dash_pst:r.dash_pst,dash_wst:r.dash_wst,dash_wrt:r.dash_wrt,dash_ift:r.dash_ift,dash_cst:r.dash_cst,dash_spt:r.dash_spt,dash_break:2===s.dashBufferBreak?1:0,merror:toJsonString(r.merror),ex:toJsonString(r.exInfo),perf:toJsonString(g),bufs:toJsonString(r.buffers.allBuffer),vs:a.vs,vds:a.vds,vps:a.vps},r.buffers.curBuffer),{},{degrade:i.degrade,cache_file:r._cacheFile});if(0!==r.vt&&(y.et=f),s&&s.dashState&&(y.dash_state=s.dashState),s.abrInstance){var v=s.abrInstance;if(r.updateAbrInfo(o,v,s.playbackRate),v.getAbrVVStats){var m=v.getAbrVVStats();Object.keys(m).forEach((function(e){y[e]=m[e]}))}}if(o.abr_init_opts=s.config.autoBitrateOpts||{},y.abr_info=toJsonString(r.abrInfo),t){var _=!r._options.disableLocalCache;r.reportLog(REPORT_EVENTS.ONE_PLAY,y,_?1:0)}else r.reportLog(REPORT_EVENTS.ONE_PLAY,y)}})),_defineProperty(this,"onOneEvent",(function(e){var t=e.costTime,n=e.vid,i=e.end_type,o=e.cur_play_pos,a=e.cdn_url,s=e.cdn_host,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;log("onOneEvent",i);var u=r.buffers.curBuffer,d=_objectSpread2({local_time:(new Date).getTime(),v:n||r.vid,cost_time:t,end_type:i||r.end_type,cdn_url:a||r.url,cdn_host:s||"",initial_type:r.initial_type,resolution:r.resolution,play_speed:r.playbackRate,first_frame_interval:nowTime()-r.pt,last_switch_interval:r.getLastInterval("lastSwitchStartTime",r.resLogs,!1),last_seek_interval:r.updateSeekPt(!1),last_event_interval:r.getLastInterval("lastEventTime"),cur_play_pos:o||r.cur_play_pos,video_ready_s:r.videoReadyState,video_seeking:r.videoSeeking,video_paused:r.videoPaused,bufs:toJsonString(r.buffers.allBuffer),retry_count:r._retryCount,at:r.playlogs.at,stay_seconds:parseInt(((new Date).getTime()-r.playlogs.at)/1e3,10),preload_state:r.preloadState,preload_hit:r.preLoadData.hit,preload_cached:r.preLoadData.duration||r.preLoadData.byteLength},u);if("waitstart"===i&&"function"==typeof r._options.getPageFPS){var h=r._options.getPageFPS();d.cur_fps=h.curFPS||0,d.avg_fps=h.avgFPS||0}var f=r.player;f&&f.dashState&&(d.dash_state=r.player.dashState),Object.keys(c).forEach((function(e){d[e]=c[e]})),d.ex=toJsonString(r.getPlayerExt()),r.addIfExist("drm_type",r._options,d),r.reportLog(REPORT_EVENTS.ONE_EVENT,d,l)})),_defineProperty(this,"onOneTemp",(function(){if(log("onOneTemp>>",!r._templog),r._templog){var e=r.player,t=r.playlogs,n=r.pauseLog,i=r.errorLog,o=r.resLogs,a=r.watchDur,s=_objectSpread2(_objectSpread2(_objectSpread2({local_time:(new Date).getTime()},r._templog),{},{v:r.vid,initial_type:r.initial_type,pt:r.pt,vt:r.vt,lt:r.lt,fvt:r.fvt,bc:r.bc,bu_acu_t:r.bu_acu_t>MAX_TIME?0:r.bu_acu_t,pause_acu_t:n.pause_acu_t,cur_play_pos:r.cur_play_pos,watch_dur:a>MAX_TIME?0:a,finish:r.finish,errt:i.errt,errc:i.errc,vd:r.vd,df:r.resolution,lf:o.lf,br:t.br,fbrt:t.fbrt,try_err_c:i.try_err_c,accu_errc:i.accu_errc,dash_break:2===e.dashBufferBreak?1:0,bufs:toJsonString(r.buffers.allBuffer),vs:o.vs,vds:o.vds,vps:o.vps},r.buffers.curBuffer),{},{degrade:t.degrade});0!==r.vt&&(s.et=curTimestamp()),["drm_type","dynamic_type"].forEach((function(e){r.addIfExist(e,r._options,s)})),r.reportLog(REPORT_EVENTS.ONE_TEMP,s,0),r._templog=null}})),this.player=t,void 0===this.player||null===this.player)throw new Error("player is ".concat(this.player));if(n&&n.line_app_id){n.isTask&&(this.task=new SpeedCheckTask),this.eventQueue=[],this._instanceCreateTime=(new Date).getTime(),n.codec_type=n.codec_type||"h264",this._options=n,!this._options.maxQueueCount&&(this._options.maxQueueCount=5),this.line_app_id=parseInt(n.line_app_id,10)||0,this.line_user_id=(n.line_user_id||"").toString(),this.playerCoreVersion=t.version,this.playerVersion=n.playerVersion,this.closeSeekLog=n.closeSeekLog||!1,this.start_time=1e3*(n.start_time||0),this._initial_resolution="",this.__vtype=null,this.__dt="",this.resetLoggerParams();try{this.initializeTracker(),this.sendLocalLog(),this.bindEvt(),log("logger constructor:"+this.player.video)}catch(e2){console.error(e2)}}else console.warn("player.config.vodLogOpts.line_app_id is necessary for plugin xgVodLogger")}return _createClass(e,[{key:"resetLoggerParams",value:function(){log("resetLoggerParams");var e=this.playlogs?this.playlogs.lc:0;this.playlogs={nt:curTimestamp(),vt:0,rt:this.isEnded?curTimestamp():0,at:0,pt:0,bu_acu_t:0,bc:0,br:0,fbrt:"",dbc:0,de_bu_acu_t:0,nbc:0,n_bu_acu_t:0,played:[{begin:0,end:-1}],dash_pst:0,dash_wst:0,dash_wrt:0,dash_ift:0,dash_cst:0,dash_spt:0,interruptCount:0,degrade:"none",lc:e},this.degradeLog={bu_acu_t:0,bc:0,watch_dur:0,hasSendEnd:!1},this.buffers={allBuffer:[],curBuffer:{buf_diff:0,buf_s_pos:0,buf_e_pos:0,buf_include:0}},this.netLog={downloadSpeed:0,requestCount:0,connectCost:0,totalSpeed:0,rqCount:0,status:0},this.merror={cdn:[],player:[],playCatch:[],expied:[]},this.exInfo={stall:[]},this._templog=null,this._isOnePlayReport=!1,this.startStep=0,this.bft=0,this.initializeLogDatas(),this.initializeUrlLog()}},{key:"initializeLogDatas",value:function(){this.startStep=0,this.inWaitingStart=0,this.lastVideoTime=0,this._endType="",this._retryCount=0,this.lastOperaTime=DEFAULT_INTERVAL,this.lastEventTime=DEFAULT_INTERVAL,this.seekLog={intervalId:0,lastSeekStartTime:nowTime(),seekBefore:0,sat:0,sc:0},this.resLogs={lastSwitchStartTime:DEFAULT_INTERVAL,switch_count:0,abr_switch_count:0,initial_resolution:"",final_resolution:"",ldst:0,ldet:0,df:"",lf:"",played:[],bc:0,bu_acu_t:0,sc:0,sat:0,buf:0,lbuf:0,lplayed:0,vs:0,vds:0,vps:0,vis:0,bitrate:0},this.apiLog={code:0,message:"",logid:"",api:"",auth:"",error:{}},this.errorLog={accu_errc:0,try_err_c:0,errt:0,errc:0,fir_errt:0,fir_errc:Browser.isSupportMP4?0:1005,last_errors:[]},this.pauseLog={pause_acu_t:0,isPausing:!1,pause_start:0},this.stall={intervalId:0,stall_count:0,first_buf_startt:0,first_buf_endt:0,stall_start:0,stall_end:0,stall_last_interval:0,stall_acc_time:0},this._playerCreatedTime=0,this.load_state=LOAD_STATES.UNKNOWN,this.lv_method=6,this.isSeeking=!1,this.isEnded=!1,this.startStep=0,this.isAutoplay=this.player.config&&this.player.config.autoplay?1:0,this.abrInfo={abr_general_info:{},abr_event_info:{video_switch:[],video_stall:[],video_exit:{}},abr_play_info:{start_play_time_ms:0,is_hint:0,playback_info:{internet_speed_record:[],play_bitrate_record:[],buffer_length_record:[],play_speed_record:[]}},abr_user_info:{cancel_abr:0},abr_init_opts:this.player.config.autoBitrateOpts||{}},this._cacheFile=CACHE_FILE_TYPE.NO_CACHE}},{key:"initSessionId",value:function(){var e="0";try{e=window.localStorage.getItem(LS_KEY).web_id||"0"}catch(t){e="0"}this._sessionId=generateSessionId(e),log("sessionId ".concat(this._sessionId))}},{key:"initializeTracker",value:function(){var e=this,t=this._options;if(window.__xgplayer_vod_log__)this.tracker=window.__xgplayer_vod_log__;else{this.tracker=window.__xgplayer_vod_log__=new Collector("tracker");var n=t.channel||"cn",r={app_id:"cn"===(n="va"===n||"sg"===n?n:"cn")?TEA_ID:1300===TEA_ID?323254:TEA_ID,channel:n,log:!1,disable_sdk_monitor:!0};t.channelDomain&&(r.channel_domain=t.channelDomain),r.enable_ab_test=!!t.enableAbTest,this.tracker.init(r)}this.initSessionId();var i=navigator?navigator.hardwareConcurrency:0,o=navigator?navigator.deviceMemory:0;this.commonParams={play_type:0,source_type:"vid",sdk_version:VERSION,pc:this.playerCoreVersion,pv:this.playerVersion,line_app_id:this.line_app_id,line_user_id:this.line_user_id,app_version:t.appVersion||"",platform:Browser.isPad?"pad":Browser.isMobile?"mobile":"pc",cpu_core:Number(i)||0,memory_size:Number(o)||0,support:__support,webdriver:navigator&&navigator.webdriver?1:0},log("commonParams ",this.commonParams);var a={evtParams:this.commonParams,disable_auto_pv:!0};log("Browser.name ",Browser.name),!Browser.name||Browser.isChrome||Browser.isSafari||(a.browser=Browser.name,Browser.appVersion&&(a.browser_version=Browser.appVersion)),this.line_user_id&&(a.user_unique_id=this.line_user_id,a.web_id=this.line_user_id),t.referrer&&(a.referrer=t.referrer,a.referrer_host=getHostFromUrl(t.referrer)),t.ext&&Object.keys(t.ext).map((function(n){e.exInfo[n]=t.ext[n]})),this.tracker.config(a),this.tracker.start()}},{key:"resetDefiInfo",value:function(){var e=this.resLogs;e.played=[],e.bc=0,e.bu_acu_t=0,e.sc=0,e.sat=0}},{key:"sendLocalLog",value:function(){var e=this,t=LOCAL_LOG.get();LOCAL_LOG.remove(),t.map((function(t){Object.keys(t).map((function(n){if(log("sendLocalLog",n,t[n]),e.player){e.player.emit("abLog",n,t[n]);var r=e._options.sendLocalCallback;r&&"function"==typeof r&&r(n,t[n])}e._track(n,t[n])}))}))}},{key:"_track",value:function(e,t){"function"==typeof this.tracker?this.tracker(e,t):this.tracker.event(e,t)}},{key:"bindEvt",value:function(){var e=this;this.listeners=[{evt:"play",handler:this.onPlay},{evt:"playing",handler:this.onPlaying},{evt:"pause",handler:this.onPause},{evt:"waiting",handler:this.onWaiting},{evt:"playInterfaceInfo",handler:this.onPlayInterfaceInfo},{evt:"DRM_ERROR",handler:this.onDashError},{evt:"ended",handler:this.onEnded},{evt:"loadeddata",handler:this.onLoadeddata},{evt:"loadstart",handler:this.onLoadStart},{evt:"canplay",handler:this.onCanplay},{evt:"dashStateChange",handler:this.onDashStateChange},{evt:"autoplay was prevented",handler:this.onNotAutoPlay},{evt:"autoplay_was_prevented",handler:this.onNotAutoPlay},{evt:"seeking",handler:this.onSeeking},{evt:"seeked",handler:this.onSeeked},{evt:"complete",handler:this.onPlayerInited},{evt:"timeupdate",handler:this.onTimeUpdate},{evt:"bufferedChange",handler:this.onBufferedChange},{evt:"beforeDefinitionChange",handler:this.onBeforeDefinitionChange},{evt:"definitionChange",handler:this.onDefinitionChange},{evt:"definitionChangeSuccess",handler:this.onDefiChangeSuccess},{evt:"drmTypeChange",handler:this.onDrmTypeChange},{evt:"replayBtnClick",handler:this.onReplayBtnClick},{evt:"initialUrl",handler:this.initializeUrlLog},{evt:"ABR_CHANGE",handler:this.onAbrChange},{evt:"playCatch",handler:this.onPlayCatch},{evt:"log",handler:this.onLog},{evt:"ABR_PRESTALL_END",handler:this.onAbrPrestallEnd},{evt:"progress_event",handler:this.onProgressEvent},{evt:"logger_next",handler:this.onNext},{evt:"playnext",handler:this.onNext},{evt:"nextEnded",handler:this.onNextEnded},{evt:"media_format_error",handler:this.onMediaFormatError},{evt:"xglog",handler:this.onXgLogWaiting},{evt:"xglog_cache",handler:this.onXgLogCache}];var t=this.player.config.errorKey;log(">>>errorKey",t);var n={evt:"error",handler:this.onPlayerError};t&&(n.evt=t),this.listeners.push(n),this.listeners.forEach((function(t){e.player.on(t.evt,t.handler)})),this.bindUnload()}},{key:"addIfExist",value:function(e,t,n){if(isObject(t)){var r=t[e];null!=r&&(n[e]=r)}}},{key:"changeResolution",value:function(e){var t=e.from,n=e.to,r=e.startTime,i=e.operaType,o=e.abrInfo,a=e.endType,s=void 0===a?"":a,c=this.resLogs;t=formatDefinition(t),n=formatDefinition(n),c.ldet=nowTime(),c.df=n,c.lf=t,c.final_resolution=n,c.switch_count++;var l=c.ldet-r,u={bc:c.bc,bu_acu_t:c.bu_acu_t,sc:c.sc,sat:c.sat,watch_dur:computeWatchDur(c.played)};o&&(u.abrInfo=o),this.updateVds(),this.resetDefiInfo(),this._options.closeResolutionLog||this.onOneOperator({costTime:l,operaType:i,endType:s,stateBefore:t,stateAfter:n},u,0)}},{key:"getLastInterval",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t[e],i=nowTime(),o=r===DEFAULT_INTERVAL?DEFAULT_INTERVAL:i-r;return n&&(t[e]=i),o}},{key:"updateSeekPt",value:function(e){return this.getLastInterval("lastSeekStartTime",this.seekLog,e)}},{key:"_reportInvalidVV",value:function(e){return!!this._isInvaidVV()&&(this.onOneError({endState:e,errorType:9998,code:-1,url:this.player.currentSrc,headers:{}},0),this._isOnePlayReport=!0,!0)}},{key:"_isInvaidVV",value:function(){return 0===this.vt&&-1===this.curStatus}},{key:"bindUnload",value:function(){Browser.isPC?window.addEventListener("beforeunload",this.onUnload):(Browser.isMobile||Browser.isPad)&&window.addEventListener("pagehide",this.onUnload),document.addEventListener("visibilitychange",this.onVisibilitychange),this.player.once("destroy",this.onDestroy)}},{key:"clearTimers",value:function(){var e=this.seekLog,t=this.stall;e.intervalId&&window.clearTimeout(e.intervalId),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"sendDegradeLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playCatch",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};log("sendDegradeLog",e,t,n);var r=this.degradeLog;if(!(r.hasSendEnd||"playCatch_end"===e&&"none"===t)){"playCatch_end"===e&&(r.hasSendEnd=!0);var i=this.bu_acu_t-r.bu_acu_t;this.onOneEvent({costTime:this.vd,vid:this.vid,end_type:e,cur_play_pos:this.player.currentTime,cdn_url:n.url},_objectSpread2({degrade:t,vt:this.vt,pt:this.pt,fvt:this.fvt,bc:this.bc-r.bc,bu_acu_t:i>MAX_TIME?0:i,watch_dur:this.watchDur-r.watch_dur},n),0)}}},{key:"getBufferTime",value:function(e){var t=0,n=0,r=e.video&&e.video.buffered;if(r){for(var i=r.length,o=0,a=0;a<i;a++)o+=r.end(a)-r.start(a);t=n=1e3*o}return{video:t,audio:n}}},{key:"updateAbrInfo",value:function(e,t,n){e.abr_general_info=t.generalInfo,e.abr_event_info.video_exit={local_time_ms:(new Date).getTime(),buffer_length:t.bufferLength,internet_speed:t.downloadSpeed,now_bitrate:t.nowBitrate,play_speed:n},t.getAbrPlayInfo&&(e.abr_play_info=t.getAbrPlayInfo())}},{key:"getPerformance",value:function(){return this.player.performance||{}}},{key:"setExt",value:function(){var e=this,t=this.player.ext||{};t.performance&&delete t.performance,Object.keys(t).map((function(n){"performance"!==n&&(e.exInfo[n]=t[n])}))}},{key:"onOneOperator",value:function(e){var t=e.costTime,n=e.operaType,r=e.stateBefore,i=e.stateAfter,o=e.endType,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=this.getLastInterval("lastOperaTime"),l={local_time:(new Date).getTime(),v:this.vid,opera_type:n,state_before:r,state_after:i,cost_time:t,end_type:o||this.end_type,cdn_url:this.url,resolution:this.resolution,last_interval:c,bufs:toJsonString(this.buffers.allBuffer),cur_play_pos:this.cur_play_pos,retry_count:this._retryCount},u=this.player;u&&u.dashState&&(l.dash_state=this.player.dashState),Object.keys(a).forEach((function(e){l[e]=a[e]})),this.addIfExist("drm_type",this._options,l),this.reportLog(REPORT_EVENTS.ONE_OPERA,l,s)}},{key:"onOneError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorType:0,code:0,url:"",headers:{},costTime:0,vid:"",message:"",preload_hit:0,preload_cached:0},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];log("onOneError",t);var i=this.errorLog,o=this.apiLog,a=this.resLogs,s=this.player,c=this.playlogs,l=transformHeader(t.headers||{}),u=this.getPerformance();this.setExt();var d=_objectSpread2(_objectSpread2(_objectSpread2({v:t.vid||this.vid,video_pos:this.cur_play_pos,local_time:(new Date).getTime(),cost_time:t&&t.costTime?t.costTime:0,errt:t.errorType,errc:t.code,es:this.es,cdn_url:t.url||this.url,bufs:toJsonString(this.buffers.allBuffer),resolution:a.final_resolution,last_errors:i.last_errors.join(";"),vsc:o.vsc,vsc_message:t.message||o.vsc_message,server_ip:l.x_response_sinfo||0,initial_url:this.initial_url,initial_host:this.initial_host},l),{},{cur_play_pos:this.cur_play_pos},this.buffers.curBuffer),{},{degrade:c.degrade,end_state:t.endState||ENDED_TYPE.ERROR,preload_hit:t.preload_hit||0,preload_cached:t.preload_cached||0,ex:toJsonString(this.exInfo),pref:toJsonString(u),video_ready_s:this.videoReadyState});s&&s.dashState&&(d.dash_state=s.dashState);var h=this.player.currentSrc,f=checkIsBlob(h)?checkIsBlob(t.url)?this.initial_url:t.url:h,p={connectTime:0,status:0,statusText:"",isexpired:0,isBlob:checkIsBlob(h)?1:0};if(r&&"String"===typeOf(f)){var g={};getXhr(f,{range:"0-8",timeout:2e3}).then((function(e){log("getXhr>>check result ",e);var t=transformHeader(e.headers||{});d.server_ip=t.x_response_sinfo,g=_objectSpread2(_objectSpread2({},p),{},{statusText:e.statusText||"",status:e.status||0,connectTime:0|e.connectTime,sinfo:t.x_response_sinfo||"",cinfo:t.x_response_cinfo||""})})).catch((function(e){g=_objectSpread2(_objectSpread2({},p),{},{statusText:-2===e.status?"timeout":"error",status:e.status})})).finally((function(){var t=checkUrlIsExpired(f);g.isexpired=t,d.net=toJsonString(g),e.reportLog(REPORT_EVENTS.ONE_ERROR,d,n)}))}else d.net=toJsonString(p),this.reportLog(REPORT_EVENTS.ONE_ERROR,d,n)}},{key:"reportLog",value:function(t,n,r){var i=this,o=this._options,a=this.player.ABTestTag,s=this.commonParams;!n.player_sessionid&&(n.player_sessionid=this.sessionId),!n.web_url&&(n.web_url=window.location.href),n.user_agent=navigator.userAgent,n.dynamic_type=this.dynamicType;var c="Array"===typeOf(o.absdkVersion)?o.absdkVersion.join(","):o.absdkVersion;n.absdkVersion=c||e.AB_SDK_VERSION,null!=a&&(n.abtest_tag=a);var l=this._options;if(n.codec_type=this.codecType,isObject(l)&&(COMMON_KEYS.forEach((function(e){i.addIfExist(e,l,n)})),Object.keys(s).forEach((function(e){i.addIfExist(e,s,n)})),n.vtype=this.vtype),1===r){var u={};return u[t]=n,void LOCAL_LOG.set(u)}2!==r?(this.player&&this.player.emit("abLog",t,n),this._track(t,n)):this.addEventsQueue(t,n)}},{key:"addEventsQueue",value:function(e,t){this.eventQueue.push({event:e,params:t}),this.eventQueue.length>=this._options.maxQueueCount&&this.sendEventsQueue()}},{key:"sendEventsQueue",value:function(){for(;this.eventQueue.length>0;){var e=this.eventQueue.pop();this._track(e.event,e.params)}}},{key:"startWaitingStatus",value:function(e,t){this.onOneEvent({costTime:t,end_type:"waitstart"},{},2),this.appendStallInfo("start",e),this.updateCurBuffer("startWaitingStatus")}},{key:"triggerTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",t=arguments.length>1?arguments[1]:void 0;log("triggerTask>>",e);var n=checkVideoSrcIsEmpty(t=t||this.player.src);!n&&this.vtype.indexOf("MP4")>-1&&this.task&&this.task.trigger(t,e)}},{key:"appendStallInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!this.player.ext){this.exInfo.stall||(this.exInfo.stall=[]);var r=this.exInfo.stall;if("start"===e){r.length>6&&r.splice(0,r.length-6);var i=this.buffers.curBuffer;r.push({start:t,end:-1,endType:"waitstart",cost:0,cur:this.cur_play_pos,buf_s:i.buf_s_pos,buf_e:i.buf_e_pos,buf_i:i.buf_include})}else if("end"===e){var o=r.length-1;if(o<0)return;r[o].end<0&&(r[o].end=t,r[o].endType=n,r[o].cost=t-r[o].start)}log("appendStallInfo",r)}}},{key:"suspendWaitingStatus",value:function(e){var t=nowTime(),n=this.playlogs,r=this.resLogs,i=this.stall,o=this.inWaitingStart;if(!(o<=0||this.isSeeking||n.vt<=0)){if(log("suspendWaitingStatus>>".concat(e,"|costTime:").concat(t-o," isSeeking:").concat(this.isSeeking," vt:").concat(n.vt)),this.appendStallInfo("end",t,e),t-o>MIN_WAITIONG){var a=t-this.inWaitingStart;if(n.bc++,this.checkInBuffer(this.player.currentTime)?(n.de_bu_acu_t+=a,n.dbc++):(n.nbc++,n.n_bu_acu_t+=a),r.bc++,n.bu_acu_t+=a,r.bu_acu_t+=a,i.stall_end=t,i.stall_last_interval=i.stall_end-i.stall_start,i.stall_acc_time+=i.stall_last_interval,1===i.sc&&(i.first_buf_endt=t),this.player.abrInstance&&!this.isSeeking&&this.playlogs.vt){var s=this.player.abrInstance;this.abrInfo.abr_event_info.video_stall.push({local_time_ms:(new Date).getTime(),stall_duration:parseFloat((a/1e3).toFixed(2)),buffer_length:s.bufferLength,internet_speed:s.downloadSpeed,now_bitrate:s.nowBitrate,play_speed:this.player.playbackRate,is_abr:s.isCurrentInAbr?1:0})}this.onOneEvent({costTime:a,end_type:e||"wait"},{},2)}this._endType="",this.load_state=LOAD_STATES.PLAYABLE,this.inWaitingStart=0,window.clearTimeout(i.intervalId),i.intervalId=null}}},{key:"suspendSeekStatus",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isSeeking){var n=this.seekLog,r=this.resLogs,i=this.player,o=nowTime()-n.lastSeekStartTime;log("suspendSeekStatus>>","".concat(e," currentTime:").concat(i.currentTime," costTime:").concat(o," sat:").concat(n.sat," resLogs.sat:").concat(r.sat)),n.intervalId&&window.clearTimeout(n.intervalId),n.intervalId=null,this.isSeeking=!1;var a=this._endType="seek",s=n.seekBefore,c=(i.currentTime||0).toString();n.sc++,n.sat+=o>MAX_COST?0:o,r.sc++,r.sat+=o>MAX_COST?0:o,this.updateSeekPt(!0),!this.closeSeekLog&&t&&this.onOneOperator({costTime:o,operaType:a,stateBefore:s,stateAfter:c,endType:e})}}},{key:"setPt",value:function(){var e=this.playlogs;this.startStep=1,!e.pt&&this.player.currentTime&&(this.isSeeking=!0),e.pt||(e.pt=curTimestamp(),log("setPt","init pt :".concat(e.pt,", document.visibilityState:").concat(document.visibilityState)))}},{key:"setVt",value:function(){var e=this.playlogs;1===this.startStep&&(e.vt||(e.vt=curTimestamp(),log("setVt: first frame inited","vt-pt:".concat(e.vt-e.pt," vt-nt:").concat(e.vt-e.nt))),this.startStep=2)}},{key:"setBr",value:function(e){var t=this.playlogs;t.vt>0&&(0===t.br&&(t.fbrt=e||""),t.br++)}},{key:"codecType",get:function(){var e=this.player;return e&&e.config&&e.config.codecType?e.config.codecType:this._options.codec_type||"h264"}},{key:"url",get:function(){var e=this.player;return e&&e.config?e.config.url:""}},{key:"vid",get:function(){var e=this.player;return e&&e.config?e.config.vid:""}},{key:"bc",get:function(){return this.playlogs.bc}},{key:"bu_acu_t",get:function(){return this.playlogs.bu_acu_t}},{key:"pt",get:function(){return this.playlogs.pt||curTimestamp()}},{key:"vt",get:function(){var e=this.playlogs,t=e.vt;return e.pt>0?t:0}},{key:"fvt",get:function(){var e=this.playlogs,t=e.vt,n=e.pt;return t>0&&n>0?parseInt(t-n,10):0}},{key:"nvt",get:function(){var e=this.playlogs,t=e.vt,n=e.nt;return t>0&&n>0?parseInt(t-n,10):0}},{key:"dash_pst",get:function(){return this.playlogs.dash_pst}},{key:"dash_wst",get:function(){return this.playlogs.dash_wst}},{key:"dash_wrt",get:function(){return this.playlogs.dash_wrt}},{key:"dash_ift",get:function(){return this.playlogs.dash_ift}},{key:"dash_cst",get:function(){return this.playlogs.dash_cst}},{key:"dash_spt",get:function(){return this.playlogs.dash_spt}},{key:"vd",get:function(){var e=this.player;return e.duration&&"number"==typeof e.duration&&e.duration>0?parseInt(1e3*e.duration,10):e.config.duration&&"number"==typeof e.config.duration?parseInt(1e3*e.config.duration,10):0}},{key:"cur_play_pos",get:function(){return parseInt(1e3*this.player.currentTime,10)}},{key:"volume",get:function(){return this.player.volume}},{key:"buffer_time",get:function(){var e=0;try{var t=this.player.getBufferedRange();e=t[1]-t[0]}catch(e2){e=0}return e}},{key:"player_created_t",get:function(){return this._playerCreatedTime}},{key:"playbackRate",get:function(){return this.player.playbackRate}},{key:"mute",get:function(){return this.player.muted?0:1}},{key:"videoWidth",get:function(){var e=this.player;return e&&e.video?e.video.videoWidth:0}},{key:"videoHeight",get:function(){var e=this.player;return e&&e.video?e.video.videoHeight:0}},{key:"preload",get:function(){var e=this.player;return!(!e||!e.video)&&e.video.preload}},{key:"initial_url",get:function(){var e=this.player.currentSrc;return e.indexOf("blob:")>-1&&this.urlLog.initial_url?this.urlLog.initial_url:checkVideoSrcIsEmpty(e)?"":e}},{key:"initial_host",get:function(){var e=this.player.currentSrc;return e.indexOf("blob:")>-1&&this.urlLog.initial_host?this.urlLog.initial_host:getHostFromUrl(checkVideoSrcIsEmpty(e)?"":e)}},{key:"curHeaders",get:function(){var e=this.player,t=this.task;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?transformHeader(e.__dash__.curReqVideoSegInfo.headers||{}):t?t.headers:{}}},{key:"curStatus",get:function(){var e=this.task,t=this.vtype,n=this.netLog;return t.indexOf("MP4")>-1?e?e.status:0:n.status}},{key:"play_type",get:function(){return 0}},{key:"resolution",get:function(){var e=this.player.curDefinition;return e?e.definition+"":this.resLogs.df}},{key:"sessionId",get:function(){return this._sessionId}},{key:"finish",get:function(){return this.isEnded?1:0}},{key:"end_type",get:function(){return this._endType}},{key:"avgSpeed",get:function(){return this.player&&this.player.avgSpeed?this.player.avgSpeed:0}},{key:"realSpeed",get:function(){return this.player&&this.player.realTimeSpeed?this.player.realTimeSpeed:0}},{key:"mp4MseOpLength",get:function(){if(!this.player||!this.player.plugins)return-1;var e=this.player.plugins.mp4encryptplayer;return e?e.opQueueLen||0:-1}},{key:"mp4LoadSegmentTimeRange",get:function(){if(!this.player||!this.player.plugins)return"";var e=this.player.plugins.mp4encryptplayer;return e?e.loadSegmentTimeRange.join(","):""}},{key:"preLoadData",get:function(){if(!this.player||!this.player.plugins)return[];var e=this.player.plugins.mp4encryptplayer;if(e&&e.preLoadData)return{hit:1,duration:e.preLoadData.duration,length:e.preLoadData.byteLength};var t=this.player.stat||{};if(t.preLoadData){var n=t.preLoadData.length;return{hit:n>0,length:n}}return{hit:0,duration:0,length:0}}},{key:"preloadState",get:function(){if(!this.player||!this.player.plugins)return 0;if(void 0!==this.player.preloadState)return this.player.preloadState||0;var e=this.player.plugins.mp4encryptplayer;return e&&e.preloadState?e.preloadState:0}},{key:"curBitrate",get:function(){var e=this.player,t=e.config,n=e.curDefinition;return n&&n.bitrate?n.bitrate:t.defaultBitrate?t.defaultBitrate:0}},{key:"videoReadyState",get:function(){var e=this.player;return e&&e.video?e.video.readyState:-1}},{key:"videoSeeking",get:function(){var e=this.player;return e&&e.video&&e.video.seeking?1:0}},{key:"videoPaused",get:function(){var e=this.player;return e&&e.video&&e.video.paused?1:0}},{key:"switchResolutionCount",get:function(){return this.resLogs.switch_count}},{key:"isError",get:function(){return this.player._isError||this.player.video.error}},{key:"isPlaying",get:function(){return hasClass(this.player.root,"xgplayer-playing")}},{key:"isStop",get:function(){return hasClass(this.player.root,"xgplayer-ended")||hasClass(this.player.root,"xgplayer-nostart")}},{key:"isPause",get:function(){return hasClass(this.player.root,"xgplayer-pause")}},{key:"isLoading",get:function(){return hasClass(this.player.root,"xgplayer-isloading")}},{key:"es",get:function(){return this.isPlaying?"playing":"beforePlay"}},{key:"lt",get:function(){var e=0;return 0===this.vt&&(log("lt init",this.playlogs.lt),e=curTimestamp()),e}},{key:"lpt",get:function(){return this.lt?this.lt-this.pt:0}},{key:"playback_state",get:function(){return this.isError?PLAYBACK_STATE.ERROR:this.isStop?PLAYBACK_STATE.STOP:this.isPause?PLAYBACK_STATE.PAUSE:this.isLoading?PLAYBACK_STATE.LOADING:PLAYBACK_STATE.PLAYING}},{key:"is_start_play_automatically",get:function(){return this.isAutoplay+""}},{key:"watchDur",get:function(){var e=this.player,t=this.playlogs,n=e.cumulateTime?e.cumulateTime:computeWatchDur(t.played);return n>=0?n:0}},{key:"vtype",get:function(){return this.__vtype?this.__vtype:(this.player?this.player.vtype||this.player.config.vtype:"")||(this.player.dash?"DASH":this._options.vtype||"MP4")},set:function(e){this.__vtype=e}},{key:"getPlayerExt",value:function(){var e=this.player.ext;if(e)return e}},{key:"watingCost",get:function(){if(this.inWaitingStart>0){var e=nowTime()-this.inWaitingStart;return e>MAX_COST?0:e}return 0}},{key:"videoNetworkState",get:function(){var e=this.player;return e&&e.video?e.video.networkState:-1}},{key:"eagleid",get:function(){var e=this.player;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?(e.__dash__.curReqVideoSegInfo.headers||{}).eagleid:""}},{key:"initial_type",get:function(){var e=this.player.config||{};return e&&e.vodLogOpts&&void 0!==e.vodLogOpts.currentDashType?parseInt(e.vodLogOpts.currentDashType,10):-1}},{key:"dynamicType",get:function(){var e=this.player;return this.__dt?this.__dt:e&&e.__dash__&&e.__dash__.dash&&e.__dash__.dash.mpd?(this.__dt=e.__dash__.dash.mpd.dashType,this.__dt):""}},{key:"updateCurBuffer",value:function(e){var t=this.player,n=t.buffered,r=t.currentTime,i={buf_s_pos:0,buf_e_pos:0,buf_include:0,buf_diff:0},o=[];if(!n||n.length<1)return i;for(var a=-1,s=-1,c=parseInt(1e3*r,10),l=n.length-1;l>-1;l--){var u=parseInt(1e3*n.start(l),10),d=parseInt(1e3*n.end(l),10);o.push({start:u,end:d}),c>u&&c<d?(i.buf_include=1,i.buf_s_pos=u,i.buf_e_pos=d,i.buf_diff=d-c):c<u&&(a<0||u-c<a)?(a=u-c,s=l):c>d&&(a<0||c-d<a)&&(a=c-d,s=l)}1!==i.buf_include&&(s<0&&(s=n.length-1),i.buf_s_pos=parseInt(1e3*n.start(s),10),i.buf_e_pos=parseInt(1e3*n.end(s),10)),this.buffers.allBuffer=o,this.buffers.curBuffer=i}},{key:"checkInBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.player.buffered;if(!n)return!1;e=parseInt(1e3*e,10);for(var r=0;r<n.length;r++){var i=parseInt(1e3*n.start(r),10)+t,o=parseInt(1e3*n.end(r),10)+t;if(e>i&&e<o)return!0}return!1}},{key:"updateVideoSize",value:function(){var e=this._options,t=this.player,n=this.resLogs,r=0,i=0;if(t.__dash__&&t.__dash__.dash&&t.__dash__.dash.mpd.mediaList){var o=t.__dash__.dash.mpd.mediaList.video,a=o[o.selectedIdx];log("updateVideoSize\u300b\u300bvideoItem",a),i=a?a.bitrate||a.bandwidth:0,r=a?a.size:0}else{var s=this.player.curDefinition;s?(i=s.bitrate||t.config.bitrate||0,r=parseInt(s.bitrate*t.duration/8,10)):(r=e.videoSize||t.config.videoSize||0,i=e.bitrate||t.config.bitrate||0)}log("updateVideoSize","bitrate:".concat(i,", vs:").concat(r)),r&&(n.vs=r,n.vis=parseInt(r/t.duration,10),n.bitrate=i||n.vis)}},{key:"updateVds",value:function(){var e=this.resLogs,t=this.playlogs,n=this.player;if(0!==e.vis){for(var r=parseInt(computeWatchDur(t.played)/1e3,10),i=n.buffered,o=0,a=0;a<i.length;a++)o+=parseInt(i.end(a)-i.start(a),10);log("updateVds","pdur:".concat(r," bdur:").concat(o," \n         lbuf:").concat(e.lbuf," lplayed:").concat(e.lplayed," bitrate: ").concat(e.bitrate," vis:").concat(e.vis," vs:").concat(e.vs)),e.vps+=parseInt((r-e.lplayed)*e.vis,10),e.vds+=parseInt((o-e.lbuf)*e.vis,10),e.lplayed=r,e.lbuf=o}else log("updateVds","vis:".concat(e.vis))}}],[{key:"TEA_ID",get:function(){return TEA_ID},set:function(e){LS_KEY="__tea_cache_tokens_".concat(TEA_ID=e)}},{key:"AB_SDK_VERSION",get:function(){return AB_SDK_VERSION},set:function(e){AB_SDK_VERSION="Array"===typeOf(e)?e.join(","):e}},{key:"Collector",set:function(e){Collector=e}},{key:"defaultConfig",value:function(){return{line_app_id:"",line_user_id:"",isTask:!1,codec_type:"",playerCoreVersion:"",playerVersion:"",start_time:0,maxQueueCount:5,channel:"cn",channelDomain:"",absdkVersion:"",checkByInnerLog:!0,drm_type:0,vtype:"MP4",tag:"\u666e\u901a\u89c6\u9891",subtag:"",dynamic_type:"",sendLocalCallback:function(e,t){},disableLocalCache:!1,closeResolutionLog:!1,closeSeekLog:!1,needXhrCheck:!1}}}]),e}();XGPlayerAppLogger.TEA_ID=323254,XGPlayerAppLogger.Collector=Collector$1$1;var xgVodLogger=function(e){if(e&&e.player){var t=e.player.config.vodLogOpts||{};e.player.vodLogger=new XGPlayerAppLogger(e.player,t),e.player.plugins.xgVodLogger=e.player.vodLogger}else this.vodLogger=new XGPlayerAppLogger(this,this.config.vodLogOpts||{})};return xgVodLogger.pluginName="__xgVodLogger",xgVodLogger.playerConfig={},xgVodLogger.Collector=Collector$1$1,xgVodLogger.setABSdkVersion=function(e){XGPlayerAppLogger.AB_SDK_VERSION=e},xgVodLogger},module.exports=t(es_array_concat,es_array_map,es_object_keys,esnext_string_at,es_object_toString,es_regexp_toString,web_domCollections_forEach,es_number_constructor,es_function_name,es_array_join,es_promise,es_promise_finally,es_array_splice,es_number_toFixed,es_regexp_exec,es_string_replace,es_string_split,es_string_trim,es_array_filter,es_string_match,es_regexp_constructor,es_symbol,es_symbol_description)}(index_tcpy);var xgVodLoggerTea=index_tcpy.exports,_ERR_CODE;function ownKeys$2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2$2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(n),!0).forEach((function(t){_defineProperty$3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _regeneratorRuntime$1(){_regeneratorRuntime$1=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch($){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new O(i||[]);return r(a,"_invoke",{value:E(e,n,s)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch($){return{type:"throw",arg:$}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var g={};c(g,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(k([])));v&&v!==t&&n.call(v,o)&&(g=v);var m=p.prototype=h.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,a,s){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==_typeof$4(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,r(m,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},_(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(m),c(m,s,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function asyncGeneratorStep$2(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(error){return void n(error)}s.done?t(c):Promise.resolve(c).then(r,i)}function _asyncToGenerator$2(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){asyncGeneratorStep$2(o,r,i,a,s,"next",e)}function s(e){asyncGeneratorStep$2(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey$1(r.key),r)}}function _createClass$3(e,t,n){return t&&_defineProperties$3(e.prototype,t),n&&_defineProperties$3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$3(e,t,n){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$2(e,t)}function _getPrototypeOf$2(e){return(_getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf$2(e,t){return(_setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _assertThisInitialized$2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn$2(e,t){if(t&&("object"===_typeof$4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(e)}function _createSuper$2(e){var t=_isNativeReflectConstruct$2();return function(){var n,r=_getPrototypeOf$2(e);if(t){var i=_getPrototypeOf$2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn$2(this,n)}}function _toPrimitive$1(e,t){if("object"!==_typeof$4(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof$4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return"symbol"===_typeof$4(t)?t:String(t)}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2$1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach((function(t){_defineProperty$2(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch($){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new O(i||[]);return r(a,"_invoke",{value:E(e,n,s)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch($){return{type:"throw",arg:$}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var g={};c(g,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(k([])));v&&v!==t&&n.call(v,o)&&(g=v);var m=p.prototype=h.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,a,s){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==_typeof$4(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,r(m,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},_(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(m),c(m,s,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep$1(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(error){return void n(error)}s.done?t(c):Promise.resolve(c).then(r,i)}function _asyncToGenerator$1(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){asyncGeneratorStep$1(o,r,i,a,s,"next",e)}function s(e){asyncGeneratorStep$1(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),n&&_defineProperties$2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$2(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$1(e,t)}function _getPrototypeOf$1(e){return(_getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf$1(e,t){return(_setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct$1()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf$1(i,n.prototype),i}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf$1(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(n,e)})(e)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn$1(e,t){if(t&&("object"===_typeof$4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(e)}function _createSuper$1(e){var t=_isNativeReflectConstruct$1();return function(){var n,r=_getPrototypeOf$1(e);if(t){var i=_getPrototypeOf$1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn$1(this,n)}}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf$1(e)););return e}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _toPrimitive(e,t){if("object"!==_typeof$4(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof$4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof$4(t)?t:String(t)}function createPublicPromise(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.used=!1,n.resolve=function(){return n.used=!0,e.apply(void 0,arguments)},n.reject=function(){return n.used=!0,t.apply(void 0,arguments)},n}var ERR={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",SUB_TYPES:{FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",OPTION:"OPTION"}},ERR_CODE=(_ERR_CODE={},_defineProperty$2(_ERR_CODE,ERR.MANIFEST,{HLS:1100}),_defineProperty$2(_ERR_CODE,ERR.NETWORK,2100),_defineProperty$2(_ERR_CODE,ERR.NETWORK_TIMEOUT,2101),_defineProperty$2(_ERR_CODE,ERR.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400}),_defineProperty$2(_ERR_CODE,ERR.REMUX,{FMP4:4100,MP4:4200}),_defineProperty$2(_ERR_CODE,ERR.MEDIA,{MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203}),_defineProperty$2(_ERR_CODE,ERR.OTHER,8e3),_ERR_CODE),StreamingError=function(e){_inherits$1(n,e);var t=_createSuper$1(n);function n(e,r,i,o,a){var s;return _classCallCheck$1(this,n),(s=t.call(this,a||(null==i?void 0:i.message))).errorType=e===ERR.NETWORK_TIMEOUT?ERR.NETWORK:e,s.originError=i,s.ext=o,s.errorCode=ERR_CODE[e][r]||ERR_CODE[e],s.errorMessage=s.message,s.errorCode||(s.errorType=ERR.OTHER,s.errorCode=ERR_CODE[s.errorType]),s}return _createClass$2(n,null,[{key:"create",value:function(e,t,r,i,o){return e instanceof n?e:(e instanceof Error&&(r=e,e=""),e||(e=ERR.OTHER),new n(e,t,r,i,o))}},{key:"network",value:function(e){var t;return new n(null!=e&&e.isTimeout?ERR.NETWORK_TIMEOUT:ERR.NETWORK,null,e instanceof Error?e:null,{url:null==e?void 0:e.url,response:null==e?void 0:e.response,httpCode:null==e||null===(t=e.response)||void 0===t?void 0:t.status})}}]),n}(_wrapNativeSuper(Error)),LogCacheLevel={DEBUG:1,LOG:2,WARN:3,ERROR:4},LOG_MAX_SIZE=204800,SIMPLE_TYPE=["Boolean","Number","String","Undefined","Null","Date","Object"],Logger$1=function(){function e(t,n){_classCallCheck$1(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),e.disabled=(null==n?void 0:n.disabled)||!0,this.logCacheLevel=(null==n?void 0:n.logCacheLevel)||3,this.logMaxSize=(null==n?void 0:n.logMaxSize)||LOG_MAX_SIZE,this.logSize=0,this.logTextArray=[]}return _createClass$2(e,[{key:"debug",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[LogCacheLevel.DEBUG].concat(r)),e.disabled||(t=console).debug.apply(t,[this._prefix,nowTime()].concat(r))}},{key:"log",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[LogCacheLevel.LOG].concat(r)),e.disabled||(t=console).log.apply(t,[this._prefix,nowTime()].concat(r))}},{key:"warn",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[LogCacheLevel.WARN].concat(r)),e.disabled||(t=console).warn.apply(t,[this._prefix,nowTime()].concat(r))}},{key:"error",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[LogCacheLevel.ERROR].concat(r)),e.disabled||(t=console).error.apply(t,[this._prefix,nowTime()].concat(r))}},{key:"logCache",value:function(e){if(!(e<this.logCacheLevel)){var t="";try{for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=r.map((function(e){return logable(e)}));t=this._prefix+nowTime()+JSON.stringify(o)}catch(s){return}if(e>=this.logCacheLevel&&(this.logSize+=t.length,this.logTextArray.push(t)),this.logSize>this.logMaxSize){var a=this.logTextArray.shift();this.logSize-=a.length}}}},{key:"getLogCache",value:function(){var e=this.logTextArray.join("\n");return this.reset(),e}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(e){this.logCacheLevel=e}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();function nowTime(){return(new Date).toLocaleString()}function reduceDepth(e){if("object"!==_typeof$1(e))return e;var t=Object.prototype.toString.call(e).slice(8,-1);switch(t){case"Array":case"Uint8Array":case"ArrayBuffer":return t+"["+e.length+"]";case"Object":return"{}";default:return t}}function logable(e,t,n){n||(n=1),t||(t=2);var r={};if(!e||"object"!==_typeof$1(e))return e;var i=Object.prototype.toString.call(e).slice(8,-1);if(!SIMPLE_TYPE.includes(i))return i;if(!(n>t)){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n===t?r[o]=reduceDepth(e[o]):"object"===_typeof$1(e[o])?r[o]=logable(e[o],t,n+1):r[o]=e[o]);return r}}_defineProperty$2(Logger$1,"disabled",!0);var typedArrayConstructor={exports:{}},arrayBufferBasicDetection="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,NATIVE_ARRAY_BUFFER$1=arrayBufferBasicDetection,DESCRIPTORS$3=descriptors,global$d=global$H,isCallable$1=isCallable$u,isObject$6=isObject$n,hasOwn$2=hasOwnProperty_1,classof$3=classof$e,tryToString=tryToString$7,createNonEnumerableProperty$2=createNonEnumerableProperty$a,defineBuiltIn$1=defineBuiltIn$i,defineProperty$1=objectDefineProperty.f,isPrototypeOf$1=objectIsPrototypeOf,getPrototypeOf$1=objectGetPrototypeOf,setPrototypeOf$2=objectSetPrototypeOf,wellKnownSymbol$1=wellKnownSymbol$u,uid=uid$4,InternalStateModule$2=internalState,enforceInternalState$1=InternalStateModule$2.enforce,getInternalState$2=InternalStateModule$2.get,Int8Array$4=global$d.Int8Array,Int8ArrayPrototype$1=Int8Array$4&&Int8Array$4.prototype,Uint8ClampedArray$1=global$d.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray$1&&Uint8ClampedArray$1.prototype,TypedArray$1=Int8Array$4&&getPrototypeOf$1(Int8Array$4),TypedArrayPrototype$2=Int8ArrayPrototype$1&&getPrototypeOf$1(Int8ArrayPrototype$1),ObjectPrototype$2=Object.prototype,TypeError$1=global$d.TypeError,TO_STRING_TAG=wellKnownSymbol$1("toStringTag"),TYPED_ARRAY_TAG$1=uid("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR="TypedArrayConstructor",NATIVE_ARRAY_BUFFER_VIEWS$2=NATIVE_ARRAY_BUFFER$1&&!!setPrototypeOf$2&&"Opera"!==classof$3(global$d.opera),TYPED_ARRAY_TAG_REQUIRED=!1,NAME,Constructor,Prototype,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=function(e){if(!isObject$6(e))return!1;var t=classof$3(e);return"DataView"===t||hasOwn$2(TypedArrayConstructorsList,t)||hasOwn$2(BigIntArrayConstructorsList,t)},getTypedArrayConstructor$1=function e(t){var n=getPrototypeOf$1(t);if(isObject$6(n)){var r=getInternalState$2(n);return r&&hasOwn$2(r,TYPED_ARRAY_CONSTRUCTOR)?r[TYPED_ARRAY_CONSTRUCTOR]:e(n)}},isTypedArray$1=function(e){if(!isObject$6(e))return!1;var t=classof$3(e);return hasOwn$2(TypedArrayConstructorsList,t)||hasOwn$2(BigIntArrayConstructorsList,t)},aTypedArray$p=function(e){if(isTypedArray$1(e))return e;throw TypeError$1("Target is not a typed array")},aTypedArrayConstructor$3=function(e){if(isCallable$1(e)&&(!setPrototypeOf$2||isPrototypeOf$1(TypedArray$1,e)))return e;throw TypeError$1(tryToString(e)+" is not a typed array constructor")},exportTypedArrayMethod$q=function(e,t,n,r){if(DESCRIPTORS$3){if(n)for(var i in TypedArrayConstructorsList){var o=global$d[i];if(o&&hasOwn$2(o.prototype,e))try{delete o.prototype[e]}catch(error){try{o.prototype[e]=t}catch(a){}}}TypedArrayPrototype$2[e]&&!n||defineBuiltIn$1(TypedArrayPrototype$2,e,n?t:NATIVE_ARRAY_BUFFER_VIEWS$2&&Int8ArrayPrototype$1[e]||t,r)}},exportTypedArrayStaticMethod=function(e,t,n){var r,i;if(DESCRIPTORS$3){if(setPrototypeOf$2){if(n)for(r in TypedArrayConstructorsList)if((i=global$d[r])&&hasOwn$2(i,e))try{delete i[e]}catch(error){}if(TypedArray$1[e]&&!n)return;try{return defineBuiltIn$1(TypedArray$1,e,n?t:NATIVE_ARRAY_BUFFER_VIEWS$2&&TypedArray$1[e]||t)}catch(error){}}for(r in TypedArrayConstructorsList)!(i=global$d[r])||i[e]&&!n||defineBuiltIn$1(i,e,t)}};for(NAME in TypedArrayConstructorsList)Constructor=global$d[NAME],Prototype=Constructor&&Constructor.prototype,Prototype?enforceInternalState$1(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor:NATIVE_ARRAY_BUFFER_VIEWS$2=!1;for(NAME in BigIntArrayConstructorsList)Constructor=global$d[NAME],Prototype=Constructor&&Constructor.prototype,Prototype&&(enforceInternalState$1(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS$2||!isCallable$1(TypedArray$1)||TypedArray$1===Function.prototype)&&(TypedArray$1=function(){throw TypeError$1("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS$2))for(NAME in TypedArrayConstructorsList)global$d[NAME]&&setPrototypeOf$2(global$d[NAME],TypedArray$1);if((!NATIVE_ARRAY_BUFFER_VIEWS$2||!TypedArrayPrototype$2||TypedArrayPrototype$2===ObjectPrototype$2)&&(TypedArrayPrototype$2=TypedArray$1.prototype,NATIVE_ARRAY_BUFFER_VIEWS$2))for(NAME in TypedArrayConstructorsList)global$d[NAME]&&setPrototypeOf$2(global$d[NAME].prototype,TypedArrayPrototype$2);if(NATIVE_ARRAY_BUFFER_VIEWS$2&&getPrototypeOf$1(Uint8ClampedArrayPrototype)!==TypedArrayPrototype$2&&setPrototypeOf$2(Uint8ClampedArrayPrototype,TypedArrayPrototype$2),DESCRIPTORS$3&&!hasOwn$2(TypedArrayPrototype$2,TO_STRING_TAG))for(NAME in TYPED_ARRAY_TAG_REQUIRED=!0,defineProperty$1(TypedArrayPrototype$2,TO_STRING_TAG,{get:function(){return isObject$6(this)?this[TYPED_ARRAY_TAG$1]:void 0}}),TypedArrayConstructorsList)global$d[NAME]&&createNonEnumerableProperty$2(global$d[NAME],TYPED_ARRAY_TAG$1,NAME);var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS$2,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQUIRED&&TYPED_ARRAY_TAG$1,aTypedArray:aTypedArray$p,aTypedArrayConstructor:aTypedArrayConstructor$3,exportTypedArrayMethod:exportTypedArrayMethod$q,exportTypedArrayStaticMethod:exportTypedArrayStaticMethod,getTypedArrayConstructor:getTypedArrayConstructor$1,isView:isView,isTypedArray:isTypedArray$1,TypedArray:TypedArray$1,TypedArrayPrototype:TypedArrayPrototype$2},global$c=global$H,fails$b=fails$L,checkCorrectnessOfIteration=checkCorrectnessOfIteration$2,NATIVE_ARRAY_BUFFER_VIEWS$1=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,ArrayBuffer$2=global$c.ArrayBuffer,Int8Array$3=global$c.Int8Array,typedArrayConstructorsRequireWrappers=!NATIVE_ARRAY_BUFFER_VIEWS$1||!fails$b((function(){Int8Array$3(1)}))||!fails$b((function(){new Int8Array$3(-1)}))||!checkCorrectnessOfIteration((function(e){new Int8Array$3,new Int8Array$3(null),new Int8Array$3(1.5),new Int8Array$3(e)}),!0)||fails$b((function(){return 1!==new Int8Array$3(new ArrayBuffer$2(2),1,void 0).length})),toIntegerOrInfinity$4=toIntegerOrInfinity$d,toLength$3=toLength$8,$RangeError$2=RangeError,toIndex$2=function(e){if(void 0===e)return 0;var t=toIntegerOrInfinity$4(e),n=toLength$3(t);if(t!==n)throw $RangeError$2("Wrong length or index");return n},$Array=Array,abs=Math.abs,pow=Math.pow,floor$2=Math.floor,log=Math.log,LN2=Math.LN2,pack=function(e,t,n){var r,i,o,a=$Array(n),s=8*n-t-1,c=(1<<s)-1,l=c>>1,u=23===t?pow(2,-24)-pow(2,-77):0,d=e<0||0===e&&1/e<0?1:0,h=0;for((e=abs(e))!=e||e===1/0?(i=e!=e?1:0,r=c):(r=floor$2(log(e)/LN2),e*(o=pow(2,-r))<1&&(r--,o*=2),(e+=r+l>=1?u/o:u*pow(2,1-l))*o>=2&&(r++,o/=2),r+l>=c?(i=0,r=c):r+l>=1?(i=(e*o-1)*pow(2,t),r+=l):(i=e*pow(2,l-1)*pow(2,t),r=0));t>=8;)a[h++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[h++]=255&r,r/=256,s-=8;return a[--h]|=128*d,a},unpack=function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,l=e[c--],u=127&l;for(l>>=7;s>0;)u=256*u+e[c--],s-=8;for(n=u&(1<<-s)-1,u>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===u)u=1-a;else{if(u===o)return n?NaN:l?-1/0:1/0;n+=pow(2,t),u-=a}return(l?-1:1)*n*pow(2,u-t)},ieee754={pack:pack,unpack:unpack},toObject$5=toObject$h,toAbsoluteIndex$2=toAbsoluteIndex$7,lengthOfArrayLike$8=lengthOfArrayLike$i,arrayFill$1=function(e){for(var t=toObject$5(this),n=lengthOfArrayLike$8(t),r=arguments.length,i=toAbsoluteIndex$2(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:toAbsoluteIndex$2(o,n);a>i;)t[i++]=e;return t},global$b=global$H,uncurryThis$b=functionUncurryThis,DESCRIPTORS$2=descriptors,NATIVE_ARRAY_BUFFER=arrayBufferBasicDetection,FunctionName=functionName,createNonEnumerableProperty$1=createNonEnumerableProperty$a,defineBuiltIns=defineBuiltIns$2,fails$a=fails$L,anInstance$1=anInstance$5,toIntegerOrInfinity$3=toIntegerOrInfinity$d,toLength$2=toLength$8,toIndex$1=toIndex$2,IEEE754=ieee754,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf$1=objectSetPrototypeOf,getOwnPropertyNames$1=objectGetOwnPropertyNames.f,defineProperty=objectDefineProperty.f,arrayFill=arrayFill$1,arraySlice$4=arraySliceSimple,setToStringTag=setToStringTag$7,InternalStateModule$1=internalState,PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,getInternalState$1=InternalStateModule$1.get,setInternalState$1=InternalStateModule$1.set,ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH$1="Wrong length",WRONG_INDEX="Wrong index",NativeArrayBuffer=global$b[ARRAY_BUFFER],$ArrayBuffer=NativeArrayBuffer,ArrayBufferPrototype$1=$ArrayBuffer&&$ArrayBuffer[PROTOTYPE],$DataView=global$b[DATA_VIEW],DataViewPrototype=$DataView&&$DataView[PROTOTYPE],ObjectPrototype$1=Object.prototype,Array$1=global$b.Array,RangeError$3=global$b.RangeError,fill=uncurryThis$b(arrayFill),reverse=uncurryThis$b([].reverse),packIEEE754=IEEE754.pack,unpackIEEE754=IEEE754.unpack,packInt8=function(e){return[255&e]},packInt16=function(e){return[255&e,e>>8&255]},packInt32=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},unpackInt32=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},packFloat32=function(e){return packIEEE754(e,23,4)},packFloat64=function(e){return packIEEE754(e,52,8)},addGetter$1=function(e,t){defineProperty(e[PROTOTYPE],t,{get:function(){return getInternalState$1(this)[t]}})},get=function(e,t,n,r){var i=toIndex$1(n),o=getInternalState$1(e);if(i+t>o.byteLength)throw RangeError$3(WRONG_INDEX);var a=getInternalState$1(o.buffer).bytes,s=i+o.byteOffset,c=arraySlice$4(a,s,s+t);return r?c:reverse(c)},set=function(e,t,n,r,i,o){var a=toIndex$1(n),s=getInternalState$1(e);if(a+t>s.byteLength)throw RangeError$3(WRONG_INDEX);for(var c=getInternalState$1(s.buffer).bytes,l=a+s.byteOffset,u=r(+i),d=0;d<t;d++)c[l+d]=u[o?d:t-d-1]};if(NATIVE_ARRAY_BUFFER){var INCORRECT_ARRAY_BUFFER_NAME=PROPER_FUNCTION_NAME&&NativeArrayBuffer.name!==ARRAY_BUFFER;if(fails$a((function(){NativeArrayBuffer(1)}))&&fails$a((function(){new NativeArrayBuffer(-1)}))&&!fails$a((function(){return new NativeArrayBuffer,new NativeArrayBuffer(1.5),new NativeArrayBuffer(NaN),1!=NativeArrayBuffer.length||INCORRECT_ARRAY_BUFFER_NAME&&!CONFIGURABLE_FUNCTION_NAME})))INCORRECT_ARRAY_BUFFER_NAME&&CONFIGURABLE_FUNCTION_NAME&&createNonEnumerableProperty$1(NativeArrayBuffer,"name",ARRAY_BUFFER);else{$ArrayBuffer=function(e){return anInstance$1(this,ArrayBufferPrototype$1),new NativeArrayBuffer(toIndex$1(e))},$ArrayBuffer[PROTOTYPE]=ArrayBufferPrototype$1;for(var keys=getOwnPropertyNames$1(NativeArrayBuffer),j=0,key;keys.length>j;)(key=keys[j++])in $ArrayBuffer||createNonEnumerableProperty$1($ArrayBuffer,key,NativeArrayBuffer[key]);ArrayBufferPrototype$1.constructor=$ArrayBuffer}setPrototypeOf$1&&getPrototypeOf(DataViewPrototype)!==ObjectPrototype$1&&setPrototypeOf$1(DataViewPrototype,ObjectPrototype$1);var testView=new $DataView(new $ArrayBuffer(2)),$setInt8=uncurryThis$b(DataViewPrototype.setInt8);testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),!testView.getInt8(0)&&testView.getInt8(1)||defineBuiltIns(DataViewPrototype,{setInt8:function(e,t){$setInt8(this,e,t<<24>>24)},setUint8:function(e,t){$setInt8(this,e,t<<24>>24)}},{unsafe:!0})}else $ArrayBuffer=function(e){anInstance$1(this,ArrayBufferPrototype$1);var t=toIndex$1(e);setInternalState$1(this,{bytes:fill(Array$1(t),0),byteLength:t}),DESCRIPTORS$2||(this.byteLength=t)},ArrayBufferPrototype$1=$ArrayBuffer[PROTOTYPE],$DataView=function(e,t,n){anInstance$1(this,DataViewPrototype),anInstance$1(e,ArrayBufferPrototype$1);var r=getInternalState$1(e).byteLength,i=toIntegerOrInfinity$3(t);if(i<0||i>r)throw RangeError$3("Wrong offset");if(i+(n=void 0===n?r-i:toLength$2(n))>r)throw RangeError$3(WRONG_LENGTH$1);setInternalState$1(this,{buffer:e,byteLength:n,byteOffset:i}),DESCRIPTORS$2||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},DataViewPrototype=$DataView[PROTOTYPE],DESCRIPTORS$2&&(addGetter$1($ArrayBuffer,"byteLength"),addGetter$1($DataView,"buffer"),addGetter$1($DataView,"byteLength"),addGetter$1($DataView,"byteOffset")),defineBuiltIns(DataViewPrototype,{getInt8:function(e){return get(this,1,e)[0]<<24>>24},getUint8:function(e){return get(this,1,e)[0]},getInt16:function(e){var t=get(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=get(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return unpackInt32(get(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return unpackInt32(get(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return unpackIEEE754(get(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return unpackIEEE754(get(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){set(this,1,e,packInt8,t)},setUint8:function(e,t){set(this,1,e,packInt8,t)},setInt16:function(e,t){set(this,2,e,packInt16,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){set(this,2,e,packInt16,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){set(this,4,e,packInt32,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){set(this,4,e,packInt32,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){set(this,4,e,packFloat32,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){set(this,8,e,packFloat64,t,arguments.length>2?arguments[2]:void 0)}});setToStringTag($ArrayBuffer,ARRAY_BUFFER),setToStringTag($DataView,DATA_VIEW);var arrayBuffer={ArrayBuffer:$ArrayBuffer,DataView:$DataView},isObject$5=isObject$n,floor$1=Math.floor,isIntegralNumber$1=Number.isInteger||function(e){return!isObject$5(e)&&isFinite(e)&&floor$1(e)===e},toIntegerOrInfinity$2=toIntegerOrInfinity$d,$RangeError$1=RangeError,toPositiveInteger$1=function(e){var t=toIntegerOrInfinity$2(e);if(t<0)throw $RangeError$1("The argument can't be less than 0");return t},toPositiveInteger=toPositiveInteger$1,$RangeError=RangeError,toOffset$2=function(e,t){var n=toPositiveInteger(e);if(n%t)throw $RangeError("Wrong offset");return n},classof$2=classof$e,uncurryThis$a=functionUncurryThis,slice$1=uncurryThis$a("".slice),isBigIntArray$1=function(e){return"Big"===slice$1(classof$2(e),0,3)},toPrimitive=toPrimitive$3,$TypeError$1=TypeError,toBigInt$2=function(e){var t=toPrimitive(e,"number");if("number"==typeof t)throw $TypeError$1("Can't convert number to bigint");return BigInt(t)},bind$3=functionBindContext,call$3=functionCall,aConstructor$1=aConstructor$3,toObject$4=toObject$h,lengthOfArrayLike$7=lengthOfArrayLike$i,getIterator=getIterator$4,getIteratorMethod=getIteratorMethod$5,isArrayIteratorMethod=isArrayIteratorMethod$3,isBigIntArray=isBigIntArray$1,aTypedArrayConstructor$2=arrayBufferViewCore.aTypedArrayConstructor,toBigInt$1=toBigInt$2,typedArrayFrom$1=function(e){var t,n,r,i,o,a,s,c,l=aConstructor$1(this),u=toObject$4(e),d=arguments.length,h=d>1?arguments[1]:void 0,f=void 0!==h,p=getIteratorMethod(u);if(p&&!isArrayIteratorMethod(p))for(c=(s=getIterator(u,p)).next,u=[];!(a=call$3(c,s)).done;)u.push(a.value);for(f&&d>2&&(h=bind$3(h,arguments[2])),n=lengthOfArrayLike$7(u),r=new(aTypedArrayConstructor$2(l))(n),i=isBigIntArray(r),t=0;n>t;t++)o=f?h(u[t],t):u[t],r[t]=i?toBigInt$1(o):+o;return r},$$7=_export,global$a=global$H,call$2=functionCall,DESCRIPTORS$1=descriptors,TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS=typedArrayConstructorsRequireWrappers,ArrayBufferViewCore$q=arrayBufferViewCore,ArrayBufferModule=arrayBuffer,anInstance=anInstance$5,createPropertyDescriptor=createPropertyDescriptor$7,createNonEnumerableProperty=createNonEnumerableProperty$a,isIntegralNumber=isIntegralNumber$1,toLength$1=toLength$8,toIndex=toIndex$2,toOffset$1=toOffset$2,toPropertyKey=toPropertyKey$5,hasOwn$1=hasOwnProperty_1,classof$1=classof$e,isObject$4=isObject$n,isSymbol=isSymbol$6,create$1=objectCreate,isPrototypeOf=objectIsPrototypeOf,setPrototypeOf=objectSetPrototypeOf,getOwnPropertyNames=objectGetOwnPropertyNames.f,typedArrayFrom=typedArrayFrom$1,forEach=arrayIteration.forEach,setSpecies=setSpecies$3,definePropertyModule=objectDefineProperty,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,InternalStateModule=internalState,inheritIfRequired=inheritIfRequired$3,getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,enforceInternalState=InternalStateModule.enforce,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,round=Math.round,RangeError$2=global$a.RangeError,ArrayBuffer$1=ArrayBufferModule.ArrayBuffer,ArrayBufferPrototype=ArrayBuffer$1.prototype,DataView$1=ArrayBufferModule.DataView,NATIVE_ARRAY_BUFFER_VIEWS=ArrayBufferViewCore$q.NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG=ArrayBufferViewCore$q.TYPED_ARRAY_TAG,TypedArray=ArrayBufferViewCore$q.TypedArray,TypedArrayPrototype$1=ArrayBufferViewCore$q.TypedArrayPrototype,aTypedArrayConstructor$1=ArrayBufferViewCore$q.aTypedArrayConstructor,isTypedArray=ArrayBufferViewCore$q.isTypedArray,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",WRONG_LENGTH="Wrong length",fromList=function(e,t){aTypedArrayConstructor$1(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},addGetter=function(e,t){nativeDefineProperty(e,t,{get:function(){return getInternalState(this)[t]}})},isArrayBuffer=function(e){var t;return isPrototypeOf(ArrayBufferPrototype,e)||"ArrayBuffer"==(t=classof$1(e))||"SharedArrayBuffer"==t},isTypedArrayIndex=function(e,t){return isTypedArray(e)&&!isSymbol(t)&&t in e&&isIntegralNumber(+t)&&t>=0},wrappedGetOwnPropertyDescriptor=function(e,t){return t=toPropertyKey(t),isTypedArrayIndex(e,t)?createPropertyDescriptor(2,e[t]):nativeGetOwnPropertyDescriptor(e,t)},wrappedDefineProperty=function(e,t,n){return t=toPropertyKey(t),!(isTypedArrayIndex(e,t)&&isObject$4(n)&&hasOwn$1(n,"value"))||hasOwn$1(n,"get")||hasOwn$1(n,"set")||n.configurable||hasOwn$1(n,"writable")&&!n.writable||hasOwn$1(n,"enumerable")&&!n.enumerable?nativeDefineProperty(e,t,n):(e[t]=n.value,e)};DESCRIPTORS$1?(NATIVE_ARRAY_BUFFER_VIEWS||(getOwnPropertyDescriptorModule.f=wrappedGetOwnPropertyDescriptor,definePropertyModule.f=wrappedDefineProperty,addGetter(TypedArrayPrototype$1,"buffer"),addGetter(TypedArrayPrototype$1,"byteOffset"),addGetter(TypedArrayPrototype$1,"byteLength"),addGetter(TypedArrayPrototype$1,"length")),$$7({target:"Object",stat:!0,forced:!NATIVE_ARRAY_BUFFER_VIEWS},{getOwnPropertyDescriptor:wrappedGetOwnPropertyDescriptor,defineProperty:wrappedDefineProperty}),typedArrayConstructor.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=global$a[i],c=s,l=c&&c.prototype,u={},d=function(e,t){nativeDefineProperty(e,t,{get:function(){return function(e,t){var n=getInternalState(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=getInternalState(e);n&&(i=(i=round(i))<0?0:i>255?255:255&i),o.view[a](t*r+o.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};NATIVE_ARRAY_BUFFER_VIEWS?TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS&&(c=t((function(e,t,n,i){return anInstance(e,l),inheritIfRequired(isObject$4(t)?isArrayBuffer(t)?void 0!==i?new s(t,toOffset$1(n,r),i):void 0!==n?new s(t,toOffset$1(n,r)):new s(t):isTypedArray(t)?fromList(c,t):call$2(typedArrayFrom,c,t):new s(toIndex(t)),e,c)})),setPrototypeOf&&setPrototypeOf(c,TypedArray),forEach(getOwnPropertyNames(s),(function(e){e in c||createNonEnumerableProperty(c,e,s[e])})),c.prototype=l):(c=t((function(e,t,n,i){anInstance(e,l);var o,a,s,u=0,h=0;if(isObject$4(t)){if(!isArrayBuffer(t))return isTypedArray(t)?fromList(c,t):call$2(typedArrayFrom,c,t);o=t,h=toOffset$1(n,r);var f=t.byteLength;if(void 0===i){if(f%r)throw RangeError$2(WRONG_LENGTH);if((a=f-h)<0)throw RangeError$2(WRONG_LENGTH)}else if((a=toLength$1(i)*r)+h>f)throw RangeError$2(WRONG_LENGTH);s=a/r}else s=toIndex(t),o=new ArrayBuffer$1(a=s*r);for(setInternalState(e,{buffer:o,byteOffset:h,byteLength:a,length:s,view:new DataView$1(o)});u<s;)d(e,u++)})),setPrototypeOf&&setPrototypeOf(c,TypedArray),l=c.prototype=create$1(TypedArrayPrototype$1)),l.constructor!==c&&createNonEnumerableProperty(l,"constructor",c),enforceInternalState(l).TypedArrayConstructor=c,TYPED_ARRAY_TAG&&createNonEnumerableProperty(l,TYPED_ARRAY_TAG,i);var h=c!=s;u[i]=c,$$7({global:!0,constructor:!0,forced:h,sham:!NATIVE_ARRAY_BUFFER_VIEWS},u),BYTES_PER_ELEMENT in c||createNonEnumerableProperty(c,BYTES_PER_ELEMENT,r),BYTES_PER_ELEMENT in l||createNonEnumerableProperty(l,BYTES_PER_ELEMENT,r),setSpecies(i)}):typedArrayConstructor.exports=function(){};var createTypedArrayConstructor=typedArrayConstructor.exports;createTypedArrayConstructor("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var ArrayBufferViewCore$p=arrayBufferViewCore,lengthOfArrayLike$6=lengthOfArrayLike$i,toIntegerOrInfinity$1=toIntegerOrInfinity$d,aTypedArray$o=ArrayBufferViewCore$p.aTypedArray,exportTypedArrayMethod$p=ArrayBufferViewCore$p.exportTypedArrayMethod;exportTypedArrayMethod$p("at",(function(e){var t=aTypedArray$o(this),n=lengthOfArrayLike$6(t),r=toIntegerOrInfinity$1(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:t[i]}));var toObject$3=toObject$h,toAbsoluteIndex$1=toAbsoluteIndex$7,lengthOfArrayLike$5=lengthOfArrayLike$i,deletePropertyOrThrow=deletePropertyOrThrow$3,min$1=Math.min,arrayCopyWithin=[].copyWithin||function(e,t){var n=toObject$3(this),r=lengthOfArrayLike$5(n),i=toAbsoluteIndex$1(e,r),o=toAbsoluteIndex$1(t,r),a=arguments.length>2?arguments[2]:void 0,s=min$1((void 0===a?r:toAbsoluteIndex$1(a,r))-o,r-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:deletePropertyOrThrow(n,i),i+=c,o+=c;return n},uncurryThis$9=functionUncurryThis,ArrayBufferViewCore$o=arrayBufferViewCore,$ArrayCopyWithin=arrayCopyWithin,u$ArrayCopyWithin=uncurryThis$9($ArrayCopyWithin),aTypedArray$n=ArrayBufferViewCore$o.aTypedArray,exportTypedArrayMethod$o=ArrayBufferViewCore$o.exportTypedArrayMethod;exportTypedArrayMethod$o("copyWithin",(function(e,t){return u$ArrayCopyWithin(aTypedArray$n(this),e,t,arguments.length>2?arguments[2]:void 0)}));var ArrayBufferViewCore$n=arrayBufferViewCore,$every=arrayIteration.every,aTypedArray$m=ArrayBufferViewCore$n.aTypedArray,exportTypedArrayMethod$n=ArrayBufferViewCore$n.exportTypedArrayMethod;exportTypedArrayMethod$n("every",(function(e){return $every(aTypedArray$m(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$m=arrayBufferViewCore,$fill=arrayFill$1,toBigInt=toBigInt$2,classof=classof$e,call$1=functionCall,uncurryThis$8=functionUncurryThis,fails$9=fails$L,aTypedArray$l=ArrayBufferViewCore$m.aTypedArray,exportTypedArrayMethod$m=ArrayBufferViewCore$m.exportTypedArrayMethod,slice=uncurryThis$8("".slice),CONVERSION_BUG=fails$9((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}));exportTypedArrayMethod$m("fill",(function(e){var t=arguments.length;aTypedArray$l(this);var n="Big"===slice(classof(this),0,3)?toBigInt(e):+e;return call$1($fill,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),CONVERSION_BUG);var lengthOfArrayLike$4=lengthOfArrayLike$i,arrayFromConstructorAndList$1=function(e,t){for(var n=0,r=lengthOfArrayLike$4(t),i=new e(r);r>n;)i[n]=t[n++];return i},ArrayBufferViewCore$l=arrayBufferViewCore,speciesConstructor=speciesConstructor$4,aTypedArrayConstructor=ArrayBufferViewCore$l.aTypedArrayConstructor,getTypedArrayConstructor=ArrayBufferViewCore$l.getTypedArrayConstructor,typedArraySpeciesConstructor$4=function(e){return aTypedArrayConstructor(speciesConstructor(e,getTypedArrayConstructor(e)))},arrayFromConstructorAndList=arrayFromConstructorAndList$1,typedArraySpeciesConstructor$3=typedArraySpeciesConstructor$4,typedArrayFromSpeciesAndList=function(e,t){return arrayFromConstructorAndList(typedArraySpeciesConstructor$3(e),t)},ArrayBufferViewCore$k=arrayBufferViewCore,$filter=arrayIteration.filter,fromSpeciesAndList=typedArrayFromSpeciesAndList,aTypedArray$k=ArrayBufferViewCore$k.aTypedArray,exportTypedArrayMethod$l=ArrayBufferViewCore$k.exportTypedArrayMethod;exportTypedArrayMethod$l("filter",(function(e){var t=$filter(aTypedArray$k(this),e,arguments.length>1?arguments[1]:void 0);return fromSpeciesAndList(this,t)}));var ArrayBufferViewCore$j=arrayBufferViewCore,$find=arrayIteration.find,aTypedArray$j=ArrayBufferViewCore$j.aTypedArray,exportTypedArrayMethod$k=ArrayBufferViewCore$j.exportTypedArrayMethod;exportTypedArrayMethod$k("find",(function(e){return $find(aTypedArray$j(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$i=arrayBufferViewCore,$findIndex=arrayIteration.findIndex,aTypedArray$i=ArrayBufferViewCore$i.aTypedArray,exportTypedArrayMethod$j=ArrayBufferViewCore$i.exportTypedArrayMethod;exportTypedArrayMethod$j("findIndex",(function(e){return $findIndex(aTypedArray$i(this),e,arguments.length>1?arguments[1]:void 0)}));var bind$2=functionBindContext,IndexedObject$1=indexedObject,toObject$2=toObject$h,lengthOfArrayLike$3=lengthOfArrayLike$i,createMethod$2=function(e){var t=1==e;return function(n,r,i){for(var o,a=toObject$2(n),s=IndexedObject$1(a),c=bind$2(r,i),l=lengthOfArrayLike$3(s);l-- >0;)if(c(o=s[l],l,a))switch(e){case 0:return o;case 1:return l}return t?-1:void 0}},arrayIterationFromLast={findLast:createMethod$2(0),findLastIndex:createMethod$2(1)},ArrayBufferViewCore$h=arrayBufferViewCore,$findLast=arrayIterationFromLast.findLast,aTypedArray$h=ArrayBufferViewCore$h.aTypedArray,exportTypedArrayMethod$i=ArrayBufferViewCore$h.exportTypedArrayMethod;exportTypedArrayMethod$i("findLast",(function(e){return $findLast(aTypedArray$h(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$g=arrayBufferViewCore,$findLastIndex=arrayIterationFromLast.findLastIndex,aTypedArray$g=ArrayBufferViewCore$g.aTypedArray,exportTypedArrayMethod$h=ArrayBufferViewCore$g.exportTypedArrayMethod;exportTypedArrayMethod$h("findLastIndex",(function(e){return $findLastIndex(aTypedArray$g(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$f=arrayBufferViewCore,$forEach=arrayIteration.forEach,aTypedArray$f=ArrayBufferViewCore$f.aTypedArray,exportTypedArrayMethod$g=ArrayBufferViewCore$f.exportTypedArrayMethod;exportTypedArrayMethod$g("forEach",(function(e){$forEach(aTypedArray$f(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$e=arrayBufferViewCore,$includes=arrayIncludes.includes,aTypedArray$e=ArrayBufferViewCore$e.aTypedArray,exportTypedArrayMethod$f=ArrayBufferViewCore$e.exportTypedArrayMethod;exportTypedArrayMethod$f("includes",(function(e){return $includes(aTypedArray$e(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$d=arrayBufferViewCore,$indexOf=arrayIncludes.indexOf,aTypedArray$d=ArrayBufferViewCore$d.aTypedArray,exportTypedArrayMethod$e=ArrayBufferViewCore$d.exportTypedArrayMethod;exportTypedArrayMethod$e("indexOf",(function(e){return $indexOf(aTypedArray$d(this),e,arguments.length>1?arguments[1]:void 0)}));var global$9=global$H,fails$8=fails$L,uncurryThis$7=functionUncurryThis,ArrayBufferViewCore$c=arrayBufferViewCore,ArrayIterators=es_array_iterator,wellKnownSymbol=wellKnownSymbol$u,ITERATOR$1=wellKnownSymbol("iterator"),Uint8Array$2=global$9.Uint8Array,arrayValues=uncurryThis$7(ArrayIterators.values),arrayKeys=uncurryThis$7(ArrayIterators.keys),arrayEntries=uncurryThis$7(ArrayIterators.entries),aTypedArray$c=ArrayBufferViewCore$c.aTypedArray,exportTypedArrayMethod$d=ArrayBufferViewCore$c.exportTypedArrayMethod,TypedArrayPrototype=Uint8Array$2&&Uint8Array$2.prototype,GENERIC=!fails$8((function(){TypedArrayPrototype[ITERATOR$1].call([1])})),ITERATOR_IS_VALUES=!!TypedArrayPrototype&&TypedArrayPrototype.values&&TypedArrayPrototype[ITERATOR$1]===TypedArrayPrototype.values&&"values"===TypedArrayPrototype.values.name,typedArrayValues=function(){return arrayValues(aTypedArray$c(this))};exportTypedArrayMethod$d("entries",(function(){return arrayEntries(aTypedArray$c(this))}),GENERIC),exportTypedArrayMethod$d("keys",(function(){return arrayKeys(aTypedArray$c(this))}),GENERIC),exportTypedArrayMethod$d("values",typedArrayValues,GENERIC||!ITERATOR_IS_VALUES,{name:"values"}),exportTypedArrayMethod$d(ITERATOR$1,typedArrayValues,GENERIC||!ITERATOR_IS_VALUES,{name:"values"});var ArrayBufferViewCore$b=arrayBufferViewCore,uncurryThis$6=functionUncurryThis,aTypedArray$b=ArrayBufferViewCore$b.aTypedArray,exportTypedArrayMethod$c=ArrayBufferViewCore$b.exportTypedArrayMethod,$join=uncurryThis$6([].join);exportTypedArrayMethod$c("join",(function(e){return $join(aTypedArray$b(this),e)}));var apply$5=functionApply,toIndexedObject$2=toIndexedObject$c,toIntegerOrInfinity=toIntegerOrInfinity$d,lengthOfArrayLike$2=lengthOfArrayLike$i,arrayMethodIsStrict=arrayMethodIsStrict$4,min=Math.min,$lastIndexOf$1=[].lastIndexOf,NEGATIVE_ZERO=!!$lastIndexOf$1&&1/[1].lastIndexOf(1,-0)<0,STRICT_METHOD=arrayMethodIsStrict("lastIndexOf"),FORCED$4=NEGATIVE_ZERO||!STRICT_METHOD,arrayLastIndexOf=FORCED$4?function(e){if(NEGATIVE_ZERO)return apply$5($lastIndexOf$1,this,arguments)||0;var t=toIndexedObject$2(this),n=lengthOfArrayLike$2(t),r=n-1;for(arguments.length>1&&(r=min(r,toIntegerOrInfinity(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:$lastIndexOf$1,ArrayBufferViewCore$a=arrayBufferViewCore,apply$4=functionApply,$lastIndexOf=arrayLastIndexOf,aTypedArray$a=ArrayBufferViewCore$a.aTypedArray,exportTypedArrayMethod$b=ArrayBufferViewCore$a.exportTypedArrayMethod;exportTypedArrayMethod$b("lastIndexOf",(function(e){var t=arguments.length;return apply$4($lastIndexOf,aTypedArray$a(this),t>1?[e,arguments[1]]:[e])}));var ArrayBufferViewCore$9=arrayBufferViewCore,$map=arrayIteration.map,typedArraySpeciesConstructor$2=typedArraySpeciesConstructor$4,aTypedArray$9=ArrayBufferViewCore$9.aTypedArray,exportTypedArrayMethod$a=ArrayBufferViewCore$9.exportTypedArrayMethod;exportTypedArrayMethod$a("map",(function(e){return $map(aTypedArray$9(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(typedArraySpeciesConstructor$2(e))(t)}))}));var aCallable$2=aCallable$b,toObject$1=toObject$h,IndexedObject=indexedObject,lengthOfArrayLike$1=lengthOfArrayLike$i,$TypeError=TypeError,createMethod$1=function(e){return function(t,n,r,i){aCallable$2(n);var o=toObject$1(t),a=IndexedObject(o),s=lengthOfArrayLike$1(o),c=e?s-1:0,l=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=l;break}if(c+=l,e?c<0:s<=c)throw $TypeError("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=l)c in a&&(i=n(i,a[c],c,o));return i}},arrayReduce={left:createMethod$1(!1),right:createMethod$1(!0)},ArrayBufferViewCore$8=arrayBufferViewCore,$reduce=arrayReduce.left,aTypedArray$8=ArrayBufferViewCore$8.aTypedArray,exportTypedArrayMethod$9=ArrayBufferViewCore$8.exportTypedArrayMethod;exportTypedArrayMethod$9("reduce",(function(e){var t=arguments.length;return $reduce(aTypedArray$8(this),e,t,t>1?arguments[1]:void 0)}));var ArrayBufferViewCore$7=arrayBufferViewCore,$reduceRight=arrayReduce.right,aTypedArray$7=ArrayBufferViewCore$7.aTypedArray,exportTypedArrayMethod$8=ArrayBufferViewCore$7.exportTypedArrayMethod;exportTypedArrayMethod$8("reduceRight",(function(e){var t=arguments.length;return $reduceRight(aTypedArray$7(this),e,t,t>1?arguments[1]:void 0)}));var ArrayBufferViewCore$6=arrayBufferViewCore,aTypedArray$6=ArrayBufferViewCore$6.aTypedArray,exportTypedArrayMethod$7=ArrayBufferViewCore$6.exportTypedArrayMethod,floor=Math.floor;exportTypedArrayMethod$7("reverse",(function(){for(var e,t=this,n=aTypedArray$6(t).length,r=floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}));var global$8=global$H,call=functionCall,ArrayBufferViewCore$5=arrayBufferViewCore,lengthOfArrayLike=lengthOfArrayLike$i,toOffset=toOffset$2,toIndexedObject$1=toObject$h,fails$7=fails$L,RangeError$1=global$8.RangeError,Int8Array$2=global$8.Int8Array,Int8ArrayPrototype=Int8Array$2&&Int8Array$2.prototype,$set=Int8ArrayPrototype&&Int8ArrayPrototype.set,aTypedArray$5=ArrayBufferViewCore$5.aTypedArray,exportTypedArrayMethod$6=ArrayBufferViewCore$5.exportTypedArrayMethod,WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS=!fails$7((function(){var e=new Uint8ClampedArray(2);return call($set,e,{length:1,0:3},1),3!==e[1]})),TO_OBJECT_BUG=WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS&&ArrayBufferViewCore$5.NATIVE_ARRAY_BUFFER_VIEWS&&fails$7((function(){var e=new Int8Array$2(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));exportTypedArrayMethod$6("set",(function(e){aTypedArray$5(this);var t=toOffset(arguments.length>1?arguments[1]:void 0,1),n=toIndexedObject$1(e);if(WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS)return call($set,this,n,t);var r=this.length,i=lengthOfArrayLike(n),o=0;if(i+t>r)throw RangeError$1("Wrong length");for(;o<i;)this[t+o]=n[o++]}),!WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS||TO_OBJECT_BUG);var ArrayBufferViewCore$4=arrayBufferViewCore,typedArraySpeciesConstructor$1=typedArraySpeciesConstructor$4,fails$6=fails$L,arraySlice$3=arraySlice$c,aTypedArray$4=ArrayBufferViewCore$4.aTypedArray,exportTypedArrayMethod$5=ArrayBufferViewCore$4.exportTypedArrayMethod,FORCED$3=fails$6((function(){new Int8Array(1).slice()}));exportTypedArrayMethod$5("slice",(function(e,t){for(var n=arraySlice$3(aTypedArray$4(this),e,t),r=typedArraySpeciesConstructor$1(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),FORCED$3);var ArrayBufferViewCore$3=arrayBufferViewCore,$some=arrayIteration.some,aTypedArray$3=ArrayBufferViewCore$3.aTypedArray,exportTypedArrayMethod$4=ArrayBufferViewCore$3.exportTypedArrayMethod;exportTypedArrayMethod$4("some",(function(e){return $some(aTypedArray$3(this),e,arguments.length>1?arguments[1]:void 0)}));var global$7=global$H,uncurryThis$5=functionUncurryThis,fails$5=fails$L,aCallable$1=aCallable$b,internalSort=arraySort$1,ArrayBufferViewCore$2=arrayBufferViewCore,FF=engineFfVersion,IE_OR_EDGE=engineIsIeOrEdge,V8=engineV8Version,WEBKIT=engineWebkitVersion,aTypedArray$2=ArrayBufferViewCore$2.aTypedArray,exportTypedArrayMethod$3=ArrayBufferViewCore$2.exportTypedArrayMethod,Uint16Array=global$7.Uint16Array,nativeSort=Uint16Array&&uncurryThis$5(Uint16Array.prototype.sort),ACCEPT_INCORRECT_ARGUMENTS=!(!nativeSort||fails$5((function(){nativeSort(new Uint16Array(2),null)}))&&fails$5((function(){nativeSort(new Uint16Array(2),{})}))),STABLE_SORT=!!nativeSort&&!fails$5((function(){if(V8)return V8<74;if(FF)return FF<67;if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<602;var e,t,n=new Uint16Array(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(nativeSort(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0})),getSortCompare=function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}};exportTypedArrayMethod$3("sort",(function(e){return void 0!==e&&aCallable$1(e),STABLE_SORT?nativeSort(this,e):internalSort(aTypedArray$2(this),getSortCompare(e))}),!STABLE_SORT||ACCEPT_INCORRECT_ARGUMENTS);var ArrayBufferViewCore$1=arrayBufferViewCore,toLength=toLength$8,toAbsoluteIndex=toAbsoluteIndex$7,typedArraySpeciesConstructor=typedArraySpeciesConstructor$4,aTypedArray$1=ArrayBufferViewCore$1.aTypedArray,exportTypedArrayMethod$2=ArrayBufferViewCore$1.exportTypedArrayMethod;exportTypedArrayMethod$2("subarray",(function(e,t){var n=aTypedArray$1(this),r=n.length,i=toAbsoluteIndex(e,r);return new(typedArraySpeciesConstructor(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,toLength((void 0===t?r:toAbsoluteIndex(t,r))-i))}));var global$6=global$H,apply$3=functionApply,ArrayBufferViewCore=arrayBufferViewCore,fails$4=fails$L,arraySlice$2=arraySlice$c,Int8Array$1=global$6.Int8Array,aTypedArray=ArrayBufferViewCore.aTypedArray,exportTypedArrayMethod$1=ArrayBufferViewCore.exportTypedArrayMethod,$toLocaleString=[].toLocaleString,TO_LOCALE_STRING_BUG=!!Int8Array$1&&fails$4((function(){$toLocaleString.call(new Int8Array$1(1))})),FORCED$2=fails$4((function(){return[1,2].toLocaleString()!=new Int8Array$1([1,2]).toLocaleString()}))||!fails$4((function(){Int8Array$1.prototype.toLocaleString.call([1,2])}));exportTypedArrayMethod$1("toLocaleString",(function(){return apply$3($toLocaleString,TO_LOCALE_STRING_BUG?arraySlice$2(aTypedArray(this)):aTypedArray(this),arraySlice$2(arguments))}),FORCED$2);var exportTypedArrayMethod=arrayBufferViewCore.exportTypedArrayMethod,fails$3=fails$L,global$5=global$H,uncurryThis$4=functionUncurryThis,Uint8Array$1=global$5.Uint8Array,Uint8ArrayPrototype=Uint8Array$1&&Uint8Array$1.prototype||{},arrayToString=[].toString,join$1=uncurryThis$4([].join);fails$3((function(){arrayToString.call({})}))&&(arrayToString=function(){return join$1(this)});var IS_NOT_ARRAY_METHOD=Uint8ArrayPrototype.toString!=arrayToString;exportTypedArrayMethod("toString",arrayToString,IS_NOT_ARRAY_METHOD);var LoaderType={FETCH:"fetch",XHR:"xhr"},ResponseType={ARRAY_BUFFER:"arraybuffer",TEXT:"text",JSON:"json"},NetError=function(e){_inherits$1(n,e);var t=_createSuper$1(n);function n(e,r,i,o){var a;return _classCallCheck$1(this,n),_defineProperty$2(_assertThisInitialized$1(a=t.call(this,o)),"retryCount",0),_defineProperty$2(_assertThisInitialized$1(a),"isTimeout",!1),_defineProperty$2(_assertThisInitialized$1(a),"loaderType",LoaderType.FETCH),_defineProperty$2(_assertThisInitialized$1(a),"startTime",0),_defineProperty$2(_assertThisInitialized$1(a),"endTime",0),_defineProperty$2(_assertThisInitialized$1(a),"options",{}),a.url=e,a.request=r,a.response=i,a}return _createClass$2(n)}(_wrapNativeSuper(Error)),$$6=_export,fails$2=fails$L,toObject=toObject$h,nativeGetPrototypeOf=objectGetPrototypeOf,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,FAILS_ON_PRIMITIVES=fails$2((function(){nativeGetPrototypeOf(1)}));$$6({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES,sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function(e){return nativeGetPrototypeOf(toObject(e))}});var toString$1=Object.prototype.toString;function isObject$3(e){return null!==e&&"object"===_typeof$1(e)}function isPlainObject(e){if("[object Object]"!==toString$1.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function isDate(e){return"[object Date]"===toString$1.call(e)}function getRangeValue(e){if(e&&null!==e[0]&&void 0!==e[0]&&(0!==e[0]||null!==e[1]&&void 0!==e[1])){var t="bytes="+e[0]+"-";return e[1]&&(t+=e[1]),t}}function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function setUrlParams(e,t){if(e){if(!t)return e;var n,r=Object.keys(t).map((function(e){if(null!=(n=t[e]))return Array.isArray(n)?e+="[]":n=[n],n.map((function(t){return isDate(t)?t=t.toISOString():isObject$3(t)&&(t=JSON.stringify(t)),"".concat(encode(e),"=").concat(encode(t))})).join("&")})).filter(Boolean).join("&");if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}}function createResponse(e,t,n,r,i,o,a,s,c,l,u){return i=null!=i?parseFloat(i):null,r=parseInt(r||"0",10),Number.isNaN(r)&&(r=0),{data:e,done:t,option:{range:c,vid:l,index:s,contentLength:r,age:i,startTime:o,firstByteTime:a,endTime:Date.now(),priOptions:u},response:n}}function calculateSpeed(e,t){return Math.round(8*e*1e3/t/1024)}var EVENT={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"},CACHESIZE=2097152,FetchLoader=function(e){_inherits$1(r,e);var t,n=_createSuper$1(r);function r(){var e;return _classCallCheck$1(this,r),_defineProperty$2(_assertThisInitialized$1(e=n.call(this)),"_abortController",null),_defineProperty$2(_assertThisInitialized$1(e),"_timeoutTimer",null),_defineProperty$2(_assertThisInitialized$1(e),"_reader",null),_defineProperty$2(_assertThisInitialized$1(e),"_response",null),_defineProperty$2(_assertThisInitialized$1(e),"_aborted",!1),_defineProperty$2(_assertThisInitialized$1(e),"_index",-1),_defineProperty$2(_assertThisInitialized$1(e),"_range",null),_defineProperty$2(_assertThisInitialized$1(e),"_receivedLength",0),_defineProperty$2(_assertThisInitialized$1(e),"_running",!1),_defineProperty$2(_assertThisInitialized$1(e),"_logger",null),_defineProperty$2(_assertThisInitialized$1(e),"_vid",""),_defineProperty$2(_assertThisInitialized$1(e),"_onProcessMinLen",0),_defineProperty$2(_assertThisInitialized$1(e),"_onCancel",null),_defineProperty$2(_assertThisInitialized$1(e),"_priOptions",null),e}return _createClass$2(r,[{key:"load",value:function(e){var t,n=this,r=e.url,i=e.vid,o=e.timeout,a=e.responseType,s=e.onProgress,c=e.index,l=e.onTimeout,u=e.onCancel,d=e.range,h=e.transformResponse,f=e.request,p=e.params,g=e.logger,y=e.method,v=e.headers,m=e.body,_=e.mode,b=e.credentials,E=e.cache,S=e.redirect,T=e.referrer,w=e.referrerPolicy,O=e.onProcessMinLen,k=e.priOptions;this._logger=g,this._aborted=!1,this._onProcessMinLen=O,this._onCancel=u,this._abortController="undefined"!=typeof AbortController&&new AbortController,this._running=!0,this._index=c,this._range=d||[0,0],this._vid=i||r,this._priOptions=k||{};var C={method:y,headers:v,body:m,mode:_,credentials:b,cache:E,redirect:S,referrer:T,referrerPolicy:w,signal:null===(t=this._abortController)||void 0===t?void 0:t.signal},$=!1;clearTimeout(this._timeoutTimer),r=setUrlParams(r,p);var A=getRangeValue(d);A&&(v=f?f.headers:C.headers=C.headers||(Headers?new Headers:{}),Headers&&v instanceof Headers?v.append("Range",A):v.Range=A),o&&(this._timeoutTimer=setTimeout((function(){if($=!0,n.cancel(),l){var e=new NetError(r,C,null,"timeout");e.isTimeout=!0,l(e,{index:n._index,range:n._range,vid:n._vid,priOptions:n._priOptions})}}),o));var P=Date.now();return this._logger.debug("[fetch load start], index,",c,",range,",d),new Promise((function(e,t){fetch(f||r,f?void 0:C).then(function(){var i=_asyncToGenerator$1(_regeneratorRuntime().mark((function i(o){var l,u,f,p;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(clearTimeout(n._timeoutTimer),n._response=o,!n._aborted&&n._running){i.next=4;break}return i.abrupt("return");case 4:if(h&&(o=h(o,r)||o),o.ok){i.next=7;break}throw new NetError(r,C,o,"bad network response");case 7:if(l=Date.now(),a!==ResponseType.TEXT){i.next=15;break}return i.next=11,o.text();case 11:u=i.sent,n._running=!1,i.next=37;break;case 15:if(a!==ResponseType.JSON){i.next=22;break}return i.next=18,o.json();case 18:u=i.sent,n._running=!1,i.next=37;break;case 22:if(!s){i.next=29;break}return n.resolve=e,n.reject=t,n._loadChunk(o,s,P,l),i.abrupt("return");case 29:return i.next=31,o.arrayBuffer();case 31:u=i.sent,u=new Uint8Array(u),n._running=!1,f=Date.now()-P,p=calculateSpeed(u.byteLength,f),n.emit(EVENT.REAL_TIME_SPEED,{speed:p,len:u.byteLength,time:f,vid:n._vid,index:n._index,range:n._range,priOptions:n._priOptions});case 37:n._logger.debug("[fetch load end], index,",c,",range,",d),e(createResponse(u,!0,o,o.headers.get("Content-Length"),o.headers.get("age"),P,l,c,d,n._vid,n._priOptions));case 39:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(e){var i;clearTimeout(n._timeoutTimer),n._running=!1,n._aborted&&!$||((e=e instanceof NetError?e:new NetError(r,C,null,null===(i=e)||void 0===i?void 0:i.message)).startTime=P,e.endTime=Date.now(),e.isTimeout=$,e.options={index:n._index,range:n._range,vid:n._vid,priOptions:n._priOptions},t(e))}))}))}},{key:"cancel",value:(t=_asyncToGenerator$1(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._aborted){e.next=2;break}return e.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){e.next=14;break}if(e.prev=5,!this._reader){e.next=9;break}return e.next=9,this._reader.cancel();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch(error){}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return t.apply(this,arguments)})},{key:"_loadChunk",value:function(e,t,n,r){var i=this;if(!e.body||!e.body.getReader){this._running=!1;var o=new NetError(e.url,"",e,"onProgress of bad response.body.getReader");return o.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},void this.reject(o)}this._onProcessMinLen>0&&(this._cache=new Uint8Array(CACHESIZE),this._writeIdx=0);var a,s,c,l=this._reader=e.body.getReader(),u=function(){var o=_asyncToGenerator$1(_regeneratorRuntime().mark((function o(){var d,h,f,p,g,y,v,m;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=Date.now(),o.prev=1,o.next=4,l.read();case 4:a=o.sent,c=Date.now(),o.next=13;break;case 8:return o.prev=8,o.t0=o.catch(1),c=Date.now(),i._aborted||(i._running=!1,o.t0.options={index:i._index,range:i._range,vid:i._vid,priOptions:i._priOptions},i.reject(o.t0)),o.abrupt("return");case 13:if(h=(null===(d=i._range)||void 0===d?void 0:d.length)>0?i._range[0]:0,f=h+i._receivedLength,!i._aborted){o.next=19;break}return i._running=!1,t(void 0,!1,{range:[f,f],vid:i._vid,index:i._index,startTime:s,endTime:c,st:n,firstByteTime:r,priOptions:i._priOptions},e),o.abrupt("return");case 19:p=a.value?a.value.byteLength:0,i._receivedLength+=p,i._logger.debug("\u3010fetchLoader,onProgress call\u3011,task,",i._range,", start,",f,", end,",h+i._receivedLength,", done,",a.done),i._onProcessMinLen>0?i._writeIdx+p>=i._onProcessMinLen||a.done?((g=new Uint8Array(i._writeIdx+p)).set(i._cache.slice(0,i._writeIdx),0),p>0&&g.set(a.value,i._writeIdx),i._writeIdx=0,i._logger.debug("\u3010fetchLoader,onProgress enough\u3011,done,",a.done,",len,",g.byteLength,", writeIdx,",i._writeIdx)):p>0&&i._writeIdx+p<CACHESIZE?(i._cache.set(a.value,i._writeIdx),i._writeIdx+=p,i._logger.debug("\u3010fetchLoader,onProgress cache\u3011,len,",p,", writeIdx,",i._writeIdx)):p>0&&(y=new Uint8Array(i._writeIdx+p+2048),i._logger.debug("\u3010fetchLoader,onProgress extra start\u3011,size,",i._writeIdx+p+2048,", datalen,",p,", writeIdx,",i._writeIdx),y.set(i._cache.slice(0,i._writeIdx),0),p>0&&y.set(a.value,i._writeIdx),i._writeIdx+=p,delete i._cache,i._cache=y,i._logger.debug("\u3010fetchLoader,onProgress extra end\u3011,len,",p,", writeIdx,",i._writeIdx)):g=a.value,(g&&g.byteLength>0||a.done)&&t(g,a.done,{range:[i._range[0]+i._receivedLength-(g?g.byteLength:0),i._range[0]+i._receivedLength],vid:i._vid,index:i._index,startTime:s,endTime:c,st:n,firstByteTime:r,priOptions:i._priOptions},e),a.done?(v=Date.now()-n,m=calculateSpeed(i._receivedLength,v),i.emit(EVENT.REAL_TIME_SPEED,{speed:m,len:i._receivedLength,time:v,vid:i._vid,index:i._index,range:i._range,priOptions:i._priOptions}),i._running=!1,i._logger.debug("[fetchLoader onProgress end],task,",i._range,",done,",a.done),i.resolve(createResponse(a,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),n,r,i._index,i._range,i._vid,i._priOptions))):u();case 25:case"end":return o.stop()}}),o,null,[[1,8]])})));return function(){return o.apply(this,arguments)}}();u()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return!("undefined"==typeof fetch)}}]),r}(EventEmitter);function getConfig(e){return _objectSpread2$1({loaderType:LoaderType.FETCH,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:ResponseType.TEXT,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},e)}var XhrLoader=function(e){_inherits$1(n,e);var t=_createSuper$1(n);function n(){var e;return _classCallCheck$1(this,n),_defineProperty$2(_assertThisInitialized$1(e=t.call(this)),"_xhr",null),_defineProperty$2(_assertThisInitialized$1(e),"_aborted",!1),_defineProperty$2(_assertThisInitialized$1(e),"_timeoutTimer",null),_defineProperty$2(_assertThisInitialized$1(e),"_range",null),_defineProperty$2(_assertThisInitialized$1(e),"_receivedLength",0),_defineProperty$2(_assertThisInitialized$1(e),"_url",null),_defineProperty$2(_assertThisInitialized$1(e),"_onProgress",null),_defineProperty$2(_assertThisInitialized$1(e),"_index",-1),_defineProperty$2(_assertThisInitialized$1(e),"_headers",null),_defineProperty$2(_assertThisInitialized$1(e),"_currentChunkSizeKB",384),_defineProperty$2(_assertThisInitialized$1(e),"_timeout",null),_defineProperty$2(_assertThisInitialized$1(e),"_xhr",null),_defineProperty$2(_assertThisInitialized$1(e),"_withCredentials",null),_defineProperty$2(_assertThisInitialized$1(e),"_startTime",-1),_defineProperty$2(_assertThisInitialized$1(e),"_loadCompleteResolve",null),_defineProperty$2(_assertThisInitialized$1(e),"_loadCompleteReject",null),_defineProperty$2(_assertThisInitialized$1(e),"_runing",!1),_defineProperty$2(_assertThisInitialized$1(e),"_logger",!1),_defineProperty$2(_assertThisInitialized$1(e),"_vid",""),_defineProperty$2(_assertThisInitialized$1(e),"_responseType",void 0),_defineProperty$2(_assertThisInitialized$1(e),"_credentials",void 0),_defineProperty$2(_assertThisInitialized$1(e),"_method",void 0),_defineProperty$2(_assertThisInitialized$1(e),"_transformResponse",void 0),_defineProperty$2(_assertThisInitialized$1(e),"_firstRtt",void 0),_defineProperty$2(_assertThisInitialized$1(e),"_onCancel",null),_defineProperty$2(_assertThisInitialized$1(e),"_priOptions",null),e}return _createClass$2(n,[{key:"load",value:function(e){var t=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials="include"===e.credentials||"same-origin"===e.credentials,this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("\u3010xhrLoader task\u3011, range",this._range),this._url=setUrlParams(e.url,e.params);var n=Date.now();return new Promise((function(e,n){t._loadCompleteResolve=e,t._loadCompleteReject=n,t._startLoad()})).catch((function(e){if(clearTimeout(t._timeoutTimer),t._runing=!1,!t._aborted)throw(e=e instanceof NetError?e:new NetError(t._url,t._request)).startTime=n,e.endTime=Date.now(),e.options={index:t._index,vid:t._vid,priOptions:t._priOptions},e}))}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===ResponseType.ARRAY_BUFFER&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var t=1024*this._currentChunkSizeKB,n=this._range[0]+this._receivedLength,r=this._range[1];t<this._range[1]-n&&(r=n+t),e=[n,r],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e);this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var t=this;try{this._startTime=Date.now();var n=this._xhr=new XMLHttpRequest;n.open(this._method||"GET",this._url,!0),n.responseType=this._responseType,this._timeout&&(n.timeout=this._timeout),n.withCredentials=this._withCredentials,n.onload=this._onLoad.bind(this),n.onreadystatechange=this._onReadyStatechange.bind(this),n.onerror=function(e){var n,r,i;t._running=!1;var o=new NetError(t._url,t._request,null==e||null===(n=e.currentTarget)||void 0===n?void 0:n.response,"xhr.onerror.status:"+(null==e||null===(r=e.currentTarget)||void 0===r?void 0:r.status)+",statusText,"+(null==e||null===(i=e.currentTarget)||void 0===i?void 0:i.statusText));o.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(o)},n.ontimeout=function(e){t.cancel();var n=new NetError(t._url,t._request,{status:408},"timeout");t._onTimeout&&(n.isTimeout=!0,t._onTimeout(n,{index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions})),n.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(n)};var r=this._headers||{},i=getRangeValue(e);i&&(r.Range=i),r&&Object.keys(r).forEach((function(e){n.setRequestHeader(e,r[e])})),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),n.send(this._body)}catch(o){o.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(o)}}},{key:"_onReadyStatechange",value:function(e){2===e.target.readyState&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var t,n=e.target.status;if(n<200||n>299){var r=new NetError(this._url,null,_objectSpread2$1(_objectSpread2$1({},e.target.response),{},{status:n}),"bad response,status:"+n);return r.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(r)}var i,o=null,a=!1,s=(null===(t=this._range)||void 0===t?void 0:t.length)>0?this._range[0]:0;if(this._responseType===ResponseType.ARRAY_BUFFER){var c,l=new Uint8Array(e.target.response);if(i=s+this._receivedLength,l&&l.byteLength>0){this._receivedLength+=l.byteLength;var u=Date.now()-this._startTime,d=calculateSpeed(this._receivedLength,u);this.emit(EVENT.REAL_TIME_SPEED,{speed:d,len:this._receivedLength,time:u,vid:this._vid,index:this._index,range:[i,s+this._receivedLength],priOptions:this._priOptions})}o=l,a=!((null===(c=this._range)||void 0===c?void 0:c.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]),this._logger.debug("[xhr load done->], tast :",this._range,", start",i,"end ",s+this._receivedLength,",dataLen,",l?l.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",a)}else a=!0,o=e.target.response;var h={ok:n>=200&&n<300,status:n,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(h=this._transformResponse(h,this._url)||h),this._onProgress&&this._onProgress(o,a,{index:this._index,vid:this._vid,range:[i,s+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},h),a?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(createResponse(this._onProgress?null:o,a,h,h.headers["content-length"],h.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted)return this._aborted=!0,this._runing=!1,_get(_getPrototypeOf$1(n.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr?this._xhr.abort():void 0}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var t,n={},r=_createForOfIteratorHelper(e.getAllResponseHeaders().trim().split("\r\n"));try{for(r.s();!(t=r.n()).done;){var i=t.value.split(": ");n[i[0].toLowerCase()]=i.slice(1).join(": ")}}catch(o){r.e(o)}finally{r.f()}return n}}],[{key:"isSupported",value:function(){return"undefined"!=typeof XMLHttpRequest}}]),n}(EventEmitter),_excluded$1=["retry","retryDelay","onRetryError","transformError"],Task=function(){function e(t,n){_classCallCheck$1(this,e),this.promise=createPublicPromise(),this.alive=!!n.onProgress,!n.logger&&(n.logger=new Logger$1("Loader")),this._loaderType=t,this._loader=t===LoaderType.FETCH&&window.fetch?new FetchLoader:new XhrLoader,this._config=n,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=n.retryCheckFunc,this._logger=n.logger}var t;return _createClass$2(e,[{key:"exec",value:function(){var e=this,t=this._config,n=t.retry,r=t.retryDelay,i=t.onRetryError,o=t.transformError,a=_objectWithoutProperties(t,_excluded$1),s=function(){var t=_asyncToGenerator$1(_regeneratorRuntime().mark((function t(){var c,l,u;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._loader.load(a);case 3:c=t.sent,e.promise.resolve(c),t.next=27;break;case 7:if(t.prev=7,t.t0=t.catch(0),e._loader.running=!1,e._logger.debug("[task request catch err]",t.t0),!e._canceled){t.next=13;break}return t.abrupt("return");case 13:if(t.t0.loaderType=e._loaderType,t.t0.retryCount=e._retryCount,l=t.t0,o&&(l=o(l)||l),i&&e._retryCount>0&&i(l,e._retryCount,{index:a.index,vid:a.vid,range:a.range,priOptions:a.priOptions}),e._retryCount++,u=!0,e._retryCheckFunc&&(u=e._retryCheckFunc(t.t0)),!(u&&e._retryCount<=n)){t.next=26;break}return clearTimeout(e._retryTimer),e._logger.debug("[task request setTimeout],retry",e._retryCount,",retry range,",a.range),e._retryTimer=setTimeout(s,r),t.abrupt("return");case 26:e.promise.reject(l);case 27:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return s(),this.promise}},{key:"cancel",value:(t=_asyncToGenerator$1(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,e.abrupt("return",this._loader.cancel());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),e}();function sleep(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}var NetLoader=function(e){_inherits$1(r,e);var t,n=_createSuper$1(r);function r(e){var t;return _classCallCheck$1(this,r),_defineProperty$2(_assertThisInitialized$1(t=n.call(this,e)),"type",LoaderType.FETCH),_defineProperty$2(_assertThisInitialized$1(t),"_queue",[]),_defineProperty$2(_assertThisInitialized$1(t),"_alive",[]),_defineProperty$2(_assertThisInitialized$1(t),"_currentTask",null),_defineProperty$2(_assertThisInitialized$1(t),"_config",void 0),t._config=getConfig(e),t._config.loaderType!==LoaderType.XHR&&FetchLoader.isSupported()||(t.type=LoaderType.XHR),t.log=e.logger,t}return _createClass$2(r,[{key:"isFetch",value:function(){return this.type===LoaderType.FETCH}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"!=typeof e&&e?n=e:n.url=e||n.url||this._config.url,(n=Object.assign({},this._config,n)).params&&(n.params=Object.assign({},n.params)),n.headers&&isPlainObject(n.headers)&&(n.headers=Object.assign({},n.headers)),n.body&&isPlainObject(n.body)&&(n.body=Object.assign({},n.body)),n.transformRequest&&(n=n.transformRequest(n)||n),n.logger=this.log;var r=new Task(this.type,n);return r.loader.on(EVENT.REAL_TIME_SPEED,(function(e){t.emit(EVENT.REAL_TIME_SPEED,e)})),this._queue.push(r),1!==this._queue.length||this._currentTask&&this._currentTask.running||this._processTask(),r.promise}},{key:"cancel",value:(t=_asyncToGenerator$1(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._queue.map((function(e){return e.cancel()})).concat(this._alive.map((function(e){return e.cancel()}))),this._currentTask&&t.push(this._currentTask.cancel()),this._queue=[],this._alive=[],e.next=6,Promise.all(t);case 6:return e.next=8,sleep();case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var t=this._currentTask.exec().catch((function(e){}));t&&"function"==typeof t.finally&&t.finally((function(){var t,n;null!==(t=e._currentTask)&&void 0!==t&&t.alive&&(null===(n=e._alive)||void 0===n?void 0:n.length)>0&&(e._alive=e._alive.filter((function(t){return t&&t!==e._currentTask}))),e._processTask()}))}}}],[{key:"isFetchSupport",value:function(){return FetchLoader.isSupported()}}]),r}(EventEmitter),EXTEND_EVENTS={RTC_STATE_CHANGE:"core.rtcstatechange"},lib={},parser$1={},grammar$2={exports:{}},grammar$1=grammar$2.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(grammar$1).forEach((function(e){grammar$1[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,r){var i=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:i&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:i?n[e.name]:n;!function(e,n,r,i){if(i&&!r)n[i]=t(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(n[r[o]]=t(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},r=grammar$2.exports,i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var s=0;s<(r[t]||[]).length;s+=1){var c=r[t][s];if(c.reg.test(i))return n(c,a,i)}})),t.media=o,t};var o=function(e,n){var r=n.split(/=(.+)/,2);return 2===r.length?e[r[0]]=t(r[1]):1===r.length&&n.length>1&&(e[r[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],r=e.split(" ").map(t),i=0;i<r.length;i+=3)n.push({component:r[i],ip:r[i+1],port:r[i+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,r=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),r=!0),{scid:n,paused:r}}))}))}}(parser$1);var grammar=grammar$2.exports,formatRegExp=/%[sdv%]/g,format=function(e){var t=1,n=arguments,r=n.length;return e.replace(formatRegExp,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},makeLine=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return format.apply(null,r)},defaultOuterOrder=["v","o","s","i","u","e","p","c","b","t","r","z","a"],defaultInnerOrder=["i","c","b","a"],writer$1=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||defaultOuterOrder,r=t.innerOrder||defaultInnerOrder,i=[];return n.forEach((function(t){grammar[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(makeLine(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(makeLine(t,n,e))}))}))})),e.media.forEach((function(e){i.push(makeLine("m",grammar.m[0],e)),r.forEach((function(t){grammar[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(makeLine(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(makeLine(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"},parser=parser$1,writer=writer$1;function getOption(e){return _objectSpread2$2({retryCount:0,retryDelay:1e3,loadTimeout:5e3,stallInterval:400,delayHint:0},e)}function _getStats(e){var t=[];return e.forEach((function(e){"inbound-rtp"===e.type&&t.push(e)})),t.map((function(t){var n=e.get(t.codecId),r=e.get(t.trackId);return{type:t.mediaType,inboundRtp:t,codec:n,track:r}}))}function getStats(e){return new Promise((function(t){var n;null===(n=e.getStats(null))||void 0===n||n.then((function(e){t(_getStats(e))}))})).catch((function(){}))}function getStatsSnapshoot(e){var t,n,r,i,o,a,s,c,l,u,d,h,f,p,g,y,v,m,_,b,E,S,T,w,O,k,C,$,A,P=null==e?void 0:e.filter((function(e){return"video"===e.type}))[0],I=null==e?void 0:e.filter((function(e){return"audio"===e.type}))[0];return{video:P?{codec:null===(t=P.codec)||void 0===t?void 0:t.mimeType,payloadType:null===(n=P.codec)||void 0===n?void 0:n.payloadType,sdpFmtpLine:null===(r=P.codec)||void 0===r?void 0:r.sdpFmtpLine,bytesReceived:null===(i=P.inboundRtp)||void 0===i?void 0:i.bytesReceived,firCount:null===(o=P.inboundRtp)||void 0===o?void 0:o.firCount,pliCount:null===(a=P.inboundRtp)||void 0===a?void 0:a.pliCount,frameHeight:null===(s=P.inboundRtp)||void 0===s?void 0:s.frameHeight,frameWidth:null===(c=P.inboundRtp)||void 0===c?void 0:c.frameWidth,framesDecoded:null===(l=P.inboundRtp)||void 0===l?void 0:l.framesDecoded,framesDropped:null===(u=P.inboundRtp)||void 0===u?void 0:u.framesDropped,framesPerSecond:null===(d=P.inboundRtp)||void 0===d?void 0:d.framesPerSecond,framesReceived:null===(h=P.inboundRtp)||void 0===h?void 0:h.framesReceived,jitter:null===(f=P.inboundRtp)||void 0===f?void 0:f.jitter,jitterBufferDelay:null===(p=P.inboundRtp)||void 0===p?void 0:p.jitterBufferDelay,keyFramesDecoded:null===(g=P.inboundRtp)||void 0===g?void 0:g.keyFramesDecoded,nackCount:null===(y=P.inboundRtp)||void 0===y?void 0:y.nackCount,packetsLost:null===(v=P.inboundRtp)||void 0===v?void 0:v.packetsLost,packetsReceived:null===(m=P.inboundRtp)||void 0===m?void 0:m.packetsReceived}:void 0,audio:I?{codec:null===(_=I.codec)||void 0===_?void 0:_.mimeType,payloadType:null===(b=I.codec)||void 0===b?void 0:b.payloadType,sdpFmtpLine:null===(E=I.codec)||void 0===E?void 0:E.sdpFmtpLine,bytesReceived:null===(S=I.inboundRtp)||void 0===S?void 0:S.bytesReceived,audioLevel:null===(T=I.inboundRtp)||void 0===T?void 0:T.audioLevel,jitter:null===(w=I.inboundRtp)||void 0===w?void 0:w.jitter,jitterBufferDelay:null===(O=I.inboundRtp)||void 0===O?void 0:O.jitterBufferDelay,packetsLost:null===(k=I.inboundRtp)||void 0===k?void 0:k.packetsLost,packetsReceived:null===(C=I.inboundRtp)||void 0===C?void 0:C.packetsReceived,totalSamplesDuration:null===($=I.inboundRtp)||void 0===$?void 0:$.totalSamplesDuration,totalSamplesReceived:null===(A=I.inboundRtp)||void 0===A?void 0:A.totalSamplesReceived}:void 0}}lib.write=writer,lib.parse=parser.parse,lib.parseParams=parser.parseParams,lib.parseFmtpConfig=parser.parseFmtpConfig,lib.parsePayloads=parser.parsePayloads,lib.parseRemoteCandidates=parser.parseRemoteCandidates,lib.parseImageAttributes=parser.parseImageAttributes,lib.parseSimulcastStreamList=parser.parseSimulcastStreamList;var logger=new Logger$1("rts"),Rts=function(e){_inherits$2(i,e);var t,n,r=_createSuper$2(i);function i(e){var t;return _classCallCheck$2(this,i),_defineProperty$3(_assertThisInitialized$2(t=r.call(this)),"_url",""),_defineProperty$3(_assertThisInitialized$2(t),"_pc",null),_defineProperty$3(_assertThisInitialized$2(t),"_audioTransceicer",null),_defineProperty$3(_assertThisInitialized$2(t),"_videoTransceicer",null),_defineProperty$3(_assertThisInitialized$2(t),"_mediaStream",null),_defineProperty$3(_assertThisInitialized$2(t),"_media",null),_defineProperty$3(_assertThisInitialized$2(t),"_opts",null),_defineProperty$3(_assertThisInitialized$2(t),"_loader",null),_defineProperty$3(_assertThisInitialized$2(t),"_retry",0),_defineProperty$3(_assertThisInitialized$2(t),"_waitingTimer",0),_defineProperty$3(_assertThisInitialized$2(t),"_rctConnectStartTs",0),_defineProperty$3(_assertThisInitialized$2(t),"_onTrack",(function(e){if(logger.log("addTrack: ",e.track,e.streams),t["_".concat(e.track.kind)]=e.track,!t._mediaStream){t._mediaStream=new MediaStream,t._media.srcObject=t._mediaStream;var n=t._media.play();n&&n.catch&&n.catch((function(e){}))}t._mediaStream.addTrack(e.track)})),_defineProperty$3(_assertThisInitialized$2(t),"_mockWaitingByTimeupdate",(function(){var e,n;"connected"!==(null===(e=t._pc)||void 0===e?void 0:e.connectionState)&&"connected"!==(null===(n=t._pc)||void 0===n?void 0:n.iceConnectionState)||(clearTimeout(t._waitingTimer),t._waitingTimer=setTimeout((function(){t._media.paused||t.emit("waiting")}),t._opts.stallInterval))})),_defineProperty$3(_assertThisInitialized$2(t),"_onLoadedData",(function(){logger.log("loadeddata emit"),t.getStatsSnapshoot().then((function(e){t.emit(EVENT.METADATA_PARSED,{type:"video",elapsed:Date.now()-t._rctConnectStartTs,meta:e.video}),t.emit(EVENT.METADATA_PARSED,{type:"audio",elapsed:Date.now()-t._rctConnectStartTs,meta:e.audio})}))})),_defineProperty$3(_assertThisInitialized$2(t),"_onLoaderRetry",(function(e,n){t.emit(EVENT.LOAD_RETRY,{error:StreamingError.network(e),retryTime:n})})),t._opts=getOption(e),t._media=t._opts.media,t._loader=new NetLoader(_objectSpread2$2(_objectSpread2$2({},e.fetchOptions),{},{responseType:"json",method:"POST",retry:t._opts.retryCount,retryDelay:t._opts.retryDelay,timeout:t._opts.loadTimeout,onRetryError:t._onLoaderRetry})),t._retry=t._opts.retryCount,t._bindMediaEvent(),t}return _createClass$3(i,[{key:"pc",get:function(){return this._pc}},{key:"audioTrack",get:function(){return this._audio}},{key:"videoTack",get:function(){return this._video}},{key:"getStats",value:function(){return getStats(this._pc)}},{key:"getStatsSnapshoot",value:function(){return this.getStats().then((function(e){return getStatsSnapshoot(e)}))}},{key:"load",value:(n=_asyncToGenerator$2(_regeneratorRuntime$1().mark((function e(t){var n,r=this;return _regeneratorRuntime$1().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._disconnect(),this._url=t,this._retry=this._opts.retryCount,n=this._pc,e.prev=4,this._pc=new RTCPeerConnection,this._bindRTCEvents(),e.next=9,this._connect(t);case 9:n&&n.close(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),setTimeout((function(){return r._emitError(StreamingError.create(ERR.OTHER,null,e.t0))}));case 15:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(e){return n.apply(this,arguments)})},{key:"switchURL",value:function(e){this.load(e||this._url)}},{key:"_bindRTCEvents",value:function(){var e=this,t=this._pc;t.addEventListener("track",this._onTrack),t.addEventListener("connectionstatechange",(function(){if(logger.warn("onconnectionstatechange:",t.connectionState),e.emit(EXTEND_EVENTS.RTC_STATE_CHANGE,{state:t.connectionState,url:e._url}),"disconnected"!==t.connectionState&&"failed"!==t.connectionState||e.emit("waiting"),"failed"===t.connectionState){if(0===e._retry)return void e._emitError(StreamingError.network(new Error("rtc connect failed")));e._retry--,e.load(e._url)}"connected"===t.connectionState&&e.emit(EVENT.TTFB,{url:e._url,responseUrl:e._url,elapsed:Date.now()-e._rctConnectStartTs})}))}},{key:"_bindMediaEvent",value:function(){this._media.addEventListener("timeupdate",this._mockWaitingByTimeupdate),this._media.addEventListener("loadeddata",this._onLoadedData)}},{key:"_connect",value:(t=_asyncToGenerator$2(_regeneratorRuntime$1().mark((function e(){var t,n,r,i,o,a,s,c,l,u;return _regeneratorRuntime$1().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._pc).addTransceiver){e.next=11;break}return this._audioTransceicer=t.addTransceiver("audio",{direction:"recvonly"}),this._videoTransceicer=t.addTransceiver("video",{direction:"recvonly"}),(r=this._opts.delayHint)&&(this._audioTransceicer.receiver.playoutDelayHint=r,this._audioTransceicer.receiver.jitterBufferDelayHint=r,this._videoTransceicer.receiver.playoutDelayHint=r,this._videoTransceicer.receiver.jitterBufferDelayHint=r),e.next=8,t.createOffer();case 8:n=e.sent,e.next=14;break;case 11:return e.next=13,t.createOffer({iceRestart:!0,offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 13:n=e.sent;case 14:return logger.log("local offer"),logger.log(n.sdp),(i=lib.parse(n.sdp)).media.filter((function(e){return"audio"===e.type})).forEach((function(e){var t,n=null===(t=e.rtp.filter((function(e){return"opus"===e.codec}))[0])||void 0===t?void 0:t.payload;n&&e.fmtp.forEach((function(e){e.payload===n&&(e.config="minptime=10;stereo=1;useinbandfec=1")}))})),n.sdp=lib.write(i),logger.log("local offer modified:\n",n.sdp),e.next=22,t.setLocalDescription(n);case 22:return e.prev=22,a=/_?session_id=([^&$]+)/.exec(this._url),s=a?a[1]:Date.now()+"",this.emit(EVENT.LOAD_START,{url:this._url}),this._rctConnectStartTs=Date.now(),e.next=29,this._loader.load(this._url,{body:JSON.stringify({sessionId:s,version:"1.0-html",localSdp:n})});case 29:if(c=e.sent,this.emit(EVENT.LOAD_RESPONSE_HEADERS,{headers:c.response.headers}),200===(null==(l=null==c?void 0:c.data)?void 0:l.code)){e.next=34;break}throw new Error("code: ".concat(null==l?void 0:l.code,", message:").concat(null==l?void 0:l.message));case 34:return logger.log("answer:"),logger.log(null===(o=l.remoteSdp)||void 0===o?void 0:o.sdp),(u=lib.parse(l.remoteSdp.sdp)).media.forEach((function(e){e.fingerprint.hash=e.fingerprint.hash.toUpperCase()})),l.remoteSdp.sdp=lib.write(u),logger.log("answer modified:\n",l.remoteSdp.sdp),e.next=42,this._pc.setRemoteDescription(l.remoteSdp);case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(22),this._emitError(StreamingError.network(e.t0));case 47:case"end":return e.stop()}}),e,this,[[22,44]])}))),function(){return t.apply(this,arguments)})},{key:"_disconnect",value:function(){this._audioTransceicer=null,this._videoTransceicer=null,this._mediaStream=null}},{key:"_emitError",value:function(e){this.emit(EVENT.ERROR,e)}},{key:"destroy",value:function(){var e;this._disconnect(),null===(e=this._media)||void 0===e||e.removeEventListener("timeupdate",this._mockWaitingByTimeupdate),this._media&&(this._media.srcObject=null),this._loader=null,this._media=null}}],[{key:"enableLogger",value:function(){Logger$1.enable()}},{key:"disableLogger",value:function(){Logger$1.disable()}}]),i}(EventEmitter);try{localStorage.getItem("xgd")?Rts.enableLogger():Rts.disableLogger()}catch(error){}function isSupported(){return!(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype.addTransceiver)}function getCapacity(){if(!isSupported())return Promise.reject("RTCPeerConnection no support");var e;try{(e=new RTCPeerConnection({sdpSemantics:"unified-plan"})).addTransceiver("video",{direction:"recvonly"}),e.addTransceiver("audio",{direction:"recvonly"})}catch(t){return Promise.reject(null==t?void 0:t.message)}return e.createOffer().then((function(t){var n,r,i,o,a=lib.parse(t.sdp),s=null===(n=a.media)||void 0===n?void 0:n.filter((function(e){return"video"===e.type}))[0],c=null===(r=a.media)||void 0===r?void 0:r.filter((function(e){return"audio"===e.type}))[0],l=null==s||null===(i=s.rtp)||void 0===i?void 0:i.filter((function(e){return"VP8"===e.codec||"VP9"===e.codec||"H264"===e.codec})),u=null==c||null===(o=c.rtp)||void 0===o?void 0:o.filter((function(e){return"opus"===e.codec})),d=null==s?void 0:s.fmtp,h=null==c?void 0:c.fmtp;return d&&l.map((function(e){var t;e.config=null===(t=d.filter((function(t){return t.payload===e.payload}))[0])||void 0===t?void 0:t.config})),h&&u.map((function(e){var t;e.config=null===(t=h.filter((function(t){return t.payload===e.payload}))[0])||void 0===t?void 0:t.config})),e.close(),{video:l,audio:u}}))}var RtsPlugin=function(e){_inherits$2(n,e);var t=_createSuper$2(n);function n(){var e;_classCallCheck$2(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty$3(_assertThisInitialized$2(e=t.call.apply(t,[this].concat(i))),"_rts",null),_defineProperty$3(_assertThisInitialized$2(e),"_rtsOpts",null),_defineProperty$3(_assertThisInitialized$2(e),"_init",(function(){var t;null===(t=e._rts)||void 0===t||t.destroy();var n=e.player.config,r=n.rts||{};e._rtsOpts=r,e._rts=new Rts(_objectSpread2$2({media:e.player.video},r)),e._rts.load(n.url)})),_defineProperty$3(_assertThisInitialized$2(e),"_onSwitchURL",(function(t){e._rts&&(e.player.config.url=t,e._rts.switchURL(t))})),e}return _createClass$3(n,[{key:"pc",get:function(){var e;return null===(e=this._rts)||void 0===e?void 0:e.pc}},{key:"videoTrack",get:function(){var e;return null===(e=this._rts)||void 0===e?void 0:e.videoTack}},{key:"audioTrack",get:function(){var e;return null===(e=this._rts)||void 0===e?void 0:e.audioTrack}},{key:"core",get:function(){return this._rts}},{key:"version",get:function(){return"0.1.11"}},{key:"beforePlayerInit",value:function(){var e,t=this;this._init(),this.player.switchURL=this._onSwitchURL,null===(e=this.player)||void 0===e||e.useHooks("replay",(function(){var e;return null===(e=t._rts)||void 0===e?void 0:e.switchURL()})),this.on(URL_CHANGE,this._onSwitchURL),this.on(DESTROY,this.destroy),this._transErrorEvent(),this._transCoreEvent(EVENT.LOAD_START),this._transCoreEvent(EVENT.TTFB),this._transCoreEvent(EVENT.LOAD_RESPONSE_HEADERS),this._transCoreEvent(EVENT.LOAD_RETRY),this._transCoreEvent(EVENT.METADATA_PARSED),this._transCoreEvent(EXTEND_EVENTS.RTC_STATE_CHANGE);try{BasePlugin.defineGetterOrSetter(this.player,{__url:{get:function(){try{return URL.createObjectURL(new MediaSource)}catch(r){var e,n;null!==(e=t.player)&&void 0!==e&&null!==(n=e.video)&&void 0!==n&&n.srcObject||(t.player.video.srcObject=new MediaStream)}}}})}catch(n){}}},{key:"getStats",value:function(){var e;return null===(e=this._rts)||void 0===e?void 0:e.getStats()}},{key:"getStatsSnapshoot",value:function(){var e;return null===(e=this._rts)||void 0===e?void 0:e.getStatsSnapshoot()}},{key:"_transErrorEvent",value:function(){var e=this;this._rts.on(EVENT.ERROR,(function(t){if(e.player){var n=new Errors(e.player,t),r=e._rtsOpts,i=r.backupConstruct,o=r.backupURL;if(o){var a,s=e.player;s.emit("core_event",_objectSpread2$2(_objectSpread2$2({},{url:s.config.url,code:n.errorCode,message:n.message,httpCode:n.httpCode}),{},{eventName:"core.degrade"})),s.emit("degrade",{url:s.config.url,code:n.errorCode,message:n.message,httpCode:n.httpCode}),s.unRegisterPlugin("rts"),e._rts=null,s.rts=null,null!==(a=s.video)&&void 0!==a&&a.srcObject&&(s.video.srcObject=null),s.config.url=o,i?s.registerPlugin(i).beforePlayerInit():s.video.src=o}else e.player.emit(ERROR$3,n)}})),this._rts.on("waiting",(function(){var t;null===(t=e.player)||void 0===t||t.emit("waiting")}))}},{key:"_transCoreEvent",value:function(e){var t=this;this._rts.on(e,(function(n){t.player&&t.player.emit("core_event",_objectSpread2$2(_objectSpread2$2({},n),{},{eventName:e}))}))}},{key:"destroy",value:function(){var e;null===(e=this._rts)||void 0===e||e.destroy()}}],[{key:"pluginName",get:function(){return"rts"}},{key:"isSupported",value:function(){return isSupported()}},{key:"getCapacity",value:function(){return getCapacity()}}]),n}(BasePlugin);function apply$2(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var nativeMax$1=Math.max;function overRest(e,t,n){return t=nativeMax$1(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=nativeMax$1(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),apply$2(e,this,s)}}function constant(e){return function(){return e}}var baseSetToString=defineProperty$f?function(e,t){return defineProperty$f(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity,baseSetToString$1=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var t=0,n=0;return function(){var r=nativeNow(),i=HOT_SPAN-(r-n);if(n=r,i>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var setToString=shortOut(baseSetToString$1),setToString$1=setToString;function baseRest(e,t){return setToString$1(overRest(e,t,identity),e+"")}function isIterateeCall(e,t,n){if(!isObject$o(n))return!1;var r=_typeof$4(t);return!!("number"==r?isArrayLike(n)&&isIndex(t,n.length):"string"==r&&t in n)&&eq(n[t],e)}function createAssigner(e){return baseRest((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&isIterateeCall(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,assign$1=createAssigner((function(e,t){if(isPrototype(t)||isArrayLike(t))copyObject(t,keys$4(t),e);else for(var n in t)hasOwnProperty.call(t,n)&&assignValue(e,n,t[n])})),assign$2=assign$1,RtmPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){return _classCallCheck$5(this,n),t.apply(this,arguments)}return _createClass$6(n,[{key:"beforeCreate",value:function(e){var t=(e.player.config.rtm||{}).backupStreamType,n={flv:window.FlvPlayer,hls:window.HlsPlayer};e.player.config.rts=assign$2({},e.player.config.rtm,{backupConstruct:n[t]})}},{key:"afterCreate",value:function(){var e=this.player;e.on("degrade",(function(){e.unRegisterPlugin("rtm")}))}}],[{key:"pluginName",get:function(){return"rtm"}}]),n}(RtsPlugin),SDKEvents=function(e){return e.PLAYER_CREATED_FINISH="player_create_finish",e.PLAYER_REBUILD="player_rebuild",e.NOT_SUPPORT_HARDWARE_DECODER="not_support_hardware_decoder",e.NOT_SUPPORT_SOFT_DECODER="not_support_soft_decoder",e.TOKEN_EXPIRED="playAuthToken_expired",e.UMD_LOAD_FAIL="umd_load_fail",e}(SDKEvents||{}),PluginEvents=function(e){return e.DANMU_CHANGE="danmu_change",e.TIME_SHIFT_CHANGE="time_shift_change",e.AI_SUBTITLE_LANG_CHANGE="ai_subtitle_lang_change",e.AI_SUBTITLE_MATCH="ai_subtitle_match",e.CANCEL_UNMUTE="cancel_unmute",e.REFRESH_CLICK="refresh_click",e.PLAY_BACKUP_CHANGE="play_backup_change",e.PLAY_BACKUP_CHANGE_FINISH="play_backup_change_finish",e.PLAY_ERROR_BUTTON_CLICK="play_error_button_click",e.PlAY_URL_CHANGE="play_url_change",e.SHOW_PLAY_ERROR="show_play_error",e.PLAYER_EXTEND_BUTTON="player_extend_button",e.LONG_WAITING="long_waiting",e.OFTEN_WAITING="often_waiting",e.DEFINITION_DEMOTE="definition_demote",e.LARKWINDOW_CHANGE="larkWindow_change",e.PANEL_MODE_CHANGE="panel_mode_change",e.INNER_DEFINITION_CHANGE="inner_definition_change",e.LINE_CHANGE="line_change",e.GET_PLAY_URL_ERR="get_play_url_err",e.MEDIA_EXPIRED="MEDIA_EXPIRED",e.MIRROR_CHANGE="mirror_change",e.TIME_SCALE_CHANGE="time_scale_change",e.MUSIC_MODE_CHANGE="music_mode_change",e.MUSIC_CHANGE="music_change",e.MUSIC_LIST_CHANGE="music_list_change",e}(PluginEvents||{}),Event$2=Object.freeze(Object.defineProperty({__proto__:null,SDKEvents:SDKEvents,PluginEvents:PluginEvents},Symbol.toStringTag,{value:"Module"})),CONTROL_ICON_INDEX={sdkDefinitionPlugin:3,DanmuPlugin:3,sdkMultilinePlugin:4,mirrorPlugin:5,Subtitle:6},MultilinePlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).playerData=null,r.playerData=r.playerConfig.playerData,r}return _createClass$6(n,[{key:"beforeCreate",value:function(e){var t=e.player.config.playerData,n=t.getLineList(),r=t.current.lineId;Array.isArray(n)&&n.length>0&&(e.config.list=n.map((function(t){return t.text=e.player.i18n[t.lineTextKey]||t.lineTextKey,t}))),e.config.defaultLine=r}},{key:"afterCreate",value:function(){_get$3(_getPrototypeOf$5(n.prototype),"afterCreate",this).call(this),this.config.list.length<2&&this.hide()}},{key:"afterPlayerInit",value:function(){}},{key:"renderItemList",value:function(){var e=this,t=this.config,r=t.list,i=t.defaultLine,o=0,a=r.map((function(t,n){var r,a={lineId:t.lineId||"",showText:e.i18n[t.lineTextKey]||t.lineTextKey,isCurrent:!1,selected:!1};return util.isUndefined(t.lineId)||(null===(r=t.lineId)||void 0===r?void 0:r.toString())!==(null==i?void 0:i.toString())||(a.isCurrent=!0,a.selected=!0,o=n),a}));_get$3(_getPrototypeOf$5(n.prototype),"renderItemList",this).call(this,a,o)}},{key:"onItemClick",value:function(e,t){this.player.emit(PluginEvents.LINE_CHANGE,{from:this.playerData.current.lineId,to:t.to.lineId}),this.playerData.current.lineId=t.to.lineId,this.player.emit(SDKEvents.PLAYER_REBUILD)}}],[{key:"pluginName",get:function(){return"sdkMultilinePlugin"}},{key:"defaultConfig",get:function(){return{position:Plugin.POSITIONS.CONTROLS_RIGHT,index:CONTROL_ICON_INDEX.sdkMultilinePlugin,list:[],defaultLine:0,className:"xgplayer-multiline",hidePortrait:!1,isShowIcon:!0}}}]),n}(OptionsIcon),DefinitionPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).playerData=null,r.toastInfo={},r.canChange=!0,r.playerData=r.playerConfig.playerData,r.dataMonitoring(),r}return _createClass$6(n,[{key:"registerLanguageTexts",value:function(){return{switching:{jp:"\u306b\u5207\u308a\u66ff\u3048\u308b",en:"Switching to",zh:"\u6b63\u5728\u5207\u6362\u81f3","zh-hk":"\u6b63\u5728\u5207\u63db\u81f3"}}}},{key:"beforeCreate",value:function(e){this.toastInfo={},this.canChange=!0;var t=this.getConfig(e.player),n=t.defaultDefinition,r=t.list;e.config.defaultDefinition=n,e.config.list=r}},{key:"getConfig",value:function(e){var t=this,n={list:[],defaultDefinition:""},r=e.config.playerData;this.toastInfo={},this.canChange=!0;var i=r.current,o=i.lineId,a=i.definition,s=r.getDefinitionListByLineId(o);return Array.isArray(s)&&s.length>0&&(n.list=s.map((function(n){return n.text||(n.text=t.getShowText(e.i18n,n)),n}))),n.defaultDefinition=a,n}},{key:"dataMonitoring",value:function(){var e=this;MyProxy$1.subscribeProperty(this.playerData.current,"definition",(function(t,n){if(e.canChange&&t!==n&&e.player){var r=e.config.list,i=(void 0===r?[]:r).find((function(e){return e.definition===n}));i&&i.url&&(e.player.changeDefinition(_objectSpread2$5(_objectSpread2$5({},i),{},{definition:n,url:i.url})),e.player.emit(PluginEvents.INNER_DEFINITION_CHANGE,{from:t,to:n,url:i.url}),e.player.emit(PluginEvents.PlAY_URL_CHANGE,{url:i.url,from:PluginEvents.INNER_DEFINITION_CHANGE}),e.renderItemList(n),setTimeout((function(){e.player.ended?e.player.replay():e.player.paused&&e.player.play()}),1e3))}}))}},{key:"showToast",value:function(e){var t,n=this,r=null===(t=this.player)||void 0===t?void 0:t.getPlugin("sdkToastPlugin");if(r){var i=e.showText,o=r.add("".concat(this.langText.switching).concat(i,"..."),0,!0);this.toastInfo[o]={showTime:Date.now(),delayClose:!1},setTimeout((function(){var e;null!==(e=n.toastInfo[o])&&void 0!==e&&e.delayClose&&(r.remove(o),n.toastInfo[o].delayClose=!1)}),2e3),this.player.once(AFTER_DEFINITION_CHANGE,(function(){var e;Date.now()-(null===(e=n.toastInfo[o])||void 0===e?void 0:e.showTime)>2e3?r.remove(o):n.toastInfo[o].delayClose=!0}))}}},{key:"afterCreate",value:function(){_get$3(_getPrototypeOf$5(n.prototype),"afterCreate",this).call(this),this.config.list&&this.config.list.length>0&&(this.config.list.length<2?this.hide():(this.renderItemList(this.config.list),this.show()))}},{key:"afterPlayerInit",value:function(){}},{key:"getShowText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e[t.definitionTextKey]||t.definitionTextKey||t.definition}},{key:"renderItemList",value:function(e){var t=this,r=this.config,i=r.list,o=r.defaultDefinition,a=0,s=i.map((function(n,r){var i={url:n.url,definition:n.definition||"",showText:t.getShowText(t.i18n,n),isCurrent:!1,selected:!1},s="string"==typeof e?n.definition===e:n.definition===o;return!util.isUndefined(n.definition)&&s&&(i.isCurrent=!0,i.selected=!0,a=r),i}));_get$3(_getPrototypeOf$5(n.prototype),"renderItemList",this).call(this,s,a)}},{key:"onItemClick",value:function(e,t){this.showToast(t.to),this.playerData.current.definition=t.to.definition}}],[{key:"pluginName",get:function(){return"sdkDefinitionPlugin"}},{key:"defaultConfig",get:function(){return{position:Plugin.POSITIONS.CONTROLS_RIGHT,index:CONTROL_ICON_INDEX.sdkDefinitionPlugin,list:[],defaultDefinition:"",hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(OptionsIcon),UnmutePlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).state={isSupportAutoplay:!0,showUnmuteBt:!1},r}return _createClass$6(n,[{key:"beforePlayerInit",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"afterCreate",value:function(){this.player.autoplay&&this.player.config.autoplayMuted&&this.initEvents()}},{key:"registerLanguageTexts",value:function(){return{unmute:{jp:"\u30df\u30e5\u30fc\u30c8\u3092\u89e3\u9664\u3059\u308b",en:"Click to unmute",zh:"\u70b9\u51fb\u53d6\u6d88\u9759\u97f3","zh-hk":"\u9ede\u64ca\u53d6\u6d88\u975c\u97f3"}}}},{key:"updateLang",value:function(){this.renderUnmuteBt()}},{key:"initEvents",value:function(){this.player.once("autoplay_was_prevented",this.handleAutoplayPrevented.bind(this)),this.player.once("autoplay_started",this.handleAutoplayStart.bind(this)),this.player.once("volumechange",this.handleVolumechange.bind(this))}},{key:"handleAutoplayPrevented",value:function(){console.warn("\u9759\u97f3\u81ea\u52a8\u542f\u64ad\u5931\u8d25"),this.state.isSupportAutoplay=!1,this.player.muted=!1}},{key:"handleAutoplayStart",value:function(){this.state.isSupportAutoplay?(this.state.showUnmuteBt=!0,this.renderUnmuteBt()):this.player.muted=!1}},{key:"handleVolumechange",value:function(){this.state.showUnmuteBt=!1,this.renderUnmuteBt(),this.player.paused&&this.player.readyState>=1&&this.player.play()}},{key:"renderUnmuteBt",value:function(){var e=this.root;if(e&&(e.innerHTML="",this.state.showUnmuteBt)){var t=this.langText.unmute,n=util.createDom("div",t,void 0,"xgplayer-unmute-bt");e.appendChild(n),this.bind(".xgplayer-unmute-bt","click",this.cancelUnmute.bind(this))}}},{key:"cancelUnmute",value:function(){this.player.muted=!1,this.state.showUnmuteBt=!1,this.renderUnmuteBt(),this.player.emit(PluginEvents.CANCEL_UNMUTE)}},{key:"destroy",value:function(){this.player.off("autoplay_was_prevented",this.handleAutoplayPrevented.bind(this)),this.player.off("autoplay_started",this.handleAutoplayStart.bind(this)),this.player.off("volumechange",this.handleVolumechange.bind(this))}},{key:"render",value:function(){return'<div class="xgplayer-unmute"></div>'}}],[{key:"pluginName",get:function(){return"sdkUnmutePlugin"}},{key:"defaultConfig",get:function(){return{position:Plugin.POSITIONS.ROOT}}}]),n}(Plugin);function refreshSVG$1(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 2.488a7.48 7.48 0 00-4.154 1.253.908.908 0 101.005 1.512 5.695 5.695 0 018.844 4.746h-.908a.33.33 0 00-.264.528l1.816 2.422a.33.33 0 00.529 0l1.815-2.422A.33.33 0 0018.42 10h-.908A7.511 7.511 0 0010 2.49zM2.489 10a7.511 7.511 0 0011.665 6.26.908.908 0 00-1.005-1.513A5.695 5.695 0 014.305 10h.908a.33.33 0 00.264-.528L3.66 7.05a.33.33 0 00-.528 0L1.317 9.47a.33.33 0 00.264.53h.908z" fill="#fff"/></svg>',"image/svg+xml").firstChild}var now=function(){return root$1.Date.now()},now$1=now,reWhitespace=/\s/;function trimmedEndIndex(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var reTrimStart=/^\s+/;function baseTrim(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,""):e}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol$7(e))return NAN;if(isObject$o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=baseTrim(e);var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(e,t,n){var r,i,o,a,s,c,l=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);function f(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function p(e){return l=e,s=setTimeout(y,t),u?f(e):a}function g(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function y(){var e=now$1();if(g(e))return v(e);s=setTimeout(y,function(e){var n=t-(e-c);return d?nativeMin(n,o-(e-l)):n}(e))}function v(e){return s=void 0,h&&r?f(e):(r=i=void 0,a)}function m(){var e=now$1(),n=g(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return p(c);if(d)return clearTimeout(s),s=setTimeout(y,t),f(c)}return void 0===s&&(s=setTimeout(y,t)),a}return t=toNumber(t)||0,isObject$o(n)&&(u=!!n.leading,o=(d="maxWait"in n)?nativeMax(toNumber(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},m.flush=function(){return void 0===s?a:v(now$1())},m}var POSITIONS$9=Plugin.POSITIONS,RefreshPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){return _classCallCheck$5(this,n),t.apply(this,arguments)}return _createClass$6(n,[{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.refresh),this.initEvents()}},{key:"registerIcons",value:function(){return{refresh:{icon:refreshSVG$1,class:"xgplayer-refresh-svg"}}}},{key:"registerLanguageTexts",value:function(){return{refresh:{jp:"\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5",en:"Refresh",zh:"\u5237\u65b0","zh-hk":"\u5237\u65b0"}}}},{key:"initEvents",value:function(){this.handleRefresh=debounce$1(this.handleRefresh.bind(this),200);var e="mobile"===sniffer$1.device?"touchend":"click";this.bind(e,this.handleRefresh),this.show()}},{key:"handleRefresh",value:function(e){var t=this.player;t&&(e.preventDefault(),e.stopPropagation(),t.addClass("xgplayer-is-enter"),t.pause(),t.emit(PluginEvents.REFRESH_CLICK),setTimeout((function(){t&&t.retry(),t.once("canplay",(function(){t.removeClass("xgplayer-is-enter")}))})))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.handleRefresh)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-refresh">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="refresh">'.concat(this.langText.refresh,"</div>\n    </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"refresh"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$9.CONTROLS_LEFT,index:1}}}]),n}(Plugin);function MoreIconSVG(){return(new DOMParser).parseFromString('<svg width="18" height="18" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.75 11C5.75 11.9665 4.9665 12.75 4 12.75C3.0335 12.75 2.25 11.9665 2.25 11C2.25 10.0335 3.0335 9.25 4 9.25C4.9665 9.25 5.75 10.0335 5.75 11ZM13.25 11C13.25 11.9665 12.4665 12.75 11.5 12.75C10.5335 12.75 9.75 11.9665 9.75 11C9.75 10.0335 10.5335 9.25 11.5 9.25C12.4665 9.25 13.25 10.0335 13.25 11ZM19 12.75C19.9665 12.75 20.75 11.9665 20.75 11C20.75 10.0335 19.9665 9.25 19 9.25C18.0335 9.25 17.25 10.0335 17.25 11C17.25 11.9665 18.0335 12.75 19 12.75Z" fill="white"/>\n</svg>\n',"image/svg+xml").firstChild}var MoreButtonPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).panel=null,r.panelContainer=null,r}return _createClass$6(n,[{key:"beforePlayerInit",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"afterCreate",value:function(){this.renderMoreIcon()}},{key:"updateLang",value:function(e){if(this.panelContainer){var t=this.panelContainer.querySelectorAll(".panel-icon-bt-text"),n=this.getAndSplitList().extraList;t.forEach((function(t){var r,i,o=Number(t.getAttribute("plugin-index"));null!==(r=n[o])&&void 0!==r&&null!==(i=r.textTips)&&void 0!==i&&i[e]&&(t.innerHTML=n[o].textTips[e])}))}}},{key:"registerIcons",value:function(){return{more:{icon:MoreIconSVG,class:"xgplayer-more-svg"}}}},{key:"getAndSplitList",value:function(){var e,t,n,r,i,o=(null!==(e=this.player.config.ignores)&&void 0!==e?e:[]).map((function(e){return e.toLowerCase()})),a=this.config.iconPlugins.filter((function(e){return!o.includes(e.pluginName.toLowerCase())}));return a.length>this.config.maxShowNum+1?(r=a.slice(0,this.config.maxShowNum),i=a.slice(-(a.length-this.config.maxShowNum))):r=_toConsumableArray$1(a),{list:null!==(t=r)&&void 0!==t?t:[],extraList:null!==(n=i)&&void 0!==n?n:[]}}},{key:"children",value:function(){var e=this,t=this.getAndSplitList().list,n={};return t.forEach((function(t){n[t.pluginName]={plugin:t,options:{root:e.root}}})),n}},{key:"renderMoreIcon",value:function(){var e=this,t=this.getAndSplitList().extraList;if(0!==t.length){var n=this.root,r=util.createDom("div","",{},"xgplayer-icon");r.appendChild(this.icons.more),r.addEventListener("click",(function(){e.renderPanel(t)}));var i=util.createDom("xg-icon","",{"data-index":0},"xgplayer-more");i.appendChild(r),n.appendChild(i)}}},{key:"renderPanel",value:function(e){var t=this;this.panelContainer||(this.panelContainer=util.createDom("div","",{},"panel-content"),e.forEach((function(e,n){var r,i,o=util.createDom("div","",{},"panel-icon-bt"),a=util.createDom("div","",{},"panel-icon-svg");o.appendChild(a),t.registerExtraPlugin(e,a);var s="zh-cn"===t.player.lang?"zh":t.player.lang,c=null!==(r=null===(i=e.textTips)||void 0===i?void 0:i[s])&&void 0!==r?r:e.pluginName;o.appendChild(util.createDom("span",c,{"plugin-index":n},"panel-icon-bt-text")),t.panelContainer.appendChild(o)}))),this.player.panel.showPanel(this.panelContainer)}},{key:"registerExtraPlugin",value:function(e,t){this.player.registerPlugin({plugin:e,options:{root:t}})}},{key:"destroy",value:function(){}},{key:"render",value:function(){return'<div class="xgplayer-rightTop-iconList"></div>'}}],[{key:"pluginName",get:function(){return"MoreButtonPlugin"}},{key:"defaultConfig",get:function(){return{position:Plugin.POSITIONS.ROOT_TOP,iconPlugins:[],maxShowNum:2}}}]),n}(Plugin);function ErrorImg(){return(new DOMParser).parseFromString('<svg width="150" height="162" viewBox="0 0 150 162" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M127.718 112.831H6.13675C4.19663 112.831 2.25651 108.974 2.90322 104.475C3.54993 99.9761 8.07687 99.9761 13.8972 99.9761C11.9571 97.4052 9.37028 88.4069 15.8373 81.3369C22.3044 74.2668 25.5379 74.2668 34.5918 75.5526C33.9451 63.9837 47.526 34.4178 77.2744 35.0605C107.023 35.7032 116.077 54.3421 119.957 63.3404C129.011 62.6976 147.765 66.554 149.706 87.1214C151.258 103.575 135.694 111.117 127.718 112.831Z" fill="#F1F4F8"/>\n<path d="M44.9346 91.6022L43.6782 99.8032" stroke="#D0D6E0" stroke-width="2" stroke-linecap="round"/>\n<path d="M47.3545 125.695L48.6109 117.494" stroke="#D0D6E0" stroke-width="2" stroke-linecap="round"/>\n<path d="M31.5347 97.7378L38.7295 101.869" stroke="#D0D6E0" stroke-width="2" stroke-linecap="round"/>\n<path d="M60.7544 119.559L53.5595 115.428" stroke="#D0D6E0" stroke-width="2" stroke-linecap="round"/>\n<path d="M69.6755 44.5318L138.35 26.0209C139.115 25.8148 139.804 26.5367 139.563 27.2909L121.081 85.1146C120.982 85.4243 120.739 85.6665 120.429 85.7641L52.0645 107.28C51.2996 107.521 50.5766 106.809 50.8062 106.04L68.9776 45.2111C69.0768 44.879 69.3409 44.622 69.6755 44.5318Z" fill="#D0D6E0" stroke="#D0D6E0" stroke-width="4" stroke-linecap="round"/>\n<path d="M83.1285 52.7415C91.6454 54.3438 107.322 62.0019 101.894 79.8155" stroke="white" stroke-width="3" stroke-linecap="round"/>\n<path d="M84.138 62.3385C88.3894 63.1384 96.2148 66.9611 93.5053 75.8531" stroke="white" stroke-width="3" stroke-linecap="round"/>\n<ellipse cx="83.6417" cy="71.98" rx="3.08443" ry="3.07025" transform="rotate(12.6375 83.6417 71.98)" fill="white"/>\n<path d="M43.4699 110.358C39.5425 109.114 30.6316 108.203 26.4077 114.511C21.1278 122.397 36.5031 152.755 2.11053 160.141" stroke="#D0D6E0" stroke-width="2" stroke-linecap="round"/>\n</svg>\n',"image/svg+xml").firstChild}var ErrorPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).playerData=null,r.state={showError:!1,retryTimes:0,idx:0},r._errDetailList=[],r.playerData=e.player.config.playerData,r}return _createClass$6(n,[{key:"afterCreate",value:function(){var e,t,n;this.initEvents(),this.errNoteMap={other:null!==(e=null===(t=this.i18n.ERROR_TYPES)||void 0===t||null===(n=t.other)||void 0===n?void 0:n.msg)&&void 0!==e?e:"error",1:this.i18n.MEDIA_ERR_ABORTED,2:this.i18n.MEDIA_ERR_NETWORK,3:this.i18n.MEDIA_ERR_DECODE,4:this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED,2100:this.i18n.NETWORK_ERROR,2101:this.i18n.NETWORK_TIMEOUT,9100:this.i18n.GET_URL_ERR_BY_TOKEN,9101:this.i18n.PLAY_AUTH_TOKEN_EXPIRED,9102:this.i18n.HLS_KEY_TOKEN_EXPIRED,5200:this.i18n.MEDIA_SOURCE_CANNOT_PLAY_TYPE}}},{key:"registerLanguageTexts",value:function(){return{clickButton:{jp:"\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5",en:"Refresh",zh:"\u5237\u65b0","zh-hk":"\u5237\u65b0"},errorTips:{jp:"\u518d\u751f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002[\u66f4\u65b0]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a66\u3057\u3066\u304f\u3060\u3055\u3044",en:"An error occurred while playing, click refresh to try",zh:"\u64ad\u653e\u53d1\u751f\u9519\u8bef\uff0c\u70b9\u51fb\u5237\u65b0\u8bd5\u8bd5\u5427","zh-hk":"\u64ad\u653e\u767c\u751f\u932f\u8aa4\uff0c\u9ede\u64ca\u5237\u65b0\u8a66\u8a66\u5427"}}}},{key:"registerIcons",value:function(){return{errorImg:{icon:ErrorImg,class:"xgplayer-error-svg"}}}},{key:"updateLang",value:function(){if(this.$errorDom){var e=this.$errorDom.querySelector(".xgplayer-error-tips");if(e){var t,n,r=null!==(t=null===(n=this.config.errorTipsText)||void 0===n?void 0:n[this.lang])&&void 0!==t?t:this.langText.errorTips;e.innerHTML=r}var i=this.$errorDom.querySelector(".xgplayer-error-button");i&&(i.innerHTML=this.langText.clickButton)}}},{key:"initEvents",value:function(){this.player.on(ERROR$3,this.handleError.bind(this)),this.playerData.isLive&&(this.player.on(ENDED,this.handleEnd.bind(this)),this.player.on(PluginEvents.REFRESH_CLICK,this.closeError.bind(this))),this.on(CANPLAY,this.closeError.bind(this)),this.on(PLAY,this.closeError.bind(this))}},{key:"handleError",value:function(e){this.player&&this.player.pause(),this.config.isNeedDemoteBack?(this.state.showError=!1,this.changeMainOrBackup()):this.state.showError=!0,this.renderError(e)}},{key:"handleEnd",value:function(){this.player&&this.player.pause(),this.config.isNeedDemoteBack&&this.changeMainOrBackup()}},{key:"getRetryList",value:function(){var e,t=this.playerData.getCurrentStreams()[0];return[null==t?void 0:t.url].concat(_toConsumableArray$1(null!==(e=null==t?void 0:t.backUrlList)&&void 0!==e?e:[]))}},{key:"changeMainOrBackup",value:function(){var e=this;this.player.addClass(STATE_CLASS.ENTER);var t=this.getRetryList(),n=this.config.retryLoopNum*t.length,r=(t.indexOf(this.player.config.url)+1)%t.length;this.state.idx=r;var i=t[r];if(!i||this.state.retryTimes===n)return this.player.removeClass(STATE_CLASS.ENTER),this.state.retryTimes===n&&this.player.emit(PluginEvents.PLAY_BACKUP_CHANGE_FINISH),this.state.showError=!0,this.renderError(),void this.resetTimes();this.player.once("canplay",(function(){e.state.retryTimes=0})),console.log("\u91cd\u8bd5\u7b2c".concat(this.state.retryTimes,"\u6b21"),i),this.player.emit(PluginEvents.PLAY_BACKUP_CHANGE,{currentUrl:this.player.config.url,nextUrl:i,retryTimes:this.state.retryTimes}),this.changeUrl(i),this.state.retryTimes=this.state.retryTimes+1}},{key:"changeUrl",value:function(e){this.player.config.url=e,this.player.switchURL(e,!1),this.player.emit(PluginEvents.PlAY_URL_CHANGE,{url:e,from:PluginEvents.PLAY_BACKUP_CHANGE})}},{key:"resetTimes",value:function(){this.state.retryTimes=0,this.state.idx=0}},{key:"renderError",value:function(e){var t=this.root;t&&(t.innerHTML="",t.style.display="none",this.state.showError&&(this.player.emit(PluginEvents.SHOW_PLAY_ERROR),t.style.display="block",t.appendChild(this.getErrorDom(e))))}},{key:"addErrDetail",value:function(e){Array.isArray(e)?this._errDetailList=[].concat(_toConsumableArray$1(this._errDetailList),_toConsumableArray$1(e)):this._errDetailList.push(e)}},{key:"getErrorDom",value:function(e){var t=this;if(!this.$errorDom){var n,r;if(this.$errorDom=util.createDom("div","",void 0,"xgplayer-error-cover"),this.config.errorImg){var i=util.createDom("div","",void 0,"xgplayer-error-img");i.appendChild(this.icons.errorImg),this.$errorDom.appendChild(i)}if(this.config.errorTips){var o="";if(e){var a,s,c=e.errorCode,l=this.player.errorNote?this.i18n[this.player.errorNote]:"";l||(l=null!==(a=null!==(s=this.errNoteMap[c])&&void 0!==s?s:this.errNoteMap.other)&&void 0!==a?a:"error"),o=l}else{var u,d;o=null!==(u=null===(d=this.config.errorTipsText)||void 0===d?void 0:d[this.lang])&&void 0!==u?u:this.langText.errorTips}var h=util.createDom("div",o,void 0,"xgplayer-error-tips");this.$errorDom.appendChild(h)}if(this.config.isNeedRefreshButton){var f=util.createDom("div",this.langText.clickButton,void 0,"xgplayer-error-button");this.bind(".xgplayer-error-button","click",this.handleButtonClick.bind(this)),this.$errorDom.appendChild(f)}null!==(n=this._errDetailList)&&void 0!==n&&n.length&&(null===(r=this._errDetailList)||void 0===r||r.forEach((function(e){var n="function"==typeof e?e():e;if(n){var r=util.createDom("div","".concat(n.label,": ").concat(n.value),void 0,"xgplayer-error-detail-info");t.$errorDom.appendChild(r)}}))),this.emit("sdkerrorplugin_render",this.$errorDom)}return this.$errorDom}},{key:"handleButtonClick",value:function(){var e,t;null===(e=this.player)||void 0===e||e.emit(PluginEvents.PLAY_ERROR_BUTTON_CLICK),null===(t=this.player)||void 0===t||t.retry(),this.closeError()}},{key:"closeError",value:function(){this.state.showError=!1,this.renderError()}},{key:"destroy",value:function(){this.player.off(ERROR$3,this.handleError.bind(this)),this.playerData.isLive&&this.player.off(ENDED,this.handleEnd.bind(this))}},{key:"render",value:function(){return'<xgplayer-error class="xgplayer-error"></xgplayer-error>'}}],[{key:"pluginName",get:function(){return"sdkErrorPlugin"}},{key:"defaultConfig",get:function(){return{errorImg:!0,errorTips:!0,isNeedRefreshButton:!0,isNeedDemoteBack:!1,retryLoopNum:1,errorTipsText:null,position:Plugin.POSITIONS.ROOT}}}]),n}(Plugin);function danmuActiveSVG$1(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.106h-13a.3.3 0 00-.3.3v11.186a.3.3 0 00.3.3h7.111v1.7H3.5a2 2 0 01-2-2V4.406a2 2 0 012-2h13a2 2 0 012 2V10h-1.7V4.406a.3.3 0 00-.3-.3zM6 7.722c0-.42.34-.76.76-.76h6.58a.76.76 0 110 1.52H6.76a.76.76 0 01-.76-.76zm0 3.037c0-.42.34-.759.76-.759h3.543a.76.76 0 110 1.519H6.76a.76.76 0 01-.76-.76z" fill="#fff"/><circle cx="15.1" cy="14.201" r="3.4" fill="#3370FF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13.185 13.756a.5.5 0 01.707 0l.866.866 1.78-1.78a.5.5 0 11.707.707l-2.133 2.134a.5.5 0 01-.707 0l-1.22-1.22a.5.5 0 010-.707z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function Default(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.106h-13a.3.3 0 00-.3.3v11.186a.3.3 0 00.3.3h7.111v1.7H3.5a2 2 0 01-2-2V4.406a2 2 0 012-2h13a2 2 0 012 2V10h-1.7V4.406a.3.3 0 00-.3-.3zM6 7.722c0-.42.34-.76.76-.76h6.58a.76.76 0 110 1.52H6.76a.76.76 0 01-.76-.76zm0 3.037c0-.42.34-.759.76-.759h3.543a.76.76 0 110 1.519H6.759a.76.76 0 01-.759-.76zm7.202 2.303a2.2 2.2 0 003.011 3.011l-3.011-3.01zm3.915 1.992a2.2 2.2 0 00-2.896-2.896l2.896 2.896zm1.383-.879a3.4 3.4 0 11-6.8 0 3.4 3.4 0 016.8 0z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function resetIcon(){return(new DOMParser).parseFromString('<svg fill="none" stroke="currentColor" stroke-width="4" viewBox="0 0 48 48" width="1em" height="1em"\n    class="arco-icon arco-icon-refresh">\n    <path\n        d="M38.837 18C36.463 12.136 30.715 8 24 8 15.163 8 8 15.163 8 24s7.163 16 16 16c7.455 0 13.72-5.1 15.496-12M40 8v10H30">\n    </path>\n</svg>',"image/svg+xml").firstChild}function ownerDocument(e){return e&&e.ownerDocument||document}function activeElement(e){void 0===e&&(e=ownerDocument());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(n){return e.body}}function hasClass(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}function addClass(e,t){e.classList?e.classList.add(t):hasClass(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),optionsSupported=!1,onceSupported=!1;try{var options={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM&&(window.addEventListener("test",options,options),window.removeEventListener("test",options,!0))}catch(e2){}function addEventListener(e,t,n,r){if(r&&"boolean"!=typeof r&&!onceSupported){var i=r.once,o=r.capture,a=n;!onceSupported&&i&&(a=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=a),e.addEventListener(t,a,optionsSupported?r:o)}e.addEventListener(t,n,r)}function ownerWindow(e){var t=ownerDocument(e);return t&&t.defaultView||window}function getComputedStyle(e,t){return ownerWindow(e).getComputedStyle(e,t)}var rUpper=/([A-Z])/g;function hyphenate(e){return e.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName(e){return hyphenate(e).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform(e){return!(!e||!supportedTransforms.test(e))}function style(e,t){var n="",r="";if("string"==typeof t)return e.style.getPropertyValue(hyphenateStyleName(t))||getComputedStyle(e).getPropertyValue(hyphenateStyleName(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?isTransform(i)?r+=i+"("+o+") ":n+=hyphenateStyleName(i)+": "+o+";":e.style.removeProperty(hyphenateStyleName(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}function removeEventListener(e,t,n,r){var i=r&&"boolean"!=typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}function listen(e,t,n,r){return addEventListener(e,t,n,r),function(){removeEventListener(e,t,n,r)}}function triggerEvent(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}function parseDuration(e){var t=style(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}function emulateTransitionEnd(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||triggerEvent(e,"transitionend",!0)}),t+n),o=listen(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function transitionEnd(e,t,n,r){null==n&&(n=parseDuration(e)||0);var i=emulateTransitionEnd(e,n,r),o=listen(e,"transitionend",t);return function(){i(),o()}}var reset={transition:"","transition-duration":"","transition-delay":"","transition-timing-function":""};function _animate(e){var t=e.node,n=e.properties,r=e.duration,i=void 0===r?200:r,o=e.easing,a=e.callback,s=[],c={},l="";Object.keys(n).forEach((function(e){var t=n[e];isTransform(e)?l+=e+"("+t+") ":(c[e]=t,s.push(hyphenate(e)))})),l&&(c.transform=l,s.push("transform")),i>0&&(c.transition=s.join(", "),c["transition-duration"]=i/1e3+"s",c["transition-delay"]="0s",c["transition-timing-function"]=o||"linear");var u=transitionEnd(t,(function(e){e.target===e.currentTarget&&(style(t,reset),a&&a.call(this,e))}),i);return t.clientLeft,style(t,c),{cancel:function(){u(),style(t,reset)}}}function animate(e,t,n,r,i){if(!("nodeType"in e))return _animate(e);if(!t)throw new Error("must include properties to animate");return"function"==typeof r&&(i=r,r=""),_animate({node:e,properties:t,duration:n,easing:r,callback:i})}var prev=(new Date).getTime();function fallback(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-prev)),r=setTimeout(e,n);return prev=t,r}var vendors=["","webkit","moz","o","ms"],cancelMethod="clearTimeout",rafImpl=fallback,getKey=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};canUseDOM&&vendors.some((function(e){var t=getKey(e,"request");return t in window&&(cancelMethod=getKey(e,"cancel"),rafImpl=function(e){return window[t](e)}),!!rafImpl}));var cancel=function(e){"function"==typeof window[cancelMethod]&&window[cancelMethod](e)},request$1=rafImpl,matchesImpl;function attribute(e,t,n){if(e){if(void 0===n)return e.getAttribute(t);n||""===n?e.setAttribute(t,String(n)):e.removeAttribute(t)}}function childElements(e){return e?Array.from(e.children):[]}function clear(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}return null}function matches(e,t){if(!matchesImpl){var n=document.body,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;matchesImpl=function(e,t){return r.call(e,t)}}return matchesImpl(e,t)}function closest(e,t,n){e.closest&&!n&&e.closest(t);var r=e;do{if(matches(r,t))return r;r=r.parentElement}while(r&&r!==n&&r.nodeType===document.ELEMENT_NODE);return null}function contains(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var toArray$1=Function.prototype.bind.call(Function.prototype.call,[].slice);function childNodes(e){return e?toArray$1(e.childNodes):[]}var toArray=Function.prototype.bind.call(Function.prototype.call,[].slice);function qsa(e,t){return toArray(e.querySelectorAll(t))}function filterEvents(e,t){return function(n){var r=n.currentTarget,i=n.target;qsa(r,e).some((function(e){return contains(e,i)}))&&t.call(this,n)}}function isDocument(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function isWindow(e){return"window"in e&&e.window===e?e:isDocument(e)&&e.defaultView||!1}function getscrollAccessor(e){var t="pageXOffset"===e?"scrollLeft":"scrollTop";return function(n,r){var i=isWindow(n);if(void 0===r)return i?i[e]:n[t];i?i.scrollTo(i[e],r):n[t]=r}}var scrollLeft=getscrollAccessor("pageXOffset"),scrollTop=getscrollAccessor("pageYOffset");function offset(e){var t=ownerDocument(e),n={top:0,left:0,height:0,width:0},r=t&&t.documentElement;return r&&contains(r,e)?(void 0!==e.getBoundingClientRect&&(n=e.getBoundingClientRect()),n={top:n.top+scrollTop(r)-(r.clientTop||0),left:n.left+scrollLeft(r)-(r.clientLeft||0),width:n.width,height:n.height}):n}function height(e,t){var n=isWindow(e);return n?n.innerHeight:t?e.clientHeight:offset(e).height}function insertAfter(e,t){return e&&t&&t.parentNode?(t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e):null}var regExpInputs=/^(?:input|select|textarea|button)$/i;function isInput(e){return!!e&&regExpInputs.test(e.nodeName)}function isVisible(e){return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function collectSiblings(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);for(var r=[];e;e=e.nextElementSibling)if(e!==t){if(n&&matches(e,n))break;r.push(e)}return r}function nextUntil(e,t){return collectSiblings(e,e,t)}var isHTMLElement=function(e){return!!e&&"offsetParent"in e};function offsetParent(e){for(var t=ownerDocument(e),n=e&&e.offsetParent;isHTMLElement(n)&&"HTML"!==n.nodeName&&"static"===style(n,"position");)n=n.offsetParent;return n||t.documentElement}function collectElements(e,t){var n=null,r=[];for(n=e?e[t]:null;n&&9!==n.nodeType;)r.push(n),n=n[t]||null;return r}function parents(e){return collectElements(e,"parentElement")}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var nodeName=function(e){return e.nodeName&&e.nodeName.toLowerCase()},size;function position(e,t){var n,r={top:0,left:0};if("fixed"===style(e,"position"))n=e.getBoundingClientRect();else{var i=t||offsetParent(e);n=offset(e),"html"!==nodeName(i)&&(r=offset(i));var o=String(style(i,"borderTopWidth")||0);r.top+=parseInt(o,10)-scrollTop(i)||0;var a=String(style(i,"borderLeftWidth")||0);r.left+=parseInt(a,10)-scrollLeft(i)||0}var s=String(style(e,"marginTop")||0),c=String(style(e,"marginLeft")||0);return _extends({},n,{top:n.top-r.top-(parseInt(s,10)||0),left:n.left-r.left-(parseInt(c,10)||0)})}function prepend(e,t){return e&&t?(t.firstElementChild?t.insertBefore(e,t.firstElementChild):t.appendChild(e),e):null}function remove(e){return e&&e.parentNode?(e.parentNode.removeChild(e),e):null}function replaceClassName(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=replaceClassName(e.className,t):e.setAttribute("class",replaceClassName(e.className&&e.className.baseVal||"",t))}function scrollbarSize(e){if((!size&&0!==size||e)&&canUseDOM){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),size=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return size}function scrollParent(e,t){var n=style(e,"position"),r="absolute"===n,i=e.ownerDocument;if("fixed"===n)return i||document;for(;(e=e.parentNode)&&!isDocument(e);){var o=r&&"static"===style(e,"position"),a=(style(e,"overflow")||"")+(style(e,"overflow-y")||"")+style(e,"overflow-x");if(!o&&/(auto|scroll)/.test(a)&&(t||height(e)<e.scrollHeight))return e}return i||document}function scrollTo(e,t){var n=offset(e),r={top:0,left:0};if(e){var i=t||scrollParent(e),o=isWindow(i),a=scrollTop(i),s=height(i,!0);o||(r=offset(i));var c=(n={top:n.top-r.top,left:n.left-r.left,height:n.height,width:n.width}).height,l=n.top+(o?0:a),u=l+c;a=a>l?l:u>a+s?u-s:a;var d=request$1((function(){return scrollTop(i,a)}));return function(){return cancel(d)}}}function siblings(e){return collectSiblings(e&&e.parentElement?e.parentElement.firstElementChild:null,e)}var regExpNbspEntity=/&nbsp;/gi,regExpNbspHex=/\xA0/g,regExpSpaces=/\s+([^\s])/gm;function text(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0);var r="";return e&&(r=(e.textContent||"").replace(regExpNbspEntity," ").replace(regExpNbspHex," "),t&&(r=r.trim()),n&&(r=r.replace(regExpSpaces," $1"))),r}function toggleClass(e,t){e.classList?e.classList.toggle(t):hasClass(e,t)?removeClass(e,t):addClass(e,t)}function getWidth(e,t){var n=isWindow(e);return n?n.innerWidth:t?e.clientWidth:offset(e).width}var helpers={addEventListener:addEventListener,removeEventListener:removeEventListener,triggerEvent:triggerEvent,animate:animate,filter:filterEvents,listen:listen,style:style,getComputedStyle:getComputedStyle,attribute:attribute,activeElement:activeElement,ownerDocument:ownerDocument,ownerWindow:ownerWindow,requestAnimationFrame:request$1,cancelAnimationFrame:cancel,matches:matches,height:height,width:getWidth,offset:offset,offsetParent:offsetParent,position:position,contains:contains,scrollbarSize:scrollbarSize,scrollLeft:scrollLeft,scrollParent:scrollParent,scrollTo:scrollTo,scrollTop:scrollTop,querySelectorAll:qsa,closest:closest,addClass:addClass,removeClass:removeClass,hasClass:hasClass,toggleClass:toggleClass,transitionEnd:transitionEnd,childNodes:childNodes,childElements:childElements,nextUntil:nextUntil,parents:parents,siblings:siblings,clear:clear,insertAfter:insertAfter,isInput:isInput,isVisible:isVisible,prepend:prepend,remove:remove,text:text},FUNC_ERROR_TEXT="Expected a function";function throttle(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);return isObject$o(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),debounce$1(e,t,{leading:r,maxWait:t,trailing:i})}var Slider=function(){function e(t,n){_classCallCheck$5(this,e),this.ticks=[],this.range=[0,100],this.currentValue=0,this.currentTick={name:"",val:0,renderVal:0},this.buttonStatus=1,this.startClientX=0,this.wrapperWidth=1,this.wrapperLeft=0,this.handleChange=function(){},this.parent=t,this.ticks=n.ticks,this.itemProps=n,this.sliderTitle=document.createElement("div"),this.sliderTitle.innerHTML=n.name,this.sliderContent=document.createElement("div"),this.sliderValue=document.createElement("div"),this.wrapper=document.createElement("div"),this.inner=document.createElement("div"),this.button=document.createElement("div"),helpers.addClass(this.wrapper,"wrapper"),helpers.addClass(this.parent,"xg-player-slider"),helpers.addClass(this.sliderContent,"line-slider"),helpers.addClass(this.sliderTitle,"line-title"),helpers.addClass(this.sliderValue,"line-value"),this.renderTicks(),this.rendInner(),this.parent.appendChild(this.sliderTitle),this.parent.appendChild(this.sliderContent),this.parent.appendChild(this.sliderValue),this.sliderContent.appendChild(this.wrapper),this.bindEvents(),this.setValue(n.defaultValue)}return _createClass$6(e,[{key:"renderTicks",value:function(){var e=this.wrapper,t=document.createElement("div");helpers.addClass(t,"ticks");for(var n=1;n<this.ticks.length-1;n++){var r=this.ticks[n],i=document.createElement("div");helpers.addClass(i,"tick"),helpers.style(i,{left:r.val+"%"}),t.appendChild(i)}e.appendChild(t)}},{key:"rendInner",value:function(){var e=this.wrapper,t=this.inner;helpers.addClass(t,"inner");var n=this.button;helpers.addClass(n,"button"),e.appendChild(t),e.appendChild(n)}},{key:"bindEvents",value:function(){helpers.addEventListener(this.wrapper,"click",this.onClick.bind(this)),helpers.addEventListener(this.button,"touchstart",this.onTouchStart.bind(this)),helpers.addEventListener(this.button,"touchmove",throttle(this.onTouchmove.bind(this),30)),helpers.addEventListener(this.button,"touchend",this.onTouchend.bind(this)),helpers.addEventListener(this.button,"touchcancel",this.onTouchend.bind(this))}},{key:"setValue",value:function(e){var t=this;if(e>this.range[1]||e<this.range[0])return!1;this.currentTick=this.getCurrentTick(e),this.currentValue=this.currentTick.val;var n=this.currentValue+"%";return setTimeout((function(){helpers.style(t.inner,{width:n}),helpers.style(t.button,{left:n})})),this.sliderValue.innerHTML=this.currentTick.name,this.handleChange(this.currentValue),!0}},{key:"renderText",value:function(e){var t=this;this.ticks=e.ticks,this.itemProps=e,this.sliderTitle.innerHTML=e.name,this.currentTick=this.ticks.filter((function(e){return e.val===t.currentValue}))[0],this.sliderValue.innerHTML=this.currentTick.name}},{key:"onChange",value:function(e){this.handleChange=e}},{key:"getCurrentTick",value:function(e){for(var t=0;t<this.ticks.length-1;t++)if(this.ticks[t].val<=e&&this.ticks[t+1].val>=e)return e-this.ticks[t].val>this.ticks[t+1].val-e?this.ticks[t+1]:this.ticks[t];return this.ticks[0]}},{key:"onMousedown",value:function(e){this.startClientX=e.clientX,this.onStart()}},{key:"onTouchStart",value:function(e){e.stopPropagation(),this.startClientX=e.touches[0].clientX,this.onStart()}},{key:"onStart",value:function(){this.buttonStatus=2;var e=helpers.offset(this.wrapper);this.wrapperWidth=e.width,this.wrapperLeft=e.left}},{key:"onMousemove",value:function(e){if(2===this.buttonStatus){var t=e.clientX-this.startClientX;this.onMove(t)}}},{key:"onTouchmove",value:function(e){e.stopPropagation();var t=e.touches[0].clientX-this.startClientX;this.onMove(t)}},{key:"onMove",value:function(e){var t=this.startClientX+e;if(!(t-this.wrapperLeft<0||t-this.wrapperLeft>this.wrapperWidth)){this.startClientX=this.startClientX+e;var n=(this.startClientX-this.wrapperLeft)*(this.range[1]-this.range[0])/this.wrapperWidth;helpers.style(this.inner,{width:n+"%"}),helpers.style(this.button,{left:n+"%"})}}},{key:"onMouseup",value:function(e){console.log("mouse up",e.clientX),this.onEnd()}},{key:"onTouchend",value:function(){this.onEnd()}},{key:"onEnd",value:function(){this.buttonStatus=3;var e=(this.startClientX-this.wrapperLeft)*(this.range[1]-this.range[0])/this.wrapperWidth;this.setValue(e)}},{key:"onClick",value:function(e){e.stopPropagation();var t=helpers.offset(this.wrapper);this.wrapperWidth=t.width,this.wrapperLeft=t.left;var n=(e.clientX-this.wrapperLeft)*(this.range[1]-this.range[0])/this.wrapperWidth;this.setValue(n)}}]),e}(),zh={danmuSwitch:"\u5f39\u5e55\u5f00\u5173",danmuSetting:"\u5f39\u5e55\u8bbe\u7f6e",openDanmu:"\u6253\u5f00\u5f39\u5e55",reset:"\u91cd\u7f6e",opacity:"\u4e0d\u900f\u660e\u5ea6",area:"\u663e\u793a\u533a\u57df",speed:"\u5f39\u5e55\u901f\u5ea6",fontSize:"\u5b57\u4f53\u5927\u5c0f",danmuMask:"\u667a\u80fd\u6321\u677f",screen0:"1/4\u5c4f",screen1:"\u534a\u5c4f",screen2:"3/4\u5c4f",screen3:"\u5168\u5c4f",opacity0:"0",opacity1:"1/3",opacity2:"2/3",opacity3:"1",speed0:"0.25",speed1:"0.5",speed2:"\u6b63\u5e38",speed3:"1.25",speed4:"1.5",speed5:"2",fontSize0:"\u6781\u5c0f",fontSize1:"\u9002\u4e2d",fontSize2:"\u6781\u5927"},en={danmuSwitch:"Barrage switch",danmuSetting:"Barrage settings",openDanmu:"Open Barrage",reset:"Reset",opacity:"Opacity",area:"Display  area",speed:"Barrage speed",fontSize:"Font size",danmuMask:"Intelligent blocking",screen0:"1/4 screen",screen1:"Half screen",screen2:"3/4 screen",screen3:"Full screen",opacity0:"0",opacity1:"1/3",opacity2:"2/3",opacity3:"1",speed0:"0.25",speed1:"0.5",speed2:"Normal",speed3:"1.25",speed4:"1.5",speed5:"2",fontSize0:"Minimal",fontSize1:"Moderate",fontSize2:"Great"},jp=en,zhHK={danmuSwitch:"\u5f48\u5e55\u958b\u95dc",danmuSetting:"\u5f48\u5e55\u8a2d\u7f6e",openDanmu:"\u6253\u958b\u5f48\u5e55",reset:"\u91cd\u7f6e",opacity:"\u4e0d\u900f\u660e\u5ea6",area:"\u986f\u793a\u5340\u57df",speed:"\u5f48\u5e55\u901f\u5ea6",fontSize:"\u5b57\u9ad4\u5927\u5c0f",danmuMask:"\u667a\u80fd\u64cb\u677f",screen0:"1/4\u5c4f",screen1:"\u534a\u5c4f",screen2:"3/4\u5c4f",screen3:"\u5168\u5c4f",opacity0:"0",opacity1:"1/3",opacity2:"2/3",opacity3:"1",speed0:"0.25",speed1:"0.5",speed2:"\u6b63\u5e38",speed3:"1.25",speed4:"1.5",speed5:"2",fontSize0:"\u6975\u5c0f",fontSize1:"\u9069\u4e2d",fontSize2:"\u6975\u5927"},lang={zh:zh,"zh-cn":zh,en:en,jp:jp,"zh-hk":zhHK},State=function(){function e(t){_classCallCheck$5(this,e),this.curLang="en",this._defaultConfig={opacity:99,area:99,fontSize:50,speed:40,active:!1,usePanel:!0,danmuItems:[],maskConfig:{maskUrl:"",maskOffset:0,interval:200},maskActive:!1,external:[]},Object.assign(this._defaultConfig,t)}return _createClass$6(e,[{key:"updateLang",value:function(e){this.curLang=e,this.curLangMap=lang[e]||lang.en;var t=this.curLangMap;this.sliderItemsProps=[{key:"opacity",name:t.opacity,defaultValue:99,ticks:[{name:t.opacity0,val:0,renderVal:0},{name:t.opacity1,val:33,renderVal:.33},{name:t.opacity2,val:66,renderVal:.66},{name:t.opacity3,val:99,renderVal:1}]},{key:"area",name:t.area,defaultValue:99,ticks:[{name:t.screen0,val:0,renderVal:1/4},{name:t.screen1,val:33,renderVal:.5},{name:t.screen2,val:66,renderVal:3/4},{name:t.screen3,val:99,renderVal:1}]},{key:"speed",name:t.speed,defaultValue:40,ticks:[{name:t.speed0,val:0,renderVal:1/4},{name:t.speed1,val:20,renderVal:.5},{name:t.speed2,val:40,renderVal:1},{name:t.speed3,val:60,renderVal:5/4},{name:t.speed4,val:80,renderVal:1.5},{name:t.speed5,val:100,renderVal:2}]},{key:"fontSize",name:t.fontSize,defaultValue:50,ticks:[{name:t.fontSize0,val:0,renderVal:14},{name:t.fontSize1,val:50,renderVal:16},{name:t.fontSize2,val:100,renderVal:20}]}],this._defaultConfig.external.forEach((function(t){t.name=t.lang[e]||t.lang.en}))}},{key:"getConfig",value:function(){return this._defaultConfig}},{key:"updateConfig",value:function(e){Object.assign(this._defaultConfig,e)}},{key:"updateComments",value:function(e){this._defaultConfig.danmuItems=e}},{key:"getRenderVal",value:function(e,t){var n=this.sliderItemsProps.find((function(t){return t.key===e}))||this.sliderItemsProps[0];return(n.ticks.find((function(e){return e.val===t}))||n.ticks[0]).renderVal}}]),e}(),NormalSpeed=1e4,Container=function(){function e(t){_classCallCheck$5(this,e),this.state=t,this.root=util.createDom("xg-danmu"),helpers.addClass(this.root,"xgplayer-danmu-container")}var t;return _createClass$6(e,[{key:"initDanmuContainer",value:function(){var e=this.state.getConfig(),t=e.opacity,n=void 0===t?1:t,r=e.fontSize,i=void 0===r?16:r,o=e.area,a=void 0===o?1:o,s=e.danmuItems,c=void 0===s?[]:s,l=e.active,u=e.speed,d=void 0===u?40:u,h=(l?c:[]).map((function(e){return!e.style&&(e.style={}),e})),f={container:this.root,comments:h,live:!1,area:{start:0,end:this.state.getRenderVal("area",a)}};this.danmuJs=new window["danmu.js"](f),this.setOpacity(this.state.getRenderVal("opacity",n)),this.setFontSize(this.state.getRenderVal("fontSize",i)),this.setSpeed(this.state.getRenderVal("speed",d))}},{key:"start",value:function(){this.danmuJs.start()}},{key:"pause",value:function(){this.danmuJs.pause()}},{key:"play",value:function(){this.danmuJs.play()}},{key:"stop",value:function(){this.danmuJs.stop()}},{key:"resize",value:function(){this.danmuJs.resize()}},{key:"sendDanmu",value:function(e){this.state.getConfig().active&&this.danmuJs.sendComment(e)}},{key:"clear",value:function(){this.danmuJs.clear()}},{key:"setProperty",value:function(e,t){return"opacity"===e?this.setOpacity(this.state.getRenderVal(e,t)):"area"===e?this.setArea(this.state.getRenderVal(e,t)):"speed"===e?this.setSpeed(this.state.getRenderVal(e,t)):"fontSize"===e?this.setFontSize(this.state.getRenderVal(e,t)):void 0}},{key:"setOpacity",value:function(e){this.danmuJs.setOpacity(e)}},{key:"setFontSize",value:function(e){this.danmuJs.setFontSize(e)}},{key:"setArea",value:function(e){this.danmuJs.setArea({start:0,end:this.state.getRenderVal("area",e)})}},{key:"setSpeed",value:function(e){this.danmuJs.setAllDuration("scroll",NormalSpeed/e)}},{key:"destroy",value:(t=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.danmuJs){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.danmuJs.stop();case 4:return e.next=6,this.danmuJs.destroy();case 6:this.danmuJs=null,this.root.parentNode.removeChild(this.root),this.root=null;case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Panel=function(){function e(t){_classCallCheck$5(this,e),this.state=t,this.root=document.createElement("div"),helpers.addClass(this.root,"panel-box"),helpers.addEventListener(this.root,"click",(function(e){e.stopPropagation()}))}return _createClass$6(e,[{key:"destroy",value:function(){this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.root=null}}]),e}(),Switch=function(){function e(t){_classCallCheck$5(this,e),this.callback=function(){},this.key=t.key,this.name=t.name,this.value=t.value,this.root=document.createElement("div"),helpers.addClass(this.root,"xg-player-switch-wrapper"),this.render()}return _createClass$6(e,[{key:"render",value:function(){var e=this;if(!this.root.childNodes.length){var t=document.createElement("div");this.$left=t,helpers.addClass(t,"left"),t.innerHTML=this.name;var n=document.createElement("div");this.$right=n,helpers.addClass(n,"right"),n.innerHTML='<label class="switch">\n    <input type="checkbox">\n    <span class="slider round"></span>\n  </label>',this.root.appendChild(t),this.root.appendChild(n);var r=this.$right.querySelector("input");helpers.addEventListener(this.$right,"click",debounce$1((function(t){t.stopPropagation(),e.value=!e.value,e.value?null==r||r.setAttribute("checked","checked"):null==r||r.removeAttribute("checked"),e.callback(e.value)}),50))}var i=this.$right.querySelector("input");this.value?null==i||i.setAttribute("checked","checked"):i.removeAttribute("checked"),i.checked=this.value}},{key:"renderName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$left.innerHTML=e}},{key:"onChange",value:function(e){this.callback=e}}]),e}(),isPC="pc"===sniffer$1.device,MIN_INTERVAL=300,POSITIONS$8=Plugin.POSITIONS,DanmuPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).seekCost=window.performance.now(),r.eventBus=new EventEmitter,window["danmu.js"]?(r.state=new State(e.config),r.state.updateLang(r.player.lang),r.iconWrap=document.createElement("div"),helpers.addClass(r.iconWrap,"icon-warp"),r.tipsWrap=document.createElement("div"),helpers.addClass(r.tipsWrap,"tips-wrap"),r.container=new Container(r.state),r.panel=new Panel(r.state),r):_possibleConstructorReturn$5(r)}return _createClass$6(n,[{key:"afterCreate",value:function(){var e;null===(e=this.player.root)||void 0===e||e.appendChild(this.container.root),this.renderIcon(),this.renderBox(),this.root.appendChild(this.iconWrap),isPC&&(this.state.getConfig().usePanel&&this.root.appendChild(this.panel.root),this.renderTips(),helpers.addClass(this.panel.root,"pc-panel"),this.root.appendChild(this.tipsWrap)),this.initEvents(),this.container.initDanmuContainer()}},{key:"afterPlayerInit",value:function(){this.initDanmuMask()}},{key:"updateLang",value:function(e){this.state.updateLang(this.player.lang),this.eventBus.emit("updateLang")}},{key:"registerIcons",value:function(){return{open:{icon:danmuActiveSVG$1,class:"xgplayer-danmu-open-svg"},close:{icon:Default,class:"xgplayer-danmu-close-svg"},reset:{icon:resetIcon,class:"xgplayer-danmu-reset-svg"}}}},{key:"initEvents",value:function(){isPC?this.bindPCEvent():this.bindMobileEvent(),this.bindPlayerEvent()}},{key:"bindPlayerEvent",value:function(){var e=this;this.once(TIME_UPDATE,(function(){e.container.start()})),this.on(PAUSE,(function(){e.container.pause()})),this.on(PLAY,(function(){e.container.play()})),this.on(SEEKING,(function(){e.seekCost=window.performance.now(),e.container.stop()})),this.on(SEEKED,debounce$1((function(){e.container.start()}),MIN_INTERVAL)),this.on([FULLSCREEN_CHANGE,CSS_FULLSCREEN_CHANGE,MINI_STATE_CHANGE],(function(){e.container.resize(),e.handleResize()})),this.on(PIP_CHANGE,this.handlePIP.bind(this))}},{key:"bindPCEvent",value:function(){var e=this;helpers.addEventListener(this.root,"click",this.onClick.bind(this)),helpers.addEventListener(this.root,"mouseenter",(function(){var t=e.state.getConfig().active,n=e.player.controls;"rightSide"===e.config.listType?n.blur():n.focus(),t?(helpers.style(e.panel.root,{display:"block"}),helpers.style(e.tipsWrap,{display:"none"})):(helpers.style(e.panel.root,{display:"none"}),helpers.style(e.tipsWrap,{display:"block"}))})),helpers.addEventListener(this.root,"mouseleave",(function(){var t=e.player.controls;"rightSide"===e.config.listType?t.focus():t.focusAwhile(),helpers.style(e.panel.root,{display:"none"}),helpers.style(e.tipsWrap,{display:"none"})}))}},{key:"bindMobileEvent",value:function(){var e=this;helpers.addEventListener(this.root,"click",(function(){e.state.getConfig().usePanel?e.player.panel.showPanel(e.panel.root):e.onClick()}))}},{key:"onClick",value:function(){this.toggleDanmu(),this.renderIcon()}},{key:"toggleDanmu",value:function(){var e=this.state.getConfig(),t=e.active,n=e.maskActive,r=!t;r?(this.state.updateConfig({active:r}),n&&this.initMask()):(null==this||this.container.clear(),this.destroyMask(),this.state.updateConfig({active:r})),this.player.emit(PluginEvents.DANMU_CHANGE,{active:r}),this.danmuSwitchInSettingPanel&&(this.danmuSwitchInSettingPanel.value=r,this.danmuSwitchInSettingPanel.render())}},{key:"renderIcon",value:function(){this.iconWrap.innerHTML="",this.state.getConfig().active?this.iconWrap.appendChild(this.icons.open):this.iconWrap.appendChild(this.icons.close)}},{key:"renderTips",value:function(){this.tipsWrap.innerHTML=this.state.curLangMap.openDanmu}},{key:"renderBox",value:function(){var e=this;this.panel.root.innerHTML="";var t=document.createElement("div");helpers.addClass(t,"box-header"),t.innerHTML='<div class="header-setting">'+this.state.curLangMap.danmuSetting+'</div> <div class="header-reset"></div>';var n=t.querySelector(".header-reset");n.appendChild(this.icons.reset),helpers.addEventListener(n,"click",(function(t){t.stopPropagation(),e.eventBus.emit("reset")}),{capture:!0});var r=document.createElement("span");r.innerHTML=this.state.curLangMap.reset,n.appendChild(r),this.eventBus.on("updateLang",(function(){r.innerHTML=e.state.curLangMap.reset,t.querySelector(".header-setting").innerHTML=e.state.curLangMap.danmuSetting})),this.panel.root.appendChild(t),isPC||this.renderTurnOff(),this.renderSliders(),this.renderSwitches()}},{key:"renderTurnOff",value:function(){var e=this,t={name:this.state.curLangMap.danmuSwitch,key:"active",value:this.state.getConfig().active||!1},n=new Switch(t);this.danmuSwitchInSettingPanel=n,this.panel.root.appendChild(n.root),n.onChange((function(t){e.toggleDanmu(),e.renderIcon()})),this.eventBus.on("updateLang",(function(){n.renderName(e.state.curLangMap.danmuSwitch)}))}},{key:"renderSwitches",value:function(){var e,t=this;null===(e=this.state.getConfig().external)||void 0===e||e.forEach((function(e){var n=new Switch(e);t.panel.root.appendChild(n.root),t.eventBus.on("updateLang",(function(){n.renderName(e.name)})),n.onChange((function(n){var r=t.state.getConfig().external||[];r.forEach((function(t){t.key===e.key&&(t.value=n)})),t.state.updateConfig({external:r}),t.player.emit(PluginEvents.DANMU_CHANGE,{external:r})}))}))}},{key:"renderSliders",value:function(){var e=this;this.state.sliderItemsProps.forEach((function(t,n){var r,i,o=document.createElement("div"),a=new Slider(o,t);null!=(null===(r=e.state.getConfig())||void 0===r?void 0:r[t.key])&&a.setValue(null===(i=e.state.getConfig())||void 0===i?void 0:i[t.key]),a.onChange((function(n){e.state.updateConfig(_defineProperty$6({},t.key,n)),console.log("val",e.state.getConfig()),e.player.emit(PluginEvents.DANMU_CHANGE,_defineProperty$6({},t.key,n)),e.container.setProperty(t.key,n)})),e.eventBus.on("reset",(function(){a.setValue(t.defaultValue)})),e.eventBus.on("updateLang",(function(){a.renderText(e.state.sliderItemsProps[n])})),e.panel.root.appendChild(o)}))}},{key:"sendDanmu",value:function(e){return this.container.sendDanmu(e)}},{key:"updateConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.state.updateConfig(e)}},{key:"getConfig",value:function(){return this.state.getConfig()}},{key:"initDanmuMask",value:function(){if(this.player){var e=this.state.getConfig(),t=e.maskConfig,n=e.active,r=e.maskActive;t.maskUrl&&(this.renderDanmuMaskTurnOff(),n&&r&&this.initMask())}}},{key:"renderDanmuMaskTurnOff",value:function(){var e=this,t={name:this.state.curLangMap.danmuMask,key:"maskActive",value:this.state.getConfig().maskActive||!1},n=new Switch(t);this.panel.root.appendChild(n.root),n.onChange((function(t){e.state.updateConfig({maskActive:t}),t?e.initMask():e.destroyMask(),e.renderIcon()})),this.eventBus.on("updateLang",(function(){n.renderName(e.state.curLangMap.danmuMask)}))}},{key:"initMask",value:function(){this.destroyMask();var e=this.state.getConfig(),t=e.maskConfig,n=e.maskActive,r=e.active;t.maskUrl&&n&&r&&(window.DanmuMask&&"function"==typeof window.DanmuMask&&(this.mask=new window.DanmuMask({player:this.player,url:t.maskUrl,originStart:t.maskOffset,interval:t.interval})),this.mask.init())}},{key:"destroyMask",value:function(){this.mask&&(this.mask.destroy(),this.mask=null)}},{key:"handleResize",value:function(){var e,t,n,r;if(this.mask){var i=this.player;this.mask.setContainerSize(null!==(e=null==i||null===(t=i.root)||void 0===t?void 0:t.offsetWidth)&&void 0!==e?e:0,null!==(n=null==i||null===(r=i.root)||void 0===r?void 0:r.offsetHeight)&&void 0!==n?n:0)}}},{key:"handlePIP",value:function(e){e?this.destroyMask():this.initMask()}},{key:"destroy",value:function(){this.destroyMask(),this.container.destroy(),this.panel.destroy()}},{key:"render",value:function(){return'<div class="xgplayer-danmu"></div>'}}],[{key:"pluginName",get:function(){return"DanmuPlugin"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$8.CONTROLS_RIGHT,index:CONTROL_ICON_INDEX.DanmuPlugin}}}]),n}(Plugin),uncurryThis$3=functionUncurryThis,aCallable=aCallable$b,isObject$2=isObject$n,hasOwn=hasOwnProperty_1,arraySlice$1=arraySlice$c,NATIVE_BIND=functionBindNative,$Function=Function,concat=uncurryThis$3([].concat),join=uncurryThis$3([].join),factories={},construct=function(e,t,n){if(!hasOwn(factories,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";factories[t]=$Function("C,a","return new C("+join(r,",")+")")}return factories[t](e,n)},functionBind=NATIVE_BIND?$Function.bind:function(e){var t=aCallable(this),n=t.prototype,r=arraySlice$1(arguments,1),i=function n(){var i=concat(r,arraySlice$1(arguments));return this instanceof n?construct(t,i.length,i):t.apply(e,i)};return isObject$2(n)&&(i.prototype=n),i},$$5=_export,getBuiltIn=getBuiltIn$d,apply$1=functionApply,bind$1=functionBind,aConstructor=aConstructor$3,anObject=anObject$l,isObject$1=isObject$n,create=objectCreate,fails$1=fails$L,nativeConstruct=getBuiltIn("Reflect","construct"),ObjectPrototype=Object.prototype,push$1=[].push,NEW_TARGET_BUG=fails$1((function(){function e(){}return!(nativeConstruct((function(){}),[],e)instanceof e)})),ARGS_BUG=!fails$1((function(){nativeConstruct((function(){}))})),FORCED$1=NEW_TARGET_BUG||ARGS_BUG;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty$1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$$5({target:"Reflect",stat:!0,forced:FORCED$1,sham:FORCED$1},{construct:function(e,t){aConstructor(e),anObject(t);var n=arguments.length<3?e:aConstructor(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return nativeConstruct(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return apply$1(push$1,r,t),new(apply$1(bind$1,e,r))}var i=n.prototype,o=create(isObject$1(i)?i:ObjectPrototype),a=apply$1(e,o,t);return isObject$1(a)?a:o}});var uncurryThis$2=functionUncurryThis,defineBuiltIn=defineBuiltIn$i,DatePrototype=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING="toString",nativeDateToString=uncurryThis$2(DatePrototype[TO_STRING]),thisTimeValue=uncurryThis$2(DatePrototype.getTime);String(new Date(NaN))!=INVALID_DATE&&defineBuiltIn(DatePrototype,TO_STRING,(function(){var e=thisTimeValue(this);return e==e?nativeDateToString(this):INVALID_DATE}));var $$4=_export,bind=functionBind;$$4({target:"Function",proto:!0,forced:Function.bind!==bind},{bind:bind});var global$4=global$H,apply=functionApply,isCallable=isCallable$u,userAgent=engineUserAgent,arraySlice=arraySlice$c,validateArgumentsLength=validateArgumentsLength$4,MSIE=/MSIE .\./.test(userAgent),Function$1=global$4.Function,wrap=function(e){return MSIE?function(t,n){var r=validateArgumentsLength(arguments.length,1)>2,i=isCallable(t)?t:Function$1(t),o=r?arraySlice(arguments,2):void 0;return e(r?function(){apply(i,this,o)}:i,n)}:e},schedulersFix={setTimeout:wrap(global$4.setTimeout),setInterval:wrap(global$4.setInterval)},$$3=_export,global$3=global$H,setInterval$1=schedulersFix.setInterval;$$3({global:!0,bind:!0,forced:global$3.setInterval!==setInterval$1},{setInterval:setInterval$1});var $$2=_export,global$2=global$H,setTimeout$1=schedulersFix.setTimeout;$$2({global:!0,bind:!0,forced:global$2.setTimeout!==setTimeout$1},{setTimeout:setTimeout$1});var DESCRIPTORS=descriptors,uncurryThis$1=functionUncurryThis,objectKeys=objectKeys$4,toIndexedObject=toIndexedObject$c,$propertyIsEnumerable=objectPropertyIsEnumerable.f,propertyIsEnumerable=uncurryThis$1($propertyIsEnumerable),push=uncurryThis$1([].push),createMethod=function(e){return function(t){for(var n,r=toIndexedObject(t),i=objectKeys(r),o=i.length,a=0,s=[];o>a;)n=i[a++],DESCRIPTORS&&!propertyIsEnumerable(r,n)||push(s,e?[n,r[n]]:r[n]);return s}},objectToArray={entries:createMethod(!0),values:createMethod(!1)},$$1=_export,$values=objectToArray.values;$$1({target:"Object",stat:!0},{values:function(e){return $values(e)}});var global$1=global$H,fails=fails$L,uncurryThis=functionUncurryThis,toString=toString$h,trim=stringTrim.trim,whitespaces=whitespaces$3,charAt=uncurryThis("".charAt),$parseFloat$1=global$1.parseFloat,_Symbol=global$1.Symbol,ITERATOR=_Symbol&&_Symbol.iterator,FORCED=1/$parseFloat$1(whitespaces+"-0")!=-1/0||ITERATOR&&!fails((function(){$parseFloat$1(Object(ITERATOR))})),numberParseFloat=FORCED?function(e){var t=trim(toString(e)),n=$parseFloat$1(t);return 0===n&&"-"==charAt(t,0)?-0:n}:$parseFloat$1,$=_export,$parseFloat=numberParseFloat;function debounce(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}}$({global:!0,forced:parseFloat!=$parseFloat},{parseFloat:$parseFloat});var EVENTS={MENU_REPORT:"MENU_REPORT",MENU_LOG:"MENU_LOG"},INFO_TYPES={VID:5,TYPE:10,CODECS:20,SPEED:30,BUFFER:40,PLAY_QUALITY:50,SCHEME:60,RESOLUTION:70,VIEWPORT:80,VOLUME:90,CDN:100,P2P:110,PLAYER_VERSION:120},LOG_TYPES={MENU:0,INTERACT:1,CONTEXTMENU:2},MENU_TYPES={STATS:0,REPORT:1},INTERACT_TYPES={CLOSE:0,COPY:1},CONTEXTMENU_TYPES={SHOW:0,HIDE:1},LOG_EVENTS={STATS:"STATS",REPORT:"REPORT",CLOSE:"CLOSE",COPY:"COPY",CONTEXTMENU_SHOW:"CONTEXTMENU_SHOW",CONTEXTMENU_HIDE:"CONTEXTMENU_HIDE"},events=Object.freeze(Object.defineProperty({__proto__:null,CONTEXTMENU_TYPES:CONTEXTMENU_TYPES,EVENTS:EVENTS,INFO_TYPES:INFO_TYPES,INTERACT_TYPES:INTERACT_TYPES,LOG_EVENTS:LOG_EVENTS,LOG_TYPES:LOG_TYPES,MENU_TYPES:MENU_TYPES},Symbol.toStringTag,{value:"Module"})),_cn,_en;function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e2){return!1}}var LANG_CONFIGS={cn:(_cn={},_defineProperty$1(_cn,INFO_TYPES.VID,"VID"),_defineProperty$1(_cn,INFO_TYPES.TYPE,"\u7c7b\u578b"),_defineProperty$1(_cn,INFO_TYPES.CODECS,"\u7f16\u7801"),_defineProperty$1(_cn,INFO_TYPES.SPEED,"\u52a0\u8f7d\u901f\u5ea6"),_defineProperty$1(_cn,INFO_TYPES.BUFFER,"\u7f13\u51b2\u65f6\u957f"),_defineProperty$1(_cn,INFO_TYPES.PLAY_QUALITY,"\u4e22\u5e27\u7387"),_defineProperty$1(_cn,INFO_TYPES.SCHEME,"\u89c6\u9891\u534f\u8bae"),_defineProperty$1(_cn,INFO_TYPES.RESOLUTION,"\u5206\u8fa8\u7387"),_defineProperty$1(_cn,INFO_TYPES.VIEWPORT,"\u89c6\u56fe\u5c3a\u5bf8"),_defineProperty$1(_cn,INFO_TYPES.VOLUME,"\u97f3\u91cf\u5927\u5c0f"),_defineProperty$1(_cn,INFO_TYPES.CDN,"CDN"),_defineProperty$1(_cn,INFO_TYPES.P2P,"P2P"),_defineProperty$1(_cn,INFO_TYPES.PLAYER_VERSION,"\u64ad\u653e\u5668\u7248\u672c"),_cn),en:(_en={},_defineProperty$1(_en,INFO_TYPES.VID,"Video ID"),_defineProperty$1(_en,INFO_TYPES.TYPE,"Video Type"),_defineProperty$1(_en,INFO_TYPES.CODECS,"Codecs"),_defineProperty$1(_en,INFO_TYPES.SPEED,"Connection Speed"),_defineProperty$1(_en,INFO_TYPES.BUFFER,"Buffer Health"),_defineProperty$1(_en,INFO_TYPES.PLAY_QUALITY,"Dropped Frames"),_defineProperty$1(_en,INFO_TYPES.SCHEME,"Protocol"),_defineProperty$1(_en,INFO_TYPES.RESOLUTION,"Res"),_defineProperty$1(_en,INFO_TYPES.VIEWPORT,"Viewport"),_defineProperty$1(_en,INFO_TYPES.VOLUME,"Volume"),_defineProperty$1(_en,INFO_TYPES.CDN,"CDN"),_defineProperty$1(_en,INFO_TYPES.P2P,"P2P"),_defineProperty$1(_en,INFO_TYPES.PLAYER_VERSION,"Player Version"),_en)},MenuPlugin=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass$1(n,[{key:"afterCreate",value:function(){}},{key:"onPluginsReady",value:function(){var e=this.player.plugins.stats;this.menuInst=new Menu(this.player,this.config||{},e)}}],[{key:"pluginName",get:function(){return"MenuPlugin"}},{key:"defaultConfig",get:function(){return{enableDebug:!0}}}]),n}(BasePlugin),ReportIcon='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.71429 5C5.3198 5 5 5.3198 5 5.71429V14.2857C5 14.6802 5.3198 15 5.71429 15H14.2857C14.6802 15 15 14.6802 15 14.2857V10C15 9.44772 15.4477 9 16 9C16.5523 9 17 9.44772 17 10V14.2857C17 15.7848 15.7848 17 14.2857 17H5.71429C4.21523 17 3 15.7848 3 14.2857V5.71429C3 4.21523 4.21523 3 5.71429 3H10C10.5523 3 11 3.44772 11 4C11 4.55228 10.5523 5 10 5H5.71429Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16.7071 3.29289C17.0976 3.68342 17.0976 4.31658 16.7071 4.70711L10.7071 10.7071C10.3166 11.0976 9.68342 11.0976 9.29289 10.7071C8.90237 10.3166 8.90237 9.68342 9.29289 9.29289L15.2929 3.29289C15.6834 2.90237 16.3166 2.90237 16.7071 3.29289Z" fill="currentColor"/></svg>',StatsIcon='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 10C9 9.44771 9.44771 9 10 9C10.5523 9 11 9.44772 11 10V13C11 13.5523 10.5523 14 10 14C9.44771 14 9 13.5523 9 13V10Z" fill="currentColor"/><path d="M10 6C9.44771 6 9 6.44772 9 7C9 7.55228 9.44771 8 10 8C10.5523 8 11 7.55228 11 7C11 6.44772 10.5523 6 10 6Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10ZM10 16C13.3137 16 16 13.3137 16 10C16 6.68629 13.3137 4 10 4C6.68629 4 4 6.68629 4 10C4 13.3137 6.68629 16 10 16Z" fill="currentColor"/></svg>',CloseIcon$1='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.1231 4.08053C16.5136 4.47105 16.5136 5.10422 16.1231 5.49474L11.453 10.1648L16.1231 14.8349C16.5136 15.2254 16.5136 15.8586 16.1231 16.2491C15.7326 16.6397 15.0994 16.6397 14.7089 16.2491L10.0388 11.579L5.36873 16.2491C4.9782 16.6397 4.34504 16.6397 3.95451 16.2491C3.56399 15.8586 3.56399 15.2254 3.95451 14.8349L8.6246 10.1648L3.95451 5.49474C3.56399 5.10422 3.56399 4.47105 3.95451 4.08053C4.34504 3.69001 4.9782 3.69001 5.36873 4.08053L10.0388 8.75061L14.7089 4.08053C15.0994 3.69 15.7326 3.69 16.1231 4.08053Z" fill="currentColor"/></svg>',CopyIcon='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 3C5.44772 3 5 3.44772 5 4C5 4.55228 5.44772 5 6 5H13.5C14.3284 5 15 5.67157 15 6.5V14C15 14.5523 15.4477 15 16 15C16.5523 15 17 14.5523 17 14V6.5C17 4.567 15.433 3 13.5 3H6ZM4 8H12V16H4L4 8ZM2 8C2 6.89543 2.89543 6 4 6H12C13.1046 6 14 6.89543 14 8V16C14 17.1046 13.1046 18 12 18H4C2.89543 18 2 17.1046 2 16V8ZM5.75 9.5C5.33579 9.5 5 9.83579 5 10.25C5 10.6642 5.33579 11 5.75 11H10.25C10.6642 11 11 10.6642 11 10.25C11 9.83579 10.6642 9.5 10.25 9.5H5.75ZM5 13.75C5 13.3358 5.33579 13 5.75 13H10.25C10.6642 13 11 13.3358 11 13.75C11 14.1642 10.6642 14.5 10.25 14.5H5.75C5.33579 14.5 5 14.1642 5 13.75Z" fill="currentColor"/></g></svg>',Menu=function(){function e(t,n,r){_classCallCheck(this,e),this.player=t,this.options=n||{},this.statsPlugin=r;var i={report:ReportIcon,stats:StatsIcon,close:CloseIcon$1,copy:CopyIcon},o=Object.assign({},i,this.options.icons);this.options.icons=o,this.playerInstance="dash_"+(new Date).getTime(),window[this.playerInstance]=this.player,this.menuItems=[{name:"\u89c6\u9891\u7edf\u8ba1\u4fe1\u606f",handler:this.showPanelInfo.bind(this),type:MENU_TYPES.STATS,icon:o.stats,eventName:LOG_EVENTS.STATS},{name:"\u64ad\u653e\u95ee\u9898\u53cd\u9988",handler:this._handleReport.bind(this),type:MENU_TYPES.REPORT,icon:o.report,eventName:LOG_EVENTS.REPORT}],this.playerHandler=[{evt:"RESOLUTION_UPDATE",handler:this._resolutionUpdate.bind(this)},{evt:"menusegment",handler:this._recordLastSegment.bind(this)},{evt:"resourceReady",handler:this._startup.bind(this)},{evt:"canplay",handler:this._startup.bind(this)},{evt:"ended",handler:this.destroyDOM.bind(this)},{evt:"destroy",handler:this.destroy.bind(this)},{evt:"playertypechange",handler:this.destroyDOM.bind(this)},{evt:"codecsupdate",handler:this._codecsUpdate.bind(this)}];for(var a=0;a<this.playerHandler.length;a++){var s=this.playerHandler[a],c=s.evt,l=s.handler;this.player.on(c,l)}this.debugInfo={ua:navigator.userAgent,version:this.player.playerVersion},this._pollTimer=null,this.hasInitDOM=!1,this._cacheMap={},this.menuHandler=this._menuHandler.bind(this),this.munuHideHandler=this._munuHideHandler.bind(this),this.rootClickHandler=this._rootClickHandler.bind(this),this._initDatas()}return _createClass$1(e,[{key:"_reset",value:function(){this.hasInitDOM=!1,this._cacheMap={},this._lastSegment=null}},{key:"_noop",value:function(){}},{key:"_recordLastSegment",value:function(e){this._lastSegment=e}},{key:"_resolutionUpdate",value:function(e){if(!this._cacheUpdate(INFO_TYPES.RESOLUTION)){var t=this.infoItems[INFO_TYPES.RESOLUTION];e?(t.value=e,this.updateInfoItem(t)):(t.hide=!0,this.createPanelInfo())}}},{key:"_codecsUpdate",value:function(e){if(!this._cacheUpdate(INFO_TYPES.CODECS)){var t=this.infoItems[INFO_TYPES.CODECS];t.value=e,this.updateInfoItem(t)}}},{key:"_cacheUpdate",value:function(e){return!this.hasInitDOM&&(this._cacheMap[e]=!0,!0)}},{key:"_handleReport",value:function(){for(var e=this.player.video.readyState,t=this.player.video.buffered,n=[],r=0;r<t.length;r++){var i=t.start(r),o=t.end(r);n.push({start:i,end:o})}var a={readyState:e,curTime:this.player.video.currentTime,err:this.player.video.error||-1,buffer:n},s=Object.assign({debug_date:new Date,type:this.type},this.debugInfo,{videoInfo:a});this._lastSegment&&(s.segment=this._lastSegment),this.options.enableDebug&&this.statsPlugin&&(s.stats=this.statsPlugin.getStats()),this.player.emit(EVENTS.MENU_REPORT,s)}},{key:"_startup",value:function(){if(!this.hasInitDOM){this.type=this.player.currentFormat,this._initDatas(),this._initDOM();for(var e=Object.keys(this._cacheMap),t=0;t<e.length;t++){var n=e[t],r=this.infoItems[n];this.updateInfoItem(r,!0)}}}},{key:"_initDatas",value:function(){var e;this.parentNode=this.player.root,this._isPlayQualitySupported=this.player.video&&"function"==typeof this.player.video.getVideoPlaybackQuality;var t=this.player.playerType,n=LANG_CONFIGS.cn,r=this.options.lang||"cn";this.langConfig=this.options.langConfig||LANG_CONFIGS[r]||n,this.infoItems=(_defineProperty$1(e={},INFO_TYPES.VID,{name:"VID",value:this.player.config.vid,render:renderPlainText,hide:!this.player.config.vid,key:"vid"}),_defineProperty$1(e,INFO_TYPES.TYPE,{name:"\u7c7b\u578b",value:t,render:renderPlainText,key:"player_type"}),_defineProperty$1(e,INFO_TYPES.CODECS,{name:"\u7f16\u7801",value:this.player.menuCodeType,render:renderPlainText,key:"menuCodeType",hide:!this.player.menuCodeType}),_defineProperty$1(e,INFO_TYPES.SPEED,{name:"\u52a0\u8f7d\u901f\u5ea6",value:0,render:renderPlainText,posfix:" KB/s",hide:!this._isMenusHide("speed"),key:"speed"}),_defineProperty$1(e,INFO_TYPES.BUFFER,{name:"\u7f13\u51b2\u65f6\u957f",value:0,render:renderPlainText,posfix:"s",key:"buffer"}),_defineProperty$1(e,INFO_TYPES.PLAY_QUALITY,{name:"\u4e22\u5e27\u7387",value:{droppedVideoFrames:0,totalVideoFrames:0},render:renderPlayQuality,hide:null===this.player.video.getVideoPlaybackQuality,key:"frames_info"}),_defineProperty$1(e,INFO_TYPES.SCHEME,{name:"\u89c6\u9891\u534f\u8bae",value:"HTTPS",render:renderPlainText,key:"scheme"}),_defineProperty$1(e,INFO_TYPES.CDN,{name:"CDN",value:this.player.CDNUrl?this.player.CDNUrl:"false",render:renderPlainText,hide:!this._isMenusHide("cdn"),key:"CDN"}),_defineProperty$1(e,INFO_TYPES.P2P,{name:"P2P",value:"false",render:renderPlainText,hide:!0,key:"p2p"}),_defineProperty$1(e,INFO_TYPES.RESOLUTION,{name:"\u5206\u8fa8\u7387",value:{width:0,height:0,fps:void 0},render:renderResolution,hide:!this._isMenusHide("resolution"),key:"resolution"}),_defineProperty$1(e,INFO_TYPES.VIEWPORT,{name:"\u89c6\u56fe\u5c3a\u5bf8",value:{width:0,height:0},render:renderResolution,key:"viewport"}),_defineProperty$1(e,INFO_TYPES.VOLUME,{name:"\u97f3\u91cf\u5927\u5c0f",value:(100*this.player.config.volume).toFixed(0)+"%",render:renderPlainText,key:"volume"}),_defineProperty$1(e,INFO_TYPES.PLAYER_VERSION,{name:"\u64ad\u653e\u5668\u7248\u672c",value:this.player.playerVersion,render:renderPlainText,key:"player_version"}),e);for(var i=Object.keys(this.infoItems),o=0;o<i.length;o++){var a=i[o];this.infoItems[a].type=a}for(var s=this.options.infoItems||[],c=0;c<s.length;c++){var l=s[c];l.name&&l.type&&l.key?(l.render&&isFunction(l.render)||(l.render=renderPlainText),this.infoItems[l.type]=l):warn("".concat(l.name))}}},{key:"_isMenusHide",value:function(e){return!0===(this.player.supportMenus||{})[e]}},{key:"renderItemByType",value:function(e,t){var n=this.infoItems[e];n?(n.value=t,this._cacheUpdate(e)||this.updateInfoItem(n)):warn("".concat(e," item null"))}},{key:"_initDOM",value:function(){if(this.parentNode&&util){this.hasInitDOM=!0;var e=document.createDocumentFragment(),t=document.createElement("xg-menu");util.addClass(t,"xg-menu"),this.rightMenu=t;for(var n=this.menuItems.filter((function(e){return!e.hide})),r=0;r<n.length;r++)e.appendChild(this.createMenuItem(n[r]));t.appendChild(e),this.toggle(this.rightMenu,!1),this.parentNode.appendChild(t),this.parentNode.addEventListener("contextmenu",this.menuHandler,!1),document.addEventListener("click",this.munuHideHandler,!1),this.parentNode.addEventListener("click",this.rootClickHandler,!0),this.createPanelInfo(),this.bindEvents(),this.tick()}}},{key:"_menuHandler",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.isPIPMode())return!1;var t=this.getOffset(),n=e.clientX-t.x+document.body.scrollLeft+document.documentElement.scrollLeft,r=e.clientY-t.y+document.body.scrollTop+document.documentElement.scrollTop,i=this.parentNode.clientWidth,o=this.parentNode.clientHeight;this.toggle(this.rightMenu,!0);var a=this.rightMenu.offsetWidth,s=this.rightMenu.offsetHeight,c=n+a>i?i-a:n,l=r+s>o?o-s:r;this.rightMenu.style.left=c+"px",this.rightMenu.style.top=l+"px",this.emitLog(LOG_TYPES.CONTEXTMENU,CONTEXTMENU_TYPES.SHOW,LOG_EVENTS.CONTEXTMENU_SHOW)}},{key:"getOffset",value:function(){for(var e=this.parentNode,t=0,n=0;e&&!Number.isNaN(e.offsetLeft)&&!Number.isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{x:t,y:n}}},{key:"_munuHideHandler",value:function(){this.rightMenu&&"block"===this.rightMenu.style.display&&this.emitLog(LOG_TYPES.CONTEXTMENU,CONTEXTMENU_TYPES.HIDE,LOG_EVENTS.CONTEXTMENU_HIDE),this.toggle(this.rightMenu,!1)}},{key:"_rootClickHandler",value:function(e){"block"===this.rightMenu.style.display&&e.target===this.player.video&&(e.stopPropagation(),e.preventDefault(),this._munuHideHandler())}},{key:"tick",value:function(){var e=this;this._pollTimer=setTimeout((function(){clearTimeout(e._pollTimer),e._poll(),e.tick(),e.isPIPMode()&&(e.toggle(e.rightMenu,!1),e.toggle(e.panelInfo,!1))}),500)}},{key:"_poll",value:function(){var e=this.bufferLength,t=this.infoItems[INFO_TYPES.BUFFER];if(t.value=e,this.updateInfoItem(t),this.player.video.getVideoPlaybackQuality){var n=this.player.video.getVideoPlaybackQuality(),r=this.infoItems[INFO_TYPES.PLAY_QUALITY];r.value={totalVideoFrames:n.totalVideoFrames,droppedVideoFrames:n.droppedVideoFrames},this.updateInfoItem(r)}var i=this.infoItems[INFO_TYPES.SPEED];if(!i.hide){var o=Math.floor(this.player.downloadSpeed);i.value=o,this.updateInfoItem(i)}}},{key:"bindEvents",value:function(){var e=this,t=this.player.video;this.handleVolumeChange=this._handleVolumeChange.bind(this),t.addEventListener("volumechange",this.handleVolumeChange),t.addEventListener("DOMNodeInserted",(function n(){t.removeEventListener("DOMNodeInserted",n),e._onWinElemSizeChange()})),this.onWinSizeChange=debounce(this._onWinElemSizeChange.bind(this),1e3,!1),window.addEventListener("resize",this.onWinSizeChange),e._onWinElemSizeChange()}},{key:"_onWinElemSizeChange",value:function(){if(this.player&&this.player.video){var e=this.player.video.getBoundingClientRect(),t=this.infoItems[INFO_TYPES.VIEWPORT];if(t.value={width:Math.floor(e.width),height:Math.floor(e.height)},this._cacheUpdate(INFO_TYPES.VIEWPORT))return;this.updateInfoItem(t)}}},{key:"_handleVolumeChange",value:function(){var e=this.infoItems[INFO_TYPES.VOLUME];e.value=(100*this.player.video.volume).toFixed(0)+"%",this._cacheUpdate(INFO_TYPES.VOLUME)||this.updateInfoItem(e)}},{key:"createMenuItem",value:function(e){var t=this,n=document.createElement("div");if(n.classList.add("v-menu-item"),e.clsName&&n.classList.add(e.clsName),e.icon){var r=document.createElement("div");util.addClass(r,"menu-item-icon"),r.innerHTML=e.icon,n.appendChild(r)}var i=document.createElement("div");return util.addClass(i,"menu-item-content"),i.textContent=e.name,n.appendChild(i),!1!==n.clickable&&n.addEventListener("click",(function(n){n.stopPropagation(),n.preventDefault(),t.toggle(t.rightMenu,!1),e.handler(),t.emitLog(LOG_TYPES.MENU,e.type,e.eventName)})),n}},{key:"createIconBtn",value:function(e,t,n,r){var i=document.createElement("div");return util.addClass(i,e),i.innerHTML=t+"<div class='svg-hover'>".concat(n,"</div>"),r.appendChild(i),i}},{key:"createPanelInfo",value:function(){var e=this,t=document.createElement("xg-panel-info");util.addClass(t,"xg-panel-info"),this.createIconBtn("xg-info-close xg-interact-icon",this.options.icons.close,"\u5173\u95ed",t).addEventListener("click",(function(){e.toggle(t,!1),e.panelVisible=!1,e.emitLog(LOG_TYPES.INTERACT,INTERACT_TYPES.CLOSE,LOG_EVENTS.CLOSE)})),this.createIconBtn("xg-info-copy xg-interact-icon",this.options.icons.copy,"\u590d\u5236",t).addEventListener("click",(function(){for(var t=Object.values(e.infoItems).filter((function(e){return!e.hide})),n={},r=0;r<t.length;r++){var i,o=t[r],a=o.key;i=e.options.connectPrefix&&o.posfix?"".concat(o.value).concat(o.posfix):o.value,n[a]=i}e.options.enableDebug&&e.statsPlugin&&Object.assign(n,{stats:e.statsPlugin.getStats()}),e.copyToClipboard(JSON.stringify(n)),e.emitLog(LOG_TYPES.INTERACT,INTERACT_TYPES.COPY,LOG_EVENTS.COPY)}));var n=document.createElement("ul");util.addClass(n,"xg-panel-detail");for(var r=Object.values(this.infoItems).filter((function(e){return!e.hide})),i=document.createDocumentFragment(),o=0;o<r.length;o++){var a=this.createInfoItem(r[o]);i.appendChild(a)}n.appendChild(i),t.appendChild(n),this.panelInfo=t,this.player.root.appendChild(t)}},{key:"createInfoItem",value:function(e){var t=document.createElement("li");return e.elem=t,this.updateInfoItem(e),t}},{key:"showPanelInfo",value:function(){this.toggle(this.panelInfo,!0),this.panelVisible=!0;for(var e=Object.values(this.infoItems).filter((function(e){return!e.hide})),t=0;t<e.length;t++)this.updateInfoItem(e[t])}},{key:"copyToClipboard",value:function(e){var t=document.createElement("textarea");t.style.height="0px",t.style.width="1px",document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"updateInfoItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.panelVisible||t){var n=e.elem;removeAllChildren(n);var r=document.createElement("label"),i=this.langConfig[e.type]||e.name;r.textContent=i+"",util.addClass(r,"xg-item-label"),n.appendChild(r);var o=document.createElement("span"),a=e.ctx||null,s=e.render.call(a,e.value);s instanceof Element?o.appendChild(s):o.textContent="".concat(s).concat(e.posfix?e.posfix:""),n.appendChild(o)}}},{key:"toggle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(e.style.display=t?"block":"none")}},{key:"bufferLength",get:function(){var e=this.player.getBufferedRange(),t=this.player.video.currentTime,n=e[1]-Math.max(e[0],t);return n=Math.max(0,n).toFixed(2),parseFloat(n)}},{key:"destroyDOM",value:function(){this.parentNode.removeEventListener("contextmenu",this.menuHandler),document.removeEventListener("click",this.munuHideHandler,!1),this.parentNode.removeEventListener("click",this.rootClickHandler,!0),this._reset(),this.removeElement(this.rightMenu),this.removeElement(this.panelInfo),this.rightMenu=null,this.panelInfo=null,this._pollTimer&&clearTimeout(this._pollTimer)}},{key:"destroy",value:function(){this.destroyDOM(),this.destroyEvents()}},{key:"destroyEvents",value:function(){for(var e=0;e<this.playerHandler.length;e++){var t=this.playerHandler[e],n=t.evt,r=t.handler;this.player.off(n,r)}window.removeEventListener("resize",this.onWinSizeChange)}},{key:"removeElement",value:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"isPIPMode",value:function(){return util.hasClass(this.parentNode,"xgplayer-pip-active")}},{key:"emitLog",value:function(e,t,n){this.player.emit(EVENTS.MENU_LOG,{logType:e,code:t,event:n})}}]),e}();function renderPlainText(e){return e}function renderPlayQuality(e){var t=e.droppedVideoFrames,n=e.totalVideoFrames,r=0;r=0===n?0:t/n*100;var i=document.createElement("span"),o=document.createElement("span");o.textContent=t,i.appendChild(o);var a=document.createElement("span");return a.textContent="/".concat(n,", ").concat(r.toFixed(2),"%"),i.appendChild(a),i}function renderResolution(e){var t=e.width,n=e.height,r=e.fps;return"".concat(t," * ").concat(n).concat(void 0!==r?" / ".concat(r,"fps"):"")}function removeAllChildren(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function warn(e){console&&console.warn&&console.warn(e)}function isFunction(e){return"[object Function]"===Object.prototype.toString.call(e)}MenuPlugin.MenuEvents=events,MenuPlugin.Menu=Menu;var NativeSubTitle=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),_defineProperty$6(_assertThisInitialized$5(r=t.call(this)),"_onChange",(function(e){var t=r._media.textTracks;if(t&&0!==t.length){for(var n=[],i=[],o=-1,a=0;a<t.length;a++){var s=t[a];"subtitles"===s.kind&&(n.push({id:s.id||s.language,language:s.language,text:s.label,isDefault:"showing"===s.mode}),-1===o&&"showing"===s.mode&&(o=a),i.push(s.language))}i.join("|")!==r._languages?(r._languages=i.join("|"),r.emit("reset",{list:n,isOpen:o>-1})):-1===o?r.emit("off"):r.curIndex!==o&&r.emit("change",n[o]),r.curIndex=o}})),r._media=e,r._list=[],r._languages="",r.curIndex=-1,r._init(),r}return _createClass$6(n,[{key:"_init",value:function(){var e=this._media.textTracks;e?(e.addEventListener("change",this._onChange),e.addEventListener("addtrack",this._onChange)):console.warn("current browser not support native subtitle")}},{key:"switch",value:function(e){var t=this;return new Promise((function(n,r){if(!e)return r({code:1,message:"no subtitle data"});for(var i=t._media.textTracks,o=0;o<i.length;o++){var a=i[o];a.language===e.language?a.mode="showing":"showing"===a.mode&&(a.mode="disabled")}return n({code:0})}))}},{key:"switchOff",value:function(){for(var e=this._media.textTracks,t=0;t<e.length;t++)e[t].mode="disabled";this.curIndex=-1}},{key:"destroy",value:function(){this._media.textTracks.removeEventListener("change",this._onChange),this._media=null,this._list=[],this._languages="",this.curIndex=-1}}]),n}(EventEmitter);function OpenIcon(){return(new DOMParser).parseFromString('<svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 0.5C0.895431 0.5 0 1.39543 0 2.5V13.5C0 14.6046 0.89543 15.5 2 15.5H16C17.1046 15.5 18 14.6046 18 13.5V2.5C18 1.39543 17.1046 0.5 16 0.5H2ZM7.49634 11.0454C8.00741 10.606 8.29061 10.0037 8.34595 9.23877H6.8811C6.84855 9.67171 6.71997 9.99235 6.49536 10.2007C6.27401 10.4058 5.93709 10.5083 5.48462 10.5083C4.98332 10.5083 4.61548 10.3309 4.3811 9.97607C4.14998 9.62126 4.03442 9.05973 4.03442 8.2915V7.75439C4.04093 7.01872 4.16463 6.47673 4.40552 6.12842C4.64966 5.77686 5.01587 5.60107 5.50415 5.60107C5.95337 5.60107 6.28703 5.70524 6.50513 5.91357C6.72648 6.11865 6.85506 6.45068 6.89087 6.90967H8.35571C8.27759 6.1154 7.98787 5.49854 7.48657 5.05908C6.98527 4.61963 6.32446 4.3999 5.50415 4.3999C4.9117 4.3999 4.39087 4.53988 3.94165 4.81982C3.49569 5.09652 3.15226 5.49528 2.91138 6.01611C2.67049 6.53695 2.55005 7.13916 2.55005 7.82275V8.25732C2.55005 9.32829 2.81047 10.1714 3.3313 10.7866C3.85539 11.3986 4.57316 11.7046 5.48462 11.7046C6.31795 11.7046 6.98853 11.4849 7.49634 11.0454ZM14.5393 11.0454C15.0504 10.606 15.3336 10.0037 15.3889 9.23877H13.9241C13.8915 9.67171 13.7629 9.99235 13.5383 10.2007C13.317 10.4058 12.9801 10.5083 12.5276 10.5083C12.0263 10.5083 11.6584 10.3309 11.4241 9.97607C11.193 9.62126 11.0774 9.05973 11.0774 8.2915V7.75439C11.0839 7.01872 11.2076 6.47673 11.4485 6.12842C11.6926 5.77686 12.0588 5.60107 12.5471 5.60107C12.9963 5.60107 13.33 5.70524 13.5481 5.91357C13.7695 6.11865 13.898 6.45068 13.9338 6.90967H15.3987C15.3206 6.1154 15.0308 5.49854 14.5295 5.05908C14.0282 4.61963 13.3674 4.3999 12.5471 4.3999C11.9547 4.3999 11.4338 4.53988 10.9846 4.81982C10.5387 5.09652 10.1952 5.49528 9.95435 6.01611C9.71346 6.53695 9.59302 7.13916 9.59302 7.82275V8.25732C9.59302 9.32829 9.85343 10.1714 10.3743 10.7866C10.8984 11.3986 11.6161 11.7046 12.5276 11.7046C13.3609 11.7046 14.0315 11.4849 14.5393 11.0454Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}function CloseIcon(){return(new DOMParser).parseFromString('<svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M7.49609 11.0454C8.00716 10.606 8.29037 10.0037 8.3457 9.23877H6.88086C6.84831 9.67171 6.71973 9.99235 6.49512 10.2007C6.27376 10.4058 5.93685 10.5083 5.48438 10.5083C4.98307 10.5083 4.61523 10.3309 4.38086 9.97607C4.14974 9.62126 4.03418 9.05973 4.03418 8.2915V7.75439C4.04069 7.01872 4.16439 6.47673 4.40527 6.12842C4.64941 5.77686 5.01562 5.60107 5.50391 5.60107C5.95312 5.60107 6.28678 5.70524 6.50488 5.91357C6.72624 6.11865 6.85482 6.45068 6.89062 6.90967H8.35547C8.27734 6.1154 7.98763 5.49854 7.48633 5.05908C6.98503 4.61963 6.32422 4.3999 5.50391 4.3999C4.91146 4.3999 4.39062 4.53988 3.94141 4.81982C3.49544 5.09652 3.15202 5.49528 2.91113 6.01611C2.67025 6.53695 2.5498 7.13916 2.5498 7.82275V8.25732C2.5498 9.32829 2.81022 10.1714 3.33105 10.7866C3.85514 11.3986 4.57292 11.7046 5.48438 11.7046C6.31771 11.7046 6.98828 11.4849 7.49609 11.0454Z" fill="white"/>\n<path d="M14.5391 11.0454C15.0501 10.606 15.3333 10.0037 15.3887 9.23877H13.9238C13.8913 9.67171 13.7627 9.99235 13.5381 10.2007C13.3167 10.4058 12.9798 10.5083 12.5273 10.5083C12.026 10.5083 11.6582 10.3309 11.4238 9.97607C11.1927 9.62126 11.0771 9.05973 11.0771 8.2915V7.75439C11.0837 7.01872 11.2074 6.47673 11.4482 6.12842C11.6924 5.77686 12.0586 5.60107 12.5469 5.60107C12.9961 5.60107 13.3298 5.70524 13.5479 5.91357C13.7692 6.11865 13.8978 6.45068 13.9336 6.90967H15.3984C15.3203 6.1154 15.0306 5.49854 14.5293 5.05908C14.028 4.61963 13.3672 4.3999 12.5469 4.3999C11.9544 4.3999 11.4336 4.53988 10.9844 4.81982C10.5384 5.09652 10.195 5.49528 9.9541 6.01611C9.71322 6.53695 9.59277 7.13916 9.59277 7.82275V8.25732C9.59277 9.32829 9.85319 10.1714 10.374 10.7866C10.8981 11.3986 11.6159 11.7046 12.5273 11.7046C13.3607 11.7046 14.0312 11.4849 14.5391 11.0454Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.5C0 1.39543 0.895431 0.5 2 0.5H16C17.1046 0.5 18 1.39543 18 2.5V13.5C18 14.6046 17.1046 15.5 16 15.5H2C0.89543 15.5 0 14.6046 0 13.5V2.5ZM2 2.3H16C16.1105 2.3 16.2 2.38954 16.2 2.5V13.5C16.2 13.6105 16.1105 13.7 16 13.7H2C1.88954 13.7 1.8 13.6105 1.8 13.5V2.5C1.8 2.38954 1.88954 2.3 2 2.3Z" fill="white"/>\n</svg>\n',"image/svg+xml").firstChild}var index_min$1="",POSITIONS$7=Plugin.POSITIONS,IS_MOBILE="mobile"===sniffer$1.device,DEFAULT_CLOSE_TYPE="text-close";function formatList(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=-1;return e.map((function(e,n){e.id||e.language||(e.id=""+n),!e.url&&(e.url=e.src),!e.text&&(e.text=e.label),!e.language&&(e.language=e.srclang),void 0===e.isDefault&&(e.isDefault=e.default),(e.isDefault||e.default)&&(t<0?t=n:e.isDefault=e.default=!1)})),t}var Subtitle=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;_classCallCheck$5(this,n),(r=t.call(this,e)).isOpenState=!0,r.optionList=null,r.currentLang="",r.handlerClickSwitch=function(e,t){e.stopPropagation(),e.preventDefault(),r.subTitles&&(t.type===DEFAULT_CLOSE_TYPE?r.switchOffSubtitle():r.switchSubTitle({language:t.language,id:t.id}))},r.onPlayerFocus=function(e){r.subTitles&&r.config.style.follow&&r.rePosition()},r.onPlayerBlur=function(e){r.subTitles&&r.config.style.follow&&!r.playerConfig.marginControls&&r.subTitles.root&&(r.subTitles.root.style.transform="translate(0, 0)")};var i=e.player;return e.config,i.config.isLive&&(e.config.updateMode="live",sniffer$1.os.isIos&&(e.config.mode="native")),r}return _createClass$6(n,[{key:"afterCreate",value:function(){var e=this.config.list,t=void 0===e?[]:e;this.curIndex=-1,this.curItem=null;var r=formatList(t);_get$3(_getPrototypeOf$5(n.prototype),"afterCreate",this).call(this),"native"===this.config.mode?this._initNativeSubtitle(r):this._initExtSubTitle(r)}},{key:"_initNativeSubtitle",value:function(e){var t=this.player;t._subTitles||(t._subTitles=new NativeSubTitle(t.video)),this.subTitles=t._subTitles,this.subTitles.on("off",this._onOff.bind(this)),this.subTitles.on("change",this._onChange.bind(this)),this.subTitles.on("reset",this._onListReset.bind(this)),this._renderList(e)}},{key:"_initExtSubTitle",value:function(e){var t=this.config,n=t.list,r=void 0===n?[]:n,i=t.style,o=t.isDefaultOpen,a={subTitles:r,defaultOpen:o,debugger:!1,updateMode:t.updateMode};this.isOpenState=o,Object.keys(i).map((function(e){a[e]=i[e]})),!this.playerConfig.marginControls&&this.player.controls.root&&(this.on(PLAYER_FOCUS,this.onPlayerFocus),this.on(PLAYER_BLUR,this.onPlayerBlur));var s=this.player;s._subTitles?s._subTitles._isOpen&&(e=this.getSubTitleIndex(this.config.list,s._subTitles.currentText)):(s._subTitles=new Subtitle$1(a),s._subTitles.attachPlayer(this.player),this.changeTipText()),this.subTitles=s._subTitles,this.subTitles.on("off",this._onOff.bind(this)),this.subTitles.on("change",this._onChange.bind(this)),this.subTitles.on("reset",this._onListReset.bind(this)),i.follow&&this.subTitles.root&&util.addClass(this.subTitles.root,"follow-control"),this._renderList(e)}},{key:"_renderList",value:function(e){var t=this.config,n=t.list,r=void 0===n?[]:n,i=t.isDefaultOpen;r.length&&(i&&e<0?(r[0].isDefault=!0,this.curIndex=0,this.curItem=r[0]):(this.curIndex=e,this.curItem=r[e])),this.appendChild(".xgplayer-icon",this.icons.vttSubOpen),this.appendChild(".xgplayer-icon",this.icons.vttSubClose),this.creatOptionList(),this.initEvents(),this.isOpenState?util.addClass(this.root,"isOpen"):util.addClass(this.root,"isClose")}},{key:"_onOff",value:function(){this.noShowSubtitle()}},{key:"_onChange",value:function(e){var t=this.getSubTitleIndex(this.config.list,e);t<0||this.updateCurItem(t,e)}},{key:"_onListReset",value:function(e){this.updateList(e)}},{key:"updateCurItem",value:function(e,t){this.curIndex=e,this.curItem=this.config.list[e-1],this.renderItemList(),this.emit("subtitle_change",_objectSpread2$5({off:!1,isListUpdate:!1,list:[]},t))}},{key:"initEvents",value:function(){this.bind(["click"],this.handleButtonChange.bind(this)),this.bind(["mouseenter"],this.showList.bind(this)),this.bind(["mouseleave"],this.hideList.bind(this)),this._delegates=[]}},{key:"handleButtonChange",value:function(e){e.preventDefault(),e.stopPropagation(),e.delegateTarget||(IS_MOBILE?this.showMobilePanel():this.isOpenState?this.switchOffSubtitle():this.openSubtitle())}},{key:"showList",value:function(){var e;!IS_MOBILE&&this.isOpenState&&(null===(e=this.optionList)||void 0===e||e.show())}},{key:"hideList",value:function(){var e;!IS_MOBILE&&this.isOpenState&&(null===(e=this.optionList)||void 0===e||e.hide())}},{key:"openSubtitle",value:function(){this.curIndex>-1&&this.curItem&&this.switchSubTitle(this.curItem)}},{key:"getSubTitleIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"",language:""},n=-1;return t&&(t.id||t.language)?(e.forEach((function(e,r){e.id!==t.id&&e.language!==t.language||(n=r)})),n):n}},{key:"registerIcons",value:function(){return{vttSubOpen:{icon:OpenIcon,class:"xgplayer-vttsub-open-svg"},vttSubClose:{icon:CloseIcon,class:"xgplayer-vttsub-close-svg"}}}},{key:"registerLanguageTexts",value:function(){return{sub:{jp:"\u5b57\u5e55",en:"Subtitles",zh:"\u5b57\u5e55","zh-hk":"\u5b57\u5e55"},subOpen:{jp:"\u5b57\u5e55\u3092\u30aa\u30f3\u306b\u3059\u308b",en:"Show subtitles",zh:"\u5f00\u542f\u5b57\u5e55","zh-hk":"\u958b\u555f\u5b57\u5e55"},subClose:{jp:"\u30af\u30ed\u30fc\u30ba\u30c9\u30ad\u30e3\u30d7\u30b7\u30e7\u30f3",en:"Hide subtitles",zh:"\u5173\u95ed\u5b57\u5e55","zh-hk":"\u95dc\u9589\u5b57\u5e55"}}}},{key:"creatOptionList",value:function(){var e=this;if(!IS_MOBILE){var t={config:{data:this.getList(),className:"",onItemClick:function(t,n){e.handlerClickSwitch(t,null==n?void 0:n.to)}},root:this.root};this.optionList=new OptionList(t)}}},{key:"getList",value:function(){var e=this;return this.config.list.map((function(t,n){return n===e.curIndex&&e.isOpenState?(t.isCurrent=!0,t.selected=!0):(t.isCurrent=!1,t.selected=!1),t.showText=e.getTextByLang(t),t}))}},{key:"renderOptionList",value:function(){this.optionList.renderItemList(this.getList())}},{key:"switchSubTitle",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""},n=-1;if(t&&(t.id||t.language)&&(this.config.list.map((function(e,r){e.id+""==t.id+""&&e.language+""==t.language+""&&(n=r)})),!(n<0||this.isOpenState&&n===this.curIndex)))return this.subTitles.switch(t).then((function(r){0===r.code&&(t.off=!1,t.isListUpdate=!1,t.list=[],e.curIndex=n,e.curItem=e.config.list[n],e.isOpenState=!0,util.removeClass(e.root,"isClose"),util.addClass(e.root,"isOpen"),e.renderItemList(),e.changeTipText(),e.emit("subtitle_change",t))})).catch((function(e){return console.error("switch subtitle err: ",e)}))}},{key:"switchOffSubtitle",value:function(){this.subTitles.switchOff(),this.noShowSubtitle()}},{key:"noShowSubtitle",value:function(){var e;this.emit("subtitle_change",{off:!0,isListUpdate:!1,list:[]}),this.isOpenState=!1,util.addClass(this.root,"isClose"),util.removeClass(this.root,"isOpen"),this.renderItemList(),this.changeTipText(),null===(e=this.optionList)||void 0===e||e.hide()}},{key:"renderItemList",value:function(){IS_MOBILE?this.updatePanel():this.renderOptionList()}},{key:"updateSubtitles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(this.updateList(),this.subTitles&&this.subTitles.setSubTitles(this.config.list,this.curIndex>-1,t))}},{key:"updateList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.list){var t=[];e.list.map((function(e){t.push(e)}));var n,r,i,o,a=formatList(t);e.isOpen?(this.isOpenState=!0,this.curIndex=a,this.curItem=a>-1?t[a]:null,util.removeClass(this.root,"isClose"),util.addClass(this.root,"isOpen")):(this.isOpenState=!1,this.curIndex=-1,this.curItem=null,util.removeClass(this.root,"isOpen"),util.addClass(this.root,"isClose"),this.changeTipText(),null===(n=this.optionList)||void 0===n||n.hide()),this.config.list=t,t.length>0?IS_MOBILE||null===(r=this.optionList)||void 0===r||r.hide():(this.switchOffSubtitle(),IS_MOBILE?this.showMobilePanel():null===(i=this.optionList)||void 0===i||i.show(),IS_MOBILE||null===(o=this.optionList)||void 0===o||o.hide(),this.hide()),this.renderItemList()}}},{key:"changeTipText",value:function(){this.isOpenState?this.find(".xg-tips").innerHTML=this.langText.subClose:this.find(".xg-tips").innerHTML=this.langText.subOpen}},{key:"showMobilePanel",value:function(){var e,t=this.renderPanel();null===(e=this.player.panel)||void 0===e||e.showPanel(t,this.langText.sub,!0)}},{key:"updatePanel",value:function(){var e,t=this.renderPanel();null===(e=this.player.panel)||void 0===e||e.updatePanel(t)}},{key:"renderPanel",value:function(){var e=this,t=_toConsumableArray$1(this.config.list),n=util.createDom("div","",{},"ai-panel-content");t.map((function(t,r){var i=_objectSpread2$5({language:t.language||t.srclang,"data-id":t.id,selected:e.isOpenState&&e.curIndex===r,showText:e.getTextByLang(t)},t),o=e.renderPanelItem(i);n.appendChild(o)}));var r={showText:this.langText.subClose,"data-type":DEFAULT_CLOSE_TYPE,selected:!this.isOpenState};return n.appendChild(this.renderPanelItem(r)),n}},{key:"renderPanelItem",value:function(e){var t=this,n=e.showText,r=e.selected,i=util.createDom("div","",{language:e.language,"data-id":e["data-id"],"data-type":e["data-type"]},"panel-Item ".concat(r?"select-in":""));i.innerHTML=n;var o=IS_MOBILE?"touchend":"click",a=Plugin.delegate(i,".panel-Item",o,(function(n){e["data-type"]===DEFAULT_CLOSE_TYPE?(n.stopPropagation(),n.preventDefault(),t.switchOffSubtitle()):t.handlerClickSwitch(n,e)}));return this._delegates.push(a),i}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var r=this.config.list;return!n&&(n=this.player.lang),t=!t||util.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=r[e]),"object"===_typeof$4(e[t])?e[t][n]||e[t].zh:e[t]||""}},{key:"rePosition",value:function(){var e=this.config.style.fitVideo,t=0-this.player.controls.root.getBoundingClientRect().height;if(e){var n=this.player,r=n.video,i=n.root.getBoundingClientRect(),o=i.height,a=i.width,s=r.videoHeight,c=r.videoWidth,l=parseInt(s/c*100,10)*a/100;l>o&&(l=o);var u=(o-l)/2-t;u<0&&(this.subTitles.root.style.transform="translate(0, ".concat(u,"px)"))}else this.subTitles.root.style.transform="translate(0, ".concat(t,"px)")}},{key:"destroy",value:function(){var e;this.subTitles&&(this.subTitles.destroy(),this.subTitles=null),this.unbind(["click"],this.handleButtonChange.bind(this)),this.unbind(["mouseenter"],this.showList.bind(this)),this.unbind(["mouseleave"],this.hideList.bind(this)),null===(e=this.optionList)||void 0===e||e.destroy(),this._delegates&&this._delegates.length>0&&(this._delegates.map((function(e){Array.isArray(e)&&e.map((function(e){e.destroy&&e.destroy()})),e.destroy&&e.destroy()})),this._delegates=null),_get$3(_getPrototypeOf$5(n.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-vttsub">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="vttSubOpen">'.concat(this.langText.subOpen,"</div>\n    </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"Subtitle"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$7.CONTROLS_RIGHT,index:CONTROL_ICON_INDEX.Subtitle,list:[],isDefaultOpen:!0,style:{follow:!0,mode:"stroke",followBottom:50,fitVideo:!0,offsetBottom:4,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,line:"double",fontColor:"#fff"},isShowIcon:!0,mode:"external",updateMode:"vod"}}}]),n}(Plugin),index$3="",ToastPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).toastNumber=0,r.toastMaps={},r}return _createClass$6(n,[{key:"beforePlayerInit",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"afterCreate",value:function(){}},{key:"destroy",value:function(){}},{key:"add",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.toastNumber+1;this.toastNumber=i;var o=this.renderToast(e,r,i);return this.root.appendChild(o),this.toastMaps[i]=o,n&&setTimeout((function(){t.remove(i)}),n),i}},{key:"remove",value:function(e){var t=this.toastMaps[e];t&&(this.root.contains(t)&&this.root.removeChild(t),delete this.toastMaps[e])}},{key:"renderToast",value:function(e,t,n){var r=this,i=util.createDom("div","",void 0,"toast-container"),o=util.checkIsObject(e)?e:util.createDom("div",e,void 0,"toast-txt");if(i.appendChild(o),t){var a=util.createDom("span","\xd7",void 0,"toast-close-bt");a.addEventListener("click",(function(){r.remove(n)})),i.appendChild(a)}return i}},{key:"render",value:function(){return'<xg-sdk-toast class="xgplayer-sdk-toast"></xg-sdk-toast>'}}],[{key:"pluginName",get:function(){return"sdkToastPlugin"}},{key:"defaultConfig",get:function(){return{index:5}}}]),n}(Plugin),Hook=function(){function e(){_classCallCheck$5(this,e),this._hooks={},this._cache=[],this._hooksCache={}}return _createClass$6(e,[{key:"on",value:function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))}},{key:"once",value:function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function r(i){t(i),n.off(e,r)}))}},{key:"off",value:function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]}},{key:"emit",value:function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)}},{key:"_emit",value:function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&_toConsumableArray$1(this._hooks[e]).forEach((function(e){try{e(t)}catch(e2){}}))}},{key:"set",value:function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)}}]),e}(),isObject=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},isNumber=function(e){return"number"==typeof e&&!isNaN(e)},isString=function(e){return"string"==typeof e},getIndex=(lastEventId2=+Date.now()+Number("".concat(Math.random()).slice(2,8)),function(){return lastEventId2+=1}),lastEventId2,decrypto=function(e,t,n){if("string"==typeof e&&"number"==typeof t&&"number"==typeof n){var r,i=[];n=n<=25?n:n%25;var o=String.fromCharCode(n+97);r=e.split(o);for(var a=0;a<r.length;a++){var s=parseInt(r[a],n);s=1*s^t;var c=String.fromCharCode(s);i.push(c)}return i.join("")}},decodeUrl=function(e){return decrypto(e,64,25)},beforePageUnload=function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},parseURL=function(e){var t=document.createElement("a");return t.href=e,t},parseUrlQuery=function(e){var t={};try{var n=parseURL(e).search;(n=n.slice(1)).split("&").forEach((function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(e2){t[n]=r}}))}catch(e2){}return t},hashCode=function(e){for(var t=0,n=0,r=(e+="").length,i=0;i<r;i++)((t=31*t+e.charCodeAt(n++))>0x7fffffffffff||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t};function assign(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var defaultConverter={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(e,t){function n(n,r,i){if("undefined"!=typeof document){"number"==typeof(i=assign({},t,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=n+"="+e.write(r,n)+o}}return Object.create({set:n,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=e.read(a,s),t===s)break}catch(e2){}}return t?r[t]:r}},remove:function(e,t){n(e,"",assign({},t,{expires:-1}))},withAttributes:function(e){return init(this.converter,assign({},this.attributes,e))},withConverter:function(e){return init(assign({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var api=init(defaultConverter,{path:"/"}),_getCookie=function(e,t){try{return api.get(e,{domain:t||document.domain})}catch(e2){return""}},_setCookie=function(e,t,n,r){try{var i=r||document.domain,o=+new Date+(n||6048e5);api.set(e,t,{expires:new Date(o),path:"/",domain:i})}catch(e2){}},Memory=function(){function e(){_classCallCheck$5(this,e),this.cache={}}return _createClass$6(e,[{key:"setItem",value:function(e,t){this.cache[e]=t}},{key:"getItem",value:function(e){return this.cache[e]}},{key:"removeItem",value:function(e){this.cache[e]=void 0}},{key:"getCookie",value:function(e,t){return _getCookie(e,t)}},{key:"setCookie",value:function(e,t,n,r){_setCookie(e,t,n,r)}}]),e}();function isSupportLS(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e2){return!1}}function isSupportSession(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e2){return!1}}var local={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e2){}return n||{}}catch(e2){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e2){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e2){}},getCookie:function(e,t){return _getCookie(e,t)},setCookie:function(e,t,n,r){_setCookie(e,t,n,r)},isSupportLS:isSupportLS()},session={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e2){}return n||{}}catch(e2){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e2){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e2){}},getCookie:function(e,t){return _getCookie(e,t)},setCookie:function(e,t,n,r){_setCookie(e,t,n,r)},isSupportSession:isSupportSession()},Storage=function(){function e(t,n){_classCallCheck$5(this,e),this._storage=n&&"session"===n?session:!t&&local.isSupportLS?local:new Memory}return _createClass$6(e,[{key:"getItem",value:function(e){return this._storage.getItem(e)}},{key:"setItem",value:function(e,t){this._storage.setItem(e,t)}},{key:"getCookie",value:function(e,t){return this._storage.getCookie(e,t)}},{key:"setCookie",value:function(e,t,n,r){this._storage.setCookie(e,t,n,r)}},{key:"removeItem",value:function(e){this._storage.removeItem(e)}}]),e}(),UTM=function(e,t,n,r){var i=new Storage(!1),o=new Storage(!1,"session"),a=e?"_tea_utm_cache_".concat(e):"_tea_utm_cache",s=e?"_$utm_from_url_".concat(e):"_$utm_from_url",c={},l=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],u={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var d=!1;for(var h in u)u[h]&&(-1!==l.indexOf(h)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[h]=u[h]):c[h]=u[h],d=!0);if(d)o.setItem(s,"1"),i.setCookie(a,JSON.stringify(c),r,n);else{var f=i.getCookie(a,n);f&&(c=JSON.parse(f))}o.getItem(s)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch(e2){return u}return c},Client=function(){function e(t,n,r){_classCallCheck$5(this,e),this.appid=t,this.domain=n,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=r}return _createClass$6(e,[{key:"init",value:function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,r=n?parseURL(n).hostname:"",i=parseUrlQuery(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=UTM(this.appid,i,this.domain,this.cookie_expire);var a=this.browser(),s=this.os();return{browser:a.browser,browser_version:a.browser_version,platform:o,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:n,referrer_host:r,utm:this.utm,latest_data:this.last(n,r)}}},{key:"last",value:function(e,t){var n="",r="",i="",o=location.hostname,a=!1;if(e&&t&&o!==t){n=e,r=t,a=!0;var s=parseUrlQuery(e);s.keyword&&(i=s.keyword)}return{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:i,isLast:a}}},{key:"browser",value:function(){var e,t,n="",r="".concat(parseFloat(this.appVersion)),i=this.userAgent;return-1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(n="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),r=i.substring(e+5)):(e=i.indexOf("Edg"),r=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!==(e=i.indexOf("Lark"))?(n="Lark",r=i.substring(e+5,e+11)):-1!==(e=i.indexOf("MetaSr"))?(n="sougoubrowser",r=i.substring(e+7,e+10)):-1!==i.indexOf("MQQBrowser")||-1!==i.indexOf("QQBrowser")?(n="qqbrowser",-1!==i.indexOf("MQQBrowser")?(e=i.indexOf("MQQBrowser"),r=i.substring(e+11,e+15)):-1!==i.indexOf("QQBrowser")&&(e=i.indexOf("QQBrowser"),r=i.substring(e+10,e+17))):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("MicroMessenger"))?(n="weixin",r=i.substring(e+15,e+20)):-1!==(e=i.indexOf("360"))?(n="360browser",r=i.substring(i.indexOf("Chrome")+7)):-1!==i.indexOf("baidubrowser")||-1!==i.indexOf("BIDUBrowser")?(-1!==i.indexOf("baidubrowser")?(e=i.indexOf("baidubrowser"),r=i.substring(e+13,e+16)):-1!==i.indexOf("BIDUBrowser")&&(e=i.indexOf("BIDUBrowser"),r=i.substring(e+12,e+15)),n="baidubrowser"):-1!==(e=i.indexOf("xiaomi"))?-1!==i.indexOf("openlanguagexiaomi")?(n="openlanguage xiaomi",r=i.substring(e+7,e+13)):(n="xiaomi",r=i.substring(e-7,e-1)):-1!==(e=i.indexOf("TTWebView"))?(n="TTWebView",r=i.substring(e+10,e+23)):(-1!==(e=i.indexOf("Chrome"))||-1!==(e=i.indexOf("Chrome")))&&(n="Chrome",r=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("QQ"))?(n="qqbrowser",r=i.substring(e+10,e+16)):-1!==(e=i.indexOf("Safari"))&&(n="Safari",r=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))?(n="Firefox",r=i.substring(e+8)):-1!==(e=i.indexOf("MicroMessenger"))?(n="weixin",r=i.substring(e+15,e+20)):-1!==(e=i.indexOf("QQ"))&&(n="qqbrowser",r=i.substring(e+3,e+8)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(")"))&&(r=r.substring(0,t)),{browser:n,browser_version:r}}},{key:"os",value:function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],r=0;r<n.length;r++){var i=n[r];if(i.r.test(this.userAgent)){"Mac OS X"===(e=i.s)&&this.isNewIpad()&&(e="iOS");break}}var o,a,s=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:".concat(e,")"),"i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(a=s(/Android ([\.\_\d]+)/,o=this.userAgent))||(a=s(/Android\/([\.\_\d]+)/,o)),t=a,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?"".concat(t[1],".").concat(t[2],".").concat(0|t[3]):"",e="ios"}return{os_name:e,os_version:t}}},{key:"getDeviceModel",value:function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),r=n.indexOf(";");t=n.slice(0,r)}}catch(e2){return t.trim()}return t.trim()}},{key:"isNewIpad",value:function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1}}]),e}(),LOG;LOG={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"};var AB_DOMAINS={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},LOG_URL=LOG,SDK_VERSION="5.0.29",SDK_USE_TYPE="npm",SDK_TYPE=SDK_USE_TYPE,Types=function(e){return e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e}(Types||{}),DebuggerMesssge$1=function(e){return e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready",e}(DebuggerMesssge$1||{}),undef=void 0,date=new Date,timeZoneMin=date.getTimezoneOffset(),timezone=parseInt("".concat(-timeZoneMin/60),10),tz_offset=60*timeZoneMin,WEBID_URL="/webid",TOB_URL="/tobid",REPORT_URL="/list",COOKIE_EXPIRE=6048e5,ConfigManager=function(){function e(t,n){_classCallCheck$5(this,e),this.is_first_time=!0,this.configPersist=!1,this.initConfig=n,this.collect=t;var r=new Client(n.app_id,n.cookie_domain||"",n.cookie_expire||COOKIE_EXPIRE).init(),i="__tea_cache_first_".concat(n.app_id);this.configKey="__tea_cache_config_".concat(n.app_id),this.sessionStorage=new Storage(!1,"session"),this.localStorage=new Storage(!1,"local"),n.configPersist&&(this.configPersist=!0,this.storage=1===n.configPersist?this.sessionStorage:this.localStorage);var o=this.localStorage.getItem(i);o&&"1"===o?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(i,"1")),this.envInfo={user:{user_unique_id:undef,user_type:undef,user_id:undef,user_is_auth:undef,user_is_login:undef,device_id:undef,web_id:undef,ip_addr_id:undef,user_unique_id_type:undef},header:{app_id:undef,app_name:undef,app_install_id:undef,install_id:undef,app_package:undef,app_channel:undef,app_version:undef,os_name:r.os_name,os_version:r.os_version,device_model:r.device_model,ab_client:undef,traffic_type:undef,client_ip:undef,device_brand:undef,os_api:undef,access:undef,language:r.language,region:undef,app_language:undef,app_region:undef,ab_version:undef,creative_id:r.utm.creative_id,ad_id:r.utm.ad_id,campaign_id:r.utm.campaign_id,log_type:undef,rnd:undef,platform:r.platform,sdk_version:SDK_VERSION,sdk_lib:"js",province:undef,city:undef,timezone:timezone,tz_offset:tz_offset,tz_name:undef,sim_region:undef,carrier:undef,resolution:"".concat(r.screen_width,"x").concat(r.screen_height),browser:r.browser,browser_version:r.browser_version,referrer:r.referrer,referrer_host:r.referrer_host,width:r.screen_width,height:r.screen_height,screen_width:r.screen_width,screen_height:r.screen_height,utm_term:r.utm.utm_term,utm_content:r.utm.utm_content,utm_source:r.utm.utm_source,utm_medium:r.utm.utm_medium,utm_campaign:r.utm.utm_campaign,tracer_data:JSON.stringify(r.utm.tracer_data),custom:{},wechat_unionid:undef,wechat_openid:undef}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.initDomain()}return _createClass$6(e,[{key:"initDomain",value:function(){var e=this.initConfig.channel_domain;if(e)this.domain=e;else{var t=this.initConfig.channel;this.domain=decodeUrl(LOG_URL[t])}}},{key:"setDomain",value:function(e){this.domain=e}},{key:"getDomain",value:function(){return this.domain}},{key:"setAbVersion",value:function(e){this.ab_version=e}},{key:"getAbVersion",value:function(){return this.ab_version}},{key:"setAbData",value:function(e){this.ab_data=e}},{key:"getAbData",value:function(){return this.ab_data||{}}},{key:"getUrl",value:function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||REPORT_URL;break;case"webid":t=WEBID_URL;break;case"tobid":t=TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version=".concat(SDK_VERSION,"&sdk_name=web&app_id=").concat(this.initConfig.app_id,"&caller=").concat(this.initConfig.caller)),"".concat(this.getDomain()).concat(t).concat(n)}},{key:"set",value:function(e){var t=this;Object.keys(e).forEach((function(n){if(void 0!==e[n]&&null!==e[n]||t.delete(n),"evtParams"===n)t.evtParams=_objectSpread2$5(_objectSpread2$5({},t.evtParams||{}),e.evtParams||{});else if("_staging_flag"===n)t.evtParams=_objectSpread2$5(_objectSpread2$5({},t.evtParams||{}),{},{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var r="",i="";if(n.indexOf(".")>-1){var o=n.split(".");r=o[0],i=o[1]}r?"user"===r||"header"===r?t.envInfo[r][i]=e[n]:t.envInfo.header.custom[i]=e[n]:t.envInfo.user.hasOwnProperty(n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):t.envInfo.header.hasOwnProperty(n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}}))}},{key:"get",value:function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:this.envInfo.user.hasOwnProperty(e)?this.envInfo.user[e]:this.envInfo.header.hasOwnProperty(e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e2){console.log("get config stringify error "),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message})}}},{key:"setStore",value:function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(e2){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message})}}},{key:"getStore",value:function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey);return e&&Object.keys(e).length?e:null}catch(e2){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message}),null}}},{key:"delete",value:function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey);t&&t.hasOwnProperty(e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e2){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message})}}}]),e}(),Logger=function(){function e(t,n){_classCallCheck$5(this,e),this.isLog=n||!1,this.name=t||""}return _createClass$6(e,[{key:"info",value:function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[instance: ".concat(this.name,"] ")+e)}},{key:"warn",value:function(e){this.isLog&&console.warn("[instance: ".concat(this.name,"] ")+e)}},{key:"error",value:function(e){this.isLog&&console.error("[instance: ".concat(this.name,"] ")+e)}},{key:"throw",value:function(e){throw this.error(this.name),new Error(e)}}]),e}(),AppBridge=function(){function e(t,n){_classCallCheck$5(this,e),this.collect=t,this.native=n}return _createClass$6(e,[{key:"bridgeInject",value:function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(e2){return console.log("AppLogBridge is not inject"),!1}}},{key:"bridgeReady",value:function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){console.log("AppLogBridge is started? : ".concat(e)),e?t(!0):n(!1)})):n(!1)}catch(e2){console.log("AppLogBridge, error:".concat(JSON.stringify(e2.stack))),n(!1)}}))}},{key:"setNativeAppId",value:function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: ".concat(e))}catch(e2){console.error("setNativeAppId error")}}},{key:"setConfig",value:function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(e2){console.error("setConfig error")}}},{key:"setUserUniqueId",value:function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e2){console.error("setUserUniqueId error")}}},{key:"addHeaderInfo",value:function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e2){console.error("addHeaderInfo error")}}},{key:"setHeaderInfo",value:function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e2){console.error("setHeaderInfo error")}}},{key:"removeHeaderInfo",value:function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e2){console.error("removeHeaderInfo error")}}},{key:"reportPv",value:function(e){this.onEventV3("predefine_pageview",e)}},{key:"onEventV3",value:function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge\u57cb\u70b9\u4e0a\u62a5",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e2){console.error("onEventV3 error")}}},{key:"profileSet",value:function(e){try{AppLogBridge.profileSet(e)}catch(error){console.error("profileSet error")}}},{key:"profileSetOnce",value:function(e){try{AppLogBridge.profileSetOnce(e)}catch(error){console.error("profileSetOnce error")}}},{key:"profileIncrement",value:function(e){try{AppLogBridge.profileIncrement(e)}catch(error){console.error("profileIncrement error")}}},{key:"profileUnset",value:function(e){try{AppLogBridge.profileUnset(e)}catch(error){console.error("profileUnset error")}}},{key:"profileAppend",value:function(e){try{AppLogBridge.profileAppend(e)}catch(error){console.error("profileAppend error")}}}]),e}(),ERROR$1={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function fetch$1(e,t,n,r,i,o,a,s,c){try{var l=new XMLHttpRequest,u=s||"POST";l.open(u,"".concat(e),!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),a&&l.setRequestHeader("X-MCS-AppKey","".concat(a)),r&&(l.withCredentials=!0),l.onload=function(){if(i){var e=null;if(l.responseText){try{e=JSON.parse(l.responseText)}catch(e2){e={}}i(e,t)}}},n&&(l.timeout=n,l.ontimeout=function(){o&&o(t,ERROR$1.TIMEOUT)}),l.onerror=function(){l.abort(),o&&o(t,ERROR$1.XHR_ON)},c?l.send(t):l.send(JSON.stringify(t))}catch(e2){}}var GIF_URL="/gif",ERROR={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},isSupportBeacon=function(){return!(!window.navigator||!window.navigator.sendBeacon)},encodePayload=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t+="&".concat(n,"=").concat(encodeURIComponent(JSON.stringify(e[n]))));return"&"===t[0]?t.slice(1):t},sendByImg=function(e,t,n,r){try{var i,o=e.match(/\/v\d\//);i=o?o[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/";var a=e.split(i)[0];if(!a)return void r(e,t,ERROR.NO_URL);t.forEach((function(i){var o=encodePayload(i),s=new Image(1,1);s.onload=function(){s=null,n&&n()},s.onerror=function(){s=null,r&&r(e,t,ERROR.IMG_ON)},s.src="".concat(a).concat(GIF_URL,"?").concat(o)}))}catch(e2){r&&r(e,t,ERROR.IMG_CATCH,e2.message)}},request=function(e,t,n,r,i,o,a,s){var c=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===c.indexOf("MSIE 8.0")&&-1===c.indexOf("MSIE 9.0")){if(a)return isSupportBeacon()?void(window.navigator.sendBeacon(e,JSON.stringify(t))?i():o(e,t,ERROR.BEACON_FALSE)):void sendByImg(e,t,i,o)}else sendByImg(e,t,i,o);fetch$1(e,t,n,r,i,o,"","",s)},EventCheck=function(){function e(t,n){_classCallCheck$5(this,e),this.collector=t,this.config=n,this.eventNameWhiteList=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure"],this.paramsNameWhiteList=["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time","_staging_flag"],this.regStr=new RegExp("^[a-zA-Z0-9][a-z0-9A-Z_.-]{1,255}$")}return _createClass$6(e,[{key:"checkVerify",value:function(e){var t=this;if(!e||!e.length)return!1;var n=e[0];if(!n)return!1;var r=n.events,i=n.header;if(!r||!r.length)return!1;var o=!0;return r.forEach((function(e){t.checkEventName(e.event)||(o=!1,e.checkEvent="\u4e8b\u4ef6\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934"),t.checkEventParams(e.params)||(o=!1,e.checkParams="\u5c5e\u6027\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934")})),this.checkEventParams(i)||(o=!1),o}},{key:"checkEventName",value:function(e){return!!e&&this.calculate(e,"event")}},{key:"checkEventParams",value:function(e){var t=e;if("string"==typeof e&&(t=JSON.parse(t)),!Object.keys(t).length)return!0;for(var n in t)return!!this.calculate(n,"params")&&(!("string"==typeof t[n]&&t[n].length>1024)||(console.warn("params: ".concat(n," can not over 1024 byte, please check;")),!1));return!0}},{key:"calculate",value:function(e,t){return-1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||(this.regStr.test(e)?!new RegExp("^\\$").test(e)&&!new RegExp("^__").test(e)||(console.warn("".concat("event"===t?"event":"params"," name: ").concat(e," can not start with $ or __, pleace check;")),!1):(console.warn("".concat("event"===t?"event":"params"," name: ").concat(e," is illegal, can not start with $ or __, pleace check;")),!1))}}]),e}(),Event$1=function(){function e(){_classCallCheck$5(this,e),this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return _createClass$6(e,[{key:"apply",value:function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new EventCheck(e,t),this.cacheStorgae=new Storage(!0),this.localStorage=new Storage(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_".concat(this.configManager.get("app_id")),this.beconKey="__tea_cache_events_becon_".concat(this.configManager.get("app_id")),this.abKey="__tea_sdk_ab_version_".concat(this.configManager.get("app_id")),this.collect.on(Types.Ready,(function(){n.reportAll(!1)})),this.collect.on(Types.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(Types.Event,(function(e){n.event(e)})),this.collect.on(Types.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(Types.CleanEvents,(function(){n.reportAll(!1)})),this.linster()}},{key:"linster",value:function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),beforePageUnload((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)}},{key:"reportAll",value:function(e){this.report(e),this.reportBecon()}},{key:"event",value:function(e){var t=this;try{var n=this.cacheStorgae.getItem(this.eventKey)||[],r=[].concat(_toConsumableArray$1(e),_toConsumableArray$1(n));if(this.cacheStorgae.setItem(this.eventKey,r),this.reportTimeout&&clearTimeout(this.reportTimeout),r.length>=this.maxReport)this.report(!1);else{var i=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),i)}}catch(e2){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message})}}},{key:"beconEvent",value:function(e){var t=this.cacheStorgae.getItem(this.beconKey)||[],n=[].concat(_toConsumableArray$1(e),_toConsumableArray$1(t));this.cacheStorgae.setItem(this.beconKey,n),this.collect.destroyInstance||this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(n)),!0))}},{key:"reportBecon",value:function(){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}}},{key:"report",value:function(e){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}}},{key:"sliceEvent",value:function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var r;r=e.slice(n,n+this.eventLimit);var i=this.split(this.merge(r));this.send(i,t)}else{var o=this.split(this.merge(e));this.send(o,t)}}},{key:"merge",value:function(e,t){var n=this,r=this.configManager.get(),i=r.header,o=r.user;i.custom=JSON.stringify(i.custom);var a=this.configManager.get("evtParams"),s=this.configManager.get("user_unique_id_type"),c=e.map((function(e){try{Object.keys(a).length&&!t&&(e.params=_objectSpread2$5(_objectSpread2$5({},a),e.params)),s&&(e.params.$user_unique_id_type=s);var r=n.localStorage.getItem(n.abKey);return r&&r.uuid&&r.uuid===o.user_unique_id&&n.configManager.getAbVersion()&&(e.ab_sdk_version=n.configManager.getAbVersion()),e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(e2){return n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message}),e}})),l=JSON.parse(JSON.stringify({events:c,user:o,header:i}));l.local_time=Math.floor(Date.now()/1e3),l.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0;var u=[];return u.push(l),u}},{key:"split",value:function(e){return e.map((function(e){var t=[];return t.push(e),t}))}},{key:"send",value:function(e,t){var n=this;e.length&&e.forEach((function(e){try{var r=JSON.parse(JSON.stringify(e));n.config.filter&&((r=n.config.filter(r))||console.warn("filter must return data !!")),n.collect.eventFilter&&r&&((r=n.collect.eventFilter(r))||console.warn("filterEvent api must return data !!"));var i=r||e;if(n.eventCheck.checkVerify(i),!i.length)return;n.collect.emit(Types.SubmitBefore,i),n.collect.emit(Types.SubmitVerify,i),request(n.reportUrl,i,n.timeout,n.enable_ttwebid,(function(e,t){e&&0!==e.e?(n.collect.emit(Types.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u5931\u8d25",time:Date.now(),data:i,code:e.e,failType:"\u6570\u636e\u5f02\u5e38",status:"fail"})):(n.collect.emit(Types.SubmitScuess,{eventData:t,res:e}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:i,code:200,status:"success"}))}),(function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(Types.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u7f51\u7edc\u5f02\u5e38",time:Date.now(),data:i,code:t,failType:"\u7f51\u7edc\u5f02\u5e38",status:"fail"})}),t,!1),n.collect.emit(Types.SubmitAfter,i)}catch(e2){console.warn("something error, ".concat(JSON.stringify(e2.stack))),n.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message})}}))}}]),e}(),b=function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},localWebId=function(){return b().replace(/-/g,"").slice(0,19)},Token=function(){function e(){_classCallCheck$5(this,e),this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return _createClass$6(e,[{key:"apply",value:function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new Storage(!1),this.tokenKey="__tea_cache_tokens_".concat(t.app_id),this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(Types.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(Types.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()}},{key:"checkStorage",value:function(){var e=this;if(this.enableCookie){var t=this.storage.getCookie(this.tokenKey,this.cookieDomain);this.cacheToken=t&&"string"==typeof t?JSON.parse(t):{}}else this.cacheToken=this.storage.getItem(this.tokenKey)||{};this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(Types.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(Types.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()}},{key:"check",value:function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:localWebId(),user_unique_id:this.configManager.get("user_unique_id")||localWebId()}):this.remoteWebid()}},{key:"checkEnv",value:function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=parseUrlQuery(window.location.href);return!(!t||!t.Web_ID)&&(this.complete({web_id:"".concat(t.Web_ID),user_unique_id:this.configManager.get("user_unique_id")||"".concat(t.Web_ID)}),!0)}return!1}},{key:"remoteWebid",value:function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u53d1\u8d77WEBID\u8bf7\u6c42",logType:"fetch",level:"info",time:Date.now(),data:n}),fetch$1(t,n,3e3,!1,(function(t){t&&0===t.e?e.complete({web_id:e.configManager.get("web_id")||t.web_id,user_unique_id:e.configManager.get("user_unique_id")||t.web_id}):(e.collect.emit(Types.TokenError),console.warn("[]appid: ".concat(e.config.app_id," webid error, init error~"))),e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u6210\u529f",logType:"fetch",level:"info",time:Date.now(),data:t})}),(function(){e.collect.emit(Types.TokenError),e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u7f51\u7edc\u5f02\u5e38",logType:"fetch",level:"error",time:Date.now(),data:null}),console.warn("[]appid: ".concat(e.config.app_id,", get webid error, init error~"))}))}},{key:"complete",value:function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types.TokenComplete)}},{key:"completeTtWid",value:function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types.TokenComplete)}},{key:"setUuid",value:function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===r)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(Types.TokenChange,"uuid"),this.collect.emit(Types.SessionReset)}else this.clearUuid()}},{key:"clearUuid",value:function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(Types.TokenReset))}},{key:"setWebId",value:function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(Types.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(Types.TokenChange,"webid")),this.setStorage(this.cacheToken)}}},{key:"setStorage",value:function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.enableCookie||this.enable_ttwebid?(this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain),this.enable_ttwebid&&(delete e.web_id,this.storage.setItem(this.tokenKey,e))):this.storage.setItem(this.tokenKey,e),this.cacheToken=e}},{key:"getReady",value:function(){return this.tokenReady}},{key:"getTobId",value:function(){var e=this,t=this.configManager.getUrl("tobid");return new Promise((function(n){fetch$1(t,{app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},3e4,e.enable_ttwebid,(function(e){e&&0===e.e?n(e.tobid):n("")}),(function(){n("")}))}))}}]),e}(),sessionId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},Session=function(){function e(){_classCallCheck$5(this,e)}return _createClass$6(e,[{key:"apply",value:function(e,t){var n=this;this.collect=e,this.storage=new Storage(!1,"session"),this.sessionKey="__tea_session_id_".concat(t.app_id),this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSession||(this.setSessionId(),this.collect.on(Types.SessionReset,(function(){n.resetSessionId()})),this.collect.on(Types.SessionResetTime,(function(){n.updateSessionIdTime()})))}},{key:"updateSessionIdTime",value:function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:sessionId(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}}},{key:"setSessionId",value:function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:sessionId(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime)}},{key:"getSessionId",value:function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""}},{key:"resetExpTime",value:function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))}},{key:"resetSessionId",value:function(){var e={sessionId:sessionId(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,e)}},{key:"checkEXp",value:function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:sessionId(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))}}]),e}(),AutoBase=function(e){var t=e.app_id,n=e.channel,r=e.onTokenReady,i="".concat(LOG_URL[n],"/webid"),o=new Storage(!1),a="__tea_cache_tokens_".concat(t),s=o.getItem(a);s&&s.web_id?r(s.web_id):request(i,{app_key:"",app_id:t,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer},3e3,!1,(function(e){if(e&&0===e.e){r(e.web_id);var t={web_id:e.web_id,user_unique_id:e.web_id,timestamp:Date.now()};o.setItem(a,t)}else r("")}),(function(){r("")}),!0)},Debugger=function(){function e(t,n){_classCallCheck$5(this,e),this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.collect=t,this.config=n,this.app_id=n.app_id,this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"],this.load()}return _createClass$6(e,[{key:"loadScript",value:function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(e2){console.log("devTool load fail, ".concat(e2.message))}}},{key:"load",value:function(){try{this.loadBaseInfo(),this.loadHook();var e=parseUrlQuery(window.location.href);if(!e.open_devtool_web||parseInt(e.app_id)!==this.app_id)return;this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(e2){console.log("debug fail, ".concat(e2.message))}}},{key:"loadDevTool",value:function(){this.loadScript("https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/devtool/debug-web.js")}},{key:"loadBaseInfo",value:function(){var e=this;this.info=[{title:"\u57fa\u672c\u4fe1\u606f",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,"\u4e0a\u62a5\u57df\u540d":this.collect.configManager.getDomain(),"SDK\u7248\u672c":SDK_VERSION,"SDK\u5f15\u5165\u65b9\u5f0f":SDK_TYPE}},{title:"\u7528\u6237\u4fe1\u606f",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"\u70b9\u51fb\u83b7\u53d6SSID"}},{title:"\u516c\u5171\u53c2\u6570\u4fe1\u606f",type:2,infoName:{"\u6d4f\u89c8\u5668":this.collect.configManager.get("browser"),"\u6d4f\u89c8\u5668\u7248\u672c":this.collect.configManager.get("browser_version"),"\u5e73\u53f0":this.collect.configManager.get("platform"),"\u8bbe\u5907\u578b\u53f7":this.collect.configManager.get("device_model"),"\u64cd\u4f5c\u7cfb\u7edf":this.collect.configManager.get("os_name"),"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c":this.collect.configManager.get("os_version"),"\u5c4f\u5e55\u5206\u8fa8\u7387":this.collect.configManager.get("os_version"),"\u6765\u6e90":this.collect.configManager.get("referrer"),"\u81ea\u5b9a\u4e49\u4fe1\u606f":""}},{title:"\u914d\u7f6e\u4fe1\u606f",type:3,infoName:{"\u5168\u57cb\u70b9":!!this.config.autotrack,"\u505c\u7559\u65f6\u957f":!!this.config.enable_stay_duration}},{title:"A/B\u914d\u7f6e\u4fe1\u606f",type:4,infoName:{"A/B\u5b9e\u9a8c":!!this.config.enable_ab_test}},{title:"\u5ba2\u6237\u7aef\u4fe1\u606f",type:3,infoName:{"\u6253\u901a\u5f00\u5173":!!this.config.Native}}],this.log=[],this.event=[],this.collect.on(Types.Ready,(function(){e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id,e.info[2].infoName["\u81ea\u5b9a\u4e49\u4fe1\u606f"]=JSON.stringify(e.collect.configManager.get("custom")),e.config.enable_ab_test&&(e.info[4].infoName["\u5df2\u66dd\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["A/B\u57df\u540d"]=e.config.ab_channel_domain||decodeUrl(AB_DOMAINS[e.config.channel]),e.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=e.collect.configManager.getAbData()),e.config.Native&&(e.info[5].infoName["\u662f\u5426\u6253\u901a"]=!!e.collect.bridgeReport)}))}},{key:"loadHook",value:function(){var e=this;this.collect.on(DebuggerMesssge$1.DEBUGGER_MESSAGE,(function(t){switch(t.type){case DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.info[4].infoName["\u5df2\u66dd\u5149VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=e.collect.configManager.getAbData()):"USER"===t.secType&&(e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id),void e.updateInfo();case DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var r=t.data[0],i=r.events;if(!i.length)return;i.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.success=t.status,n.type=-1!==e.filterEvent.indexOf(n.event)?"sdk":"cus",n.type=e.collect.bridgeReport?"bridge":n.type,n.info="","fail"===t.status&&(n.info={message:"code: ".concat(t.code,"\uff0c msg: ").concat(t.failType)})})),e.updateEvent(r)}return}}))}},{key:"addLintener",value:function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;console.log("inittttt"),e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.info[1].infoName.ssid=t.tobid,e.updateInfo()}))}))}},{key:"sendData",value:function(e,t){try{var n={type:e,payload:t};(window.opener||window.parent).postMessage(n,this.devToolOrigin)}catch(e2){}}},{key:"updateInfo",value:function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)}},{key:"updateLog",value:function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)}},{key:"updateEvent",value:function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)}},{key:"loadDebuggerModule",value:function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.appendChild(document.createTextNode("#debugger-applog-web {\n      position: absolute;\n      width: 90px;\n      height: 30px;\n      background: #23c243;\n      border-radius: 6px;\n      color: #fff;\n      font-size: 12px;\n      bottom: 5%;\n      right: 10%;\n      text-align: center;\n      line-height: 30px;\n      cursor: pointer;\n      z-index:100;\n    }")),e.appendChild(t);var n=document.createElement("div");n.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web">AppLog\u8c03\u8bd5</div>';var r=document.createElement("div");r.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(n),document.getElementsByTagName("body")[0].appendChild(r),document.getElementById("debugger-applog-web").addEventListener("click",(function(){(window.opener||window.parent).postMessage({type:"devtool:web:open-draw"},location.origin)}))}}]),e}(),_excluded=["web_id","user_unique_id"],_Collector=function(){function e(t){_classCallCheck$5(this,e),this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroyInstance=!1,this.sdkReady=!1,this.adapters={},this.name=t,this.hook=new Hook,this.remotePlugin=new Map,this.Types=Types,this.adapters.fetch=fetch$1,this.adapters.storage=Storage}return _createClass$6(e,[{key:"usePlugin",value:function(e,t,n){e&&(t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))}},{key:"init",value:function(t){var n=this;this.inited?console.warn("[instance: ".concat(this.name,"], every instance's api: init,  can be call only one time!")):t&&isObject(t)?t.app_id&&isNumber(t.app_id)?!t.app_key||isString(t.app_key)?(t.channel_domain||-1!==["cn","sg","va"].indexOf(t.channel)||(console.warn("channel must be `cn`, `sg`,`va` !!!"),t.channel="cn"),this.logger=new Logger(this.name,t.log),this.appBridge=new AppBridge(this,t.Native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new ConfigManager(this,t),this.debugger=new Debugger(this,t),this.initConfig=t,this.emit(Types.Init),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cINIT",data:t,level:"info",time:Date.now()}),t.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.set({app_id:t.app_id}),this.eventManager=new Event$1,this.tokenManager=new Token,this.sessionManager=new Session,Promise.all([new Promise((function(e){n.once(Types.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){n.once(Types.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var r=t.plugin,i=t.options,o=Object.assign(n.initConfig,i),a=new r;return a.apply(n,o),e.push(a),e}),n.pluginInstances)}catch(e2){console.log("load plugin error, ".concat(e2.message)),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message})}n.sdkReady=!0,n.emit(Types.Ready),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u521d\u59cb\u5316\u5b8c\u6210",time:Date.now(),level:"info",data:n.configManager.get("user")}),n.logger.info("appid: ".concat(t.app_id,", userInfo:").concat(JSON.stringify(n.configManager.get("user")))),n.logger.info("appid: ".concat(t.app_id,", sdk is ready, version is ").concat(SDK_VERSION,", you can report now !!!")),t.disable_auto_pv&&(n.disableAutoPageView=!0);try{(t.enable_ab_test||t.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e2){n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message})}n.pageView(),n.on(Types.TokenChange,(function(e){"webid"===e&&n.pageView(),n.logger.info("appid: ".concat(t.app_id," token change, new userInfo:").concat(JSON.stringify(n.configManager.get("user")))),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u8bbe\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:n.configManager.get("user")})})),n.on(Types.TokenReset,(function(){n.logger.info("appid: ".concat(t.app_id," token reset, new userInfo:").concat(JSON.stringify(n.configManager.get("user")))),n.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u91cd\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:n.configManager.get("user")})})),n.on(Types.RouteChange,(function(e){e.init||t.disable_route_report||n.pageView()}));try{(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e2){}})),this.tokenManager.apply(this,t),this.eventManager.apply(this,t),this.sessionManager.apply(this,t)),this.inited=!0):console.warn("app_key param is error, must be string, please check!"):console.warn("app_id param is error, must be number, please check!"):console.warn("init params error,please check")}},{key:"config",value:function(e){if(this.inited)if(e&&isObject(e))if(this.bridgeReport)this.appBridge.setConfig(e);else{e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv);var t=_objectSpread2$5({},e);if(this.initConfig&&this.initConfig.configPersist){var n=this.configManager.getStore();n&&(t=Object.assign(n,e)),this.configManager.setStore(e)}var r=t;r.web_id,r.user_unique_id;var i=_objectWithoutProperties$1(r,_excluded);t.hasOwnProperty("web_id")&&this.emit(Types.ConfigWebId,t.web_id),t.hasOwnProperty("user_unique_id")&&this.emit(Types.ConfigUuid,t.user_unique_id),this.configManager.set(i),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cCONFIG",level:"info",time:Date.now(),data:t})}else console.warn("config params is error, please check");else console.warn("config must be use after function init")}},{key:"setDomain",value:function(e){this.configManager&&this.configManager.setDomain(e),this.emit(Types.ConfigDomain)}},{key:"getConfig",value:function(e){return this.configManager.get(e)}},{key:"send",value:function(){this.start()}},{key:"start",value:function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(Types.Start),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cSTART",level:"info",time:Date.now()}),this.bridgeReport&&(this.pageView(),this.emit(Types.Ready)))}},{key:"event",value:function(e,t){var n=this;try{if(this.initConfig&&this.initConfig.disable_track_event)return;var r=[];Array.isArray(e)?e.forEach((function(e){r.push(n.processEvent(e[0],e[1]||{}))})):r.push(this.processEvent(e,t)),this.bridgeReport?r.forEach((function(e){var t=e.event,r=e.params;n.appBridge.onEventV3(t,JSON.stringify(r))})):r.length&&(this.emit(Types.Event,r),this.emit(Types.SessionResetTime))}catch(e2){console.warn("something error, please check"),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message})}}},{key:"beconEvent",value:function(e,t){if(!this.initConfig||!this.initConfig.disable_track_event)if(Array.isArray(e))console.warn("beconEvent not support batch report, please check");else{var n=[];n.push(this.processEvent(e,t||{})),n.length&&(this.emit(Types.BeconEvent,n),this.emit(Types.SessionResetTime))}}},{key:"processEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=/^event\./,r=e;n.test(e)&&(r=e.slice(6));var i,o=t;"object"!==_typeof$4(o)&&(o={}),o.profile?delete o.profile:o.event_index=getIndex(),o.local_ms?(i=o.local_ms,delete o.local_ms):i=+new Date;var a={event:r,params:o,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0};return a}catch(e2){return this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e2.message}),{event:e,params:t}}}},{key:"filterEvent",value:function(e){this.eventFilter=e}},{key:"on",value:function(e,t){this.hook.on(e,t)}},{key:"once",value:function(e,t){this.hook.once(e,t)}},{key:"off",value:function(e,t){this.hook.off(e,t)}},{key:"emit",value:function(e,t,n){this.hook.emit(e,t,n)}},{key:"set",value:function(e){this.hook.set(e)}},{key:"pageView",value:function(){this.disableAutoPageView||this.predefinePageView()}},{key:"predefinePageView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:"".concat(this.configManager.is_first_time)},n=_objectSpread2$5(_objectSpread2$5({},t),e);this.event("predefine_pageview",n)}},{key:"clearEventCache",value:function(){this.emit(Types.CleanEvents)}},{key:"setWebIDviaUnionID",value:function(e){if(e){var t=hashCode(e);this.config({web_id:"".concat(t),wechat_unionid:e}),this.emit(Types.CustomWebId)}}},{key:"setWebId",value:function(e){this.config({web_id:"".concat(e)})}},{key:"setWebIDviaOpenID",value:function(e){if(e){var t=hashCode(e);this.config({web_id:"".concat(t),wechat_openid:e}),this.emit(Types.CustomWebId)}}},{key:"setNativeAppId",value:function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)}},{key:"resetStayDuration",value:function(e,t,n){this.emit(Types.ResetStay,{url_path:e,title:t,url:n},Types.Stay)}},{key:"resetStayParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.emit(Types.SetStay,{url_path:e,title:t,url:n},Types.Stay)}},{key:"getToken",value:function(e,t){var n=this,r=!1,i=function(t){if(!r){r=!0;var i=n.configManager.get().user;return t&&(i.tobid=t,i["diss".split("").reverse().join("")]=t),e(_objectSpread2$5({},i))}},o=function(){n.tokenManager.getTobId().then((function(e){i(e)}))};this.sdkReady?o():(t&&setTimeout((function(){i()}),t),this.on(Types.Ready,(function(){o()})))}},{key:"profileSet",value:function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(Types.ProfileSet,e,Types.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSet",level:"info",time:Date.now(),data:e})}},{key:"profileSetOnce",value:function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(Types.ProfileSetOnce,e,Types.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSetOnce",level:"info",time:Date.now(),data:e})}},{key:"profileIncrement",value:function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(Types.ProfileIncrement,e,Types.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileIncrement",level:"info",time:Date.now(),data:e})}},{key:"profileUnset",value:function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(Types.ProfileUnset,e,Types.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileUnset",level:"info",time:Date.now(),data:e})}},{key:"profileAppend",value:function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(Types.ProfileAppend,e,Types.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileAppend",level:"info",time:Date.now(),data:e})}},{key:"setExternalAbVersion",value:function(e){this.emit(Types.AbExternalVersion,"string"==typeof e&&e?"".concat(e).trim():null,Types.Ab)}},{key:"getVar",value:function(e,t,n){this.emit(Types.AbVar,{name:e,defaultValue:t,callback:n},Types.Ab)}},{key:"getABconfig",value:function(e,t){this.emit(Types.AbConfig,{params:e,callback:t},Types.Ab)}},{key:"getAbSdkVersion",value:function(){return this.configManager.getAbVersion()}},{key:"onAbSdkVersionChange",value:function(e){var t=this;return this.emit(Types.AbVersionChangeOn,e,Types.Ab),function(){t.emit(Types.AbVersionChangeOff,e,Types.Ab)}}},{key:"offAbSdkVersionChange",value:function(e){this.emit(Types.AbVersionChangeOff,e,Types.Ab)}},{key:"openOverlayer",value:function(){this.emit(Types.AbOpenLayer,"",Types.Ab)}},{key:"closeOverlayer",value:function(){this.emit(Types.AbCloseLayer,"",Types.Ab)}},{key:"getAllVars",value:function(e){this.emit(Types.AbAllVars,e,Types.Ab)}},{key:"autoInitializationRangers",value:function(e){AutoBase(e)}},{key:"destoryInstace",value:function(){this.destroyInstance||(this.destroyInstance=!0,this.off(Types.TokenComplete))}}],[{key:"usePlugin",value:function(t,n,r){if(n){for(var i=!1,o=0,a=e.plugins.length;o<a;o++)if(e.plugins[o].name===n){e.plugins[o].plugin=t,e.plugins[o].options=r||{},i=!0;break}i||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})}}]),e}(),Collector=_Collector;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function asyncGeneratorStep(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(error){return void n(error)}s.done?t(c):Promise.resolve(c).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){asyncGeneratorStep(o,r,i,a,s,"next",e)}function s(e){asyncGeneratorStep(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}Collector.plugins=[];var runtime_1=createCommonjsModule((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new $(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?p:h,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",g={};function y(){}function v(){}function m(){}var _={};_[o]=function(){return this};var b=Object.getPrototypeOf,E=b&&b(b(A([])));E&&E!==n&&r.call(E,o)&&(_=E);var S=m.prototype=y.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,o,a,s){var c=u(e[i],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===_typeof$4(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function A(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return v.prototype=S.constructor=m,m.constructor=v,v.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},T(w.prototype),w.prototype[a]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new w(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(S),c(S,s,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}})),device_id_key="xgplayer_device_id",user_id_key="xgplayer_user_id",getCookie=function(e){if(!document.cookie)return null;for(var t=document.cookie.split(";"),n=0,r=t.length;n<r;n++){var i=t[n];if(t[n].indexOf(e)>=0)return i.split("=")[1]||null}},genRandomID=function(e){return String(Math.floor(Math.random()*Math.pow(10,e)))},getDeviceID=function(){var e=getCookie(device_id_key);if(e)return e;var t=genRandomID(11);return document.cookie=device_id_key+"="+t+";max-age=31536000;path=/",t},getUserId=function(){var e=getCookie(user_id_key);if(e)return e;var t=genRandomID(12);return document.cookie=user_id_key+"="+t+";max-age=31536000;path=/",t},getLogId=function(){return genRandomID(12)};function getBrowser(){var e=navigator.userAgent.toLowerCase(),t={},n={IE:window.ActiveXObject||"ActiveXObject"in window,Chrome:e.indexOf("chrome")>-1&&e.indexOf("safari")>-1,Firefox:e.indexOf("firefox")>-1,Opera:e.indexOf("opera")>-1,Safari:e.indexOf("safari")>-1&&-1==e.indexOf("chrome"),Edge:e.indexOf("edge")>-1,QQBrowser:/qqbrowser/.test(e),WeixinBrowser:/MicroMessenger/i.test(e)};for(var r in n)if(n[r]){var i="";if("IE"===r)i=e.match(/(msie\s|trident.*rv:)([\w.]+)/)[2];else if("Chrome"===r){for(var o in navigator.mimeTypes)"application/360softmgrplugin"===navigator.mimeTypes[o].type&&(r="360");var a=e.match(/chrome\/([\d.]+)/);i=a?a[1]:"-1"}else if("Firefox"===r){var s=e.match(/firefox\/([\d.]+)/);i=s?s[1]:"-1"}else if("Opera"===r){var c=e.match(/opera\/([\d.]+)/);i=c?c[1]:"-1"}else if("Safari"===r){var l=e.match(/version\/([\d.]+)/);i=l?l[1]:"-1"}else if("Edge"===r){var u=e.match(/edge\/([\d.]+)/);i=u?u[1]:"-1"}else if("QQBrowser"===r){var d=e.match(/qqbrowser\/([\d.]+)/);i=d?d[1]:"-1"}t.type=r,t.versions=parseInt(i)}return t}var sniffer={get device(){return sniffer.os.isPc?"pc":"mobile"},get browser(){var e=getBrowser();return e.type+"_"+e.versions},get os(){var e=navigator.userAgent;navigator.platform.toLowerCase();var t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!o;return{isTablet:o,isPhone:a,isAndroid:r,isPc:!(a||r||n||o),isSymbian:n,isWindowsPhone:t,isFireFox:i}},get operation_os(){for(var e=navigator.userAgent,t=[{s:"windows",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1|Windows 8.1|Windows NT 6.3|Windows 8|Windows NT 6.2|Windows 7|Windows NT 6.1)/},{s:"android",r:/Android/},{s:"linux",r:/(Linux|X11)/},{s:"ios",r:/(iPhone|iPad|iPod)/},{s:"mac",r:/Mac OS X/},{s:"mac",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],n=0;n<t.length;n++){var r=t[n];if(r.r.test(e))return r.s}return"unknown"}};function getCurrentTime(){return(new Date).getTime()}function getPlayFormat(e){var t="unknown";return"string"!=typeof e?t:e.indexOf(".flv")>-1?"flv":e.indexOf(".m3u8")>-1?"m3u8":e.indexOf(".mp4")>-1?"mp4":e.indexOf(".sdp")>-1?"rts":t}function getPlayerCore(e){if(e.plugins){if(e.plugins.flv)return e.plugins.flv;if(e.plugins.hls)return e.plugins.hls;if(e.plugins.rts)return e.plugins.rts;if(e.plugins.flvlive)return e.plugins.flvlive;if(e.plugins.hlslive)return e.plugins.hlslive;if(e.plugins.hlsvod)return e.plugins.hlsvod;if(e.plugins.hlslivemobile)return e.plugins.hlslivemobile;if(e.plugins.flvlivemobile)return e.plugins.flvlivemobile}return e.newHls||e.newFlv||e.__core__||e.flv}function getDefaultOptions(e){return{device_id:e.device_id||getDeviceID(),user_id:e.user_id||getUserId(),error_report_stop:!!e.error_report_stop,project_key:e.project_key||"xigua_live",product_line:e.product_line||"live",onReport:e.onReport||function(){}}}function getDefaultLog(){return{start_play:{start_play_time:0,event_key:"start_play"},first_frame:{start:0,first_frame_view:0,event_key:"first_frame",first_sei_delay:0,ntp_sync:0,ntp_delta:0,ttfb:-1,ttdb:-1,ttfb_end:0},first_frame_failed:{code:void 0,msg:"",event_key:"first_frame_failed"},stall_start:{ready_state:-1,stall_start_time:0,event_key:"stall_start"},stalling:{event_key:"stalling"},stall:{reason:0,stall_start:0,stall_end:0,ready_state:0,event_key:"stall"},play_stop:{code:0,stop_time:0,drop_percent:0,is_stream_received:0,stall_count:0,stall_time:0,retry_count:0,duration:0,stall_count_per_100sec:0,stall_time_per_100sec:0,event_key:"play_stop",dns_parse_time:-1,redirect:-1,ttfb:-1,buffered:[],is_firstframe_received:0,meta:null},playing:{index:0,stall_count:0,stall_time:0,play_time:1e4,retry_count:0,is_last:0,video_buffer_time:0,audio_buffer_time:0,speed_switch_count:0,speed_switch_info:"none",download_speed:0,decode_fps:0,render_fps:0,drop_count:0,drop_percent:0,sei_source:"",sei_delay:0,ntp_sync:0,ntp_delta:0,event_key:"playing",stop_time:0,duration:0,stall_count_per_100sec:0,stall_time_per_100sec:0},play_error:{code:void 0,info:"",event_key:"play_error"},play_low_decode:{fps:-1,decode_fps:-1,bitrate:-1,url:-1,msg:"",event_key:"play_low_decode"},play_av_unsync:{aDts:-1,vDts:-1,frameLength:-1,currentTime:-1,duration:0,event_key:"play_av_unsync"},play_loadstream:{loadstream_url:"",event_key:"play_loadstream"},play_stream_loaded:{event_key:"play_stream_loaded"},play_metadata_loaded:{metadata_type:"",event_key:"play_metadata_loaded"},stream_exception:{event_key:"stream_exception"},pause:{event_key:"pause"},play_url_change:{event_key:"play_url_change"},source_opened:{event_key:"source_opened"},source_updateend:{event_key:"source_updateend"},play_result:{event_key:"play_result",result:0,threshold:15e3,is_threshold:0},degrade:{event_key:"degrade",payload:{}}}}function getCommonLog(e){var t=e.player,n=t.config.mediaType;return _objectSpread2({project_key:e.project_key,live_sdk_version:getPlayerCore(t)||t.hlsOps?"2":"-1",player_sdk_version:t.version,logger_version:"1.0.0-alpha.9",report_version:"5",product_line:e.product_line,user_id:e.user_id,device_id:e.device_id,logger_id:getLogId(),app_name:e.app_name,cdn_ip:e.cdn_ip,is_wasm:+(!!n&&"video"!==n),review_is_live:t.config.isLive?2:1,aid:e.aid,live_id:e.live_id||e.aid+"-"+e.user_id+"-"+Date.now(),is_preview:e.is_preview?1:0,codec_type:e.codec_type||"h264",width:Math.floor(t.config.width),height:Math.floor(t.config.height),browser:sniffer.browser,ua:navigator.userAgent,href:window.location.href,timestamp:0,logger_init_time:Date.now(),play_current_time:0,cdn_play_url:t.config.url&&t.config.url.startsWith("//")?window.location.protocol+t.config.url:t.config.url,play_format:getPlayFormat(t.config.url)},e.ext)}function Utf8ArrayToStr(e){var t,n,r,i,o,a;for(t="",r=e.length,n=0;n<r;)switch((i=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(i);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[n++],a=e[n++],t+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0)}return t}var getResourceTiming=function(e){var t=performance.getEntriesByType("resource").filter((function(t){return t.name===e}));if(t.length){var n=t[0],r=t[t.length-1];return{dns_parse_time:Number.parseInt(n.domainLookupEnd-n.domainLookupStart),redirect:Number.parseInt(n.redirectEnd-n.redirectStart),ttfb:Number.parseInt(r.responseStart-r.requestStart)}}return{dns_parse_time:-1,redirect:-1,ttfb:-1}},video_error={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},channelMapAppId={cn:7497,va:7997},Tea=new Collector("xglive"),Manage=function(){function e(e){var t=e.user_id,n=e.device_id,r=e.channel,i=void 0===r?"cn":r,o=e.channel_domain;if(!Tea.inited){var a={app_id:channelMapAppId[i],channel:i};o&&(a.channel_domain=o),Tea.init(a),Tea.start(),Tea.inited=!0}var s={};t&&(s.user_unique_id=t),n&&(s.device_id=n),Tea.config(s),this.logOptions=e,this._player=e.player}var t=e.prototype;return t.push=function(e){var t=this._player.config.url;this._player.video&&(e.play_current_time=this._player.currentTime),e.cdn_play_url=t&&t.startsWith("//")?window.location.protocol+t:t,e.play_format=getPlayFormat(t),e.timestamp=getCurrentTime(),this.send(e)},t.send=function(e){e.event_key&&(this.logOptions.onReport&&this.logOptions.onReport(e.event_key,e),Tea.event(e.event_key,_objectSpread2({},e)))},e}(),navgatorOnlineSupported=function(){return void 0!==navigator.onLine},navigatorConnectionType=function(){var e=navigator.connection;return e&&(e.effectiveType||e.type)},getNetStat=function(){return navgatorOnlineSupported()?navigator.onLine?navigatorConnectionType()||sniffer.device:"none":"unknown"},videoEvts=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","ratechange","volumechange","loadeddata"],isSafari=!1,LoggerControl=function(){function e(e){this.options=e,this.logger=new XgLiveLogger(e),this.restart=this.restart.bind(this),this.bindUrlChange(),isSafari=sniffer.browser.includes("Safari")}var t=e.prototype;return t.restart=function(e){this.destroy("string"!=typeof e&&Boolean(e)),this.logger=new XgLiveLogger(this.options),this.bindUrlChange(),this.logger.reportStartPlay(),this.logger.handlePlayerComlete()},t.bindUrlChange=function(){this.options&&this.options.player&&!this.options.manual_restart&&this.options.player.on("urlchange",this.restart)},t.setNTP=function(e){this.logger.setNTP(e)},t.updateExt=function(e){this.options.ext=Object.assign(this.options.ext||{},e),this.logger&&this.logger.updateExt(e)},t.destroy=function(e){this.logger.destroy(e),this.logger=null,this.options&&this.options.player&&!this.options.manual_restart&&this.options.player.off("urlchange",this.restart)},e}(),XgLiveLogger=function(){function e(e){if(!e.player)throw new Error("option player is necessary");this.options=Object.assign({},e,getDefaultOptions(e)),this._player=this.options.player,this._url=this._player.config.url,this.project_key=e.project_key||"xigua_live",this.product_line=e.product_line||"live",this.ntpDelta=this.options.ntp?Date.now()-this.options.ntp:0,this.inWaitingStart=0,this.errorNumber=0,this.tempDroppedFrameCount=0,this.tempTotalFrameCount=0,this.options.reportURL?this.options.reportURL:this.options.overseas||"https://log.isnssdk.com/video/v1/live_log/".replace("isnssdk","snssdk"),this._logmanager=new Manage(this.options),this.init(),this.started=!1,this.destroyed=!1,this.completed=!1,this.firstFrameViewed=!1,this.cacheRtcStats={}}var t=e.prototype;return t.setNTP=function(e){this.options&&(this.options.ntp=e,this.ntpDelta=Date.now()-this.options.ntp)},t.init=function(){this.bindCtx(),this.initLog(),this.initEvt()},t.bindCtx=function(){this.handlePlayerComlete=this.handlePlayerComlete.bind(this),this.handlePlayerPlaying=this.handlePlayerPlaying.bind(this),this.destroyFunc=this.destroyFunc.bind(this),this.handleUserLeave=this.handleUserLeave.bind(this),this.handlePlayerError=this.handlePlayerError.bind(this),this.handlePlayerReady=this.handlePlayerReady.bind(this),this.handlePlayerWaiting=this.handlePlayerWaiting.bind(this),this.handleAVUnsync=this.handleAVUnsync.bind(this),this.handlePlayerPause=this.handlePlayerPause.bind(this),this.handleTTFB=this.handleTTFB.bind(this),this.handleUrlChange=this.handleUrlChange.bind(this),this.handleKeyframe=this.handleKeyframe.bind(this),this.handleSourceOpen=this.handleSourceOpen.bind(this),this.handleBufferAppend=this.handleBufferAppend.bind(this),this.handleCoreEvent=this.handleCoreEvent.bind(this),this.handleDegrade=this.handleDegrade.bind(this)},t.initLog=function(){var e=this,t=this.options,n=t.player,r=void 0!==n.hlsOps;this.commonParams=_objectSpread2({os:sniffer.operation_os},getCommonLog(t)),this.log=Object.assign({},getDefaultLog());var i=this;for(var o in this.log){var a=function(t){Object.defineProperty(e.log[o],t,{get:function(){return null==this["_"+t]?i.commonParams[t]:this["_"+t]},set:function(e){this["_"+t]=e},enumerable:!0})};for(var s in this.commonParams)a(s);r&&Object.defineProperty(this.log[o],"m3u8",{get:function(){if(n.__core__){var e=n.__core__.m3u8Text;return e?e.slice(0,25e4):""}return""},enumerable:!0}),Object.defineProperty(this.log[o],"volume",{get:function(){if(n&&n.video)return n.volume||0},enumerable:!0}),Object.defineProperty(this.log[o],"access",{get:function(){return getNetStat()},enumerable:!0})}},t.updateExt=function(e){for(var t in this.log)for(var n in e)this.log[t][n]=e[n]},t.reportStartPlay=function(){this.started||(this.started=!0,this.log.start_play.start_play_time=this.log.start_play.timestamp=getCurrentTime(),this.logmanager.push(this.log.start_play,!0))},t.initWindowListener=function(){"pc"===sniffer.device?window.addEventListener("beforeunload",this.handleUserLeave):"mobile"===sniffer.device&&(window.addEventListener("beforeunload",this.handleUserLeave),window.addEventListener("pagehide",this.handleUserLeave))},t.removeWindowListener=function(){"pc"===sniffer.device?window.removeEventListener("beforeunload",this.handleUserLeave):"mobile"===sniffer.device&&(window.removeEventListener("beforeunload",this.handleUserLeave),window.removeEventListener("pagehide",this.handleUserLeave))},t.initEvt=function(){var e=this,t=this.player;videoEvts.forEach((function(t){e["handleVideo"+t+"Evt"]=function(){e["handleVideo"+t]&&e["handleVideo"+t]()},e.initWindowListener(),e.bindVideoEvt(t,e["handleVideo"+t+"Evt"])})),t.once("error",this.handlePlayerError),t.once("complete",this.handlePlayerComlete),t.once("playing",this.handlePlayerPlaying),t.once("timeupdate",this.handlePlayerPlaying),t.once("destroy",this.destroyFunc),t.on("ready",this.handlePlayerReady),t.on("waiting",this.handlePlayerWaiting),t.on("pause",this.handlePlayerPause),t.on("urlchange",this.handleUrlChange),t.once("sourceopen",this.handleSourceOpen),t.once("bufferappend",this.handleBufferAppend),t.on("core_event",this.handleCoreEvent),t.on("degrade",this.handleDegrade),this.hiJackPlayerStart()},t.handleCoreEvent=function(e){var t=e.eventName,n=e.headers,r=e.pts,i=e.type,o=e.meta,a=e.sei,s=e.decodeFps,c=e.url;switch(t){case"core.ttfb":this.handleTTFB(e);break;case"core.loadresponseheaders":var l=n.get("X-Server-Ip");void 0!==this.player.hlsOps&&(this.log.play_stop.review_ts_count+=1),l&&(this.commonParams.cdn_ip=l);break;case"core.loadretry":this.log.play_stop.retry_count++;break;case"core.keyframe":this.handleKeyframe(r);break;case"core.metadataparsed":this.handleMetaDataLoaded(i,o);break;case"core.sei":this.handleSEIParsed(a);break;case"core.lowdecode":this.commonParams.is_wasm&&(Object.assign(this.log.play_low_decode,e||{}),this.log.play_low_decode.decode_fps=s,this.log.play_low_decode.timestamp=getCurrentTime(),this.logmanager.push(this.log.play_low_decode,!0),this.commonParams.is_wasm=0);break;case"core.largeavgap":this.handleAVUnsync(e);break;case"core.loadstart":this.handlePlayerLoadStream(c);break;case"core.loadcomplete":this.handlePlayerLoadedStream();break;case"core.streamexception":this.handleStreamException(e)}},t.handleDegrade=function(e){this.log.degrade.payload=e,this.logmanager.push(this.log.degrade,!0)},t.hiJackPlayerStart=function(){var e=arguments,t=this;this.player._start=this.player.start;var n=this.player;n.start=function(){try{if(n._start)return n._start.apply(n,Array.prototype.slice.call(e,0))}catch(e2){}t.destroyed||t.handlePlayerComlete()}},t.handleTTFB=function(e){var t=e||{},n=t.end,r=t.elapsed;this.log.first_frame.ttfb=r||-1,this.log.first_frame.ttfb_end=n||0},t.handleUrlChange=function(e){this.logmanager.push(Object.assign(this.log.play_url_change,{url:e,timestamp:getCurrentTime()}))},t.handleKeyframe=function(e){this.log.play_stop.is_firstframe_received=1,this.log.play_stop.firstframe_pts=e},t.handleSourceOpen=function(){this.log.source_opened.timestamp=getCurrentTime(),this.logmanager.push(this.log.source_opened)},t.handleBufferAppend=function(){this.log.source_updateend.timestamp=getCurrentTime(),this.logmanager.push(this.log.source_updateend)},t.handlePlayerPause=function(){this.log.pause.timestamp=getCurrentTime(),this.logmanager.push(this.log.pause,!0)},t.handlePlayerError=function(e){this.errorNumber=1;var t=e.errorType,n=e.errorCode;Object.assign(this.log.play_error,_objectSpread2({timestamp:getCurrentTime(),code:n||("parse"===t?31:21),info:e.message,detail:JSON.stringify(e)},this.videoSize)),this.logmanager.push(this.log.play_error,!0),this.destroyed||(0===this.log.first_frame.first_frame_view&&(Object.assign(this.log.first_frame_failed,{code:n||("parse"===t?31:21),msg:e.message}),void 0!==this.log.first_frame_failed.timestamp&&(this.log.first_frame_failed.timestamp=getCurrentTime()),this.logmanager.push(this.log.first_frame_failed,!0),this.log.play_result.is_threshold||(this.clearPlayResultTimer(),this.log.play_result.reason=e.message||"first frame failed",this.logmanager.push(this.log.play_result,!0))),this.options.error_report_stop?this.handleUserLeave():this.updatePlayStopParams())},t.handlePlayerLoadStream=function(e){if("string"==typeof e){var t=this.log.play_loadstream;t.timestamp=getCurrentTime(),t.loadstream_url=e,this.logmanager.push(t)}},t.handlePlayerLoadedStream=function(){var e=this.log.play_stream_loaded;e.timestamp=getCurrentTime(),this.logmanager.push(e)},t.handleSEIParsed=function(e){var t=this.log,n=t.playing,r=t.first_frame;if(100===e.code){var i=Utf8ArrayToStr(e.content);i=i.slice(i.indexOf("{"),i.lastIndexOf("}")+1);try{var o=JSON.parse(i),a=this.getPlayerBuffer()+this.ntpTime-o.ts;n.sei_delay=a,n.sei_source=o.source,n.ntp_sync=this.options.ntp?1:0,n.ntp_delta=this.ntp_delta,r.first_sei_delay=a,r.ntp_sync=this.options.ntp?1:0,r.ntp_delta=this.ntp_delta}catch(e2){}}},t.handleMetaDataLoaded=function(e,t){this.log.play_stop.meta=this.log.play_stop.meta||{},e&&(this.log.play_stop.meta[e]=t),this.log.play_metadata_loaded.timestamp=getCurrentTime(),this.log.play_metadata_loaded.metadata_type=e,t&&(this.log.play_metadata_loaded.meta=t,this.log.play_metadata_loaded.codec=t.codec,this.commonParams.codec_type=t.codec),t||(this.log.play_metadata_loaded.meta=void 0,this.log.play_metadata_loaded.codec=void 0,"video"===e&&(this.commonParams.codec_type="unknown")),this.logmanager.push(this.log.play_metadata_loaded)},t.handleAVUnsync=function(e){Object.assign(this.log.play_av_unsync,e||{}),this.log.play_av_unsync.timestamp=getCurrentTime(),this.logmanager.push(this.log.play_av_unsync,!1)},t.handleStreamException=function(e){this.logmanager.push(Object.assign({},this.log.stream_exception,e))},t.handlePlayerComlete=function(){this.completed||(this.completed=!0,this.core=getPlayerCore(this.player),this.core&&(this.commonParams.live_sdk_version="2"),(this.player.config.autoplay||this.player.config.videoInit)&&this.reportStartPlay())},t.getPlayerBuffer=function(){var e=this.player.video.buffered;if(e){var t=Math.max(0,e.length-1);try{var n=Number.parseInt(1e3*(e.end(t)-this.player.video.currentTime));return this.log.playing.audio_buffer_time=this.log.playing.video_buffer_time=n,n}catch(e2){return 0}}},t.getPlayerDownloadSpeed=function(){if(this.core&&this.core.core)return this.core.core.speedInfo().speed},t.getPlayerQuality=function(){var e=this.player.video;if(e.getVideoPlaybackQuality){var t=e.getVideoPlaybackQuality();this.log.playing.drop_count=t.droppedVideoFrames-this.tempDroppedFrameCount,this.log.playing.drop_percent=Number.parseFloat(this.tempTotalFrameCount/t.totalVideoFrames).toFixed(1),this.log.play_stop.drop_percent=Number.parseFloat(t.droppedVideoFrames/t.totalVideoFrames).toFixed(1),this.tempDroppedFrameCount=t.droppedVideoFrames,this.tempTotalFrameCount=t.totalVideoFrames}},t.getExtraStats=function(){var e=_asyncToGenerator(runtime_1.mark((function e(t,n){return runtime_1.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(isSafari||"undefined"!==window.InstallTrigger)return e();try{t.getStats((function(t){t.result().forEach((function(e){var t={};e.names().forEach((function(n){t[n]=e.stat(n)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,"ssrc"===e.type?(null!=t.googAccelerateRate&&(n.accelerate_rate=t.googAccelerateRate),"audio"===t.mediaType?(n.audio_jitter_buffer_ms=t.googJitterBufferMs,n.audio_rtt_ms=t.googRtt,n.expand_rate=t.googExpandRate):"video"===t.mediaType&&(n.video_rtt_ms=t.googRtt,n.video_codec_name=t.googCodecName)):"VideoBwe"===e.type&&(n.video_recv_retransmit_bps=t.googRetransmitBitrate)})),e()}))}catch(error){e()}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.getRtcStats=function(){var e=_asyncToGenerator(runtime_1.mark((function e(t){var n,r,i,o,a=this;return runtime_1.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.player.plugins.rts&&this.player.plugins.rts.pc){e.next=3;break}return e.abrupt("return");case 3:return r={},e.next=6,n.getStats();case 6:return i=e.sent,o=t-this.log.playing.timestamp,i.forEach((function(e){var t=e.type,n=e.mediaType,i=e.bytesReceived,s=e.packetsReceived,c=e.audioLevel,l=e.concealmentEvents,u=e.remoteTimestamp,d=e.timestamp,h=e.framesDropped,f=e.framesPerSecond,p=e.keyFramesDecoded,g=e.totalDecodeTime,y=e.framesDecoded,v=e.firCount,m=e.frameHeight,_=e.frameWidth,b=e.framesReceived,E=e.jitterBufferDelay,S=e.jitterBufferEmittedCount,T=e.jitter,w=e.nackCount,O=e.packetsLost,k=e.pliCount,C=e.totalSamplesReceived,$=e.concealedSamples;switch(t){case"inbound-rtp":"audio"===n?(r.audio_bytes_received=i,r.audio_packets_lost=O,r.audio_packets_received=s,r.audio_volume=-10*Math.log10(Math.pow(c,2))*255,r.concealment_event=l,r.audio_fraction_lost=O/s,null!=a.cacheRtcStats.totalSamplesReceived&&(r.audio_dec_sample_rate=(C-a.cacheRtcStats.totalSamplesReceived)/o),a.cacheRtcStats.totalSamplesReceived=C,r.concealed_samples=$,r.total_samples_received=C):(r.frames_dropped_by_framebuffer=h,r.frame_buffer_out_interval=f,r.iframes_jitter_buffer_out=p,r.video_bytes_received=i,r.video_dec_elapse=1e3*g,r.video_decoded_delay_ms=r.video_dec_elapse/y,r.video_fir_count=v,r.video_fraction_lost=O/s,r.video_frame_height=m,r.video_frame_width=_,null!=a.cacheRtcStats.framesDecoded&&(r.video_framerate_decoder_output=(y-a.cacheRtcStats.framesDecoded)/o),a.cacheRtcStats.framesDecoded=y,null!=a.cacheRtcStats.framesReceived&&(r.video_framerate_recv=(b-a.cacheRtcStats.framesReceived)/o),a.cacheRtcStats.framesReceived=b,r.video_jb_min_delay=E/S*1e3,r.video_jitter=1e3*T,r.video_nack_count=w,r.video_packets_lost=O,r.video_packets_received=s,r.video_pli_count=k);break;case"remote-outbound-rtp":r.e2e_delay_ms=d-u}r.total_delay=r.e2e_delay_ms+r.video_decoded_delay_ms+r.video_jb_min_delay})),e.next=11,this.getExtraStats(n,r);case 11:this.log.playing.rtc_stats=r;case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.reportPlaying=function(){var e=_asyncToGenerator(runtime_1.mark((function e(t){var n,r,i,o,a,s;return runtime_1.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.commonParams.is_wasm&&(this.commonParams.fps=this.player.video.fps,this.log.playing.render_fps=this.player.video.fps,this.log.playing.decode_fps=this.player.video.decodeFps),this.log.playing.index++,n=this.log.playing.timestamp,this.inWaitingStart&&this.inWaitingStart<getCurrentTime()&&(r=Math.min(this.options.playingInterval||this.log.playing.play_time,getCurrentTime()-Math.max(this.inWaitingStart,n))),this.getPlayerQuality(),this.getPlayerBuffer(),this.options.downloadSpeedInterval||(this.log.playing.current_speed=this.getPlayerDownloadSpeed()),i=getCurrentTime(),e.next=10,this.getRtcStats(i);case 10:o=i-n,a=(r>200?r:0)+this.log.playing.stall_time,s=(r>200?1:0)+this.log.playing.stall_count,this.options.aggregationDowngradeStallTime&&(this.log.playing.aggregation_downgrade_stall=(r>this.options.aggregationDowngradeStallTime?r:0)+(this.log.playing.aggregation_downgrade_stall||0)),Object.assign(this.log.playing,_objectSpread2({timestamp:i,stop_time:i,duration:t?0:o/1e3,stall_time_per_100sec:a/o*100,stall_count_per_100sec:1e3*s/o*100,stall_count:s,stall_time:a,play_current_time:this.player.currentTime},this.videoSize)),this.logmanager.push(Object.assign({},this.log.playing,{play_time:t?0:o}),!0),this.log.playing.download_speed_array=[],this.log.playing.stall_time=0,this.log.playing.stall_count=0,this.options.aggregationDowngradeStallTime&&(this.log.playing.aggregation_downgrade_stall=0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.handlePlayerPlaying=function(){var e=_asyncToGenerator(runtime_1.mark((function e(){var t,n=this;return runtime_1.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.player&&this.player.video.readyState<3)){e.next=2;break}return e.abrupt("return");case 2:return this.player.off("playing",this.handlePlayerPlaying),this.player.off("timeupdate",this.handlePlayerPlaying),e.next=6,this.reportPlaying(!0);case 6:this.clearPlayingInterval(),t=this.options.playingInterval||this.log.playing.play_time,this.intervalId=setInterval(_asyncToGenerator(runtime_1.mark((function e(){return runtime_1.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Math.abs(Date.now()-n.log.playing.timestamp-t)<100||Date.now()-n.log.playing.timestamp>=t)){e.next=3;break}return e.next=3,n.reportPlaying();case 3:case"end":return e.stop()}}),e)}))),1e3),this.clearStallTimer(),this.handleVideoplaying(),this.started||this.reportStartPlay(),this.saveBuffered();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.handlePlayerReady=function(){var e=this;this.log.start_play.start_play_time=getCurrentTime(),this.player.config.autoplay&&this.reportStartPlay(),this.options.playResultThreshold&&(this.log.play_result.threshold=this.options.playResultThreshold),this.clearPlayResultTimer(),this.playResultTimer=setTimeout((function(){e.log.play_result.is_threshold=1,e.logmanager.push(e.log.play_result,!0)}),this.log.play_result.threshold)},t.handlePlayerWaiting=function(){var e=this;!this.inWaitingStart&&this.log.first_frame.timestamp&&(this.log.stall.timestamp=this.inWaitingStart=this.log.stall.stall_start=getCurrentTime(),this.log.stall_start.ready_state=this.log.stall.ready_state=this.player.video.readyState,this.log.stall_start.timestamp=getCurrentTime(),this.log.stall_start.stall_start_time=getCurrentTime(),this.log.stall_start.video_buffer_time=this.player.video.readyState,this.log.stall_start.play_current_time=this.player.currentTime,this.log.stall.play_current_time=this.player.currentTime,this.log.stall_start.buffered=this.getBuffered(),this.log.stall.buffered=this.log.stall_start.buffered,this.log.stall.current_speed=this.getPlayerDownloadSpeed(),Object.assign(this.log.stall_start,this.videoSize),this.clearStallTimer(),this.stallStartTimer=setTimeout((function(){e.logmanager.push(e.log.stall_start,!0)}),205))},t.handleVideoseeking=function(){this.player&&this.player.video&&this.inWaitingStart&&this.player.video.duration<1/0&&(this.inWaitingStart=0,this.clearStallTimer())},t.handleVideoseeked=function(){this.player&&this.player.video&&this.inWaitingStart&&this.player.video.duration<1/0&&(this.inWaitingStart=0,this.log.play_stop.stall_count>0&&this.log.play_stop.stall_count--)},t.handleVideoplay=function(){this.reportStartPlay(),this.removeVideoEvt("play",this.handleVideoplay)},t.handleVideotimeupdate=function(){Math.abs(this.player.currentTime-this.log.stall_start.play_current_time)>.2&&this.stallEnd(),this.saveBuffered()},t.handleVideocanplay=function(){this.stallEnd(),this.reportFirstframe()},t.handleVideoplaying=function(){this.stallEnd(),this.log.play_stop.is_stream_received=1;var e=getCurrentTime();this.reportStartPlay(),this.log.first_frame.start=e},t.stallEnd=function(){this.clearStallTimer();var e=getCurrentTime();if(this.inWaitingStart){var t=e-this.inWaitingStart;t>200&&(this.log.play_stop.stall_count++,this.log.play_stop.stall_time+=e-this.inWaitingStart,this.log.playing.stall_time+=e-Math.max(this.inWaitingStart,this.log.playing.timestamp),this.log.stall.stall_end=e,this.log.stall.timestamp=getCurrentTime(),this.log.playing.stall_count++,Object.assign(this.log.stall,_objectSpread2({},this.videoSize)),this.logmanager.push(this.log.stall,!0)),this.options.aggregationDowngradeStallTime&&t>this.options.aggregationDowngradeStallTime&&(this.log.playing.aggregation_downgrade_stall=(this.log.playing.aggregation_downgrade_stall||0)+(e-Math.max(this.inWaitingStart,this.log.playing.timestamp)))}this.inWaitingStart=0},t.handleVideoloadeddata=function(){this.reportFirstframe()},t.handleVideoratechange=function(){this.log.playing.speed_switch_count++,this.log.playing.speed_switch_info=this.player.video.playbackRate},t.handleVideoended=function(){this.clearPlayingInterval(),this.clearStallTimer(),Object.assign(this.log.playing,_objectSpread2({timestamp:getCurrentTime(),is_last:1},this.videoSize)),this.logmanager.push(this.log.playing)},t.handleVideoerror=function(){var e=this;this.errorNumber=1;var t=this.player.video.error;Object.assign(this.log.play_error,_objectSpread2(_objectSpread2({timestamp:getCurrentTime()},this.videoSize),t&&{code:t.code,info:t.message})),this.logmanager.push(this.log.play_error,!0),0!==e.log.first_frame.first_frame_view||e.log.first_frame_failed.code||t&&(e.log.first_frame_failed.code=t.code,e.log.first_frame_failed.msg=video_error[t.code],void 0!==e.log.first_frame_failed.timestamp&&(e.log.first_frame_failed.timestamp=getCurrentTime()),e.logmanager.push(e.log.first_frame_failed,!0),e.log.play_result.is_threshold||(e.log.play_result.reason=video_error[t.code]||"first frame failed",e.clearPlayResultTimer(),e.logmanager.push(e.log.play_result,!0))),e.options.error_report_stop?e.handleUserLeave():e.updatePlayStopParams()},t.handleVideopause=function(){this.stallEnd(),this.clearPlayingInterval(),this.clearStallTimer(),clearTimeout(this.collectDownloadSpeedTimer),this.player.once("playing",this.handlePlayerPlaying),this.player.once("timeupdate",this.handlePlayerPlaying)},t.destroyFunc=function(e){var t=this;this.destroyed||(e||this.handleUserLeave(),this.destroyed=!0,"pc"===sniffer.device?window.removeEventListener("beforeunload",this.handleUserLeave):"mobile"===sniffer.device&&window.removeEventListener("pagehide",this.handleUserLeave),videoEvts.forEach((function(e){t.removeVideoEvt(e,t["handleVideo"+e+"Evt"])})),this.player&&(this.player._start&&(this.player.start=this.player._start,delete this.player._start),this.player.off("destroy",this.destroyFunc),this.player.off("complete",this.handlePlayerComlete),this.player.off("playing",this.handlePlayerPlaying),this.player.off("timeupdate",this.handlePlayerPlaying),this.player.off("ready",this.handlePlayerReady),this.player.off("waiting",this.handlePlayerWaiting),this.player.off("largeavgap",this.handleAVUnsync),this.player.off("error",this.handlePlayerError),this.player.off("SEI_PARSED",this.handleSEIParsed),this.player.off("pause",this.handlePlayerPause),this.player.off("ttfb",this.handleTTFB),this.player.off("urlchange",this.handleUrlChange),this.player.off("isKeyframe",this.handleKeyframe),this.player.off("sourceopen",this.handleSourceOpen),this.player.off("bufferappend",this.handleBufferAppend),this.player.off("core_event",this.handleCoreEvent),this.player.off("degrade",this.handleDegrade),this.clearPlayingInterval(),this.clearStallTimer(),clearTimeout(this.collectDownloadSpeedTimer),this._player=null))},t.handleUserLeave=function(){!this.destroyed&&this.started&&(this.destroyed=!0,this.updatePlayStopParams(),this.reportPlayStop(),this.clearPlayingInterval(),this.clearStallTimer(),clearTimeout(this.collectDownloadSpeedTimer),this.removeWindowListener())},t.saveBuffered=function(){try{var e=this.getBuffered();e&&e.length&&(this.log.play_stop.buffered=e)}catch(error){}},t.getBuffered=function(){try{for(var e=[],t=this.player.video,n=0;n<t.buffered.length;n++)e.push([t.buffered.start(n),t.buffered.end(n)]);return e}catch(error){}},t.reportPlayStop=function(){this.log.play_stop.play_current_time=this.player.currentTime||this.log.playing.play_current_time,this.saveBuffered(),this.logmanager.push(this.log.play_stop,!0)},t.reportFirstframe=function(){if(!this.firstFrameViewed){this.firstFrameViewed=!0;var e=getCurrentTime();Object.assign(this.log.first_frame,_objectSpread2({first_frame_view:e-this.log.start_play.start_play_time||e,timestamp:e},this.videoSize)),this.log.first_frame.ttfb_end&&(this.log.first_frame.ttdb=e-this.log.first_frame.ttfb_end),this.logmanager.push(this.log.first_frame,!0),this.clearPlayResultTimer(),this.log.play_result.result=1,this.logmanager.push(this.log.play_result,!0),this.log.play_stop.is_stream_received=1}},t.updatePlayStopParams=function(){var e=getResourceTiming(this._url),t=getCurrentTime();this.playedTime=t-this.log.start_play.start_play_time;var n=this.log.play_stop;Object.assign(n,_objectSpread2({},0===n.stall_count&&{stall_time:0})),this.inWaitingStart&&t-this.inWaitingStart>200&&(n.stall_time+=t-this.inWaitingStart),this.inWaitingStart=0,Object.assign(n,_objectSpread2({stall_time_per_100sec:n.stall_time/this.playedTime*100,stall_count_per_100sec:1e3*n.stall_count/this.playedTime*100},e)),0===this.log.play_stop.stall_count_per_100sec&&(this.log.play_stop.stall_time_per_100sec=0),this.log.play_stop.stall_time_per_100sec>100||this.log.play_stop.stall_time_per_100sec<0||(this.log.playing.index?(Object.assign(this.log.playing,_objectSpread2({timestamp:getCurrentTime(),is_last:1},this.videoSize)),this.logmanager.push(this.log.playing,!0)):(this.log.play_stop.error_code=this.log.play_error.code,this.log.play_stop.error_info=this.log.play_error.info),t=getCurrentTime(),Object.assign(n,_objectSpread2({timestamp:t,stop_time:t,duration:this.playedTime/1e3,play_time:this.playedTime/1e3},this.videoSize)),0===this.errorNumber&&(n.play_time_on_no_frame=n.stop_time-this.log.start_play.start_play_time))},t.clearPlayingInterval=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},t.clearStallTimer=function(){clearTimeout(this.stallStartTimer)},t.clearPlayResultTimer=function(){clearTimeout(this.playResultTimer)},t.destroy=function(e){this.destroyFunc(!e)},t.bindVideoEvt=function(e,t){this.player&&this.player.video.addEventListener(e,t,!1)},t.removeVideoEvt=function(e,t){this.player&&this.player.video&&this.player.video.removeEventListener(e,t,!1)},t.send=function(e,t){this.logmanager.send(e,t)},_createClass(e,[{key:"videoSize",get:function(){return this.player?{width:this.player.video.videoWidth,height:this.player.video.videoHeight}:{width:0,height:0}}},{key:"player",get:function(){return this._player}},{key:"logmanager",get:function(){return this._logmanager}},{key:"ntpTime",get:function(){return Date.now()-this.ntpDelta}}]),e}(),LiveLogger=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){return _classCallCheck$5(this,n),t.apply(this,arguments)}return _createClass$6(n,[{key:"afterCreate",value:function(){var e,t,n=this;this.config.enable&&(this.config.appId?(this.openLog(),null===(e=this.player.plugins)||void 0===e||null===(t=e.sdkerrorplugin)||void 0===t||t.addErrDetail((function(){var e,t,r;if(n._liveLogger)return{label:"userId",value:null===(e=n._liveLogger)||void 0===e||null===(t=e.logger)||void 0===t||null===(r=t.options)||void 0===r?void 0:r.user_id}}))):console.info("not found appid, logger is closed"))}},{key:"startLog",value:function(){this._liveLogger=new LoggerControl({player:this.player,aid:this.config.appId,project_key:this.config.appId,app_name:this.config.appId,channel_domain:"//mcs.volceapplog.com"})}},{key:"closeLog",value:function(){this._liveLogger.destroy(),this._liveLogger=null}},{key:"openLog",value:function(){!this._liveLogger&&this.startLog()}}],[{key:"pluginName",get:function(){return"liveLogger"}},{key:"defaultConfig",get:function(){return{appId:"",enable:!0}}}]),n}(Plugin),hls={name:"HlsPlayer",url:"//unpkg.byted-static.com/xgplayer-hls/3.0.0-next.36-1/dist/index.min.js"},flv={name:"FlvPlayer",url:"//unpkg.byted-static.com/xgplayer-flv/3.0.0-next.23/dist/index.min.js"},XGVideo={name:"XGVideo",url:"//unpkg.byted-static.com/byted/xgplayer-xgvideo/0.1.16/dist/index.min.js"},hlsEncrypt={name:"EncryptHlsPlugin",url:"//unpkg.byted-static.com/byted/xgplayer-encrypt-hls/4.0.5-alpha.0/dist/index.min.js"},dash={name:"DashPlugin",url:"//unpkg.byted-static.com/byted/xgplayer-encrypt/3.3.0/dist/index.min.js"},shaka={name:"ShakaPlugin",url:"//unpkg.byted-static.com/xgplayer-shaka/3.0.0-alpha.1/dist/index.min.js"},mp4Encrypt={name:"Mp4EncryptPlayer",url:"//unpkg.byted-static.com/byted/xgplayer-encrypt-mp4/3.0.0-alpha.36-25/dist/index.min.js"},danmujs={name:"danmu.js",url:"//unpkg.byted-static.com/danmu.js/0.6.4/dist/index.js"},danmuMask={name:"DanmuMask",url:"//unpkg.byted-static.com/byted/danmu-mask/0.3.6/browser/index.js"},subtitle={name:"XgSubtitle",url:"//unpkg.byted-static.com/xgplayer-subtitles/1.0.22/dist/index.min.js"},streamprobe={name:"StreamProbe",url:"//unpkg.byted-static.com/byted/streamprobe/1.0.2/dist/index.min.js"},umdUrlMap={hls:hls,flv:flv,XGVideo:XGVideo,hlsEncrypt:hlsEncrypt,dash:dash,shaka:shaka,mp4Encrypt:mp4Encrypt,danmujs:danmujs,danmuMask:danmuMask,subtitle:subtitle,streamprobe:streamprobe},umdLoader=function(){function e(){_classCallCheck$5(this,e),this.umdUrlMap=umdUrlMap,this.backupUmdUrlMap={},this.jsLoadMap={}}return _createClass$6(e,[{key:"updateBackupMap",value:function(e){this.backupUmdUrlMap=e}},{key:"loadExtraCdn",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n,r){var i=t?document.createElement("script"):document.createElement("link");t?i.src=e:(i.rel="stylesheet",i.type="text/css",i.href=e),document.body.appendChild(i),i.onerror=function(){r("url: ".concat(e))},i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i.onload=i.onreadystatechange=null,n())}}))}},{key:"loadPlugins",value:function(e,t){var n=this;if(this.umdUrlMap[e]){var r="".concat(e,"_load");return new Promise((function(i){if(Reflect.get(n.jsLoadMap,r))i(n.jsLoadMap[r]);else{var o=n.umdUrlMap[e],a=function(t){n.failCallback&&"function"==typeof n.failCallback&&n.failCallback&&n.failCallback(e,t),i(null)};if(!o)return console.error("".concat(e," umd info not exit")),a(void 0);var s=o.name,c=o.url;if(s&&window[s])return n.jsLoadMap[r]=window[s],t&&t(),i(n.jsLoadMap[r]);retry((function(){return n.loadExtraCdn(c,!0)}),2).then((function(){s?(n.jsLoadMap[r]=window[s],t&&t(),i(window[s])):(n.jsLoadMap[r]=!0,t&&t(),i(null))})).catch((function(o){var c=n.backupUmdUrlMap[e];return c?isUrl(c)?void n.loadExtraCdn(n.backupUmdUrlMap[e]).then((function(){n.jsLoadMap[r]=window[s],t&&t(),i(n.jsLoadMap[r])})).catch((function(t){console.error("load ".concat(e," error, ").concat(t)),a(void 0)})):(console.error("umdUrlMap.".concat(e," isn't a valid url")),a(void 0)):(console.error("load ".concat(e," error, ").concat(o)),a(o))}))}}))}}}]),e}(),sdkUmdLoader=new umdLoader;function createSDKPreset(e){return _createSDKPreset.apply(this,arguments)}function _createSDKPreset(){return(_createSDKPreset=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(t){var n,r,i,o,a,s,c,l,u,d,h,f,p,g,y,v,m,_,b,E,S,T;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.isLive,o=void 0!==i&&i,a=t.type,s=t.isMobile,c=void 0!==s&&s,l=t.playerData,u=t.getSoftOptionTask,d=["default",getDefaultPreset(o)],h=l.openSoftDecoding,f=l.isMusic,p=l.configs,g=!(null===(n=l.playList)||void 0===n||null===(r=n[0])||void 0===r||!r.kid),y=getPluginConfig(p,"EncryptHlsPlugin"),v=!!y||"hls"===a&&g,m=[],_=[],c?d.push(getMobilePreset({isLive:o,playerData:l})):d.push(getPCPreset({isLive:o,playerData:l})),e.t0=a,e.next="flv"===e.t0?12:"rtm"===e.t0?14:"dash"===e.t0?16:18;break;case 12:return _.push(_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){var t,n;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=8;break}if(!isMSESupport()&&!h){e.next=6;break}return e.next=4,sdkUmdLoader.loadPlugins("flv");case 4:t=e.sent,m.push(t);case 6:e.next=12;break;case 8:return e.next=10,sdkUmdLoader.loadPlugins("flv");case 10:n=e.sent,m.push(n);case 12:case"end":return e.stop()}}),e)})))()),e.abrupt("break",19);case 14:return _.push(_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([sdkUmdLoader.loadPlugins("hls"),sdkUmdLoader.loadPlugins("flv")]);case 2:m.push(RtmPlugin);case 3:case"end":return e.stop()}}),e)})))()),e.abrupt("break",19);case 16:return _.push(_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){var t;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.url){e.next=5;break}return e.next=3,sdkUmdLoader.loadPlugins("shaka");case 3:t=e.sent,m.push(t);case 5:case"end":return e.stop()}}),e)})))()),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:return f||!o&&!getPluginConfig(l.options,"DanmuPlugin")||_.push(_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){var t;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([sdkUmdLoader.loadPlugins("danmujs"),sdkUmdLoader.loadPlugins("danmuMask")]);case 2:(t=e.sent)[0]&&t[1]&&m.push(DanmuPlugin);case 4:case"end":return e.stop()}}),e)})))()),getPluginConfig(l.options,"Subtitle")&&l.plugins.every((function(e){return"subtitle"!==e.pluginName.toLowerCase()}))&&m.push(Subtitle),e.next=23,Promise.all([u(),getPluginByConfig({isMobile:c,isLive:o,openSoftDecoding:h,type:a,isHlsEncrypt:v,playerData:l,plugins:m})].concat(_));case 23:return b=e.sent,E=_slicedToArray(b,2),S=E[0],T=E[1],e.abrupt("return",{presets:d,softDecodingOption:S,plugins:[].concat(m,_toConsumableArray$1(T)).filter(Boolean)});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function getDefaultPreset(e){var t=[ErrorPlugin,ToastPlugin,UnmutePlugin];return e&&t.push(RefreshPlugin,LiveLogger),_createClass$6((function e(){_classCallCheck$5(this,e),this.plugins=t,this.ignores=["error"]}))}function getMobilePreset(e){var t,n=e.isLive,r=e.playerData,i=["error","playbackRate"],o=r.configs,a=getPluginConfig(o,"EncryptHlsPlugin"),s=null==o||null===(t=o.autoBitrateOpts)||void 0===t?void 0:t.isOpenAutoDefi;null!=a&&a.playAuthToken||s||i.push("definition");var c=["time","playnext","progress","progresspreview","replay","playbackRate","discontinue","PlaybackRateMobilePlugin"],l=[MoreButtonPlugin];return _createClass$6((function e(){_classCallCheck$5(this,e),this.plugins=l,this.ignores=n?[].concat(c,i):[].concat(i)}))}function getPCPreset(e){var t,n=e.isLive,r=e.playerData,i=["cssfullscreen"],o=["time","playnext","progress","progresspreview","replay","playbackRate","discontinue"],a=n?[MultilinePlugin]:[],s=r.configs,c=getPluginConfig(s,"EncryptHlsPlugin"),l=null==s||null===(t=s.autoBitrateOpts)||void 0===t?void 0:t.isOpenAutoDefi;return null!=c&&c.playAuthToken||l||(i.push("definition"),a.push(DefinitionPlugin)),_createClass$6((function e(){_classCallCheck$5(this,e),this.plugins=a,this.ignores=n?[].concat(o,i):[].concat(i)}))}function getPluginByConfig(e){return _getPluginByConfig.apply(this,arguments)}function _getPluginByConfig(){return(_getPluginByConfig=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(t){var n,r,i,o,a,s,c,l,u,d,h,f,p,g,y,v,m,_,b,E,S,T,w,O,k,C;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.isMobile,a=t.isLive,s=t.openSoftDecoding,c=t.type,l=t.isHlsEncrypt,u=t.playerData,d=t.plugins,h=[],f=u.configs,p=u.options,g=!(null===(n=u.playList)||void 0===n||null===(r=n[0])||void 0===r||!r.kid)||isEncryptPlay(null==f?void 0:f.getVideoByToken),"hls"!==c){e.next=28;break}if(!l){e.next=12;break}return e.next=8,sdkUmdLoader.loadPlugins("hlsEncrypt");case 8:y=e.sent,h.push(y),e.next=28;break;case 12:if(!o){e.next=24;break}if(v=getPluginConfig(p,"Subtitle"),m=a&&v,_=(isMSESupport()||window.WebAssembly)&&s,b=f.enableHlsMSE,a&&!_&&!m&&!b){e.next=22;break}return e.next=20,sdkUmdLoader.loadPlugins("hls");case 20:E=e.sent,h.push(E);case 22:e.next=28;break;case 24:return e.next=26,sdkUmdLoader.loadPlugins("hls");case 26:S=e.sent,h.push(S);case 28:if(("dash"!==c||f.url)&&!getPluginConfig(p,"DASHPlugin")){e.next=33;break}return e.next=31,sdkUmdLoader.loadPlugins("dash");case 31:null!=(O=e.sent)&&null!==(T=O.encryptUtils)&&void 0!==T&&null!==(w=T.isSupported)&&void 0!==w&&w.call(T)&&d.push(O);case 33:if(getPluginConfig(p,"vodLogOpts")&&(k=p.platform===PlatformEnum.BYTE_PLUS?xgVodLoggerTea:xgVodLogger,h.push(k)),f.enableContextmenu&&h.push(MenuPlugin),!(f.enableMp4MSE||getPluginConfig(p,"Mp4EncryptPlayer")||"mp4"===c&&(g||null!=f&&null!==(i=f.autoBitrateOpts)&&void 0!==i&&i.isOpenAutoDefi||u.openSoftDecoding))){e.next=40;break}return e.next=38,sdkUmdLoader.loadPlugins("mp4Encrypt");case 38:C=e.sent,h.push(C);case 40:return e.abrupt("return",h.filter((function(e){var t,n,r,i,o;return"encrypthlsplugin"===(null==e||null===(t=e.pluginName)||void 0===t?void 0:t.toLowerCase())?!(null==e||null===(r=e.isSupported)||void 0===r||!r.call(e))||(console.warn("\u5f53\u524d\u6d4f\u89c8\u5668\u73af\u5883\u4e0d\u652f\u6301HLS\u683c\u5f0f\u89c6\u9891\u7684\u52a0\u5bc6\u64ad\u653e"),!1):"dashplugin"!==(null==e||null===(n=e.pluginName)||void 0===n?void 0:n.toLowerCase())||!(null==e||null===(i=e.encryptUtils)||void 0===i||null===(o=i.isSupported)||void 0===o||!o.call(i))||(console.warn("\u5f53\u524d\u6d4f\u89c8\u5668\u73af\u5883\u4e0d\u652f\u6301DASH\u683c\u5f0f\u89c6\u9891\u64ad\u653e"),!1)})));case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function danmuSettingsSVG$1(){return(new DOMParser).parseFromString('<svg width="22" height="19" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" opacity=".6"><path d="M-4-4h28v28H-4z"/><path d="M1 19a1 1 0 01-1-1V1a1 1 0 011-1h17.2a1 1 0 011 1v3.75h-.001l.001 1.475a.9.9 0 11-1.8 0V1.8H1.8v15.4h8.442l-.029.019h.296a.89.89 0 01.017 1.78h7.691L18.2 19H1z" fill="#FFF" fill-rule="nonzero"/><path d="M5.507 7.698L5.33 9.279h2.511c0 2.015-.075 3.362-.2 4.042-.151.68-.792 1.054-1.934 1.124-.327 0-.653-.023-1.005-.047l-.339-1.136c.327.035.678.059 1.03.059.628 0 .98-.188 1.067-.563.088-.374.138-1.183.138-2.424H4l.352-3.679h2.122V5.132H4.113V4.09h3.654v3.608h-2.26zm3.089-2.214h1.507A8.91 8.91 0 009.16 4.03l1.193-.375c.351.469.665.96.93 1.5l-.792.328h1.733a14.68 14.68 0 00.93-1.921l1.242.41a8.956 8.956 0 01-.854 1.51H15v4.933h-2.587v.902h2.446l-1.014 1.148h-1.432v2.097h-1.28v-2.097h-2.99v-1.148h2.99v-.902H8.595V5.484zm5.249 3.912v-.913h-1.432v.913h1.432zm-2.713 0v-.913H9.764v.913h1.368zm-1.368-1.92h1.368v-.961H9.764v.96zm2.65-.961v.96h1.43v-.96h-1.43z" fill="#FFF" fill-rule="nonzero"/><path d="M17.595 9.84l2.957 1.69a1.2 1.2 0 01.605 1.041v3.358c0 .43-.23.828-.605 1.041l-2.957 1.69a1.2 1.2 0 01-1.19 0l-2.957-1.69a1.2 1.2 0 01-.605-1.041V12.57c0-.43.23-.828.605-1.041l2.957-1.69a1.2 1.2 0 011.19 0zM17 12.47c-.994 0-1.8.797-1.8 1.781a1.79 1.79 0 001.8 1.781c.994 0 1.8-.797 1.8-1.781a1.79 1.79 0 00-1.8-1.781z" fill="#FFF"/></g></svg>',"image/svg+xml").firstChild}function fullscreenActiveSVG$1(){return(new DOMParser).parseFromString('<svg width="21" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.892 2h4.445v1.778H3.892v4.444H2.114V3.778C2.114 2.796 2.91 2 3.892 2zm4.445 16v-4.444c0-.982-.796-1.778-1.778-1.778H2.114v1.778h2.944L2.264 16.35a.9.9 0 001.272 1.273l2.988-2.987a.918.918 0 00.035-.037V18h1.778zm8-6.222v4.444h-4.445V18h4.445c.981 0 1.777-.796 1.777-1.778v-4.444h-1.777zM11.892 2v4.445c0 .981.796 1.777 1.778 1.777h4.444V6.445H15.17l2.568-2.568a.9.9 0 10-1.273-1.273L13.67 5.4V2h-1.778z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function fullscreenDefaultSVG$1(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.778 2h4.444v1.778H3.778v4.444H2V3.778C2 2.796 2.796 2 3.778 2zM2 11.778v4.444C2 17.204 2.796 18 3.778 18h4.444v-1.778H4.823l2.313-2.313a.9.9 0 00-1.272-1.273l-2.086 2.086v-2.944H2zm14.222 0v4.444h-4.444V18h4.444c.982 0 1.778-.796 1.778-1.778v-4.444h-1.778zM18 8.222V3.778C18 2.796 17.204 2 16.222 2h-4.444v1.778h2.945l-2.587 2.586a.9.9 0 101.273 1.273l2.813-2.813v3.398H18z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function pauseSVG$1(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="5.313" y="3.75" width="3.125" height="12.5" rx=".625" fill="#fff"/><rect x="11.563" y="3.75" width="3.125" height="12.5" rx=".625" fill="#fff"/></svg>',"image/svg+xml").firstChild}function playSVG$1(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.121 8.299a2 2 0 010 3.402l-7.94 4.91c-1.332.825-3.051-.133-3.051-1.7V5.09c0-1.567 1.72-2.525 3.052-1.701l7.939 4.911z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function playNextSVG$1(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.03 8.312a2 2 0 010 3.376l-7.642 4.858c-1.332.847-3.073-.11-3.073-1.687V5.14c0-1.577 1.741-2.534 3.073-1.687l7.642 4.858z" fill="#fff"/><path d="M13 3.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v13a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-13z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function replaySVG(){return(new DOMParser).parseFromString('<svg width="72" height="72" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><circle fill-opacity=".3" cx="36" cy="36" r="36"/><path d="M40.167 32.667a.833.833 0 01-.834-.834v-1.666c0-.46.373-.834.834-.834h5.409a11.653 11.653 0 00-9.576-5c-6.443 0-11.667 5.224-11.667 11.667S29.557 47.667 36 47.667c5.285 0 9.749-3.514 11.183-8.333h3.445C49.112 46.014 43.138 51 36 51c-8.284 0-15-6.716-15-15 0-8.284 6.716-15 15-15 4.713 0 8.918 2.173 11.668 5.572l-.001-4.739c0-.46.373-.833.833-.833h1.667c.46 0 .833.373.833.833V31c0 .879-.68 1.598-1.542 1.662l-.125.005h-9.166z"/></g></svg>',"image/svg+xml").firstChild}function startPlaySVG(){return(new DOMParser).parseFromString('<svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="60" rx="30" fill="#000" fill-opacity=".4"/><path d="M40.243 28.3a2 2 0 010 3.401L24.06 41.712c-1.332.825-3.052-.134-3.052-1.7V19.988c0-1.566 1.72-2.525 3.052-1.7l16.184 10.01z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function volumeLargeSVG(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.867 2.5h.55c.44 0 .799.34.83.771l.003.062v13.334c0 .44-.34.799-.771.83l-.062.003h-.55a.833.833 0 01-.444-.128l-.064-.045-4.867-3.744a.831.831 0 01-.322-.59l-.003-.07V7.077c0-.235.099-.458.271-.615l.054-.045L9.36 2.673a.832.832 0 01.43-.17l.078-.003h.55-.55zm6.767 2.278A7.474 7.474 0 0118.75 10a7.477 7.477 0 01-2.128 5.234.4.4 0 01-.57-.004l-.587-.586a.442.442 0 01.005-.617A5.812 5.812 0 0017.083 10c0-1.557-.61-2.97-1.603-4.017a.442.442 0 01-.003-.615l.586-.586a.4.4 0 01.57-.004zM2.5 6.667c.23 0 .417.186.417.416v5.834c0 .23-.187.416-.417.416h-.833a.417.417 0 01-.417-.416V7.083c0-.23.187-.416.417-.416H2.5zm11.768.46A4.153 4.153 0 0115.417 10c0 1.12-.442 2.137-1.162 2.886a.388.388 0 01-.555-.007l-.577-.578c-.176-.176-.156-.467.009-.655A2.49 2.49 0 0013.75 10a2.49 2.49 0 00-.61-1.636c-.163-.188-.182-.477-.006-.653l.578-.578a.388.388 0 01.556-.006z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function volumeMutedSVG(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.045 2.5h.55c.44 0 .8.34.831.771l.003.062v13.334c0 .44-.34.799-.771.83l-.063.003h-.55a.833.833 0 01-.443-.128l-.065-.045-4.866-3.744a.831.831 0 01-.323-.59l-.003-.07V7.077c0-.235.1-.458.272-.615l.054-.045 4.866-3.744a.832.832 0 01.43-.17l.078-.003h.55-.55zM2.68 6.667c.23 0 .416.186.416.416v5.834c0 .23-.186.416-.416.416h-.834a.417.417 0 01-.416-.416V7.083c0-.23.186-.416.416-.416h.834zm10.467.294a.417.417 0 01.59 0l1.767 1.768L17.27 6.96a.417.417 0 01.589 0l.59.59a.417.417 0 010 .589L16.68 9.908l1.768 1.767c.15.15.162.387.035.55l-.035.04-.589.589a.417.417 0 01-.59 0l-1.767-1.768-1.768 1.768a.417.417 0 01-.59 0l-.588-.59a.417.417 0 010-.589l1.767-1.768-1.767-1.767a.417.417 0 01-.035-.55l.035-.04.589-.589z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function volumeSmallSVG(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.867 2.5h.55c.44 0 .799.34.83.771l.003.062v13.334c0 .44-.34.799-.771.83l-.062.003h-.55a.833.833 0 01-.444-.128l-.064-.045-4.867-3.744a.831.831 0 01-.322-.59l-.003-.07V7.077c0-.235.099-.458.271-.615l.054-.045L9.36 2.673a.832.832 0 01.43-.17l.078-.003h.55-.55zM2.5 6.667c.23 0 .417.186.417.416v5.834c0 .23-.187.416-.417.416h-.833a.417.417 0 01-.417-.416V7.083c0-.23.187-.416.417-.416H2.5zm11.768.46A4.153 4.153 0 0115.417 10c0 1.12-.442 2.137-1.162 2.886a.388.388 0 01-.555-.007l-.577-.578c-.176-.176-.156-.467.009-.655A2.49 2.49 0 0013.75 10a2.49 2.49 0 00-.61-1.636c-.163-.188-.182-.477-.006-.653l.578-.578a.388.388 0 01.556-.006z" fill="#fff"/></svg>',"image/svg+xml").firstChild}var iconsOption$1={startPlay:startPlaySVG,play:playSVG$1,pause:pauseSVG$1,fullscreen:fullscreenDefaultSVG$1,exitFullscreen:fullscreenActiveSVG$1,playNext:playNextSVG$1,replay:replaySVG,refresh:refreshSVG$1,danmuSetting:danmuSettingsSVG$1,openDanmu:Default,closeDanmu:danmuActiveSVG$1,volumeLarge:volumeLargeSVG,volumeMuted:volumeMutedSVG,volumeSmall:volumeSmallSVG},initOption$1={whitelist:[""],widescreen:!0,width:"100%",height:"100%",lang:getLang(),fitVideoSize:!1,inactive:2e3,playsinline:!0,keyShortcut:"off",closeVideoClick:!0,closeVideoDblclick:!0,closePlayerBlur:!1,closeControlsBlur:!1,closePlayVideoFocus:!0,leavePlayerTime:0,mini:!1,pip:{position:"controlsRight",index:2.5,showIcon:!0},volume:{index:2.6},miniscreen:{left:window.innerWidth-360,top:window.innerHeight-450},time:{index:3},icons:_objectSpread2$5({},iconsOption$1),flv:{retryCount:0},hls:{retryCount:0}},liveOption$1={isLive:!0,closeVideoClick:!0,autoplay:!0,autoplayMuted:!0,preloadTime:8,start:{isShowPause:!1,isShowEnd:!1,mode:"hide",disableAnimate:!0},retry:{count:0}},vodOption$1={isLive:!1,closeVideoClick:!1,defaultPlaybackRate:1,closeVideoStopPropagation:!0,autoplay:!1,autoplayMuted:!1,playbackRate:[2,1.5,1.25,{rate:1,iconText:{zh:"\u500d\u901f",en:"Speed",jp:"Speed"}},.75,.5],start:{isShowPause:!0,isShowEnd:!1,mode:"hide",disableAnimate:!0},progresspreview:{isShowCoverPreview:!0},progress:{isPauseMoving:!0}};function createPlayerOption$1(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=_objectSpread2$5({},initOption$1),n=_objectSpread2$5({},e?liveOption$1:vodOption$1);return _objectSpread2$5(_objectSpread2$5({},t),n)}function danmuSVG(){return(new DOMParser).parseFromString('<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.746 12.444a1 1 0 00-.62.216L1.75 13.75V2.166c0-.23.187-.417.417-.417h11.666c.23 0 .417.187.417.417v6.687c.44.044.86.156 1.25.326V2.167c0-.92-.746-1.667-1.667-1.667H2.167C1.247.5.5 1.246.5 2.167V14.61a.833.833 0 001.35.653l1.71-1.354a1 1 0 01.621-.216h5.543a4.195 4.195 0 01-.02-1.25H3.745z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 4a.5.5 0 00-.5.5V5a.5.5 0 00.5.5h5A.5.5 0 0010 5v-.5a.5.5 0 00-.5-.5h-5zm2.333 4.167a.5.5 0 00-.5.5v.666a.5.5 0 00.5.5h4.292c.311-.266.662-.487 1.042-.653v-.513a.5.5 0 00-.5-.5H6.834zm-3 .5a.5.5 0 01.5-.5H5a.5.5 0 01.5.5v.666a.5.5 0 01-.5.5h-.667a.5.5 0 01-.5-.5v-.666z" fill="#fff"/><path d="M11 4.5a.5.5 0 01.5-.5h.5a.5.5 0 01.5.5V5a.5.5 0 01-.5.5h-.5A.5.5 0 0111 5v-.5z" fill="#fff"/><circle cx="13.833" cy="13" r="3.333" fill="#3370FF"/><path d="M15.591 12.011l-2.133 2.134-1.22-1.22" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"/></svg>',"image/svg+xml").firstChild}function danmuActiveSVG(){return(new DOMParser).parseFromString('<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.746 12.444a1 1 0 00-.62.216L1.75 13.75V2.166c0-.23.187-.417.417-.417h11.666c.23 0 .417.187.417.417v6.687c.44.044.86.156 1.25.326V2.167c0-.92-.746-1.667-1.667-1.667H2.167C1.247.5.5 1.246.5 2.167V14.61a.833.833 0 001.35.653l1.71-1.354a1 1 0 01.621-.216h5.543a4.195 4.195 0 01-.02-1.25H3.745z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 4a.5.5 0 00-.5.5V5a.5.5 0 00.5.5h5A.5.5 0 0010 5v-.5a.5.5 0 00-.5-.5h-5zm2.333 4.167a.5.5 0 00-.5.5v.666a.5.5 0 00.5.5h4.292c.311-.266.662-.487 1.042-.653v-.513a.5.5 0 00-.5-.5H6.834zm-3 .5a.5.5 0 01.5-.5H5a.5.5 0 01.5.5v.666a.5.5 0 01-.5.5h-.667a.5.5 0 01-.5-.5v-.666z" fill="#fff"/><path d="M11 4.5a.5.5 0 01.5-.5h.5a.5.5 0 01.5.5V5a.5.5 0 01-.5.5h-.5A.5.5 0 0111 5v-.5z" fill="#fff"/><circle cx="13.833" cy="13" r="2.733" stroke="#fff" stroke-width="1.2"/><path fill="#fff" d="M12.833 10.77l3.473 3.472-1.063 1.064-3.474-3.473z"/></svg>',"image/svg+xml").firstChild}function danmuSettingsSVG(){return(new DOMParser).parseFromString('<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.746 12.444a1 1 0 00-.62.216L1.75 13.75V2.166c0-.23.187-.417.417-.417h11.666c.23 0 .417.187.417.417v6.687c.44.044.86.156 1.25.326V2.167c0-.92-.746-1.667-1.667-1.667H2.167C1.247.5.5 1.246.5 2.167V14.61a.833.833 0 001.35.653l1.71-1.354a1 1 0 01.621-.216h5.543a4.195 4.195 0 01-.02-1.25H3.745z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 4a.5.5 0 00-.5.5V5a.5.5 0 00.5.5h5A.5.5 0 0010 5v-.5a.5.5 0 00-.5-.5h-5zm2.333 4.167a.5.5 0 00-.5.5v.666a.5.5 0 00.5.5h4.292c.311-.266.662-.487 1.042-.653v-.513a.5.5 0 00-.5-.5H6.834zm-3 .5a.5.5 0 01.5-.5H5a.5.5 0 01.5.5v.666a.5.5 0 01-.5.5h-.667a.5.5 0 01-.5-.5v-.666z" fill="#fff"/><path d="M11 4.5a.5.5 0 01.5-.5h.5a.5.5 0 01.5.5V5a.5.5 0 01-.5.5h-.5A.5.5 0 0111 5v-.5z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.387 10.134a1 1 0 00-1 0l-1.887 1.09a1 1 0 00-.5.865v2.179a1 1 0 00.5.866l1.887 1.09a1 1 0 001 0l1.886-1.09a1 1 0 00.5-.866v-2.179a1 1 0 00-.5-.866l-1.886-1.089zm-.5 4.711a1.667 1.667 0 100-3.333 1.667 1.667 0 000 3.333z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function fullscreenActiveSVG(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.5 8.333h-4.167c-.92 0-1.666-.746-1.666-1.666V2.5h1.666v4.167H17.5v1.666zM2.5 6.667v1.666h4.167c.92 0 1.666-.746 1.666-1.666V2.5H6.667v4.167H2.5zM2.5 13.333h4.167V17.5h1.666v-4.167c0-.92-.746-1.666-1.666-1.666H2.5v1.666zM13.333 17.5v-4.167H17.5v-1.666h-4.167c-.92 0-1.666.746-1.666 1.666V17.5h1.666z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function fullscreenDefaultSVG(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.125 3a.375.375 0 00-.375.375v.75c0 .207.168.375.375.375H15.5v3.375c0 .207.168.375.375.375h.75A.375.375 0 0017 7.875v-4.5A.375.375 0 0016.625 3h-4.5zm0 12.5a.375.375 0 00-.375.375v.75c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-4.5a.375.375 0 00-.375-.375h-.75a.375.375 0 00-.375.375V15.5h-3.375zM3 3.375C3 3.168 3.168 3 3.375 3h4.5c.207 0 .375.168.375.375v.75a.375.375 0 01-.375.375H4.5v3.375a.375.375 0 01-.375.375h-.75A.375.375 0 013 7.875v-4.5zM7.875 15.5H4.5v-3.375a.375.375 0 00-.375-.375h-.75a.375.375 0 00-.375.375v4.5c0 .207.168.375.375.375h4.5a.375.375 0 00.375-.375v-.75a.375.375 0 00-.375-.375z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function pauseSVG(){return(new DOMParser).parseFromString('<svg style="\n    height: 18px;\n    width: 18px;\n" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="7.438" y="5.25" width="4.375" height="17.5" rx=".875" fill="#fff"/><rect x="16.188" y="5.25" width="4.375" height="17.5" rx=".875" fill="#fff"/></svg>',"image/svg+xml").firstChild}function playSVG(){return(new DOMParser).parseFromString('<svg style="\n    height: 18px;\n    width: 18px;\n" width="28" height="28" fill="none" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><path d="M19.77 11.619c1.768 1.094 1.768 3.668 0 4.762L8.653 23.257c-1.865 1.154-4.273-.188-4.273-2.381V7.125c0-2.194 2.408-3.536 4.273-2.382L19.77 11.62z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function playNextSVG(){return(new DOMParser).parseFromString('<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M4.77 4.124l8.358 5.07c.38.23.486.704.238 1.056a.807.807 0 01-.238.22L4.77 15.543c-.38.231-.889.132-1.137-.221a.723.723 0 01-.134-.417V4.762c0-.421.368-.762.822-.762.159 0 .316.042.449.124z" stroke="#fff" stroke-width="1.5"/><path d="M15.5 4.5A.5.5 0 0116 4h.5a.5.5 0 01.5.5v11a.5.5 0 01-.5.5H16a.5.5 0 01-.5-.5v-11z" fill="#fff"/></svg>',"image/svg+xml").firstChild}function refreshSVG(){return(new DOMParser).parseFromString('<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h18v18H0z"/><path d="M10.875 7.5a.375.375 0 01-.375-.375v-.75c0-.207.168-.375.375-.375h2.434a5.25 5.25 0 10.723 4.5h1.55a6.75 6.75 0 11-1.332-5.743V2.626c0-.207.168-.375.375-.375h.75c.207 0 .375.168.375.375V6.75a.75.75 0 01-.694.748L15 7.5h-4.125z" fill="#FFF"/></g></svg>',"image/svg+xml").firstChild}var iconsOption={startPlay:startPlaySVG,play:playSVG,pause:pauseSVG,fullscreen:fullscreenDefaultSVG,exitFullscreen:fullscreenActiveSVG,playNext:playNextSVG,replay:replaySVG,refresh:refreshSVG,danmuSetting:danmuSettingsSVG,openDanmu:danmuSVG,closeDanmu:danmuActiveSVG,volumeLarge:volumeLargeSVG,volumeMuted:volumeMutedSVG,volumeSmall:volumeSmallSVG};sniffer$1.os.isAndroid;var initOption={width:"100%",height:"100%",lang:getLang(),playsinline:!0,closeVideoClick:!0,closeVideoTouch:!0,whitelist:[""],"x5-video-player-type":"h5-page","x5-video-player-fullscreen":!1,"x5-video-orientation":"landscape|portrait",enterTips:{background:"linear-gradient(90deg,#000,#49e6d3,#49e6d3,#138afc,#000)"},retainPlay:!0,start:{isShowPause:!0,isShowEnd:!0,disableAnimate:!1},fullscreen:{useCssFullscreen:!1},plugins:[],time:{mode:"pc",index:2.5},controls:{mode:"flex"},danmusettings:{index:"2"},danmuicon:{index:"3"},cusPlaybackRatePlugin:{needCheck:!0,needPanel:!1},icons:_objectSpread2$5({},iconsOption),flv:{innerDegrade:1,retryCount:0},hls:{innerDegrade:1,retryCount:0}},liveOption={isLive:!0,closeVideoClick:!0,autoplay:!0,autoplayMuted:!0,start:{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"},retry:{count:0},longwaiting:{duration:3e4},mobile:{gestureY:!1,gestureX:!1,disableActive:!0}},vodOption={isLive:!1,closeVideoClick:!1,autoplay:!1,autoplayMuted:!1,playbackRate:[2,1.5,1.25,{rate:1,iconText:"\u500d\u901f",en:"speed",jp:"speed"},.75,.5],defaultPlaybackRate:1,closeVideoStopPropagation:!0,mobile:{gestureY:!1},start:{isShowPause:!0,isShowEnd:!1,disableAnimate:!1,mode:"hide"}};function createPlayerOption(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=_objectSpread2$5({},initOption),n=_objectSpread2$5({},e?liveOption:vodOption);return _objectSpread2$5(_objectSpread2$5({},t),n)}var POSITIONS$6=Plugin.POSITIONS,extendPlugin=function(e){var t="mobile"===sniffer$1.device,n=e.pluginName,r=void 0===n?"ExtendPlugin".concat(Math.random().toString().slice(-5)):n,i=e.type,o=void 0===i?t?"inner":"normal":i,a=e.position,s=void 0===a?POSITIONS$6.CONTROLS_LEFT:a,c=e.icon,l=void 0===c?Default:c,u=e.index,d=void 0===u?1:u,h=e.hideAtFullScreen,f=void 0===h||h,p=e.tips,g=void 0===p?{jp:"custom",en:"custom",zh:"\u81ea\u5b9a\u4e49","zh-hk":"\u81ea\u5b9a\u4e49"}:p;return function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){return _classCallCheck$5(this,n),t.apply(this,arguments)}return _createClass$6(n,[{key:"afterCreate",value:function(){var e;this.appendChild(".xgplayer-icon",this.icons[r]),this.initEvents(),f&&null!==(e=this.player)&&void 0!==e&&e.fullscreen&&this.handleFullScreenChange()}},{key:"registerIcons",value:function(){return _defineProperty$6({},r,{icon:l,class:"xgplayer-extendicon-svg"})}},{key:"updateIcons",value:function(e){var t=this.find(".xgplayer-icon");t&&(t.innerHTML=e)}},{key:"registerLanguageTexts",value:function(){return _defineProperty$6({},r,g)}},{key:"initEvents",value:function(){this.handleCallback=debounce$1(this.handleCallback.bind(this),200);var e,t="mobile"===sniffer$1.device?"touchend":"click";this.bind(t,this.handleCallback),this.show(),f&&(null===(e=this.player)||void 0===e||e.on(FULLSCREEN_CHANGE,this.handleFullScreenChange.bind(this)))}},{key:"handleFullScreenChange",value:function(){var e,t=this.player;null===(e=this.player)||void 0===e||e.changePluginsIcon(r,!(null!=t&&t.fullscreen))}},{key:"handleCallback",value:function(e){var t=this.player;t&&(e.preventDefault(),e.stopPropagation(),t.emit(PluginEvents.PLAYER_EXTEND_BUTTON,r))}},{key:"destroy",value:function(){var e;this.unbind(["touchend","click"],this.handleCallback),f&&(null===(e=this.player)||void 0===e||e.off(FULLSCREEN_CHANGE,this.handleFullScreenChange.bind(this)))}},{key:"render",value:function(){return'\n      <xg-icon class="xgplayer-extend-icon">\n        <div class="xgplayer-icon">\n        </div>\n        <div class="xg-tips" lang-key="'.concat(r,'">').concat(this.langText[r],"</div>\n      </xg-icon>\n      ")}}],[{key:"isExtendPlugin",get:function(){return!0}},{key:"type",get:function(){return o}},{key:"textTips",get:function(){return g}},{key:"pluginName",get:function(){return r}},{key:"defaultConfig",get:function(){return{position:s,index:d}}}]),n}(Plugin)},MobilePlayerPanel=function(){function e(t){var n,r;_classCallCheck$5(this,e);var i=t.config,o=t.root,a=t.player;this.config=i,this.parent=o,this.player=a,this.mode=null!==(n=null==i?void 0:i.mode)&&void 0!==n?n:PLAYER_MODE.INNER,this.isAutoChange=null!==(r=null==i?void 0:i.isAutoChange)&&void 0!==r&&r,this.isShow=!1,this.initEvents(),this.renderPanel()}var t;return _createClass$6(e,[{key:"initEvents",value:function(){var e;this.isAutoChange&&(window.addEventListener("orientationchange",this.handleOrientationChange.bind(this)),null===(e=this.player)||void 0===e||e.on(FULLSCREEN_CHANGE,this.handleOrientationChange.bind(this)))}},{key:"handleOrientationChange",value:function(){var e,t,n,r=[90,-90,"90","-90"].includes(window.orientation);null!==(e=this.player)&&void 0!==e&&e.fullscreen&&r?this.changeMode(PLAYER_MODE.FULLSCREEN):this.changeMode(null!==(t=null===(n=this.config)||void 0===n?void 0:n.mode)&&void 0!==t?t:PLAYER_MODE.INNER)}},{key:"changeConfig",value:function(e){this.config=e}},{key:"changeMode",value:function(e){this.mode=e,this.player.emit(PluginEvents.PANEL_MODE_CHANGE,{mode:e}),this.destroy(),this.renderPanel()}},{key:"renderPanel",value:function(){var e="xg-mobile-panel panel-".concat(["normal","inner","fullscreen"][this.mode]);switch(this.root=util.createDom("div","",{},e),this.parent&&(this.parent.appendChild(this.root),this.hide()),this.bind("click",this.handleHide.bind(this)),this.mode){case PLAYER_MODE.NORMAL:var t=util.createDom("div","",{},"xg-mobile-panel-content");this.root.appendChild(t),this.container=t,t.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()}));break;case PLAYER_MODE.INNER:this.container=this.root;break;case PLAYER_MODE.FULLSCREEN:var n=util.createDom("div","",{},"xg-mobile-panel-content");this.root.appendChild(n),this.container=n,n.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()}))}}},{key:"showPanel",value:(t=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(t){var n,r=this,i=arguments;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:"",i.length>2&&void 0!==i[2]&&i[2]&&util.addClass(t,"item-list-panel-content"),this.setTitle(n),!this.children){e.next=9;break}return e.next=7,this.hide();case 7:return setTimeout((function(){r.children=t,r.container&&(r.title&&r.container.appendChild(r.title),r.container.appendChild(t)),r.show()})),e.abrupt("return");case 9:this.children=t,this.container&&(this.title&&this.container.appendChild(this.title),this.container.appendChild(t)),this.show();case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updatePanel",value:function(e){this.children&&util.hasClass(this.children,"item-list-panel-content")&&util.addClass(e,"item-list-panel-content"),this.children=e,this.container&&(this.container.innerHTML="",this.title&&this.container.appendChild(this.title),this.container.appendChild(e)),this.show()}},{key:"setTitle",value:function(e){e&&this.mode!==PLAYER_MODE.INNER?this.title?this.title.innerHTML=e:this.title=this.renderTitle(e):this.title=void 0}},{key:"renderTitle",value:function(e){return util.createDom("div",e,{},"xg-mobile-panel-title")}},{key:"show",value:function(){this.isShow=!0,util.removeClass(this.root,"hide"),util.addClass(this.root,"active")}},{key:"hide",value:function(){this.isShow=!1,util.removeClass(this.root,"active"),util.addClass(this.root,"hide"),this.container&&(this.container.innerHTML="")}},{key:"handleHide",value:function(e){e.stopPropagation(),e.preventDefault(),this.hide()}},{key:"bind",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"destroy",value:function(){var e;this.parent&&this.root&&this.parent.removeChild(this.root),window.removeEventListener("orientationchange",this.handleOrientationChange.bind(this)),null===(e=this.player)||void 0===e||e.off(FULLSCREEN_CHANGE,this.handleOrientationChange.bind(this))}}]),e}();function DefinitionIconSVG(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16 3.8001H4C3.55817 3.8001 3.2 4.15827 3.2 4.6001V12.6001C3.2 13.0419 3.55817 13.4001 4 13.4001H16C16.4418 13.4001 16.8 13.0419 16.8 12.6001V4.6001C16.8 4.15827 16.4418 3.8001 16 3.8001ZM4 2.6001C2.89543 2.6001 2 3.49553 2 4.6001V12.6001C2 13.7047 2.89543 14.6001 4 14.6001H16C17.1046 14.6001 18 13.7047 18 12.6001V4.6001C18 3.49553 17.1046 2.6001 16 2.6001H4ZM5.0249 6.24509V11.6001H5.9024V9.23009H8.6174V11.6001H9.4949V6.24509H8.6174V8.48009H5.9024V6.24509H5.0249ZM10.5474 6.24509V11.6001H12.5049C13.3749 11.6001 14.0274 11.3601 14.4774 10.8801C14.9049 10.4226 15.1224 9.77009 15.1224 8.92259C15.1224 8.06759 14.9049 7.41509 14.4774 6.96509C14.0274 6.48509 13.3749 6.24509 12.5049 6.24509H10.5474ZM11.4249 6.99509H12.3399C13.0074 6.99509 13.4949 7.14509 13.8024 7.45259C14.1024 7.75259 14.2524 8.24759 14.2524 8.92259C14.2524 9.58259 14.1024 10.0701 13.8024 10.3851C13.4949 10.6926 13.0074 10.8501 12.3399 10.8501H11.4249V6.99509ZM4.15 16.1001C3.79101 16.1001 3.5 16.3911 3.5 16.7501C3.5 17.1091 3.79101 17.4001 4.15 17.4001H15.85C16.209 17.4001 16.5 17.1091 16.5 16.7501C16.5 16.3911 16.209 16.1001 15.85 16.1001H4.15Z" fill="#ffffff"/>\n</svg>',"image/svg+xml").firstChild}var POSITIONS$5=Plugin.POSITIONS,DefinitionMobilePlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).toastInfo={},r.playerData=null,r.playerData=e.player.config.playerData,r.dataMonitoring(),r}return _createClass$6(n,[{key:"dataMonitoring",value:function(){var e=this;this.playerData&&MyProxy$1.subscribeProperty(this.playerData.current,"definition",(function(t,n){if(t!==n&&e.player){var r=e.playerData.current.lineId,i=e.playerData.getDefinitionListByLineId(r).find((function(e){return e.definition===n}));i&&i.url&&(e.player.changeDefinition(_objectSpread2$5(_objectSpread2$5({},i),{},{definition:n,url:i.url})),e.updatePanel(),e.player.emit(PluginEvents.INNER_DEFINITION_CHANGE,{from:t,to:n,url:i.url}),e.player.emit(PluginEvents.PlAY_URL_CHANGE,{url:i.url,from:PluginEvents.INNER_DEFINITION_CHANGE}),setTimeout((function(){e.player.ended?e.player.replay():e.player.paused&&e.player.play()}),1e3))}}))}},{key:"registerIcons",value:function(){return{definition:{icon:DefinitionIconSVG,class:"xgplayer-definition-svg"}}}},{key:"registerLanguageTexts",value:function(){return{definition:{jp:"\u660e\u5feb\u3055",en:"Definition",zh:"\u6e05\u6670\u5ea6","zh-hk":"\u6e05\u6670\u5ea6"},definitionSelect:{jp:"\u30af\u30e9\u30ea\u30c6\u30a3\u30bb\u30ec\u30af\u30b7\u30e7\u30f3",en:"Definition Choose",zh:"\u6e05\u6670\u5ea6\u9009\u62e9","zh-hk":"\u6e05\u6670\u5ea6\u9078\u64c7"},switching:{jp:"\u306b\u5207\u308a\u66ff\u3048\u308b",en:"Switching to",zh:"\u6b63\u5728\u5207\u6362\u81f3","zh-hk":"\u6b63\u5728\u5207\u63db\u81f3"}}}},{key:"afterCreate",value:function(){this.toastInfo={},this.appendChild(".xgplayer-icon",this.icons.definition),this.initEvents()}},{key:"afterPlayerInit",value:function(){}},{key:"initEvents",value:function(){this.bind(["click"],this.handleButtonChange.bind(this))}},{key:"handleButtonChange",value:function(){var e=this.renderItemList();this.renderPanel(e)}},{key:"renderItemList",value:function(){var e=this,t=this.playerData.current.lineId,n=this.playerData.getDefinitionListByLineId(t),r=util.createDom("div","",{},"definition-panel-content");return n.forEach((function(t){var n=e.renderItem(t);r.appendChild(n)})),r}},{key:"renderItem",value:function(e){var t=this,n=this.playerData.current.definition,r=util.createDom("div","",{},"panel-Item ".concat(n===e.definition?"select-in":""));return r.innerHTML=this.getShowText(this.i18n,e),r.addEventListener("click",(function(n){n.stopPropagation(),n.preventDefault(),t.showToast(e),t.playerData.current.definition=e.definition})),r}},{key:"getShowText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e[t.definitionTextKey]||t.definitionTextKey||t.definition}},{key:"showToast",value:function(e){var t,n=this,r=null===(t=this.player)||void 0===t?void 0:t.getPlugin("sdkToastPlugin");if(r){var i=this.getShowText(this.i18n,e),o=r.add("".concat(this.langText.switching).concat(i,"..."),0,!0),a=Date.now();this.toastInfo[o]={showTime:a,delayClose:!1},setTimeout((function(){var e;null!==(e=n.toastInfo[o])&&void 0!==e&&e.delayClose&&(r.remove(o),n.toastInfo[o].delayClose=!1)}),2e3),this.player.once(AFTER_DEFINITION_CHANGE,(function(){var e;Date.now()-(null===(e=n.toastInfo[o])||void 0===e?void 0:e.showTime)>2e3?r.remove(o):n.toastInfo[o].delayClose=!0}))}}},{key:"renderPanel",value:function(e){var t,n;null===(t=this.player)||void 0===t||null===(n=t.panel)||void 0===n||n.showPanel(e,this.langText.definitionSelect,!0)}},{key:"updatePanel",value:function(){var e,t,n=this.renderItemList();null===(e=this.player)||void 0===e||null===(t=e.panel)||void 0===t||t.updatePanel(n)}},{key:"destroy",value:function(){this.unbind(["click"],this.handleButtonChange.bind(this))}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-mobile-definition">\n      <div class="xgplayer-icon">\n      </div>\n    </xg-icon>\n    '}}],[{key:"pluginName",get:function(){return"DefinitionMobilePlugin"}},{key:"textTips",get:function(){return{jp:"\u660e\u5feb\u3055",en:"Definition",zh:"\u6e05\u6670\u5ea6","zh-hk":"\u6e05\u6670\u5ea6"}}},{key:"defaultConfig",get:function(){return{position:POSITIONS$5.CONTROLS_RIGHT,index:2.7}}}]),n}(Plugin);function LineIconSVG(){return(new DOMParser).parseFromString('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.7123 1C11.85 1 11.1173 1.55472 10.8516 2.32675L4.94973 2.32675C3.16413 2.32675 1.71662 3.77427 1.71662 5.55987C1.71662 7.34547 3.16413 8.79298 4.94973 8.79298L11.0483 8.79298L11.1134 8.79418C11.9936 8.82748 12.697 9.55166 12.697 10.44C12.697 11.3497 11.9596 12.0871 11.05 12.0871H5.01323C4.67882 11.4781 4.03143 11.0654 3.28763 11.0654C2.20111 11.0654 1.32031 11.9462 1.32031 13.0327C1.32031 14.1192 2.20111 15 3.28763 15C4.14992 15 4.88264 14.4452 5.14834 13.6732H11.05C12.8356 13.6732 14.2831 12.2256 14.2831 10.44C14.2831 8.65444 12.8356 7.20693 11.05 7.20693L4.94973 7.20693C4.04009 7.20693 3.30267 6.46951 3.30267 5.55987C3.30267 4.65022 4.04009 3.91281 4.94973 3.91281L10.9866 3.91281C11.321 4.52183 11.9685 4.93464 12.7123 4.93464C13.7988 4.93464 14.6796 4.05384 14.6796 2.96732C14.6796 1.8808 13.7988 1 12.7123 1ZM12.7123 2.18954C12.2827 2.18954 11.9345 2.53777 11.9345 2.96732C11.9345 3.39688 12.2827 3.7451 12.7123 3.7451C13.1418 3.7451 13.4901 3.39688 13.4901 2.96732C13.4901 2.53777 13.1418 2.18954 12.7123 2.18954ZM2.50986 13.0327C2.50986 12.6031 2.85808 12.2549 3.28763 12.2549C3.71719 12.2549 4.06541 12.6031 4.06541 13.0327C4.06541 13.4622 3.71719 13.8105 3.28763 13.8105C2.85808 13.8105 2.50986 13.4622 2.50986 13.0327Z" fill="#FFFFFF"/>\n</svg>',"image/svg+xml").firstChild}var POSITIONS$4=Plugin.POSITIONS,LineMobilePlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).playerData=null,r.playerData=e.player.config.playerData,r.dataMonitoring(),r}return _createClass$6(n,[{key:"dataMonitoring",value:function(){var e=this;this.playerData&&MyProxy$1.subscribeProperty(this.playerData.current,"definition",(function(t,n){if(t!==n&&e.player){var r=e.playerData.getCurrentUrl();e.player.changeDefinition({definition:n,url:r}),e.updatePanel(),setTimeout((function(){e.player.paused&&e.player.play()}),1e3)}}))}},{key:"registerIcons",value:function(){return{line:{icon:LineIconSVG,class:"xgplayer-line-svg"}}}},{key:"registerLanguageTexts",value:function(){return{line:{jp:"\u30e9\u30a4\u30f3",en:"Line",zh:"\u7ebf\u8def","zh-hk":"\u7dda\u8def"},lineSelect:{jp:"\u30e9\u30a4\u30f3\u9078\u3076",en:"Line Choose",zh:"\u7ebf\u8def\u9009\u62e9","zh-hk":"\u7dda\u8def\u9078\u64c7"}}}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.line),this.initEvents()}},{key:"afterPlayerInit",value:function(){}},{key:"initEvents",value:function(){this.bind(["click"],this.handleButtonChange.bind(this))}},{key:"handleButtonChange",value:function(){var e=this.renderItemList();this.renderPanel(e)}},{key:"renderItemList",value:function(){var e=this,t=this.playerData.getLineList(),n=util.createDom("div","",{},"line-panel-content");return t.forEach((function(t){var r=e.renderItem(t);n.appendChild(r)})),n}},{key:"renderItem",value:function(e){var t=this,n=this.playerData.current.lineId,r=util.createDom("div","",{},"panel-Item ".concat(n===e.lineId?"select-in":""));return r.innerHTML=this.i18n[e.lineTextKey]||e.lineTextKey,r.addEventListener("click",(function(n){n.stopPropagation(),n.preventDefault(),t.player.emit(PluginEvents.LINE_CHANGE,{from:t.playerData.current.lineId,to:e.lineId}),t.playerData.current.lineId=e.lineId,t.player.emit(SDKEvents.PLAYER_REBUILD)})),r}},{key:"renderPanel",value:function(e){var t,n;null===(t=this.player)||void 0===t||null===(n=t.panel)||void 0===n||n.showPanel(e,this.langText.lineSelect,!0)}},{key:"updatePanel",value:function(){var e,t=this.renderItemList();null===(e=this.player)||void 0===e||e.panel.updatePanel(t)}},{key:"destroy",value:function(){this.unbind(["click"],this.handleButtonChange.bind(this))}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-mobile-line">\n      <div class="xgplayer-icon">\n      </div>\n    </xg-icon>\n    '}}],[{key:"pluginName",get:function(){return"LineMobilePlugin"}},{key:"textTips",get:function(){return{jp:"\u30e9\u30a4\u30f3",en:"Line",zh:"\u7ebf\u8def","zh-hk":"\u7dda\u8def"}}},{key:"defaultConfig",get:function(){return{position:POSITIONS$4.CONTROLS_RIGHT,index:2.8}}}]),n}(Plugin);function RateIconSVG(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14.6879 3.64579C14.7387 3.60575 14.7387 3.52868 14.6879 3.48864L13.3089 2.40296C13.2433 2.35132 13.147 2.39805 13.147 2.48153V4.6529C13.147 4.73639 13.2433 4.78312 13.3089 4.73147L14.6879 3.64579ZM4 2.61914H11.3001V3.91914H4C3.6134 3.91914 3.3 4.23254 3.3 4.61914V15.6191C3.3 16.0057 3.6134 16.3191 4 16.3191H16C16.3866 16.3191 16.7 16.0057 16.7 15.6191V6.75253H18V15.6191C18 16.7237 17.1046 17.6191 16 17.6191H4C2.89543 17.6191 2 16.7237 2 15.6191V4.61914C2 3.51457 2.89543 2.61914 4 2.61914ZM17.7879 3.48864C17.8388 3.52868 17.8388 3.60575 17.7879 3.64579L16.4089 4.73147C16.3433 4.78312 16.2471 4.73639 16.2471 4.6529V2.48153C16.2471 2.39805 16.3433 2.35132 16.4089 2.40296L17.7879 3.48864ZM6.82584 7.37256C6.26886 7.37256 5.82039 7.56063 5.48042 7.93677C5.14768 8.29121 4.98131 8.75415 4.97408 9.33282H5.82039C5.83485 8.92775 5.92166 8.61671 6.08079 8.41418C6.23993 8.19717 6.47863 8.08867 6.7969 8.08867C7.09347 8.08867 7.31771 8.15377 7.46961 8.29121C7.61428 8.42864 7.69385 8.63841 7.69385 8.92052C7.69385 9.20986 7.57811 9.48473 7.35388 9.7379C7.20921 9.8898 6.97774 10.0851 6.645 10.3166C6.04462 10.7289 5.64679 11.0471 5.45872 11.2642C5.11151 11.6548 4.94514 12.1105 4.94514 12.6385H8.54739V11.8935H6.00122C6.11696 11.6331 6.43523 11.3293 6.96327 10.982C7.46961 10.6421 7.83128 10.3672 8.03382 10.1502C8.36656 9.7813 8.54016 9.37622 8.54016 8.92775C8.54016 8.46481 8.38102 8.09591 8.06275 7.80657C7.73725 7.51723 7.32494 7.37256 6.82584 7.37256ZM9.90445 11.5463C9.74532 11.5463 9.60788 11.5969 9.50661 11.7126C9.39088 11.8211 9.34025 11.9586 9.34025 12.1177C9.34025 12.2768 9.39088 12.407 9.50661 12.5228C9.60788 12.624 9.74532 12.6819 9.90445 12.6819C10.0636 12.6819 10.1938 12.624 10.3095 12.5228C10.418 12.407 10.4759 12.2768 10.4759 12.1177C10.4759 11.9586 10.418 11.8211 10.3095 11.7126C10.1938 11.5969 10.0636 11.5463 9.90445 11.5463ZM11.665 8.12484C11.9977 7.6185 12.4679 7.37256 13.0755 7.37256C13.6759 7.37256 14.1461 7.6185 14.486 8.12484C14.8043 8.60225 14.9635 9.24602 14.9635 10.0562C14.9635 10.8663 14.8043 11.5101 14.486 11.9875C14.1461 12.4866 13.6759 12.7398 13.0755 12.7398C12.4679 12.7398 11.9977 12.4866 11.665 11.9875C11.3467 11.5101 11.1876 10.8663 11.1876 10.0562C11.1876 9.24602 11.3467 8.60225 11.665 8.12484ZM13.9435 8.77585C13.7699 8.31291 13.4806 8.08867 13.0755 8.08867C12.6632 8.08867 12.3739 8.31291 12.2075 8.77585C12.0918 9.08689 12.0339 9.51366 12.0339 10.0562C12.0339 10.5914 12.0918 11.0182 12.2075 11.3365C12.3739 11.7922 12.6632 12.0237 13.0755 12.0237C13.4806 12.0237 13.7699 11.7922 13.9435 11.3365C14.0593 11.0182 14.1171 10.5914 14.1171 10.0562C14.1171 9.51366 14.0593 9.08689 13.9435 8.77585Z" fill="#ffffff"/>\n</svg>',"image/svg+xml").firstChild}var POSITIONS$3=Plugin.POSITIONS,PlaybackRateMobilePlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).playerData=null,r.state={currentRate:1,isSupport:!0},r.playerData=e.player.config.playerData,r}return _createClass$6(n,[{key:"registerIcons",value:function(){return{playbackRate:{icon:RateIconSVG,class:"xgplayer-rate-svg"}}}},{key:"registerLanguageTexts",value:function(){return{rate:{jp:"\u500d\u901f",en:"PlaybackRate",zh:"\u500d\u901f","zh-hk":"\u500d\u901f"},rateSelect:{jp:"\u500d\u901f\u9078\u3076",en:"PlaybackRate",zh:"\u500d\u901f\u9009\u62e9","zh-hk":"\u500d\u901f\u9078\u64c7"}}}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.playbackRate),this.initEvents(),this.state.currentRate=this.player.playbackRate||1}},{key:"afterPlayerInit",value:function(){}},{key:"initEvents",value:function(){var e=this;this.bind(["click"],this.renderList.bind(this)),this.on(RATE_CHANGE,(function(){var t,n;e.state.currentRate!==e.player.playbackRate&&(e.state.currentRate=e.player.playbackRate,null!==(t=e.player)&&void 0!==t&&null!==(n=t.panel)&&void 0!==n&&n.isShow&&e.updatePanel())}))}},{key:"renderList",value:function(){var e=this.renderItemList();this.renderPanel(e)}},{key:"renderItemList",value:function(){var e=this,t=util.createDom("div","",{},"playbackRate-panel-content");return this.config.list.forEach((function(n){var r=e.renderItem(n);t.appendChild(r)})),t}},{key:"renderItem",value:function(e){var t=this,n=isObject$o(e)?e:{textKey:e+"X",value:e},r=util.createDom("div","",{},"panel-Item ".concat(this.state.currentRate===n.value?"select-in":""));return r.innerHTML=this.i18n[n.textKey]||n.textKey,r.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault(),t.emit(RATE_CHANGE,{from:t.player.playbackRate,to:n.value}),t.state.currentRate=n.value,t.player.playbackRate=n.value,t.updatePanel()})),r}},{key:"renderPanel",value:function(e){var t,n;null===(t=this.player)||void 0===t||null===(n=t.panel)||void 0===n||n.showPanel(e,this.langText.rateSelect,!0)}},{key:"updatePanel",value:function(){var e,t=this.renderItemList();null===(e=this.player)||void 0===e||e.panel.updatePanel(t)}},{key:"destroy",value:function(){this.unbind(["click"],this.renderList.bind(this))}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-mobile-playBackRate">\n      <div class="xgplayer-icon">\n      </div>\n    </xg-icon>\n    '}}],[{key:"pluginName",get:function(){return"PlaybackRateMobilePlugin"}},{key:"textTips",get:function(){return{jp:"\u500d\u901f",en:"PlaybackRate",zh:"\u500d\u901f","zh-hk":"\u500d\u901f"}}},{key:"defaultConfig",get:function(){return{position:POSITIONS$3.CONTROLS_RIGHT,index:2.9,list:[2,1.5,1.25,1,.75,.5],default:1}}}]),n}(Plugin),SdkPlugin=function(){function e(t){_classCallCheck$5(this,e),this.__args=null,this.sdk=null,this.playerData=null,this.player=null,this._emitter=null,this.beforeCreate&&"function"==typeof this.beforeCreate&&this.beforeCreate(),this.__args=t,this.pluginName="",this.__init(t)}return _createClass$6(e,[{key:"beforeCreate",value:function(){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerCreate",value:function(){}},{key:"afterPlayerCreate",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(t){var n=this;e.defineGetterOrSetter(this,{sdk:{get:function(){return t.sdk},configurable:!0},player:{get:function(){return t.sdk.getPlayerInstance()},configurable:!0},playerData:{get:function(){return t.sdk.playerData},configurable:!0},pluginName:{get:function(){return t.pluginName?t.pluginName.toLowerCase():n.constructor.pluginName.toLowerCase()},configurable:!0},_emitter:{get:function(){return t.sdk._emitter},configurable:!0}})}},{key:"__destroy",value:function(){var e=this,t=this.sdk,n=this.pluginName;this.destroy&&"function"==typeof this.destroy&&this.destroy(),["sdk","player","playerData","pluginName","_emitter"].map((function(t){Object.defineProperty(e,t,{writable:!0})})),Object.keys(this).map((function(t){e[t]=null,delete e[t]})),Object.setPrototypeOf&&Object.setPrototypeOf(this,null),delete t._sdkPlugins[n]}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}},{key:"pluginName",get:function(){return"pluginName"}}]),e}(),defaultConfig={playAuthToken:"",needDefinitionList:!0},AuthToken=function(e){_inherits$5(a,e);var t,n,r,i,o=_createSuper$5(a);function a(e){var t;return _classCallCheck$5(this,a),(t=o.call(this,e)).isPlayByToken=!1,t.isEncrypt=!1,t.config=null,t.retryCount=1,t.init(),t}return _createClass$6(a,[{key:"beforePlayerCreate",value:(i=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayByToken){e.next=3;break}return e.next=3,this.getConfig();case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getConfig",value:(r=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){var t,n,r,i,o,a,s,c,l,u,d,h,f,p,g,y,v,m,_,b,E=this;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!isTokenExpired(this.tokenInfo)){e.next=8;break}return console.error("playAuthToken is expired, please check or update your playAuthToken"),this.sdk.emit(SDKEvents.TOKEN_EXPIRED,{type:"playAuthToken",token:this.tokenInfo}),i={errorType:"token",errorCode:9101,errorMessage:"playAuthToken has expired",ext:{token:this.tokenInfo,config:this.config},originError:void 0},null===(r=this.sdk)||void 0===r||r.delayError.push(i),e.abrupt("return");case 8:if(!this.keyTokenInfo){e.next=16;break}if(!isTokenExpired(this.keyTokenInfo)){e.next=16;break}return console.error("keyToken is expired, please check or update your keyToken"),this.sdk.emit(SDKEvents.TOKEN_EXPIRED,{type:"keyToken",token:this.keyTokenInfo}),a={errorType:"token",errorCode:9102,errorMessage:"keyToken for hls encrypt play has expired",ext:{token:this.keyTokenInfo,config:this.config},originError:void 0},null===(o=this.sdk)||void 0===o||o.delayError.push(a),e.abrupt("return");case 16:return s=getFormat(this.config),this.playerData.codec=(null===(t=this.tokenInfo)||void 0===t||null===(n=t.Codec)||void 0===n?void 0:n.toLowerCase())||CodecType.H264,e.next=20,this.getVideos();case 20:if(e.t0=e.sent,e.t0){e.next=23;break}e.t0={};case 23:return c=e.t0,l=c.playList,u=void 0===l?[]:l,d=c.poster,h=c.vid,f=c.dashOpts,p=c.thumbs,g=c.barrageMaskUrl,null==u||u.forEach((function(e){e.getLicenseUrl=E.playerData.apiMap.licenseUrl})),e.next=34,this.getPrivateDrmInfo(u,h,s);case 34:this.playerData.options.vid=h,this.config.needPoster&&d&&(this.playerData.options.poster=d),this.config.needThumbs&&p.length>0&&this.getThumbnailConfig(p),this.config.needBarrageMask&&g&&this.getBarrageMaskUrl(g),u.length>0?(this.isEncrypt=!!u[0].kid,"hls"===s&&this.isEncrypt&&this.getEncryptHlsConfig({vid:h,playList:u}),("dash"===s||this.playerData.configs.DASHPlugin)&&this.getDashPluginConfig({vid:h,dashOpts:f,playList:u}),y=this.playerData.configs,v=y.autoBitrateOpts,m=y.Mp4EncryptPlayer,_=y.enableMp4MSE,("mp4"===s&&this.isEncrypt||"mp4"===s&&null!=v&&v.isOpenAutoDefi||m||_)&&this.getMp4EncryptConfig({vid:h,playList:u}),"dash"===s||this.playerData.configs.DASHPlugin?(b=u.filter((function(e){return"video"===e.FileType}))).length&&(this.playerData.playList=b,this.playerData.initCurrent(b[0])):(this.playerData.playList=this.config.needDefinitionList?u:[u[0]],this.playerData.initCurrent(this.playerData.playList[0]))):console.error("got no video by playAuthToken"),e.next=44;break;case 41:e.prev=41,e.t1=e.catch(0),console.error(e.t1);case 44:case"end":return e.stop()}}),e,this,[[0,41]])}))),function(){return r.apply(this,arguments)})},{key:"getVideos",value:(n=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){var t,n,r=this;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){var t,n;try{100006===get$2(JSON.parse(e.response),"ResponseMetadata.Error.CodeN")&&(console.error("playAuthToken is expired, please check or update your playAuthToken"),r.sdk.emit(SDKEvents.TOKEN_EXPIRED,e))}catch(o){console.log(o)}null===(t=r._emitter)||void 0===t||t.emit(PluginEvents.GET_PLAY_URL_ERR,e);var i={errorType:"token",errorCode:9100,errorMessage:"get play url error by playAuthToken, please check playAuthToken",ext:{},originError:e};null===(n=r.sdk)||void 0===n||n.delayError.push(i)},n=function(){var e=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(n){return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(502!==(null==n?void 0:n.status)||!r.playerData.apiMap.backupPlayDomain){e.next=7;break}return r.playerData.apiMap.playDomain=r.playerData.apiMap.backupPlayDomain,e.next=4,retryByError((function(){return getPlayInfoByAuthToken(_objectSpread2$5(_objectSpread2$5({},r.playerData.apiMap),r.config))}),r.retryCount,(function(e){return 502===e.status}),t);case 4:return e.abrupt("return",e.sent);case 7:t(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=4,retryByError((function(){return getPlayInfoByAuthToken(_objectSpread2$5(_objectSpread2$5({},r.playerData.apiMap),r.config))}),this.retryCount,(function(e){return 502===e.status}),n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getPrivateDrmInfo",value:(t=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(t,n,r){var i,o,a,s,c,l,u=this;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.getDrmAuthToken||"function"!=typeof this.config.getDrmAuthToken||!this.playerData.unionId){e.next=34;break}if(this.sessionId=(new Date).getTime().toString(),"hls"!==r){e.next=9;break}return e.next=5,sdkUmdLoader.loadPlugins("hlsEncrypt");case 5:o=e.sent,i=o.updateUnionInfo(this.playerData.unionId,this.sessionId),e.next=21;break;case 9:if("dash"!==r){e.next=16;break}return e.next=12,sdkUmdLoader.loadPlugins("dash");case 12:a=e.sent,i=a.updateUnionInfo(this.playerData.unionId,this.sessionId),e.next=21;break;case 16:if("mp4"!==r){e.next=21;break}return e.next=19,sdkUmdLoader.loadPlugins("mp4Encrypt");case 19:s=e.sent,i=s.updateUnionInfo(this.playerData.unionId,this.sessionId);case 21:if(i){e.next=23;break}return e.abrupt("return");case 23:return c=_toConsumableArray$1(new Set(t.map((function(e){return e.kid})))).join(","),e.prev=24,e.next=27,exeFunTimeoutWarn(retPromise$1(this.config.getDrmAuthToken(c,n,i)),200,"The execution time of obtaining privateDrmAuthToken by getDrmAuthToken function of options has exceeded more than 200ms");case 27:(l=e.sent)&&"string"==typeof l&&(this.privateDrmAuthToken=l,t.forEach((function(e){e.drmKeyToken=u.privateDrmAuthToken}))),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(24),console.error("get privaterDrmToken fail");case 34:case"end":return e.stop()}}),e,this,[[24,31]])}))),function(e,n,r){return t.apply(this,arguments)})},{key:"getEncryptHlsConfig",value:function(e){var t,n=e||{},r=n.playList,i=n.vid,o=this.config,a=o.playDomain,s=o.keyToken,c=o.getKeyType,l=o.keyDomain,u=_objectSpread2$5({},this.playerData.configs.EncryptHlsPlugin||{}),d=null==r||null===(t=r[0])||void 0===t?void 0:t.kid;if(s)this.playerData.options.EncryptHlsPlugin=_objectSpread2$5({keyToken:s,playDomain:a||this.playerData.apiMap.playDomain,getKeyType:c||"TOP",keyDomain:l||this.playerData.apiMap.keyDomain},u);else if(this.privateDrmAuthToken&&this.sessionId){var h=getQueryParams(this.privateDrmAuthToken),f=parseInt(h["X-Expires"]),p=isNaN(f)?30:f;this.playerData.options.EncryptHlsPlugin=_objectSpread2$5({vid:i,kid:d,useUnionInfoDRM:!0,keyTokenExpiredDuration:p,drmKeyToken:this.privateDrmAuthToken,sessionId:this.sessionId,playDomain:a||this.playerData.apiMap.playDomain},u)}else this.config.disDrmDegraded||(this.playerData.options.EncryptHlsPlugin=_objectSpread2$5({vid:i,kid:d,getLicenseUrl:this.playerData.apiMap.licenseUrl},u))}},{key:"getThumbnailConfig",value:function(e){var t=e[0],n=_objectSpread2$5({},this.playerData.configs.thumbnail||{});this.playerData.options.thumbnail=_objectSpread2$5({pic_num:t.CaptureNum,urls:t.StoreUrls,width:t.CellWidth,height:t.CellHeight,col:t.ImgXLen,row:t.ImgYLen},n)}},{key:"getBarrageMaskUrl",value:function(e){var t,n,r=_objectSpread2$5({},(null===(t=this.playerData.configs)||void 0===t||null===(n=t.DanmuPlugin)||void 0===n?void 0:n.maskConfig)||{});this.playerData.configs.DanmuPlugin?(this.playerData.options.DanmuPlugin.active=!0,this.playerData.options.DanmuPlugin.maskActive=!0,this.playerData.options.DanmuPlugin.maskConfig=_objectSpread2$5({maskUrl:e},r)):this.playerData.options.DanmuPlugin={active:!0,maskActive:!0,maskConfig:_objectSpread2$5({maskUrl:e},r)}}},{key:"getDashPluginConfig",value:function(e){var t,n,r=e||{},i=r.vid,o=r.playList,a=r.dashOpts,s=this.config.playDomain,c=_objectSpread2$5({},(null===(t=this.playerData.configs)||void 0===t?void 0:t.DASHPlugin)||{}),l=null==o||null===(n=o[0])||void 0===n?void 0:n.kid;if(this.privateDrmAuthToken&&this.sessionId){var u=getQueryParams(this.privateDrmAuthToken),d=parseInt(u["X-Expires"]),h=isNaN(d)?30:d;this.playerData.options.DASHPlugin=_objectSpread2$5({playInfoType:"TOP",vid:i,dashOpts:a,defaultFormat:"dash",definitionText:this.config.definitionMap,kid:l,useUnionInfoDRM:!0,keyTokenExpiredDuration:h,sessionId:this.sessionId,drmKeyToken:this.privateDrmAuthToken,playDomain:s||this.playerData.apiMap.playDomain},c)}else this.config.disDrmDegraded||(this.playerData.options.DASHPlugin=_objectSpread2$5({getLicenseUrl:this.playerData.apiMap.licenseUrl,playInfoType:"TOP",vid:i,dashOpts:a,defaultFormat:"dash",definitionText:this.config.definitionMap},c))}},{key:"getMp4EncryptConfig",value:function(e){var t,n,r=e.playList,i=e.vid,o=this.config.playDomain,a=null==r||null===(t=r[0])||void 0===t?void 0:t.kid,s=_objectSpread2$5({},(null===(n=this.playerData.configs)||void 0===n?void 0:n.Mp4EncryptPlayer)||{});if(this.isEncrypt)if(this.privateDrmAuthToken&&this.sessionId){var c=getQueryParams(this.privateDrmAuthToken),l=parseInt(c["X-Expires"]),u=isNaN(l)?30:l;this.playerData.options.Mp4EncryptPlayer=_objectSpread2$5({vid:i,useEME:!1,isEncrypt:!0,bitrate:null==r?void 0:r[0].Bitrate,kid:a,drmKeyToken:this.privateDrmAuthToken,useUnionInfoDRM:!0,keyTokenExpiredDuration:u,sessionId:this.sessionId,playDomain:o||this.playerData.apiMap.playDomain},s)}else this.config.disDrmDegraded||(this.playerData.options.Mp4EncryptPlayer=_objectSpread2$5({vid:i,isEncrypt:!0,bitrate:null==r?void 0:r[0].Bitrate,kid:a,getLicenseUrl:this.playerData.apiMap.licenseUrl},s));else this.playerData.options.Mp4EncryptPlayer=_objectSpread2$5({vid:i,bitrate:null==r?void 0:r[0].Bitrate},s)}},{key:"init",value:function(){var e=this.playerData.configs.getVideoByToken,t=void 0===e?{}:e;this.initConfig(t)}},{key:"initConfig",value:function(e){if(this.isPlayByToken=!!e.playAuthToken,this.isPlayByToken){if(this.config=Object.assign(defaultConfig,e),this.tokenInfo=parseToken(e.playAuthToken),e.keyToken){var t=isBase64(e.keyToken)?window.atob(e.keyToken):e.keyToken;this.keyTokenInfo=getQueryParams(t)}e.retryCount&&(this.retryCount=e.retryCount)}}},{key:"switchAuthToken",value:function(e){return this.initConfig(e),this.getConfig()}}],[{key:"pluginName",get:function(){return"AuthToken"}}]),a}(SdkPlugin),sdkPluginManager={init:function(e){var t;e&&(null!==(t=e.playerData)&&void 0!==t&&t.isLive?e.sdkPlugins=[]:e.sdkPlugins=[AuthToken],e._sdkPlugins={})},registerPlugin:function(e,t){if(e&&t){var n=null,r=null;e.plugin&&"function"==typeof e.plugin?(n=e.plugin,r=e.options):(n=e,r={}),r.sdk=t;var i=r.pluginName||n.pluginName;if(!i)throw new Error("The property pluginName is necessary");var o=t._sdkPlugins;try{o[i.toLowerCase()]&&this.unRegister(i);var a=new n(r);return o[i.toLowerCase()]=a,o[i.toLowerCase()].func=n,a&&"function"==typeof a.afterCreate&&a.afterCreate(),a}catch(s){console.error(s)}}},unRegister:function(e,t){if(e&&t){e=e.toLowerCase();try{var n=t._sdkPlugins[e];n&&(n.pluginName&&n.__destroy(),delete t._sdkPlugins[e])}catch(r){console.error(r)}}},beforePlayerCreate:function(e){if(e){e._sdkPlugins||this.init(e);for(var t=e._sdkPlugins,n=[],r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];if(t[o]&&t[o].beforePlayerCreate)try{var a=t[o].beforePlayerCreate();n.push(retPromise$1(a))}catch(e2){throw n.push(retPromise$1(null)),e2}}return new Promise((function(e){Promise.all([].concat(n)).then((function(){e(null)})).catch((function(t){console.error(t),e(null)}))}))}},afterPlayerCreate:function(e){if(e)for(var t=e._sdkPlugins,n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];if(t[i]&&t[i].beforePlayerCreate)try{t[i].afterPlayerCreate()}catch(e2){throw e2}}},destroy:function(e){if(e){for(var t=e._sdkPlugins,n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];this.unRegister(i,e)}delete e._sdkPlugins}}},name="@volcengine/veplayer",version="1.5.0",main="dist/index.min.js",module$1="dist/index.min.js",typings="dist/index.d.ts",sideEffects=["*.css","*.less"],files=["dist"],unpkg=!0,unpkgFiles=["*"],scripts={"test:e2e":"echo 'test'",lint:"npx lint-staged",dev:"libd dev demo","dev:vod":"libd dev demo/vod","dev:hth":"libd dev fixtures/hth",build:"libd build",release:"libd release",doc:"docg",changelog:"libd changelog -s"},author="",license="BSD-3-Clause",devDependencies={"@babel/runtime-corejs3":"^7.20.13","@byted/docg":"^0.5.1","@byted/docg-plugin-sdkhub":"^0.1.5","@byted/libd":"1.1.21","@commitlint/cli":"^16.2.1","@commitlint/config-conventional":"^16.2.1","@types/lodash":"^4.14.178","@typescript-eslint/eslint-plugin":"^5.12.0","@typescript-eslint/parser":"^5.12.0","cross-env":"^7.0.3",eslint:"^8.9.0","eslint-config-prettier":"^6.7.0","eslint-plugin-jest":"^23.20.0","eslint-plugin-prettier":"^3.1.0","git-cz":"^4.7.6",husky:"^8.0.1",less:"^4.1.2","lint-staged":"^11.1.2","node-fetch":"2.6.2","postcss-less":"^6.0.0",prettier:"^2.2.1","rollup-plugin-visualizer":"^5.9.0",shelljs:"^0.8.5",stylelint:"^14.5.2","stylelint-config-standard":"^24.0.0","stylelint-prettier":"^2.0.0",typescript:"^4.5.5"},dependencies={"@byted/xgplayer-app-logger":"^0.11.15","@byted/xgplayer-live-logger":"1.0.0-alpha.9","@byted/xgplayer-rts":"0.1.11","@byted/xgplayer-vod-menu":"3.0.3",dayjs:"^1.11.6","dom-helpers":"^5.2.1",eventemitter3:"^4.0.7","globalthis-polyfill":"^1.0.0","js-cookie":"^3.0.1","lodash-es":"^4.17.21","proxy-polyfill":"^0.3.2",xgplayer:"3.0.0-next.54","xgplayer-service":"^0.4.2"},publishConfig={tag:"alpha"},browserslist=["> 0.1%","iOS > 10","android >= 5","Chrome > 40","ChromeAndroid >= 39","not dead","IE 11"],pkgJson={name:name,version:version,main:main,module:module$1,typings:typings,sideEffects:sideEffects,files:files,unpkg:unpkg,unpkgFiles:unpkgFiles,scripts:scripts,author:author,license:license,devDependencies:devDependencies,dependencies:dependencies,"lint-staged":{"*.{less}":'stylelint --fix "src/**/*.less" --custom-syntax postcss-less',"*.{js,jsx,ts,tsx}":["eslint --fix"]},publishConfig:publishConfig,browserslist:browserslist},defaultExtendLang=[{LANG:"en",TEXT:{MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported or no playable source found",GET_URL_ERR_BY_TOKEN:"Failed to get video url",PLAY_AUTH_TOKEN_EXPIRED:"Token has expired",HLS_KEY_TOKEN_EXPIRED:"Play certificate has expired",MEDIA_SOURCE_CANNOT_PLAY_TYPE:"Video type cannot play",NETWORK_ERROR:"Network error",NETWORK_TIMEOUT:"Network timeout"}},{LANG:"zh",TEXT:{MEDIA_ERR_SRC_NOT_SUPPORTED:"\u97f3/\u89c6\u9891\u683c\u5f0f\u4e0d\u652f\u6301\uff0c\u6216\u672a\u627e\u5230\u53ef\u7528\u8d44\u6e90",GET_URL_ERR_BY_TOKEN:"\u83b7\u53d6\u89c6\u9891\u5730\u5740\u5931\u8d25",PLAY_AUTH_TOKEN_EXPIRED:"token\u5df2\u8fc7\u671f",HLS_KEY_TOKEN_EXPIRED:"\u64ad\u653e\u51ed\u8bc1\u5df2\u8fc7\u671f",MEDIA_SOURCE_CANNOT_PLAY_TYPE:"\u4e0d\u652f\u6301\u7684\u89c6\u9891\u683c\u5f0f",NETWORK_ERROR:"\u7f51\u7edc\u9519\u8bef",NETWORK_TIMEOUT:"\u7f51\u7edc\u8d85\u65f6"}},{LANG:"zh-hk",TEXT:{MEDIA_ERR_SRC_NOT_SUPPORTED:"\u97f3/\u8996\u983b\u683c\u5f0f\u4e0d\u652f\u6301\uff0c\u6216\u672a\u627e\u5230\u53ef\u7528\u8cc7\u6e90",GET_URL_ERR_BY_TOKEN:"\u7372\u53d6\u8996\u983b\u5730\u5740\u5931\u6557",PLAY_AUTH_TOKEN_EXPIRED:"Token\u5df2\u904e\u671f",HLS_KEY_TOKEN_EXPIRED:"\u64ad\u653e\u6191\u8b49\u5df2\u904e\u671f",MEDIA_SOURCE_CANNOT_PLAY_TYPE:"\u4e0d\u652f\u6301\u7684\u8996\u983b\u683c\u5f0f",NETWORK_ERROR:"\u7db2\u7d61\u932f\u8aa4",NETWORK_TIMEOUT:"\u7db2\u7d61\u8d85\u6642"}},{LANG:"jp",TEXT:{MEDIA_ERR_SRC_NOT_SUPPORTED:"\u30aa\u30fc\u30c7\u30a3\u30aa/\u30d3\u30c7\u30aa\u5f62\u5f0f\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\u5229\u7528\u53ef\u80fd\u306a\u30ea\u30bd\u30fc\u30b9\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f",GET_URL_ERR_BY_TOKEN:"\u52d5\u753b\u306e URL \u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f",PLAY_AUTH_TOKEN_EXPIRED:"playAuthToken\u306f\u671f\u9650\u5207\u308c\u3067\u3059",HLS_KEY_TOKEN_EXPIRED:"\u30d7\u30ec\u30a4\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u307e\u3059",MEDIA_SOURCE_CANNOT_PLAY_TYPE:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30d3\u30c7\u30aa\u5f62\u5f0f",NETWORK_ERROR:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc",NETWORK_TIMEOUT:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8"}}],Xhr=function(){function e(t,n){_classCallCheck$5(this,e),this.url=t;var r=new window.XMLHttpRequest;r.target=this,r.responseType="arraybuffer",r.open("get",t),r.onload=function(){200!==r.status&&206!==r.status||n&&n instanceof Function&&n(r.response)},r.onerror=function(e){},this.xhr=r,this.run()}return _createClass$6(e,[{key:"cancel",value:function(){this.xhr.abort()}},{key:"run",value:function(){1===this.xhr.readyState&&this.xhr.send()}}]),e}(),PLAY_MODES={ORDER:"order",SLOOP:"sloop",LOOP:"loop",RANDOM:"random"},CLASS_NAME="xgplayer-music";function _randomIndex(e,t,n){var r=Math.floor(Math.random()*(t-e)+e);return r===n?(r>t/2?t/=2:e=t/2,t-e>2?_randomIndex(e,t,n):r):r}var Music=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){var e;return _classCallCheck$5(this,n),(e=t.apply(this,arguments))._onEnded=function(){if("order"===e.mode&&e.index+1>=e.list.length)return e.player.pause(),void(e.player.currentTime=0);switch(e.mode){case PLAY_MODES.SLOOP:e.change();break;case PLAY_MODES.ORDER:case PLAY_MODES.LOOP:default:e.next()}},e._onDurationChange=function(){var t=e.config.abCycle;e._initABCycle(t,e.player)},e._onTimeUpdate=function(){var t=_assertThisInitialized$5(e),n=t.config,r=t.player;if(!e.halfPass&&r.currentTime>r.duration/2&&e.confirmOrder(),n.abCycle){var i=n.abCycle,o=i.end>r.duration?r.duration:i.end;r.currentTime>=o?(i.loop||(r.pause(),e.emit("abCycle_ended")),r.currentTime=i.start||0):r.currentTime<i.start&&(r.currentTime=i.start||0)}},e}return _createClass$6(n,[{key:"afterCreate",value:function(){var e,t,n,r,i,o,a,s,c,l,u=this.player,d=this.playerConfig;util.addClass(u.root,CLASS_NAME),this.halfPass=!1,this.list=this.config.list||[],this.emit(PluginEvents.MUSIC_LIST_CHANGE,this.list),this.nextIndex=-1,this.prevIndex=-1,this.history=[],this.disable=!(this.list.length>0),!d.url&&this.list.length>0&&(d.url=null===(e=this.list)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.src),d.poster||(d.poster=null===(n=this.list)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.poster),d.title||(d.title=null!==(i=null===(o=this.list)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.title)&&void 0!==i?i:""),d.vid||(d.vid=null!==(s=null===(c=this.list)||void 0===c||null===(l=c[0])||void 0===l?void 0:l.vid)&&void 0!==s?s:""),this._curInfo={src:d.url,poster:d.poster,title:d.title,vid:d.vid},this.index=0,this.on(TIME_UPDATE,this._onTimeUpdate),this.on(ENDED,this._onEnded),this.on(DURATION_CHANGE,this._onDurationChange),this.config.offline&&this.checkOffline(this._curInfo.src,this._curInfo.vid).then((function(e){0===e.code&&(d.url=e.url,u.state>=4&&(u.src=e.url))})).catch((function(e){console.error(e)}))}},{key:"destroy",value:function(){util.removeClass(this.player.root,CLASS_NAME)}},{key:"_nextCompute",value:function(){if(!this.disable)switch(this.mode){case PLAY_MODES.SLOOP:this.nextIndex=this.index;break;case PLAY_MODES.ORDER:case PLAY_MODES.LOOP:this.index+1<this.list.length?this.nextIndex=this.index+1:this.nextIndex=0;break;default:this.nextIndex=_randomIndex(0,this.list.length,this.index)}}},{key:"_prevCompute",value:function(){if(!this.disable)switch(this.mode){case PLAY_MODES.SLOOP:this.nextIndex=this.index;break;case PLAY_MODES.ORDER:case PLAY_MODES.LOOP:this.index-1>=0?this.prevIndex=this.index-1:this.prevIndex=this.list.length-1;break;default:this.prevIndex=_randomIndex(0,this.list.length,this.index)}}},{key:"_emitChange",value:function(){this.emit(PluginEvents.MUSIC_CHANGE,this._curInfo)}},{key:"_initABCycle",value:function(e,t){var n=t.plugins.progresspreview;if(e&&t){var r=e.end>this.player.duration?this.player.duration:e.end,i=e.start>this.player.duration?0:e.start,o={id:t.playerId,time:e.start,duration:r-i,text:e.text,color:e.color};n.findDot(o.id)?n.updateDot(o):n.createDot(o)}else n.findDot(t.playerId)&&n.deleteDot(t.playerId)}},{key:"random",value:function(){if(this.list.length<0)return null;var e=_randomIndex(0,this.list.length,this.index);return this.list[e]}},{key:"next",value:function(){this.disable||(this.halfPass||(this.halfPass=!0,this._nextCompute()),this.index=this.nextIndex,this.change())}},{key:"prev",value:function(){this.disable||(this.halfPass||(this.halfPass=!0,this._prevCompute()),this.index=this.prevIndex,this.change())}},{key:"forward",value:function(){var e=this.player,t=this.config.timeScale;e.currentTime=e.currentTime+t<e.duration?e.currentTime+t:e.duration-.1}},{key:"backward",value:function(){var e=this.player,t=this.config.timeScale;e.currentTime=e.currentTime-t>0?e.currentTime-t:0}},{key:"add",value:function(e){this.list.push({src:e.src,title:e.title,vid:e.vid,poster:e.poster}),this.disable=!(this.list.length>0),this.emit(PluginEvents.MUSIC_LIST_CHANGE,this.list)}},{key:"remove",value:function(e){var t=-1;this.list.every((function(n,r){return n.vid!==e||(t=r,!1)})),t>-1&&(this.list.splice(t,1),this.emit(PluginEvents.MUSIC_LIST_CHANGE,this.list)),this.disable=!(this.list.length>0)}},{key:"setAbCycle",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e&&"Object"===util.typeOf(e)?this.config.abCycle=_objectSpread2$5({},e):this.config.abCycle=_objectSpread2$5({start:e||0,end:t||this.player.duration,loop:n},r),this._initABCycle(this.config.abCycle,this.player)}},{key:"removeAbCycle",value:function(){this.config.abCycle=null,this._initABCycle(null,this.player)}},{key:"updateList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.removeAbCycle(),this.player.pause(),this.player.currentTime=0,this.list=e,this.nextIndex=0,this.index=0,this.change(),this.disable=!(this.list.length>0),this.emit(PluginEvents.MUSIC_LIST_CHANGE,this.list)}},{key:"setIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e<0||e>=this.list.length||(this.nextIndex=e,this.index=e,this.change())}},{key:"change",value:function(){var e=this;if(!this.disable){var t=this.player,n=this.list,r=this.index,i=n[r].vid;this.halfPass=!1,this.checkOffline(n[r].src,i).then((function(n){e._curInfo={title:e.list[e.index].title||"",vid:e.list[e.index].vid,poster:e.list[e.index].poster||"",src:n.url},t.playNext({url:n.url,vid:e.list[e.index].vid||0,poster:e.list[e.index].poster||"",autoplay:!0}),t.off("timeupdate",e._emitChange.bind(e)),t.once("timeupdate",e._emitChange.bind(e)),t.play()}))}}},{key:"checkOffline",value:function(e,t){var n=this;return new Promise((function(r,i){if(!n.config.offline||n.disable)return r({url:e,code:-1,vid:t});var o=n.player.database;o.openDB((function(){o.getDataByKey(o.myDB.ojstore.name,t,(function(n){setTimeout((function(){o.closeDB()}),5e3),r(n?{url:URL.createObjectURL(n.blob),code:0,vid:n.vid}:{url:e,code:-2,vid:t})}))}))}))}},{key:"confirmOrder",value:function(){this.halfPass=!0,this._nextCompute(),this._prevCompute(),this.config.preloadNext&&this.preload(this.nextIndex)}},{key:"preload",value:function(e){if(!(e<0||e>=this.list.length)){var t=this.list[e],n=this.player;this.checkOffline(t.src,t.vid).then((function(e){if(-2===e.code){var r=t.vid;new Xhr(t.src,(function(e){n.database.openDB((function(){n.database.addData(n.database.myDB.ojstore.name,[{vid:r,blob:new Blob([e],{type:'audio/mp4; codecs="mp4a.40.5"'})}]),setTimeout((function(){n.database.closeDB()}),5e3)}))}))}}))}}},{key:"timeScale",get:function(){return this.config.timeScale||15},set:function(e){this.config.timeScale=e,this.emit(PluginEvents.TIME_SCALE_CHANGE,e)}},{key:"mode",get:function(){return this.config.mode||PLAY_MODES.RANDOM},set:function(e){Object.values(PLAY_MODES).includes(e)&&(this.config.mode=e,this.emit(PluginEvents.MUSIC_MODE_CHANGE,e))}}],[{key:"pluginName",get:function(){return"music"}},{key:"defaultConfig",get:function(){return{offline:!1,preloadNext:!0,abCycle:null,timeScale:15,mode:PLAY_MODES.ORDER,list:[]}}},{key:"ModeType",get:function(){return Object.keys(PLAY_MODES).map((function(e){return PLAY_MODES[e]}))}}]),n}(BasePlugin),MusicCover=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){return _classCallCheck$5(this,n),t.apply(this,arguments)}return _createClass$6(n,[{key:"afterCreate",value:function(){var e=this;this.on(PluginEvents.MUSIC_CHANGE,(function(t){if(t&&t.poster){var n=e.find("img");n?n.src=t.poster:e.root.innerHTML="<img src=".concat(t.poster,'  alt=""/>'),e.show()}else e.hide()}))}},{key:"render",value:function(){var e,t,n=this.playerConfig;return n.poster||null!=n&&null!==(e=n.url)&&void 0!==e&&e[0].poster?'<xg-icon class="xgplayer-cover">\n                <img src="'.concat(n.poster||(null==n||null===(t=n.url)||void 0===t?void 0:t[0].poster),'" alt="">\n              </xg-icon>'):'<xg-icon class="xgplayer-cover"></xg-icon>'}}],[{key:"pluginName",get:function(){return"musiccover"}},{key:"defaultConfig",get:function(){return{index:0,position:Plugin.POSITIONS.CONTROLS_LEFT}}}]),n}(Plugin);function backwardIcon(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.2478 0C6.32662 0 2.94593 2.3143 1.39715 5.65152L0.558008 5.42701C0.321533 5.36365 0.0784664 5.50398 0.0151043 5.74046C-0.00971985 5.8331 -0.00382614 5.9313 0.0319023 6.02031L1.13271 8.76283C1.22391 8.99003 1.48202 9.10028 1.70921 9.00908C1.74819 8.99344 1.78475 8.97233 1.81779 8.94639L4.14238 7.12171C4.33496 6.97055 4.36853 6.69189 4.21737 6.49932C4.15815 6.42387 4.07605 6.36967 3.98341 6.34485L3.14176 6.1196C4.46348 3.53919 7.14942 1.77312 10.2478 1.77312C14.6545 1.77312 18.2269 5.34545 18.2269 9.75215C18.2269 14.1589 14.6545 17.7312 10.2478 17.7312C6.45067 17.7312 3.273 15.0787 2.4666 11.5256L0.656528 11.5254C1.49041 16.0647 5.46745 19.5043 10.2478 19.5043C15.6338 19.5043 20 15.1381 20 9.75215C20 4.36619 15.6338 0 10.2478 0Z" fill="white"/>\n</svg>\n',"image/svg+xml").firstChild}var MusicBackward=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){var e;return _classCallCheck$5(this,n),(e=t.apply(this,arguments)).onClick=function(t){var n=_assertThisInitialized$5(e).player;t.preventDefault(),t.stopPropagation(),n.plugins.music.backward()},e}return _createClass$6(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),["click","touchstart"].forEach((function(t){e.bind(t,e.onClick)})),this.timeScaleDom=this.find(".xgplayer-timescale"),this.on(PluginEvents.TIME_SCALE_CHANGE,(function(t){e.timeScaleDom.innerHTML=t}))}},{key:"registerIcons",value:function(){return{musicBackward:{icon:backwardIcon,class:"xg-icon-mbackward"}}}},{key:"registerLanguageTexts",value:function(){return{backward:{jp:"\u3042\u3068\u305a\u3055\u308a\u3059\u308b",en:"MusicBackward",zh:"\u540e\u9000","zh-hk":"\u5f8c\u9000"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicBackward)}},{key:"destroy",value:function(){var e=this;["click","touchstart"].forEach((function(t){e.unbind(t,e.onClick)}))}},{key:"render",value:function(){var e=this.player.plugins.music.config.timeScale||15;return'<xg-icon class="xgplayer-backward">\n              <div class="xgplayer-icon">\n                <span class="xgplayer-timescale">'.concat(e,'</span>\n              </div>\n              <div class="xg-tips" lang-key="backward">').concat(this.langText.backward,"</div>\n          </xg-icon>")}}],[{key:"pluginName",get:function(){return"musicbackword"}},{key:"defaultConfig",get:function(){return{index:1,position:Plugin.POSITIONS.CONTROLS_LEFT}}}]),n}(Plugin),MusicPrev=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){var e;return _classCallCheck$5(this,n),(e=t.apply(this,arguments)).onClick=function(t){var n=_assertThisInitialized$5(e).player;t.preventDefault(),t.stopPropagation(),n.plugins.music.prev()},e}return _createClass$6(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),["click","touchstart"].forEach((function(t){e.bind(t,e.onClick)})),this.updateVisible(),this.on(PluginEvents.MUSIC_LIST_CHANGE,this.updateVisible.bind(this))}},{key:"updateVisible",value:function(){var e,t,n;(null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.length)>1?this.show():this.hide()}},{key:"registerIcons",value:function(){return{musicPrev:{icon:' <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <g clip-path="url(#clip0_20323_25783)">\n          <path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 1.20196V22.798C21.2 23.7867 20.0711 24.3511 19.28 23.7579L4.88002 12.9598C4.24002 12.4799 4.24002 11.5201 4.88002 11.0402L19.28 0.242135C20.0711 -0.35107 21.2 0.213286 21.2 1.20196Z" fill="white"/>\n          <path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 0.00219727C4.13137 0.00219727 4.4 0.270826 4.4 0.602197V23.3978C4.4 23.7292 4.13137 23.9978 3.8 23.9978H2.6C2.26863 23.9978 2 23.7292 2 23.3978V0.602197C2 0.270826 2.26863 0.00219727 2.6 0.00219727H3.8Z" fill="white"/>\n          </g>\n          <defs>\n          <clipPath id="clip0_20323_25783">\n          <rect width="24" height="24" fill="white"/>\n          </clipPath>\n          </defs>\n          </svg>\n          ',class:"xg-icon-mprev"}}}},{key:"registerLanguageTexts",value:function(){return{musicPrev:{jp:"\u524d\u306e\u66f2",en:"MusicPrev",zh:"\u4e0a\u4e00\u9996","zh-hk":"\u4e0a\u4e00\u9996"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicPrev)}},{key:"destroy",value:function(){var e=this;["click","touchstart"].forEach((function(t){e.unbind(t,e.onClick)}))}},{key:"render",value:function(){return'<xg-icon class="xgplayer-next">\n            <div class="xgplayer-icon">\n            </div>\n            <div class="xg-tips" lang-key="musicPrev">'.concat(this.langText.musicPrev,"</div>\n          </xg-icon>")}}],[{key:"pluginName",get:function(){return"musicprev"}},{key:"defaultConfig",get:function(){return{index:2,position:Plugin.POSITIONS.CONTROLS_LEFT}}}]),n}(Plugin);function forwardIcon(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M9.75215 0C13.6734 0 17.0541 2.3143 18.6029 5.65152L19.442 5.42701C19.6785 5.36365 19.9215 5.50398 19.9849 5.74046C20.0097 5.8331 20.0038 5.9313 19.9681 6.02031L18.8673 8.76283C18.7761 8.99003 18.518 9.10028 18.2908 9.00908C18.2518 8.99344 18.2152 8.97233 18.1822 8.94639L15.8576 7.12171C15.665 6.97055 15.6315 6.69189 15.7826 6.49932C15.8419 6.42387 15.9239 6.36967 16.0166 6.34485L16.8582 6.1196C15.5365 3.53919 12.8506 1.77312 9.75215 1.77312C5.34545 1.77312 1.77312 5.34545 1.77312 9.75215C1.77312 14.1589 5.34545 17.7312 9.75215 17.7312C13.5493 17.7312 16.727 15.0787 17.5334 11.5256L19.3435 11.5254C18.5096 16.0647 14.5325 19.5043 9.75215 19.5043C4.36619 19.5043 0 15.1381 0 9.75215C0 4.36619 4.36619 0 9.75215 0Z" fill="white"/>\n</svg>\n',"image/svg+xml").firstChild}var MusicForward=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){var e;return _classCallCheck$5(this,n),(e=t.apply(this,arguments)).onClick=function(t){var n=_assertThisInitialized$5(e).player;t.preventDefault(),t.stopPropagation(),n.plugins.music.forward()},e}return _createClass$6(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),["click","touchstart"].forEach((function(t){e.bind(t,e.onClick)})),this.timeScaleDom=this.find(".xgplayer-timescale"),this.on(PluginEvents.TIME_SCALE_CHANGE,(function(t){e.timeScaleDom.innerHTML=t}))}},{key:"registerIcons",value:function(){return{musicForward:{icon:forwardIcon,class:"xg-icon-mforward"}}}},{key:"registerLanguageTexts",value:function(){return{forward:{jp:"\u65e9\u9001\u308a",en:"MusicForward",zh:"\u5feb\u8fdb","zh-hk":"\u5feb\u9032"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicForward)}},{key:"destroy",value:function(){var e=this;["click","touchstart"].forEach((function(t){e.unbind(t,e.onClick)}))}},{key:"render",value:function(){var e=this.player.plugins.music.config.timeScale||15;return'<xg-icon class="xgplayer-forward">\n            <div class="xgplayer-icon">\n            <span class="xgplayer-timescale">'.concat(e,'</span>\n            </div>\n            <div class="xg-tips" lang-key="forward">').concat(this.langText.forward,"</div>\n          </xg-icon>")}}],[{key:"pluginName",get:function(){return"musicforward"}},{key:"defaultConfig",get:function(){return{index:5,position:Plugin.POSITIONS.CONTROLS_LEFT}}}]),n}(Plugin),MusicNext=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){var e;return _classCallCheck$5(this,n),(e=t.apply(this,arguments)).onClick=function(t){var n=_assertThisInitialized$5(e).player;t.preventDefault(),t.stopPropagation(),n.plugins.music.next()},e}return _createClass$6(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),["click","touchstart"].forEach((function(t){e.bind(t,e.onClick)})),this.updateVisible(),this.on(PluginEvents.MUSIC_LIST_CHANGE,this.updateVisible.bind(this))}},{key:"updateVisible",value:function(){var e,t,n;(null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.length)>1?this.show():this.hide()}},{key:"registerIcons",value:function(){return{musicNext:{icon:' <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <g clip-path="url(#clip0_20323_25776)">\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M3.92 0.242135L18.32 11.0402C18.96 11.5201 18.96 12.4799 18.32 12.9598L3.92 23.7579C3.12892 24.3511 2 23.7867 2 22.798V1.20196C2 0.213286 3.12892 -0.35107 3.92 0.242135Z" fill="white"/>\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.6 0.00219727C20.9314 0.00219727 21.2 0.270826 21.2 0.602197V23.3978C21.2 23.7292 20.9314 23.9978 20.6 23.9978H19.4C19.0687 23.9978 18.8 23.7292 18.8 23.3978V0.602197C18.8 0.270826 19.0687 0.00219727 19.4 0.00219727H20.6Z" fill="white"/>\n              </g>\n              <defs>\n              <clipPath id="clip0_20323_25776">\n              <rect width="24" height="24" fill="white"/>\n              </clipPath>\n              </defs>\n              </svg>\n              ',class:"xg-icon-mnext"}}}},{key:"registerLanguageTexts",value:function(){return{musicNext:{jp:"\u6b21\u306e\u66f2",en:"MusicNext",zh:"\u4e0b\u4e00\u9996","zh-hk":"\u4e0b\u4e00\u9996"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicNext)}},{key:"destroy",value:function(){var e=this;["click","touchstart"].forEach((function(t){e.unbind(t,e.onClick)}))}},{key:"render",value:function(){return'<xg-icon class="xgplayer-next">\n            <div class="xgplayer-icon"></div>\n            <div class="xg-tips" lang-key="musicNext">'.concat(this.langText.musicNext,"</div>\n          </xg-icon>")}}],[{key:"pluginName",get:function(){return"musicnext"}},{key:"defaultConfig",get:function(){return{index:4,position:Plugin.POSITIONS.CONTROLS_LEFT}}}]),n}(Plugin),MusicMeta=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){return _classCallCheck$5(this,n),t.apply(this,arguments)}return _createClass$6(n,[{key:"afterCreate",value:function(){var e=this;this.on(PluginEvents.MUSIC_CHANGE,(function(t){t&&t.title?e.root.innerHTML="".concat(t.title):e.root.innerHTML=""}))}},{key:"render",value:function(){var e=this.playerConfig;return'<xg-title class="xgplayer-name">\n          '.concat(e.title||"","\n       </xg-title>")}}],[{key:"pluginName",get:function(){return"musicmeta"}},{key:"defaultConfig",get:function(){return{index:0,position:Plugin.POSITIONS.CONTROLS_LEFT}}}]),n}(Plugin);function OrderSvg(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_20779_14791)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M39 8C39.5523 8 40 8.44772 40 9V11C40 11.5523 39.5523 12 39 12H7C6.44772 12 6 11.5523 6 11V9C6 8.44772 6.44772 8 7 8H39ZM30 23C30 22.4477 29.5523 22 29 22H7C6.44772 22 6 22.4477 6 23V25C6 25.5523 6.44772 26 7 26H29C29.5523 26 30 25.5523 30 25V23ZM46.0725 31C46.0725 31.2113 46.0056 31.4173 45.8812 31.5882L39.845 39.888C39.5202 40.3346 38.8948 40.4334 38.4481 40.1086C38.3635 40.047 38.2891 39.9726 38.2275 39.888L32.1913 31.5882C31.8665 31.1415 31.9652 30.5161 32.4119 30.1913C32.5828 30.067 32.7887 30 33 30H37V19.5C37 19.2239 37.2239 19 37.5 19H40.5C40.7761 19 41 19.2239 41 19.5V30H45.0725C45.6248 30 46.0725 30.4477 46.0725 31ZM29 36C29.5523 36 30 36.4477 30 37V39C30 39.5523 29.5523 40 29 40H7C6.44772 40 6 39.5523 6 39V37C6 36.4477 6.44772 36 7 36H29Z" fill="white"/>\n</g>\n<defs>\n<clipPath id="clip0_20779_14791">\n<rect width="48" height="48" fill="white"/>\n</clipPath>\n</defs>\n</svg>\n',"image/svg+xml").firstChild}function LoopSvg(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_20731_14771)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M42.0018 23V29.024C42.0018 34.569 37.5247 39.064 32.0018 39.064H17.9999V42.6585C17.9999 43.2108 17.5522 43.6585 16.9999 43.6585C16.7991 43.6585 16.603 43.598 16.437 43.485L8.20729 37.8803C7.75081 37.5694 7.63278 36.9473 7.94366 36.4908C8.01331 36.3886 8.10134 36.3001 8.20327 36.23L16.433 30.5662C16.888 30.2531 17.5106 30.3681 17.8237 30.8231C17.9385 30.9899 17.9999 31.1875 17.9999 31.39V35.048H32.0018C35.3155 35.048 38.0018 32.351 38.0018 29.024V23H42.0018ZM31.0019 5.89087C31.2027 5.89087 31.3988 5.95132 31.5648 6.06434L39.7945 11.6691C40.251 11.98 40.369 12.602 40.0582 13.0585C39.9885 13.1608 39.9005 13.2492 39.7986 13.3194L31.5688 18.9831C31.1139 19.2962 30.4912 19.1812 30.1781 18.7263C30.0633 18.5595 30.0019 18.3618 30.0019 18.1593V14.5013H16C12.6863 14.5013 10 17.1984 10 20.5254V26.5494H6V20.5254C6 14.9804 10.4772 10.4853 16 10.4853H30.0019V6.89087C30.0019 6.33858 30.4496 5.89087 31.0019 5.89087Z" fill="white"/>\n</g>\n<defs>\n<clipPath id="clip0_20731_14771">\n<rect width="48" height="48" fill="white"/>\n</clipPath>\n</defs>\n</svg>\n',"image/svg+xml").firstChild}function RandomSvg(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_20731_14777)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M35.0194 27.9598C35.2314 27.9598 35.4379 28.0272 35.6091 28.1522L41.8863 32.736C42.3323 33.0617 42.4298 33.6873 42.1041 34.1333C42.0419 34.2186 41.9665 34.2934 41.8809 34.3551L35.6037 38.875C35.1556 39.1977 34.5306 39.096 34.2079 38.6478C34.0853 38.4776 34.0194 38.2732 34.0194 38.0635V35.5556C30.1354 35.5195 27.7656 34.3892 25.642 31.7548C26.4304 30.621 27.1705 29.3627 27.8834 27.9788C29.5719 30.6143 31.112 31.5275 34.0194 31.5546V28.9598C34.0194 28.4075 34.4671 27.9598 35.0194 27.9598ZM35.0112 7.94434C35.2205 7.94434 35.4246 8.01001 35.5946 8.13211L41.8792 12.6458C42.3278 12.968 42.4303 13.5928 42.1081 14.0414C42.0464 14.1273 41.9715 14.2028 41.8861 14.2652L35.6015 18.8607C35.1557 19.1867 34.53 19.0895 34.204 18.6437C34.0787 18.4724 34.0112 18.2657 34.0112 18.0535V15.4606C29.9521 15.4984 28.443 17.234 25.7897 23.0253C25.4916 23.6778 25.333 24.0244 25.1845 24.3452C21.6243 32.0396 17.983 35.4364 10.0186 35.5591H6V31.5394L9.98762 31.5397C16.0421 31.4462 18.5555 29.1016 21.5376 22.6568C21.6818 22.3451 21.8361 22.0079 22.1364 21.3507C25.3774 14.2767 27.8951 11.4978 34.0112 11.4409V8.94434C34.0112 8.39205 34.4589 7.94434 35.0112 7.94434ZM10.0186 11.4409C14.8213 11.5149 18.0519 12.7794 20.6407 15.459C19.9655 16.6111 19.3108 17.8933 18.6522 19.3098C16.5567 16.6161 14.0817 15.5236 9.98762 15.4604L6 15.4606V11.4409H10.0186Z" fill="white"/>\n</g>\n<defs>\n<clipPath id="clip0_20731_14777">\n<rect width="48" height="48" fill="white"/>\n</clipPath>\n</defs>\n</svg>\n',"image/svg+xml").firstChild}function SloopSvg(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_20731_14784)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M42.0018 22.1091V28.1331C42.0018 33.6781 37.5247 38.1732 32.0018 38.1732H17.9999V41.7676C17.9999 42.3199 17.5522 42.7676 16.9999 42.7676C16.7991 42.7676 16.603 42.7072 16.437 42.5941L8.20729 36.9894C7.75081 36.6785 7.63278 36.0564 7.94366 35.6C8.01331 35.4977 8.10134 35.4092 8.20327 35.3391L16.433 29.6754C16.888 29.3623 17.5106 29.4773 17.8237 29.9322C17.9385 30.099 17.9999 30.2967 17.9999 30.4991V34.1572H32.0018C35.3155 34.1572 38.0018 31.4601 38.0018 28.1331V22.1091H42.0018ZM26.05 18V29.664H23.19V21.08L21 22.852V19.772L23.19 18H26.05ZM31.0019 5C31.2027 5 31.3988 5.06045 31.5648 5.17347L39.7945 10.7782C40.251 11.0891 40.369 11.7112 40.0582 12.1677C39.9885 12.2699 39.9005 12.3584 39.7986 12.4285L31.5688 18.0922C31.1139 18.4054 30.4912 18.2904 30.1781 17.8354C30.0633 17.6686 30.0019 17.4709 30.0019 17.2685V13.6105H16C12.6863 13.6105 10 16.3075 10 19.6345V25.6585H6V19.6345C6 14.0895 10.4772 9.59443 16 9.59443H30.0019V6C30.0019 5.44772 30.4496 5 31.0019 5Z" fill="white"/>\n</g>\n<defs>\n<clipPath id="clip0_20731_14784">\n<rect width="48" height="48" fill="white"/>\n</clipPath>\n</defs>\n</svg>\n',"image/svg+xml").firstChild}var MusicMode=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){return _classCallCheck$5(this,n),t.apply(this,arguments)}return _createClass$6(n,[{key:"afterCreate",value:function(){var e,t,r,i=this;if(_get$3(_getPrototypeOf$5(n.prototype),"afterCreate",this).call(this),this.player.plugins.music&&!this.config.disable){this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(PluginEvents.MUSIC_MODE_CHANGE,(function(e){i.animate(e)}));var o=null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.mode;this.animate(o),this.updateVisible(),this.on(PluginEvents.MUSIC_LIST_CHANGE,this.updateVisible.bind(this))}}},{key:"updateVisible",value:function(){var e,t,n;(null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.length)>1?this.show():this.hide()}},{key:"registerIcons",value:function(){return{order:{icon:OrderSvg,class:"xg-icon-order"},loop:{icon:LoopSvg,class:"xg-icon-loop"},sloop:{icon:SloopSvg,class:"xg-icon-sloop"},random:{icon:RandomSvg,class:"xg-icon-random"}}}},{key:"registerLanguageTexts",value:function(){return{order:{jp:"\u9806\u756a\u306b\u904a\u3076",en:"Play in order",zh:"\u987a\u5e8f\u64ad\u653e","zh-hk":"\u9806\u5e8f\u64ad\u653e"},loop:{jp:"\u30ea\u30b9\u30c8\u30eb\u30fc\u30d7",en:"List loop",zh:"\u5217\u8868\u5faa\u73af","zh-hk":"\u5217\u8868\u5faa\u74b0"},sloop:{jp:"\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30af\u30eb",en:"Single loop",zh:"\u5355\u66f2\u5faa\u73af","zh-hk":"\u55ae\u66f2\u5faa\u74b0"},random:{jp:"\u30b7\u30e3\u30c3\u30d5\u30eb\u518d\u751f",en:"Play in shuffle",zh:"\u968f\u673a\u64ad\u653e","zh-hk":"\u96a8\u6a5f\u64ad\u653e"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.order),this.appendChild(".xgplayer-icon",e.sloop),this.appendChild(".xgplayer-icon",e.loop),this.appendChild(".xgplayer-icon",e.random)}},{key:"btnClick",value:function(e){var t,n,r;e.preventDefault(),e.stopPropagation();var i=null===(t=this.player.plugins)||void 0===t||null===(n=t.music)||void 0===n||null===(r=n.config)||void 0===r?void 0:r.mode,o=Music.ModeType.findIndex((function(e){return e===i})),a=0;o+1<Music.ModeType.length&&(a=o+1),this.player.plugins.music.mode=Music.ModeType[a]}},{key:"animate",value:function(e){switch(e){case PLAY_MODES.ORDER:this.setAttr("data-state","order"),this.changeLangTextKey(this.find(".xg-tips"),"order");break;case PLAY_MODES.LOOP:this.setAttr("data-state","loop"),this.changeLangTextKey(this.find(".xg-tips"),"loop");break;case PLAY_MODES.SLOOP:this.setAttr("data-state","sloop"),this.changeLangTextKey(this.find(".xg-tips"),"sloop");break;case PLAY_MODES.RANDOM:this.setAttr("data-state","random"),this.changeLangTextKey(this.find(".xg-tips"),"random");break;default:this.setAttr("data-state","order"),this.changeLangTextKey(this.find(".xg-tips"),"order")}}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-music-mode">\n      <div class="xgplayer-icon"></div>\n      <div class="xg-tips" lang-key="musicMode">'.concat(this.langText.order,"</div>\n    </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"MusicMode"}},{key:"defaultConfig",get:function(){return{position:Plugin.POSITIONS.CONTROLS_RIGHT,index:9,disable:!1}}}]),n}(Plugin);function musicPlaySVG(){return(new DOMParser).parseFromString('<svg width="30" height="30" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_20323_25753)">\n<g filter="url(#filter0_d_20323_25753)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M25 0C38.8071 0 50 11.1929 50 25C50 38.8071 38.8071 50 25 50C11.1929 50 0 38.8071 0 25C0 11.1929 11.1929 0 25 0Z" fill="#1664FF"/>\n</g>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.3863 11.7091L37.5681 23.0728C38.9924 23.9629 38.9924 26.0372 37.5681 26.9273L19.3863 38.2909C17.8726 39.237 15.9091 38.1488 15.9091 36.3637V13.6364C15.9091 11.8513 17.8726 10.763 19.3863 11.7091Z" fill="white"/>\n</g>\n<defs>\n<filter id="filter0_d_20323_25753" x="-8" y="-6" width="66" height="66" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="2"/>\n<feGaussianBlur stdDeviation="4"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_20323_25753"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_20323_25753" result="shape"/>\n</filter>\n<clipPath id="clip0_20323_25753">\n<rect width="50" height="50" fill="white"/>\n</clipPath>\n</defs>\n</svg>\n',"image/svg+xml").firstChild}function musicPauseSVG(){return(new DOMParser).parseFromString('<svg width="30" height="30" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_20330_26170)">\n<g filter="url(#filter0_d_20330_26170)">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M25 0C38.8071 0 50 11.1929 50 25C50 38.8071 38.8071 50 25 50C11.1929 50 0 38.8071 0 25C0 11.1929 11.1929 0 25 0Z" fill="#1664FF"/>\n</g>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 11C21.4404 11 22 11.6044 22 12.35V36.65C22 37.3956 21.4404 38 20.75 38H18.25C17.5596 38 17 37.3956 17 36.65V12.35C17 11.6044 17.5596 11 18.25 11H20.75Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M31.75 11C32.4404 11 33 11.6044 33 12.35V36.65C33 37.3956 32.4404 38 31.75 38H29.25C28.5596 38 28 37.3956 28 36.65V12.35C28 11.6044 28.5596 11 29.25 11H31.75Z" fill="white"/>\n</g>\n<defs>\n<filter id="filter0_d_20330_26170" x="-8" y="-6" width="66" height="66" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n<feOffset dy="2"/>\n<feGaussianBlur stdDeviation="4"/>\n<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>\n<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_20330_26170"/>\n<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_20330_26170" result="shape"/>\n</filter>\n<clipPath id="clip0_20330_26170">\n<rect width="50" height="50" fill="white"/>\n</clipPath>\n</defs>\n</svg>\n',"image/svg+xml").firstChild}var index$2="";function initMusicConfig(e){if("Object"!==util.typeOf(e.controls))e.controls={mode:"flex",initShow:!0};else{var t=e.controls;e.controls=_objectSpread2$5({mode:"flex",initShow:!0},t)}var n=e.play||{};e.play=_objectSpread2$5({index:3},n),e.marginControls=!0,e.icons=_objectSpread2$5({play:musicPlaySVG,pause:musicPauseSVG},e.icons||{})}var MusicPreset=_createClass$6((function e(t,n){_classCallCheck$5(this,e),initMusicConfig(n);var r="mobile"===sniffer$1.device;this.plugins=[Music,MusicMeta,MusicCover].concat(_toConsumableArray$1(r?[]:[MusicBackward,MusicPrev,MusicForward,MusicNext,MusicMode])),this.ignores=["start","cssFullScreen","fullscreen","pip","enter","replay","pc","loading","poster","error","playbackrate","mobile"]})),index_min="";window.Player=PresetPlayer;var VePlayer=function(){function e(t){_classCallCheck$5(this,e),this.player=null,this.mountingDom=null,this.playerContainer=null,this.mobilePanel=null,this._isFirstCreated=!0,this.sdkPlugins=[],this._sdkPlugins={},this.delayError=[],this.isFirstEmitted=!0,this._init(t)}var t,n,r,i,o,a;return _createClass$6(e,[{key:"_init",value:function(e){this.initUmdLoader(e),this.playerData=new PlayerData(e),this._emitter=new EventEmitter,this.on(SDKEvents.TOKEN_EXPIRED,this.onTokenExpiredAction.bind(this)),this._initSdkPlugins(),this.renderDom(),this.createPlayer(),this._initI18N(this.playerData.languageData)}},{key:"_initSdkPlugins",value:function(){var e=this;sdkPluginManager.init(this),_toConsumableArray$1(this.sdkPlugins).map((function(t){return sdkPluginManager.registerPlugin(t,e)}))}},{key:"initCheckExpire",value:function(){var e=this;this.checkExpireTimer=new IntervalTimer,this.checkExpireTimer.repeat((function(){e.onRepeat()}),this.playerData.checkExpireInterval)}},{key:"initUmdLoader",value:function(e){var t=this;this.sdkUmdLoader=sdkUmdLoader,this.sdkUmdLoader.failCallback=function(e,n){return t.umdLoadErr(e,n)},e.umdUrlMap&&"object"===_typeof$4(e.umdUrlMap)&&this.sdkUmdLoader.updateBackupMap(e.umdUrlMap)}},{key:"umdLoadErr",value:function(e,t){this.emit(SDKEvents.UMD_LOAD_FAIL,{name:e,error:t})}},{key:"onRepeat",value:function(){var e,t=this,n=this.playerData.expireDetectType;n.indexOf("getUrlTime")>-1&&this.getUrlTime&&null!==(e=this.player)&&void 0!==e&&e.duration&&(new Date).getTime()/1e3>this.getUrlTime+3300+this.player.duration+500&&(this.getUrlTime=0,this.emitExpireEvent()),n.indexOf("xhrStatus")>-1&&this._playOriginalUrl&&Math.random()<1/7.5&&new XHR({url:this._playOriginalUrl,method:"HEAD"}).catch((function(e){e&&void 0!==e.status&&(t.isFirstEmitted?(t.emitExpireEvent(),t.isFirstEmitted=!1):(t.expireCount=void 0===t.expireCount?1:t.expireCount+1,t.expireCount>3&&(t.expireCount=0,t.emitExpireEvent())))}))}},{key:"emitExpireEvent",value:function(){var e=this.player,t=(new Date).getTime()/1e3;e.emitExpireTimestamp?t-e.emitExpireTimestamp>MIN_EXPIRE_INTERVAL&&(e.emitExpireTimestamp=t,e.emit("MEDIA_EXPIRED")):(e.emitExpireTimestamp=t,e.emit("MEDIA_EXPIRED"))}},{key:"getUrlTimestamp",value:function(e){if(e){var t;e.startsWith("//")&&(e=location.protocol+e);try{var n,r=_createForOfIteratorHelper$1(new URL(e).searchParams);try{for(r.s();!(n=r.n()).done;){var i=_slicedToArray(n.value,2),o=i[0],a=i[1];if("auth_key"===o||"sign"===o){var s=parseInt(a.split("-")[0]);if(!isNaN(s)){t=s;break}}}}catch(d){r.e(d)}finally{r.f()}}catch(d){console.error(d)}try{var c,l=null===(c=new URL(e).pathname.split("/"))||void 0===c?void 0:c[2];if(l){var u=parseInt(l,16);isNaN(u)||(t=u)}}catch(d){console.error(d)}this.getUrlTime=t||(new Date).getTime()/1e3}}},{key:"on",value:function(e,t){this._emitter.on(e,t)}},{key:"emit",value:function(e,t){this._emitter.emit(e,t)}},{key:"once",value:function(e,t){this._emitter.once(e,t)}},{key:"off",value:function(e,t){this._emitter.off(e,t)}},{key:"renderDom",value:function(){var e=this.playerData,t=e.id,n=e.root,r=document.createElement("div");this.playerContainer=r;var i=n||document.querySelector("#".concat(t));i&&(i.appendChild(r),this.mountingDom=i)}},{key:"renderPoster",value:function(){if(this.playerContainer){var e=this.playerData.options,t=e.poster,n=void 0===t?"":t,r=e.width,i=e.height;n&&(this.playerContainer.style.cssText='background: url("'.concat(n,'");\n    background-size: cover;\n    width:').concat(r?r+"px":"100%",";\n    height:").concat(i?i+"px":"100%",";\n    "))}}},{key:"createPlayer",value:(a=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){var t,n,r,i,o,a,s,c,l,u,d,h,f,p,g,y,v,m,_,b,E,S,T,w,O,k,C,$,A,P,I,x,R,D=this;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._destroyPlayer();case 2:return e.next=4,this.beforePlayerCreate();case 4:return a=this.playerData,s=a.isLive,c=a.options,l=a.plugins,u=a.isMobile,d=a.openSoftDecoding,h=a.configs,f=a.isMusic,p=this.playerData.getCurrentUrl(),g=this.playerData.getCurrentStreamType()||getFormat(null==h?void 0:h.getVideoByToken),getPluginConfig(h,"EncryptHlsPlugin")||p&&g||f?(this._playOriginalUrl=p,this.getUrlTimestamp(p)):(console.warn("url is empty or streamType is empty: url:".concat(p,", streamType").concat(g)),this.renderPoster()),y={defaultDefinition:null===(t=this.playerData.playList[0])||void 0===t?void 0:t.definition,list:this.playerData.playList},v=function(){var e=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getSoftDecodingOption(d,p,g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=13,createSDKPreset({isLive:s,isMobile:u,type:g,playerData:this.playerData,getSoftOptionTask:v});case 13:return m=e.sent,_=m.presets,b=m.softDecodingOption,E=m.plugins,S=u?createPlayerOption(s):createPlayerOption$1(s),T=this._analyzeExtendPlugins(),w=T.basicPlugins,O=void 0===w?[]:w,k=T.iconPlugins,C=void 0===k?[]:k,$=this.playerData.getLineList(),A=this.playerData.current.lineId,P=this.playerData.getDefinitionListByLineId(A),I=_objectSpread2$5(_objectSpread2$5(_objectSpread2$5(_objectSpread2$5({},S),c),b||{}),{},{definition:y,icons:_objectSpread2$5(_objectSpread2$5(_objectSpread2$5({},S.icons),f?{play:musicPlaySVG,pause:musicPauseSVG}:{}),null!==(n=null==c?void 0:c.icons)&&void 0!==n?n:{}),MoreButtonPlugin:{iconPlugins:[].concat(_toConsumableArray$1(null!==(r=null===(i=c.MoreButtonPlugin)||void 0===i?void 0:i.iconPlugins)&&void 0!==r?r:[]),_toConsumableArray$1(C),[PlaybackRateMobilePlugin])},playerData:this.playerData}),$.length>1&&I.MoreButtonPlugin.iconPlugins.push(LineMobilePlugin),P.length>1&&I.MoreButtonPlugin.iconPlugins.push(DefinitionMobilePlugin),this.setDefaultConfigOptions(I),x=[].concat(_toConsumableArray$1(O),_toConsumableArray$1(l),_toConsumableArray$1(E)),I.ignores=[].concat(_toConsumableArray$1(null!==(o=null==I?void 0:I.ignores)&&void 0!==o?o:[]),_toConsumableArray$1(f?["sdkErrorPlugin","sdkToastPlugin","MoreButtonPlugin","DanmuPlugin"]:[])),this._isFirstCreated?this._isFirstCreated=!1:(I.autoplayMuted=!1,I.ignores=[].concat(_toConsumableArray$1(null!==(R=null==I?void 0:I.ignores)&&void 0!==R?R:[]),["sdkUnmutePlugin"])),this.setPluginConfig(I),this.player=new PresetPlayer(_objectSpread2$5(_objectSpread2$5(f?{el:this.playerContainer,controls:{mode:"flex",initShow:!0},marginControls:!0,presets:[].concat(_toConsumableArray$1(_),[MusicPreset]),mediaType:["mp4","hls"].includes(g)?"video":"audio",url:p}:{el:this.playerContainer,presets:_,url:p,isLive:s},I),{},{plugins:_toConsumableArray$1(x)})),this.player.playerData=this.playerData,this._emitter.emit(SDKEvents.PLAYER_CREATED_FINISH),this.afterPlayerCreate(),e.abrupt("return",this.player);case 35:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setPluginConfig",value:function(e){var t,n=this.playerData,r=n.apiMap,i=n.configs,o=n.unionInfo,a=n.playList,s=this.playerData.getCurrentStreamType()||getFormat(null==i?void 0:i.getVideoByToken),c=getPluginConfig(i,"EncryptHlsPlugin"),l=getPluginConfig(i,"Mp4EncryptPlayer"),u=getPluginConfig(i,"DASHPlugin"),d=getPluginConfig(i,"vodLogOpts"),h=!(null==a||null===(t=a[0])||void 0===t||!t.kid)||!!c;c&&(e.EncryptHlsPlugin=_objectSpread2$5({playDomain:r.playDomain,getKeyType:"TOP"},c)),l&&(e.Mp4EncryptPlayer=_objectSpread2$5({playDomain:r.playDomain,getKeyType:"TOP"},l)),u&&(e.DASHPlugin=_objectSpread2$5({playDomain:r.playDomain,getKeyType:"TOP"},u)),i.privateDrmAuthToken&&i.kid&&o&&("hls"===s?e.EncryptHlsPlugin=_objectSpread2$5({kid:i.kid,drmKeyToken:i.privateDrmAuthToken,playDomain:r.playDomain},c||{}):"dash"===s?e.DASHPlugin=_objectSpread2$5({kid:i.kid,drmKeyToken:i.privateDrmAuthToken,playDomain:r.playDomain},u||{}):"mp4"===s&&(e.Mp4EncryptPlayer=_objectSpread2$5({kid:i.kid,drmKeyToken:i.privateDrmAuthToken,playDomain:r.playDomain},l||{}))),d&&(e.vodLogOpts=_objectSpread2$5({vtype:(s||"mp4").toUpperCase(),drm_type:h?1:0,playerVersion:pkgJson.version},d))}},{key:"detectCodec",value:(o=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(t){var n,r,i,o,a;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sdkUmdLoader.loadPlugins("streamprobe");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:if(n=e.t0,!(r=n.LoadProbe)){e.next=14;break}return e.next=11,null===(i=new r)||void 0===i?void 0:i.parseUrl(t);case 11:o=e.sent,"bytevc1"===(a=(o||{}).codec)?this.playerData.codec=CodecType.H265:"avc"===a&&(this.playerData.codec=CodecType.H264);case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),console.warn("detect codec error: ",e.t1);case 19:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e){return o.apply(this,arguments)})},{key:"setDefaultConfigOptions",value:function(e){if(this._isFirstCreated){var t=this.playerData,n=t.defaultConfig,r=t.isHitDefault;if(n){var i,o,a=null!=n?n:{},s=a.volume,c=a.startTime,l=a.DanmuPlugin,u=a.LiveSubtitlesIconPlugin;s&&(e.volume=e.volume?_objectSpread2$5(_objectSpread2$5({},e.volume),{},{default:s}):s),r&&(c&&(e.startTime=c),l&&(e.DanmuPlugin=_objectSpread2$5(_objectSpread2$5({},null!==(i=e.DanmuPlugin)&&void 0!==i?i:{}),l)),u&&(e.LiveSubtitlesIconPlugin=_objectSpread2$5(_objectSpread2$5({},null!==(o=e.LiveSubtitlesIconPlugin)&&void 0!==o?o:{}),u)))}}}},{key:"getCurrentPlayerConfig",value:function(){var e,t,n=this.playerData,r=n.isLive,i=n.current,o=i.lineId,a={type:r?"live":"vod",isLive:r,definition:i.definition,lineId:o,volume:null!==(e=this.player.volume)&&void 0!==e?e:.6};return r||(a.startTime=null!==(t=this.player.currentTime)&&void 0!==t?t:0),_objectSpread2$5({},a)}},{key:"_analyzeExtendPlugins",value:function(){var e,t=this.playerData.options,n=t.extendPlugin||[],r=null!==(e=null==t?void 0:t.ignore)&&void 0!==e?e:[],i=[],o=[];return n.forEach((function(e){var t=extendPlugin(e);"inner"!==t.type||r[e.pluginName]?i.push(t):o.push(t)})),{basicPlugins:i,iconPlugins:o}}},{key:"beforePlayerCreate",value:(i=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sdkPluginManager.beforePlayerCreate(this);case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"afterPlayerCreate",value:function(){var e=this.playerData.isMobile;this._mountingPlayerPanel(e),this._mountingExtendMethods(),this._bindSdkEvents(),this._bindPlayerEvents(),this._setPlayerInfo(),sdkPluginManager.afterPlayerCreate(this),this.emitDelayError()}},{key:"emitDelayError",value:function(){var e=this;setTimeout((function(){e.player&&e.delayError.forEach((function(t){var n=new Errors(e.player,t);e.player.emit("error",n)})),e.delayError=[]}),0)}},{key:"_setPlayerInfo",value:function(){var e,t;if(this.player){this.player.playerVersion=pkgJson.version;var n=this.playerData.getCurrentStreamType()||getFormat(null===(e=this.playerData)||void 0===e||null===(t=e.configs)||void 0===t?void 0:t.getVideoByToken);this.player.playerType||(this.player.playerType=n)}}},{key:"_mountingPlayerPanel",value:function(e){var t,n=this.playerData,r=n.options,i=n.isLive;this.player&&e&&(this.mobilePanel=new MobilePlayerPanel({config:null!==(t=r.panel)&&void 0!==t?t:{mode:i?PLAYER_MODE.INNER:PLAYER_MODE.NORMAL,isAutoChange:!0},root:this.player.root,player:this.player}),this.player.panel=this.mobilePanel)}},{key:"_bindPlayerEvents",value:function(){this.player&&(this.player.on(SDKEvents.PLAYER_REBUILD,this.createPlayer.bind(this)),this.player.on(PluginEvents.MEDIA_EXPIRED,this.onMediaExpiredAction.bind(this)),this.player.once(COMPLETE,this.emitDelayError.bind(this)))}},{key:"onMediaExpiredAction",value:function(){var e,t,n=this;if(null!==(e=this.playerData)&&void 0!==e&&e.onMediaExpired&&"function"==typeof(null===(t=this.playerData)||void 0===t?void 0:t.onMediaExpired)){var r=retPromise$1(this.playerData.onMediaExpired());null!=r&&r.then&&r.then((function(e){return n.playNext(e)}))}}},{key:"onTokenExpiredAction",value:function(){var e,t,n=this;if(null!==(e=this.playerData)&&void 0!==e&&e.onTokenExpired&&"function"==typeof(null===(t=this.playerData)||void 0===t?void 0:t.onTokenExpired)){var r=retPromise$1(this.playerData.onTokenExpired());null!=r&&r.then&&r.then((function(e){return n.updateAuthToken(e)}))}}},{key:"_bindSdkEvents",value:function(){var e=this;[].concat(_toConsumableArray$1(Object.values(PluginEvents)),_toConsumableArray$1(Object.values(SDKEvents)),_toConsumableArray$1(Object.values(Events))).forEach((function(t){"string"==typeof t&&e.player.on(t,(function(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];(n=e._emitter).emit.apply(n,[t].concat(i))}))}))}},{key:"_mountingExtendMethods",value:function(){this.player&&(this.player.changePluginsIcon=this.changePluginsIcon.bind(this))}},{key:"_offPlayerEvents",value:function(){this.player&&this.player.off(SDKEvents.PLAYER_REBUILD,this.createPlayer.bind(this))}},{key:"changePluginsIcon",value:function(e,t){var n;if(this.player){var r=this.player.getPlugin(e);if(r&&null!=r&&r.root){var i=util.hasClass(null==r?void 0:r.parent,"panel-icon-svg")?null==r||null===(n=r.parent)||void 0===n?void 0:n.parentNode:null==r?void 0:r.root;i&&(t?util.show(i,"block"):util.hide(i))}}}},{key:"getSdkPlugin",value:function(e){var t=this._sdkPlugins[e.toLowerCase()];return t&&t.pluginName?t:null}},{key:"switchAuthToken",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n?0:this.player.currentTime,i=this.getSdkPlugin("AuthToken"),o=this.player.paused&&!this.player.isError,a=this.player.state,s=this.player.getPlugin("sdkDefinitionPlugin");return s&&(s.canChange=!1),new Promise((function(n,c){i?i.switchAuthToken(e).then((function(){var e,i=t.playerData.getCurrentUrl();t._playOriginalUrl=i;var l={defaultDefinition:null===(e=t.playerData.playList[0])||void 0===e?void 0:e.definition,list:t.playerData.playList};if(s&&(s.config=s.getConfig(t.player),s.renderItemList(),s.canChange=!0),t.player){var u=_objectSpread2$5(_objectSpread2$5({},t.playerData.options),{},{definition:l,startTime:r,url:i});if(t.player.playNext(u),6===a)t.player.once(CANPLAY,(function(){o&&t.player.pause(),n()}));else{var d=u.autoplay||u.autoplayMuted;t.player.once(CANPLAY,(function(){d?t.player.play():t.player.pause(),n()}))}}else console.error("no player created"),c()})):(console.error("current is not playAuthToken play"),c())}))}},{key:"updateAuthToken",value:function(e){var t=this,n=this.player.config,r=this.getSdkPlugin("AuthToken");return new Promise((function(i,o){r?r.switchAuthToken(e).then((function(){var e=t.playerData.getCurrentUrl();if(t._playOriginalUrl=e,t.getUrlTimestamp(e),t.player){t.player.resetState(),t.player.setConfig(_objectSpread2$5(_objectSpread2$5(_objectSpread2$5({},n),t.playerData.options),{},{url:e}));var r=t.player.start(e);r&&r.then?r.then((function(){return i()})):i()}else console.error("player not created"),o()})):(console.error("current is not playAuthToken play"),o())}))}},{key:"src",get:function(){var e;return null===(e=this.player)||void 0===e?void 0:e.src},set:function(e){this.player&&(this.player.src=e)}},{key:"switchURL",value:function(e){var t=this;this.resetUrlState(e);var n=this.player.switchURL(e,!1),r=this.player.currentTime;return n&&n.then?n:new Promise((function(e){var n=t.player.paused&&!t.player.isError,i=function(){t.player.currentTime=r,n&&t.player.once(CANPLAY,(function(){t.player.pause()})),e()};sniffer$1.os.isAndroid?t.once("timeupdate",(function(){i()})):t.once(CANPLAY,(function(){i()})),t.player.play()}))}},{key:"next",value:function(e){var t,n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=r?0:this.player.currentTime,o=this.playerData.configs,a=_objectSpread2$5(_objectSpread2$5({},o),{},{startTime:i,autoplay:!0},e);return null!=e&&null!==(t=e.getVideoByToken)&&void 0!==t&&t.playAuthToken&&(a.streamType=getFormat(null==e?void 0:e.getVideoByToken)||"mp4"),this.destroy().then((function(){return n._init(a)})).catch((function(e){console.error("next_error",e)}))}},{key:"playNext",value:function(e){var t,n,r=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return Promise.reject();var o=e.url,a=e.getVideoByToken,s=!(null===(t=this.player)||void 0===t||null===(n=t.plugins)||void 0===n||!n.dashplugin),c=this.player.paused&&!this.player.isError,l=i?0:this.player.currentTime;if(o){this.resetUrlState(o);var u=this.player.config,d=this.player.state,h=_objectSpread2$5(_objectSpread2$5({},u),{},{startTime:l},e);return this.setPluginConfig(h),this.player.playNext(h),new Promise((function(e,t){if(r.player.once(ERROR$3,(function(e){t(e)})),6===d)r.player.once(EMPTIED,(function(){r.player.once(CANPLAY,(function(){c&&r.player.pause(),e(void 0)}))}));else{var n=h.autoplay||h.autoplayMuted;r.player.once(EMPTIED,(function(){r.player.once(CANPLAY,(function(){n?r.player.play():r.player.pause(),e(void 0)}))}))}}))}if(null!=a&&a.playAuthToken){var f,p=this.playerData.getCurrentStreamType()||getFormat(null===(f=this.playerData.configs)||void 0===f?void 0:f.getVideoByToken),g=e.streamType||getFormat(null==e?void 0:e.getVideoByToken)||"mp4";return p!==g?this.next(e,i):s?dist.url(null==a?void 0:a.playAuthToken,this.playerData.apiMap.playDomain).then((function(e){var t=getPluginConfig(r.player.config,"DASHPlugin");t.dashOpts={Data:e},r.player.plugins.dashplugin.next(r.player.currentTime,"MEDIA_EXPIRED",t,!0)})):this.switchAuthToken(a,i)}return this.next(e,i)}},{key:"resetUrlState",value:function(e){this.playerData.playList=[],this.playerData.initPlayData(_objectSpread2$5(_objectSpread2$5({},this.playerData.configs),{},{url:e})),this._playOriginalUrl=e,this.getUrlTimestamp(e)}},{key:"_destroyPlayer",value:(r=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){var t,n;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._offPlayerEvents(),e.next=3,null===(t=this.mobilePanel)||void 0===t?void 0:t.destroy();case 3:return e.next=5,null===(n=this.player)||void 0===n?void 0:n.destroy();case 5:this.player=null;case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getPlayerInstance",value:function(){return this.player}},{key:"getSoftDecodingOption",value:(n=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(t,n,r){var i,o,a,s,c,l,u,d,h,f,p,g;return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.playerData,a=o.enableH265Degrade,s=o.codec,c=o.configs,l=isEncryptPlay(null==c?void 0:c.getVideoByToken),u=!!(c.enableMp4MSE||getPluginConfig(this.playerData.options,"Mp4EncryptPlayer")||"mp4"===r&&(l||null!=c&&null!==(i=c.autoBitrateOpts)&&void 0!==i&&i.isOpenAutoDefi)),!t){e.next=20;break}return e.next=6,sdkUmdLoader.loadPlugins("XGVideo");case 6:if(!(null==(d=e.sent)?void 0:d.isSupported())){e.next=14;break}return s&&d.setDecodeCapacity({preloadDecoder:this.playerData.codec,wasmFallbackToAsm:!1,reuseWasmDecoder:!1,disabledWhenErrorOccur:!1}),this.setH265SoftPlayList(),e.abrupt("return",{mediaType:u?this.playerData.isCurrentH265()?"xg-video":"video":"xg-video",innerDegrade:1,codecType:null!=s?s:"h264"});case 14:this.emit(SDKEvents.NOT_SUPPORT_SOFT_DECODER),h={errorType:"decoder",errorCode:3,errorMessage:"soft decode is not support by current browser",ext:{},originError:void 0},this.delayError.push(h),console.error("soft decode is not support by current browser");case 18:e.next=46;break;case 20:if(!a||s){e.next=23;break}return e.next=23,this.detectCodec(n);case 23:if(!this.playerData.isCurrentH265()||isHevcSupported()){e.next=46;break}if(!a){e.next=42;break}return e.next=27,sdkUmdLoader.loadPlugins("XGVideo");case 27:if(!(null==(f=e.sent)?void 0:f.isSupported())){e.next=36;break}return null==f||f.setDecodeCapacity({preloadDecoder:this.playerData.codec,wasmFallbackToAsm:!1,reuseWasmDecoder:!1,disabledWhenErrorOccur:!1}),this.setH265SoftPlayList(),this.playerData.openSoftDecoding=!0,e.abrupt("return",{mediaType:u?this.playerData.isCurrentH265()?"xg-video":"video":"xg-video",innerDegrade:1,codecType:this.playerData.codec});case 36:this.emit(SDKEvents.NOT_SUPPORT_SOFT_DECODER),p={errorType:"decoder",errorCode:3,errorMessage:"soft decode is not support by current browser",ext:{},originError:void 0},this.delayError.push(p),console.error("soft decode is not support by current browser");case 40:e.next=46;break;case 42:this.emit(SDKEvents.NOT_SUPPORT_HARDWARE_DECODER),g={ext:{},originError:void 0,errorType:"decoder",errorCode:3,errorMessage:"h265 hardware decode is not supported by this browser"},this.delayError.push(g),console.error("h265 hardware decode is not supported by this browser");case 46:return e.abrupt("return",{});case 47:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"setH265SoftPlayList",value:function(){if(this.playerData.isCurrentH265()){var e=this.playerData.playList;e.length>1&&(this.playerData.playList=e.filter((function(e){var t;return(null==e||null===(t=e.codec)||void 0===t?void 0:t.toLowerCase())===CodecType.H265}))),this.playerData.initCurrent(this.playerData.playList[0])}}},{key:"_initI18N",value:function(e){var t=e.extraLangList,n=e.extendLangList;null==t||t.forEach((function(e){I18N.use(e)})),n&&I18N.extend(n),I18N.extend(defaultExtendLang)}},{key:"musicMode",get:function(){var e,t;return null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t?void 0:t.mode},set:function(e){var t;null!==(t=this.player.plugins)&&void 0!==t&&t.music&&(this.player.plugins.music.mode=e)}},{key:"musicTimeScale",get:function(){var e,t;return null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t?void 0:t.timeScale},set:function(e){var t;null!==(t=this.player.plugins)&&void 0!==t&&t.music&&(this.player.plugins.music.timeScale=e)}},{key:"musicList",get:function(){var e,t;return null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t?void 0:t.list},set:function(e){var t,n;null===(t=this.player.plugins)||void 0===t||null===(n=t.music)||void 0===n||n.updateList(e)}},{key:"musicAdd",value:function(e){var t,n,r;null===(t=this.player.plugins)||void 0===t||null===(n=t.music)||void 0===n||null===(r=n.add)||void 0===r||r.call(n,e)}},{key:"musicRandom",value:function(){var e,t,n;return null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.random)||void 0===n?void 0:n.call(t)}},{key:"musicNext",value:function(){var e,t,n;null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.next)||void 0===n||n.call(t)}},{key:"musicPrev",value:function(){var e,t,n;null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.prev)||void 0===n||n.call(t)}},{key:"musicSetIndex",value:function(e){var t,n,r;null===(t=this.player.plugins)||void 0===t||null===(n=t.music)||void 0===n||null===(r=n.setIndex)||void 0===r||r.call(n,e)}},{key:"musicForward",value:function(){var e,t,n;null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.forward)||void 0===n||n.call(t)}},{key:"musicBackward",value:function(){var e,t,n;null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.backward)||void 0===n||n.call(t)}},{key:"musicRemove",value:function(e){var t,n,r;null===(t=this.player.plugins)||void 0===t||null===(n=t.music)||void 0===n||null===(r=n.remove)||void 0===r||r.call(n,e)}},{key:"musicSetAbCycle",value:function(e,t,n,r){var i,o,a;null===(i=this.player.plugins)||void 0===i||null===(o=i.music)||void 0===o||null===(a=o.setAbCycle)||void 0===a||a.call(o,e,t,n,r)}},{key:"musicRemoveAbCycle",value:function(){var e,t,n;null===(e=this.player.plugins)||void 0===e||null===(t=e.music)||void 0===t||null===(n=t.removeAbCycle)||void 0===n||n.call(t)}},{key:"destroy",value:(t=_asyncToGenerator$3(_regeneratorRuntime$2().mark((function e(){return _regeneratorRuntime$2().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._destroyPlayer();case 2:this.checkExpireTimer&&(this.checkExpireTimer.clear(),this.checkExpireTimer=null),this.mountingDom&&this.mountingDom.removeChild(this.playerContainer),this._emitter.removeAllListeners(),this._emitter=null,sdkPluginManager.destroy(this);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function getI18N(){return I18N}VePlayer.isMSESupported=isMSESupport,VePlayer.isRTMSupported=RtmPlugin.isSupported,VePlayer.playerVersion=pkgJson.version;var index$1="",aisub="",aisubIcon="",index="";function Uint8ArrayToString(e){var t=String.fromCharCode.apply(null,e);return t.slice(t.indexOf("{"),t.lastIndexOf("}")+1)}var LiveSubTitlesPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).state={showLang:"",subTitleList:[],rtmpDtsGap:0,dtsBase:0,showingSubtitle:"",currentSub:null},r.clearLineTimer=null,r.showTimer=null,r.state.showLang=e.showLang,r}return _createClass$6(n,[{key:"beforePlayerInit",value:function(){var e=this;this.on(TIME_UPDATE,this.handleVideoTimeupdate.bind(this)),this.on(PAUSE,this.onPause.bind(this)),this.on(PLAY,this.onPlay.bind(this)),this.on(DESTROY,this.destroy.bind(this)),this.on(URL_CHANGE,this.clearRtmpDtsGap.bind(this)),this.on(SEI_PARSED,this.handleSEIParsed.bind(this)),this.on("core_event",(function(t){"core.sei"===t.eventName&&e.handleSEIParsed(t.sei,t.originPts)}))}},{key:"onPause",value:function(){this.clearSubTitle(!1)}},{key:"onPlay",value:function(){this.clearSubTitle(!0)}},{key:"destroy",value:function(){this.clearSubTitle(!0),this.off(TIME_UPDATE,this.handleVideoTimeupdate.bind(this)),this.off(SEI_PARSED,this.handleSEIParsed.bind(this)),this.off(PAUSE,this.onPause.bind(this)),this.off(PLAY,this.onPlay.bind(this)),this.off(DESTROY,this.destroy.bind(this)),this.off(URL_CHANGE,this.clearRtmpDtsGap.bind(this))}},{key:"clearRtmpDtsGap",value:function(){this.state.rtmpDtsGap=0,this.state.dtsBase=0,this.clearSubTitle(!0)}},{key:"clearSubTitle",value:function(e){if(this.state.subTitleList=[],this.state.showingSubtitle="",this.state.currentSub=null,clearTimeout(this.showTimer),clearTimeout(this.clearLineTimer),e){var t=this.find(".xgplayer-subtitles-inner");t&&this.resetDom(t)}}},{key:"getIsSoft",value:function(){var e;return"LIVE-VIDEO"===(null!==(e=this.player.video)&&void 0!==e?e:{}).tagName}},{key:"handleVideoTimeupdate",value:function(e){var t,n,r=this.player.video.currentTime,i=this.getIsSoft(),o=(null==e||null===(t=e.detail)||void 0===t?void 0:t.pts)/1e3,a=i?o:r;if(this.state.showLang&&a&&this.player.isPlaying){var s=this.findSubTitleByTime(a);s&&s.text!==this.state.showingSubtitle&&null!==(n=s.wordpiece)&&void 0!==n&&n.length&&(this.renderSubtitle(s),this.player.emit(PluginEvents.AI_SUBTITLE_MATCH,{subTitle:s,lang:this.state.showLang}),this.state.subTitleList.length>1e3&&(this.state.subTitleList=this.state.subTitleList.filter((function(e){return e.timestamp+e.duration/1e3>=a}))))}}},{key:"renderSubtitle",value:function(e){var t=this,n=this.root,r=this.find(".xgplayer-subtitles-inner"),i=this.find(".xgplayer-subtitles-helper");if(r){this.clearLineTimer&&clearTimeout(this.clearLineTimer),this.showTimer&&(clearTimeout(this.showTimer),this.showSurplus());var o=this.createNewDom(r);this.state.showingSubtitle=e.text,this.state.currentSub={subObj:e,dom:o,index:0};var a=Date.now(),s="",c=0;!function l(){var u,d=e.wordpiece,h=void 0===d?[]:d,f=e.delimiter;if(c===h.length)return s="",t.showTimer=null,void(t.clearLineTimer=setTimeout((function(){t.resetDom(r),t.clearLineTimer=null}),1e3));var p=h[c].duration-(Date.now()-a-h[c].OffsetMs);if(p<0)for(;p<0&&c<h.length-1;)s=s+f+h[c+=1].text,p=h[c].duration-(Date.now()-a-h[c].OffsetMs);else s=s+f+h[c].text;i.textContent=s;var g=null!==(u=null==n?void 0:n.offsetWidth)&&void 0!==u?u:300;i.offsetWidth>g&&(o=t.createNewDom(r),t.state.currentSub.dom=o,s=h[c].text),o.textContent=s,t.showTimer=setTimeout(l,p),c+=1,t.state.currentSub.index=c}()}}},{key:"handleSEIParsed",value:function(e,t){var n=e.dts;if(5===e.code)try{var r="string"==typeof e.content?e.content:Uint8ArrayToString(e.content),i=JSON.parse(r).rtmp_dts;if(i&&n){var o=t||n;this.state.rtmpDtsGap=i-o}}catch(e2){}}},{key:"insertSubTitle",value:function(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(e){e.timestamp=t.adjustSubTitleTime(e.timestamp)})),(e=this.state.subTitleList).push.apply(e,r)}},{key:"setCurrentLang",value:function(e){this.state.showLang=e,this.player.emit(PluginEvents.AI_SUBTITLE_LANG_CHANGE,e)}},{key:"adjustSubTitleTime",value:function(e){var t,n,r,i,o,a,s,c;if(this.getIsSoft())return(e-this.state.rtmpDtsGap)/1e3;var l=(null===(t=this.player)||void 0===t||null===(n=t.plugins)||void 0===n?void 0:n.flvlive)||(null===(r=this.player)||void 0===r||null===(i=r.plugins)||void 0===i?void 0:i.hlslive);if(l){var u,d,h,f,p,g,y,v=null!==(u=null==l||null===(d=l._context)||void 0===d||null===(h=d.getInstance("COMPATIBILITY"))||void 0===h?void 0:h._videoLargeGap)&&void 0!==u?u:0,m=null==l||null===(f=l._context)||void 0===f?void 0:f.getInstance("MP4_REMUXER"),_=null!==(p=null!==(g=null===(y=m.remuxer)||void 0===y?void 0:y.videoDtsBase)&&void 0!==g?g:null==m?void 0:m.videoDtsBase)&&void 0!==p?p:0;return this.state.dtsBase=_-v,(e+v-_-this.state.rtmpDtsGap)/1e3}var b=(null===(o=this.player)||void 0===o||null===(a=o.plugins)||void 0===a?void 0:a.flv)||(null===(s=this.player)||void 0===s||null===(c=s.plugins)||void 0===c?void 0:c.hls);if(b){var E,S,T,w=null===(E=b.core._bufferService)||void 0===E||null===(S=E._demuxer)||void 0===S||null===(T=S._fixer)||void 0===T?void 0:T._baseDts;return this.state.dtsBase=w,(e-w-this.state.rtmpDtsGap)/1e3}return(e-this.state.rtmpDtsGap)/1e3}},{key:"findSubTitleByTime",value:function(e){var t=this,n=this.state.subTitleList,r=n.findIndex((function(n){var r=t.player,i=n.lang===t.state.showLang,o=((null==r?void 0:r.__curUrl)||r.config.url)===n.url,a=n.timestamp;return a+n.duration/1e3>=e&&a<=e&&o&&i}));if(!(r<0)){var i=n.splice(0,r+1),o=i[i.length-1];return this.splitSubTitle(o)}}},{key:"splitSubTitle",value:function(e){var t="en"===e.lang?" ":"",n=e.text.split(t);if(!e.wordpiece){var r=e.duration/n.length,i=n.map((function(e,t){return{text:e,OffsetMs:r*t,duration:r}}));return _objectSpread2$5(_objectSpread2$5({},e),{},{delimiter:t,textArr:n,wordpiece:i})}return _objectSpread2$5(_objectSpread2$5({},e),{},{delimiter:t,textArr:n})}},{key:"showSurplus",value:function(){var e,t=this;if(this.state.currentSub){var n=this.state.currentSub,r=n.index,i=n.subObj,o=n.dom,a=null!=i?i:{},s=a.wordpiece,c=a.delimiter;if(!(r>=s.length)){var l=this.find(".xgplayer-subtitles-helper"),u=this.find(".xgplayer-subtitles-inner"),d=this.root,h=null!==(e=null==d?void 0:d.offsetWidth)&&void 0!==e?e:300,f=s.length,p=o.textContent;s.slice(r,f).forEach((function(e){p=p+c+e.text,l.textContent=p,l.offsetWidth>h&&(t.state.currentSub.dom=t.createNewDom(u),p=e.text),t.state.currentSub.dom.textContent=p}))}}}},{key:"createNewDom",value:function(e){if(e){e.children.length>2&&e.firstElementChild&&e.removeChild(e.firstElementChild);var t=document.createElement("span");if(e.appendChild(t),e.children.length>2){var n=e.classList.contains("scroll-1"),r=e.classList.contains("scroll-2");n&&e.classList.replace("scroll-1","scroll-2"),r&&e.classList.replace("scroll-2","scroll-1"),n||r||e.classList.add("scroll-1")}return t}}},{key:"test",value:function(){var e=this,t=this.splitSubTitle({duration:1e4,lang:"zh",text:"\u4f60\u547c\u5438 \u5df2\u6539\u53d8 \u505c\u6ede\u4e8e\u67d0\u6bb5\u6d41\u5e74 \u79bb\u522b\u7684\u4f60\u6211 \u624d\u660e\u767d\u6325\u970d\u6709\u671f\u9650,\u901d\u53bb\u7684\u4eba\u4e0d\u66fe\u8d70\u8fdc \u50cf \u7a81\u5982\u5176\u6765\u6e29\u6696\u6211\u7684\u6674\u5929 \u50cf \u503e\u76c6\u5927\u96e8\u6211\u8eb2\u907f\u7684\u5c4b\u6a90",timestamp:0,url:"xxx"});this.renderSubtitle(t),setTimeout((function(){e.test()}),1e4)}},{key:"getPlayTime",value:function(){var e=this,t=this.getIsSoft();this.on(TIME_UPDATE,(function(n){if(t){var r,i={pts:null==n||null===(r=n.detail)||void 0===r?void 0:r.pts,rtmpDtsGap:e.state.rtmpDtsGap};i.timestamp=i.pts+i.rtmpDtsGap,console.log("\u76f4\u64ad\u5f53\u524d\u65f6\u95f4\u6233\uff1a",i.timestamp,i)}else{var o={currentTime:1e3*e.player.video.currentTime,dtsBase:e.state.dtsBase,rtmpDtsGap:e.state.rtmpDtsGap};o.timestamp=o.currentTime+o.dtsBase+o.rtmpDtsGap,console.log("\u76f4\u64ad\u5f53\u524d\u65f6\u95f4\u6233\uff1a",o.timestamp,o)}}))}},{key:"resetDom",value:function(e){e&&(this.state.currentSub=null,e&&(e.innerHTML="",e.classList.remove("scroll-1","scroll-2")))}},{key:"render",value:function(){return'<xg-subtitles class="xgplayer-subtitles"><xg-subtitles-inner class="xgplayer-subtitles-inner"></xg-subtitles-inner><xg-subtitles-helper class="xgplayer-subtitles-helper"></xg-helper></xg-subtitles>'}}],[{key:"pluginName",get:function(){return"LiveSubtitlesPlugin"}},{key:"defaultConfig",get:function(){return{position:Plugin.POSITIONS.ROOT,showLang:""}}}]),n}(Plugin),POSITIONS$2=Plugin.POSITIONS,LiveSubtitlesIconPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).isMobile="mobile"===sniffer$1.device,r.isOpenState=!0,r.optionList=null,r.currentLang="",r}return _createClass$6(n,[{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.aiSubOpen),this.appendChild(".xgplayer-icon",this.icons.aiSubClose),this.renderOptionList(),this.initEvents(),this.currentLang=this.config.default,this.config.defaultOpen?this.open(!0):this.close()}},{key:"afterPlayerInit",value:function(){this.config.defaultOpen&&this.changeSubTitleLang(this.config.default,!0)}},{key:"registerIcons",value:function(){return{aiSubOpen:{icon:OpenIcon,class:"xgplayer-aisub-open-svg"},aiSubClose:{icon:CloseIcon,class:"xgplayer-aisub-close-svg"}}}},{key:"registerLanguageTexts",value:function(){return{sub:{jp:"AI \u5b57\u5e55",en:"AI Subtitles",zh:"AI \u5b57\u5e55","zh-hk":"AI \u5b57\u5e55"},subOpen:{jp:"\u5b57\u5e55\u3092\u30aa\u30f3\u306b\u3059\u308b",en:"Show subtitles",zh:"\u5f00\u542f\u5b57\u5e55","zh-hk":"\u958b\u555f\u5b57\u5e55"},subClose:{jp:"\u30af\u30ed\u30fc\u30ba\u30c9\u30ad\u30e3\u30d7\u30b7\u30e7\u30f3",en:"Hide subtitles",zh:"\u5173\u95ed\u5b57\u5e55","zh-hk":"\u95dc\u9589\u5b57\u5e55"}}}},{key:"children",value:function(){return{LiveSubTitlesPlugin:{plugin:LiveSubTitlesPlugin,options:{root:this.player.root,showLang:this.currentLang}}}}},{key:"initEvents",value:function(){this.bind(["click"],this.handleButtonChange.bind(this)),this.bind(["mouseenter"],this.showPanel.bind(this)),this.bind(["mouseleave"],this.hidePanel.bind(this))}},{key:"handleButtonChange",value:function(){this.close=this.close.bind(this),this.open=this.open.bind(this),this.isMobile?this.showMobilePanel():(this.isOpenState?this.close:this.open)()}},{key:"showMobilePanel",value:function(){var e,t=this.renderItemList();null===(e=this.player.panel)||void 0===e||e.showPanel(t,this.langText.sub,!0)}},{key:"renderItemList",value:function(){var e=this,t=_toConsumableArray$1(this.config.list),n=util.createDom("div","",{},"ai-panel-content");return t.push({key:"",showText:this.langText.subClose}),t.forEach((function(t){var r=e.renderItem(t);n.appendChild(r)})),n}},{key:"renderItem",value:function(e){var t=this,n=""===e.key&&!this.isOpenState||this.currentLang===e.key&&this.isOpenState,r=util.createDom("div","",{},"panel-Item ".concat(n?"select-in":""));return r.innerHTML=e.showText,r.addEventListener("click",(function(n){n.stopPropagation(),n.preventDefault(),t.changeSubTitleLang(e.key),t.updatePanel()})),r}},{key:"updatePanel",value:function(){var e,t=this.renderItemList();null===(e=this.player.panel)||void 0===e||e.updatePanel(t)}},{key:"showPanel",value:function(){var e;!this.isMobile&&this.isOpenState&&(null===(e=this.optionList)||void 0===e||e.show())}},{key:"hidePanel",value:function(){var e;!this.isMobile&&this.isOpenState&&(null===(e=this.optionList)||void 0===e||e.hide())}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isOpenState=!0,util.removeClass(this.root,"isClose"),util.addClass(this.root,"isOpen"),!e&&this.showPanel(),this.toggleSubTitle()}},{key:"close",value:function(){var e;this.isOpenState=!1,util.removeClass(this.root,"isOpen"),util.addClass(this.root,"isClose"),null===(e=this.optionList)||void 0===e||e.hide(),this.toggleSubTitle()}},{key:"renderOptionList",value:function(){var e,t=this;if(!((null===(e=this.config.list)||void 0===e?void 0:e.length)<2||this.isMobile)){var n={config:{data:this.config.list.map((function(e){return e.key===t.config.default&&(e.isCurrent=!0,e.selected=!0),e})),className:"",onItemClick:function(e,n){var r;e.stopPropagation(),e.preventDefault(),t.changeSubTitleLang(null===(r=n.to)||void 0===r?void 0:r.key)}},root:this.root};this.optionList=new OptionList(n)}}},{key:"changeSubTitleLang",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentLang=e,e?this.open(t):this.close()}},{key:"toggleSubTitle",value:function(){var e;null===(e=this.player.getPlugin("LiveSubtitlesPlugin"))||void 0===e||e.setCurrentLang(this.isOpenState?this.currentLang:"")}},{key:"destroy",value:function(){var e;this.unbind(["click"],this.handleButtonChange.bind(this)),this.unbind(["mouseenter"],this.showPanel.bind(this)),this.unbind(["mouseleave"],this.hidePanel.bind(this)),null===(e=this.optionList)||void 0===e||e.destroy()}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-aisub">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="subOpen">'.concat(this.langText.subOpen,"</div>\n    </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"LiveSubtitlesIconPlugin"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$2.CONTROLS_RIGHT,index:2.7,defaultOpen:!0,default:"en",list:[{key:"zh",showText:"\u4e2d\u6587"},{key:"en",showText:"En"}]}}}]),n}(Plugin),DefinitionDemotePlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).waitings=[],r.longWaitingEmitTime=0,r.waitingStartTime=0,r.playerData=null,r.isNeedShowTips=!0,r.playerData=r.playerConfig.playerData,r}return _createClass$6(n,[{key:"registerLanguageTexts",value:function(){return{definition_demote_txt:{jp:"\u73fe\u5728\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306f\u4e0d\u5b89\u5b9a\u3067\u3059\u3002\u306b\u5207\u308a\u66ff\u3048\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059",en:"The current network is unstable, it is recommended to switch to ",zh:"\u5f53\u524d\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u5efa\u8bae\u5207\u6362\u5230","zh-hk":"\u7576\u524d\u7db2\u7d61\u4e0d\u7a69\u5b9a\uff0c\u5efa\u8b70\u5207\u63db\u5230"}}}},{key:"afterCreate",value:function(){this.bindCtx(),this.bindEvents()}},{key:"bindCtx",value:function(){this._count=this._count.bind(this),this._time=this._time.bind(this),this._waiting=this._waiting.bind(this),this._clearTime=this._clearTime.bind(this)}},{key:"bindEvents",value:function(){var e=this;this.on(WAITING,this._waiting),this.on(PLAYING,this._clearTime),this.on(PAUSE,this._clearTime),this.on(TIME_UPDATE,this._clearTime),this.on(PLAY,this._clearTime),this.on(CANPLAY,(function(){e.isNeedShowTips=!0})),this.config.isNeedAutoDemote&&this.player.on(PluginEvents.LONG_WAITING,this.demote.bind(this))}},{key:"_waiting",value:function(){this._count(),this._time()}},{key:"_count",value:function(){var e=Date.now();if(this.waitings.push(e),this.waitings.length===this.config.oftenWaitingCount){var t=this.waitings.shift();t&&e-t<=this.config.oftenWaitingTime&&(this.player.emit(PluginEvents.OFTEN_WAITING),this.clearState())}}},{key:"_time",value:function(){var e=this;if(this.timer)console.log("\u8fde\u7eed\u89e6\u53d1\u4e86waiting,\u8ddd\u79bb\u4e0a\u6b21waiting\u65f6\u95f4:",Date.now()-this.waitingStartTime);else{this.waitingStartTime=Date.now();var t=this.player.currentTime;this.timer=setTimeout((function(){e.player&&e.player.currentTime<=t+.1&&(console.log("waiting\u6301\u7eed\u65f6\u95f4\u8d85\u8fc7 ".concat(e.config.longWaitingTime," \u79d2")),e.player.emit(PluginEvents.LONG_WAITING),e.clearState())}),this.config.longWaitingTime)}}},{key:"_clearTime",value:function(){this.waitingStartTime&&console.log("waiting\u6301\u7eed\u65f6\u957f:",Date.now()-this.waitingStartTime),this.clearState()}},{key:"clearState",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.waitings.length>0&&(this.waitings=[]),this.waitingStartTime&&(this.waitingStartTime=0)}},{key:"demote",value:function(){if(this.playerData){var e=this.playerData.getNextDefinition(!0,this.config.demotePriority),t=null==e?void 0:e[0];if(t){var n=t.definition;if(n){var r=this.playerData.current.definition;if(this.player.emit(PluginEvents.DEFINITION_DEMOTE,{currentDef:r,willChangeDef:n,next:t}),"auto"===r){var i=t.url;this.changeUrl(i)}else n!==r&&this.showToast(t)}}}}},{key:"changeUrl",value:function(e){this.player&&e&&(this.player.config.url=e,this.player.switchURL(e,!1),this.player.emit(PluginEvents.PlAY_URL_CHANGE,{url:e,from:"definition_demote"}))}},{key:"showToast",value:function(e){var t,n=this,r=null===(t=this.player)||void 0===t?void 0:t.getPlugin("sdkToastPlugin");if(r&&this.isNeedShowTips){var i=this.i18n[e.definitionTextKey]||e.definitionTextKey||e.definition,o=util.createDom("div",this.langText.definition_demote_txt,void 0,"toast-txt"),a=util.createDom("span",i,void 0,"toast-txt-bt");o.appendChild(a);var s=r.add(o,5e3,!0);a.addEventListener("click",(function(){n.playerData&&(n.playerData.current.definition=e.definition,r.remove(s))})),this.isNeedShowTips=!1,setTimeout((function(){n.isNeedShowTips=!0}),3e4)}}},{key:"destroy",value:function(){this.clearState()}}],[{key:"pluginName",get:function(){return"DefinitionDemotePlugin"}},{key:"defaultConfig",get:function(){return{oftenWaitingCount:3,oftenWaitingTime:5e3,longWaitingTime:5e3,isNeedAutoDemote:!1,demotePriority:[]}}}]),n}(Plugin),formatTime=function(e){var t=Math.floor(e/3600),n=e%3600,r=Math.floor(n/60),i=Math.round(n%60);return t>0?(r<10&&(r="0"+r),i<10&&(i="0"+i),"".concat(t,":").concat(r,":").concat(i)):(i<10&&(i="0"+i),"".concat(r,":").concat(i))},POSITIONS$1=Plugin.POSITIONS,UpperLimit=604800,MinMoveTime=6,TimeShiftPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){var e;return _classCallCheck$5(this,n),(e=t.apply(this,arguments)).isMobile="mobile"===sniffer$1.device,e.playedBar=null,e.cachedBar=null,e.innerBar=null,e.progressBtn=null,e.progressPoint=null,e.backLiveBt=null,e.cardDomList=[],e.initTime=0,e.liveGap=0,e.shiftTimeGap=0,e.isProgressMoving=!1,e.isPlayTimeShift=!1,e.liveUrl="",e.onBodyClick=function(e){e.preventDefault(),e.stopPropagation(),util.event(e)},e}return _createClass$6(n,[{key:"duration",get:function(){var e,t=this.liveGap+Math.floor(Date.now()/1e3-this.initTime),n=(null!==(e=this.config)&&void 0!==e?e:{}).maxMoveTime;return n&&t>n?n:t>UpperLimit?UpperLimit:t}},{key:"registerLanguageTexts",value:function(){return{BACKLIVE:{jp:"\u30e9\u30a4\u30d6\u306b\u623b\u308b",en:"Back to live",zh:"\u8fd4\u56de\u76f4\u64ad","zh-hk":"\u8fd4\u56de\u76f4\u64ad"}}}},{key:"updateLang",value:function(){this.backLiveBt&&(this.backLiveBt.innerHTML=this.langText.BACKLIVE)}},{key:"afterCreate",value:function(){this.liveUrl=this.player.config.url,this.playedBar=this.find(".xgplayer-progress-played"),this.cachedBar=this.find(".xgplayer-progress-cache"),this.progressBtn=this.find(".xgplayer-progress-btn"),this.progressPoint=this.find(".xgplayer-shift-progress-point"),this.innerBar=this.find(".xgplayer-progress-inner"),this.createBackLiveBtDom(),this.clacTime(),this.initEvents(),this.bindDomEvents(),this.isMobile||this.createTimeShiftCard()}},{key:"clacTime",value:function(){var e,t=null!==(e=this.config)&&void 0!==e?e:{},n=t.livingStartTime,r=t.currentTime;this.initTime=Math.floor(Date.now()/1e3),this.liveGap=Math.floor(r-n)}},{key:"initEvents",value:function(){this.on(TIME_UPDATE,this.handleTimeUpdate.bind(this))}},{key:"bindDomEvents",value:function(){if(this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.tipsUpdate=this.tipsUpdate.bind(this),this.isMobile){this.bind("touchstart",this.handleMouseDown);var e=this.player.controls;e&&(e.root&&e.root.addEventListener("touchmove",util.stopPropagation),e.center&&e.center.addEventListener("touchend",util.stopPropagation))}else this.bind("mousedown",this.handleMouseDown),this.bind("mouseenter",this.handleMouseEnter)}},{key:"handleTimeUpdate",value:function(){this.isProgressMoving||this.progressUpdate()}},{key:"handleMouseDown",value:function(e){if(e.target!==this.backLiveBt){this.onBodyClick(e),this.focus(),util.addClass(this.progressBtn,"active");var t=this.computeTime(e);this.updateShiftTime(t.percent),this.isProgressMoving=!0,this.isMobile?(this.bind("touchmove",this.handleMouseMove),this.bind("touchend",this.handleMouseUp)):(document.addEventListener("mousemove",this.handleMouseMove,!1),document.addEventListener("mouseup",this.handleMouseUp,!1))}}},{key:"handleMouseMove",value:function(e){this.onBodyClick(e);var t=this.computeTime(e);this.updateShiftTime(t.percent)}},{key:"handleMouseUp",value:function(e){this.onBodyClick(e),this.isProgressMoving=!1,util.removeClass(this.progressBtn,"active"),this.changeTimeUrl(),this.isMobile?(this.unbind("touchmove",this.handleMouseMove),this.unbind("touchend",this.handleMouseUp)):(document.removeEventListener("mousemove",this.handleMouseMove,!1),document.removeEventListener("mouseup",this.handleMouseUp,!1))}},{key:"handleMouseEnter",value:function(e){this.bind("mouseleave",this.handleMouseLeave),this.bind("mousemove",this.tipsUpdate),this.tipsUpdate(e),this.focus()}},{key:"handleMouseLeave",value:function(){this.unbind("mouseleave",this.handleMouseLeave),this.unbind("mousemove",this.tipsUpdate),this.blur()}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),util.addClass(this.root,"active")}},{key:"blur",value:function(){this.player.controls.recoverAutoHide(),util.removeClass(this.root,"active")}},{key:"computeTime",value:function(e){var t,n,r,i=this.player,o=this.root.getBoundingClientRect(),a=o.width,s=o.height,c=o.top,l=o.left,u=util.getEventPos(e,i.zoom);90===i.rotateDeg?(t=s,n=c,r=u.clientY):(t=a,n=l,r=u.clientX);var d=r-n,h=(d=d>t?t:d<0?0:d)/t;return{percent:h=h<0?0:h>1?1:h,offset:d,width:t,left:n,e:e}}},{key:"tipsUpdate",value:function(e){var t=this.computeTime(e),n=Math.floor(this.duration*(1-t.percent));this.progressPoint.style.left="".concat(100*t.percent,"%"),this.progressPoint.innerHTML="-".concat(formatTime(n))}},{key:"updateShiftTime",value:function(e){this.shiftTimeGap=Math.floor(this.duration*(1-e)),this.progressUpdate()}},{key:"getCurrentProgress",value:function(){return Math.floor(this.duration-this.shiftTimeGap)}},{key:"progressUpdate",value:function(){var e=this.getCurrentProgress()/this.duration;this.progressBtn.style.left="".concat(100*e,"%"),this.playedBar.style.width="".concat(100*e,"%"),this.cardProcessUpdate()}},{key:"changeTimeShift",value:function(e){var t=this.calcCardProcess(e);t<0||(this.updateShiftTime(t),this.changeTimeUrl())}},{key:"changeTimeUrl",value:function(){var e,t=this.config.timeShiftUrl;this.isPlayTimeShift=!0,this.toggleBackButton();var n=this.shiftTimeGap<MinMoveTime?MinMoveTime:this.shiftTimeGap;e=t?t.replace("{}",n):addUrlParam(this.liveUrl,{timeshift:n}),this.player.src=e,this.player.config.url=e,this.player.emit(PluginEvents.TIME_SHIFT_CHANGE,!0),this.player.emit(PluginEvents.PlAY_URL_CHANGE,{shiftUrl:e,from:PluginEvents.TIME_SHIFT_CHANGE})}},{key:"createBackLiveBtDom",value:function(){var e,t=this;if(this.backLiveBt)return this.backLiveBt;this.backLiveBt=util.createDom("xg-back-live-bt",this.langText.BACKLIVE,void 0,"xgplayer-back-live-bt"),this.backLiveBt.addEventListener("click",(function(e){t.onBodyClick(e),t.backLive()})),null===(e=this.player.root)||void 0===e||e.appendChild(this.backLiveBt)}},{key:"backLive",value:function(){this.liveUrl&&(this.player.src=this.liveUrl,this.player.config.url=this.liveUrl,this.shiftTimeGap=0,this.isPlayTimeShift=!1,this.toggleBackButton(),this.player.emit(PluginEvents.TIME_SHIFT_CHANGE,!1),this.player.emit(PluginEvents.PlAY_URL_CHANGE,{url:this.liveUrl,from:PluginEvents.TIME_SHIFT_CHANGE}))}},{key:"toggleBackButton",value:function(){this.backLiveBt&&(this.backLiveBt.style.display=this.isPlayTimeShift?"flex":"none")}},{key:"updateCardList",value:function(e){this.config.cardList=_toConsumableArray$1(e),this.clearCardDom(),this.createTimeShiftCard()}},{key:"clearCardDom",value:function(){var e=this;this.cardDomList.forEach((function(t){t.dom&&e.innerBar.contains(t.dom)&&e.innerBar.removeChild(t.dom)})),this.cardDomList=[]}},{key:"createTimeShiftCard",value:function(){var e,t=this;(null===(e=this.config.cardList)||void 0===e?void 0:e.length)<=0||this.config.cardList.forEach((function(e){t.renderCard(e)}))}},{key:"renderCard",value:function(e){if(e.img){var t=util.createDom("xg-card","",void 0,"xgplayer-shift-progress-card"),n=util.createDom("img","",{src:e.img},"xgplayer-shift-progress-card-img"),r=util.createDom("div","",void 0,"xgplayer-shift-progress-card-point");t.appendChild(n),t.appendChild(r),this.cardDomList.push(_objectSpread2$5(_objectSpread2$5({},e),{},{dom:t}))}}},{key:"cardProcessUpdate",value:function(){var e=this;0!==this.cardDomList.length&&this.cardDomList.forEach((function(t){if(t.dom){var n=e.calcCardProcess(t.timestamp);if(!(n>1)){var r=e.innerBar.contains(t.dom);n<0?r&&e.innerBar.removeChild(t.dom):(r||e.innerBar.appendChild(t.dom),t.dom.style.left="".concat(100*n,"%"))}}}))}},{key:"calcCardProcess",value:function(e){var t,n=null!==(t=this.config)&&void 0!==t?t:{},r=n.maxMoveTime,i=n.livingStartTime,o=this.liveGap+Math.floor(Date.now()/1e3-this.initTime);return r&&o>r&&(i=o-r),e<i?-1:(e-i)/this.duration}},{key:"destroy",value:function(){if(this.off(TIME_UPDATE,this.handleTimeUpdate.bind(this)),this.isMobile){this.unbind("touchstart",this.handleMouseDown);var e=this.player.controls;e&&(e.root&&e.root.removerEventListener("touchmove",util.stopPropagation),e.center&&e.center.removerEventListener("touchend",util.stopPropagation))}else this.unbind("mousedown",this.handleMouseDown),this.unbind("mouseenter",this.handleMouseEnter);var t;this.backLiveBt&&(null===(t=this.player.root)||void 0===t||t.removeChild(this.backLiveBt),this.backLiveBt=null)}},{key:"render",value:function(){if(this.config.disable)return"";var e=this.player.controls?this.player.controls.config.mode:"";return'\n      <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",' xgplayer-shift">\n        <xg-outer class="xgplayer-progress-outer">\n          <xg-inners class="progress-list">\n            <xg-inner class="xgplayer-progress-inner" style="flex: 1">\n              <xg-cache class="xgplayer-progress-cache" style="width: 100%;"></xg-cache>\n              <xg-played class="xgplayer-progress-played" style="width: 100%;"></xg-played>\n            </xg-inner>\n          </xg-inners>\n          <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n          <xg-point class="xgplayer-shift-progress-point">00:00</xg-point>\n        </xg-outer>\n      </xg-progress>\n    ')}}],[{key:"pluginName",get:function(){return"TimeShiftPlugin"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$1.CONTROLS_CENTER,livingStartTime:Date.now()/1e3,maxMoveTime:0,currentTime:Date.now()/1e3,timeShiftUrl:"",cardList:[]}}}]),n}(Plugin);function GetMirrorSvg(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M8.5 0.199997C8.5 0.0895386 8.5896 0 8.69995 0H9.30005C9.4104 0 9.5 0.0895386 9.5 0.199997V1.8C9.5 1.91046 9.4104 2 9.30005 2H8.69995C8.5896 2 8.5 1.91046 8.5 1.8V0.199997Z" fill="white"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 1.95424C0 1.85173 0.0773926 1.76582 0.179443 1.75529L7.27954 1.02277C7.34546 1.01596 7.40649 1.04182 7.44751 1.08664C7.47998 1.12207 7.5 1.16936 7.5 1.22171V14.7783C7.5 14.8969 7.39746 14.9894 7.27954 14.9773L0.179443 14.2447C0.0773926 14.2342 0 14.1483 0 14.0458V1.95424ZM1.5 12.873V3.12701L6 2.66273V13.3373L1.5 12.873Z" fill="white"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M18 1.95424C18 1.85173 17.9226 1.76582 17.8206 1.75529L10.7205 1.02277C10.6025 1.01059 10.5 1.10313 10.5 1.22171V14.7783C10.5 14.8969 10.6025 14.9894 10.7205 14.9773L17.8206 14.2447C17.9226 14.2342 18 14.1483 18 14.0458V1.95424ZM16.5 3.12701L12 2.66273V13.3373L16.5 12.873V3.12701Z" fill="white"/>\n    <path d="M8.69995 3C8.5896 3 8.5 3.08954 8.5 3.2V4.8C8.5 4.91046 8.5896 5 8.69995 5H9.30005C9.32642 5 9.35156 4.9949 9.37451 4.98564C9.39111 4.97896 9.40674 4.97011 9.4209 4.95944C9.46899 4.92293 9.5 4.8651 9.5 4.8V3.2C9.5 3.14664 9.47925 3.09818 9.44507 3.06232C9.40869 3.02393 9.35718 3 9.30005 3H8.69995Z" fill="white"/>\n    <path d="M8.5 6.2C8.5 6.08954 8.5896 6 8.69995 6H9.30005C9.34277 6 9.38232 6.01344 9.41479 6.03635C9.46631 6.07254 9.5 6.13234 9.5 6.2V7.8C9.5 7.85072 9.48096 7.89703 9.44995 7.9323C9.41821 7.96826 9.37354 7.99272 9.32373 7.99861C9.31592 7.99953 9.30811 8 9.30005 8H8.69995C8.5896 8 8.5 7.91046 8.5 7.8V6.2Z" fill="white"/>\n    <path d="M8.53711 9.08395C8.51367 9.11667 8.5 9.15674 8.5 9.20001V10.8C8.5 10.9105 8.5896 11 8.69995 11H9.30005C9.4104 11 9.5 10.9105 9.5 10.8V9.20001C9.5 9.08954 9.4104 9 9.30005 9H8.69995C8.68384 9 8.66821 9.00189 8.65332 9.00546C8.60571 9.01688 8.5647 9.04529 8.53711 9.08395Z" fill="white"/>\n    <path d="M8.5 12.2C8.5 12.1371 8.52905 12.081 8.57446 12.0443C8.60864 12.0166 8.65234 12 8.69995 12H9.30005C9.4104 12 9.5 12.0895 9.5 12.2V13.8C9.5 13.8664 9.46753 13.9253 9.41772 13.9616C9.38477 13.9857 9.34399 14 9.30005 14H8.69995C8.5896 14 8.5 13.9105 8.5 13.8V12.2Z" fill="white"/>\n    <path d="M8.69995 15C8.5896 15 8.5 15.0895 8.5 15.2V15.8C8.5 15.9105 8.5896 16 8.69995 16H9.30005C9.4104 16 9.5 15.9105 9.5 15.8V15.2C9.5 15.0895 9.4104 15 9.30005 15H8.69995Z" fill="white"/>\n</svg>\n',"image/svg+xml").firstChild}function ExitMirrorSvg(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M8.5 0.2C8.5 0.0895431 8.58954 0 8.7 0H9.3C9.41046 0 9.5 0.0895431 9.5 0.2V1.8C9.5 1.91046 9.41046 2 9.3 2H8.7C8.58954 2 8.5 1.91046 8.5 1.8V0.2Z" fill="white"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M0 1.95424C0 1.85173 0.0775055 1.76582 0.179474 1.7553L7.27947 1.02276C7.39742 1.01059 7.5 1.10313 7.5 1.2217V14.7783C7.5 14.8969 7.39742 14.9894 7.27947 14.9773L0.179474 14.2447C0.0775053 14.2342 0 14.1483 0 14.0458V1.95424ZM1.5 12.873V3.12702L6 2.66273V13.3373L1.5 12.873Z" fill="white"/>\n    <path d="M17.8205 1.7553C17.9225 1.76582 18 1.85173 18 1.95424V14.0458C18 14.1483 17.9225 14.2342 17.8205 14.2447L10.7205 14.9773C10.6026 14.9894 10.5 14.8969 10.5 14.7783V1.2217C10.5 1.10313 10.6026 1.01059 10.7205 1.02276L17.8205 1.7553Z" fill="white"/>\n    <path d="M8.7 3C8.58954 3 8.5 3.08954 8.5 3.2V4.8C8.5 4.91046 8.58954 5 8.7 5H9.3C9.41046 5 9.5 4.91046 9.5 4.8V3.2C9.5 3.08954 9.41046 3 9.3 3H8.7Z" fill="white"/>\n    <path d="M8.5 6.2C8.5 6.08954 8.58954 6 8.7 6H9.3C9.41046 6 9.5 6.08954 9.5 6.2V7.8C9.5 7.91046 9.41046 8 9.3 8H8.7C8.58954 8 8.5 7.91046 8.5 7.8V6.2Z" fill="white"/>\n    <path d="M8.7 9C8.58954 9 8.5 9.08954 8.5 9.2V10.8C8.5 10.9105 8.58954 11 8.7 11H9.3C9.41046 11 9.5 10.9105 9.5 10.8V9.2C9.5 9.08954 9.41046 9 9.3 9H8.7Z" fill="white"/>\n    <path d="M8.5 12.2C8.5 12.0895 8.58954 12 8.7 12H9.3C9.41046 12 9.5 12.0895 9.5 12.2V13.8C9.5 13.9105 9.41046 14 9.3 14H8.7C8.58954 14 8.5 13.9105 8.5 13.8V12.2Z" fill="white"/>\n    <path d="M8.7 15C8.58954 15 8.5 15.0895 8.5 15.2V15.8C8.5 15.9105 8.58954 16 8.7 16H9.3C9.41046 16 9.5 15.9105 9.5 15.8V15.2C9.5 15.0895 9.41046 15 9.3 15H8.7Z" fill="white"/>\n</svg>\n',"image/svg+xml").firstChild}var POSITIONS=Plugin.POSITIONS,MirrorStateKeys={GetMirror:"getMirror",ExitMirror:"exitMirror"},MirrorPlugin=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).isEnableMirror=!0,r.isEnableMirror=r.config.defaultEnable,r}return _createClass$6(n,[{key:"afterCreate",value:function(){this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.updateMirrorState(this.isEnableMirror))}},{key:"registerIcons",value:function(){var e;return _defineProperty$6(e={},MirrorStateKeys.GetMirror,{icon:GetMirrorSvg,class:"xg-get-mirror"}),_defineProperty$6(e,MirrorStateKeys.ExitMirror,{icon:ExitMirrorSvg,class:"xg-exit-mirror"}),e}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e[MirrorStateKeys.GetMirror]),t.appendChild(e[MirrorStateKeys.ExitMirror])}},{key:"registerLanguageTexts",value:function(){return{getMirror:{jp:"\u30df\u30e9\u30fc\u3092\u958b\u304f",en:"Turn on mirroring",zh:"\u5f00\u542f\u955c\u50cf","zh-hk":"\u958b\u555f\u93e1\u50cf"},exitMirror:{jp:"\u30df\u30e9\u30fc\u3092\u9589\u3058\u308b",en:"Turn off mirroring",zh:"\u5173\u95ed\u955c\u50cf","zh-hk":"\u95dc\u9589\u93e1\u50cf"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.isEnableMirror?this.action(!1):this.action(!0)}},{key:"action",value:function(e){this.isEnableMirror=e,this.updateMirrorState(this.isEnableMirror),this.player.emit(PluginEvents.MIRROR_CHANGE,this.isEnableMirror)}},{key:"updateMirrorState",value:function(e){var t=this.player;e?t.addClass("xgplayer-mirror"):t.removeClass("xgplayer-mirror"),this.animate(e)}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","enable"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){this.changeLangTextKey(this.find(".xg-tips"),e?MirrorStateKeys.ExitMirror:MirrorStateKeys.GetMirror)}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-mirror-icon\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="mirror">'.concat(this.langText[MirrorStateKeys.GetMirror],"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"mirrorPlugin"}},{key:"defaultConfig",get:function(){return{position:POSITIONS.CONTROLS_RIGHT,index:CONTROL_ICON_INDEX.mirrorPlugin,disable:!1,defaultEnable:!1}}}]),n}(Plugin);function retPromise(e){return e&&e.then?e:new Promise((function(t){t(e)}))}var MemoryPlay=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(e){var r;return _classCallCheck$5(this,n),(r=t.call(this,e)).memoryId="",r.canJump=!1,r.saveTimeFun=util.checkIsFunction(r.config.saveTime)?r.config.saveTime:r.saveTimeByStorage,r.getTimeFun=util.checkIsFunction(r.config.getTime)?r.config.getTime:r.getTimeByStorage,r.startTime=0,r.memoryId=r.config.memoryId,r.showToast=r.showToast.bind(_assertThisInitialized$5(r)),r}return _createClass$6(n,[{key:"registerLanguageTexts",value:function(){return{preText:{jp:"\u306b\u4f4d\u7f6e\u4ed8\u3051\u3089\u308c\u307e\u3057\u305f",en:"Has located for you to ",zh:"\u5df2\u4e3a\u60a8\u5b9a\u4f4d\u81f3","zh-hk":"\u5df2\u70ba\u60a8\u5b9a\u4f4d\u81f3"}}}},{key:"children",value:function(){return{toast:ToastPlugin}}},{key:"afterCreate",value:function(){this.once(CANPLAY,this.showToast)}},{key:"beforePlayerInit",value:function(){return this.memoryId||(this.playerConfig.vid?this.memoryId=this.playerConfig.vid:this.player.url&&(this.memoryId=this.player.url.replace(/\?.*$/,""))),this.setSave(),this.getTime()}},{key:"destroy",value:function(){0!==this.player.currentTime&&this.player.currentTime!==this.player.duration&&this.saveTimeFun(this.memoryId,this.player.currentTime)}},{key:"getTime",value:function(){var e=this;return new Promise((function(t){retPromise(e.getTimeFun(e.memoryId)).then((function(n){var r=parseFloat(n);isNaN(r)||0===r?console.warn("the time got is invalid",n):(e.startTime=r,e.canJump=!0,e.playerConfig.startTime=e.startTime,"mobile"===sniffer$1.device&&e.player.once("canplay",(function(){e.player.currentTime=e.startTime}))),t()})).catch((function(e){console.error("getTime function occur error",e),t()}))}))}},{key:"setSave",value:function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&0!==e.player.currentTime&&e.player.currentTime!==e.player.duration&&e.saveTimeFun(e.memoryId,e.player.currentTime)})),document.addEventListener("pagehide",(function(){0!==e.player.currentTime&&e.player.currentTime!==e.player.duration&&e.saveTimeFun(e.memoryId,e.player.currentTime)})),window.addEventListener("beforeunload",(function(){0!==e.player.currentTime&&e.player.currentTime!==e.player.duration&&e.saveTimeFun(e.memoryId,e.player.currentTime)}))}},{key:"showToast",value:function(){if(this.canJump){var e,t=null===(e=this.player)||void 0===e?void 0:e.getPlugin("sdkToastPlugin");if(!t)return;var n=util.format(this.startTime);t.add("".concat(this.langText.preText).concat(n),4e3,!0)}}},{key:"saveTimeByStorage",value:function(e,t){localStorage.setItem(e,t)}},{key:"getTimeByStorage",value:function(e){return localStorage.getItem(e)}}],[{key:"pluginName",get:function(){return"memoryPlay"}},{key:"defaultConfig",get:function(){return{getTime:null,saveTime:null,memoryId:""}}}]),n}(Plugin),LiveInfoPanel=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){var e;return _classCallCheck$5(this,n),(e=t.apply(this,arguments))._infoItems=[],e}return _createClass$6(n,[{key:"streamType",get:function(){return this.playerConfig.playerData.getCurrentStreamType()}},{key:"afterCreate",value:function(){var e=this;["flv","hls"].includes(this.streamType)?(this.player.on("error",(function(){return e._handleError()})),this.player.on("loadeddata",(function(){return e._handleLoadedData()}))):this.close()}},{key:"registerLanguageTexts",value:function(){return{DECODEFPS:{en:"decodeFps",zh:"\u89e3\u7801\u6548\u7387"},DECODECOST:{en:"decodeCost",zh:"\u89e3\u7801\u6d88\u8017"},FORMAT:{en:"format",zh:"\u683c\u5f0f"},FPS:{en:"fps",zh:"\u5e27\u7387"},BITRATE:{en:"birate",zh:"\u7801\u7387"},GOP:{en:"GOP",zh:"GOP"},RESOLUTION:{en:"resolution",zh:"\u5206\u8fa8\u7387"},ENCODETYPE:{en:"encodeType",zh:"\u7f16\u7801\u65b9\u5f0f"},BUFFEREND:{en:"bufferEnd",zh:"buffer\u6c34\u4f4d"},CURRENTTIME:{en:"currentTime",zh:"\u64ad\u653e\u8fdb\u5ea6"}}}},{key:"_getDefaultInfo",value:function(e){var t={h265Title:{key:"h265Title",label:"H265\u89e3\u7801",type:"title"},decodeEfficiency:{key:"decodeEfficiency",label:"\u89e3\u7801\u6548\u7387",labelTextKey:"DECODEFPS",value:e.decodeFps,render:function(e){return e+"frames/s"}},decodeCost:{key:"decodeCost",label:"\u89e3\u7801\u6d88\u8017",labelTextKey:"DECODECOST",value:e.decodeFps,render:function(e){return e?(1e3/e).toFixed()+"ms":""}}};return _objectSpread2$5({format:{key:"format",label:"\u683c\u5f0f",labelTextKey:"FORMAT",value:e.format},framerate:{key:"framerate",label:"\u5e27\u7387",labelTextKey:"FPS",value:e.fps,render:function(e){return"".concat(e," fps")}},bitrate:{key:"bitrate",label:"\u7801\u7387",labelTextKey:"BITRATE",value:e.bitrate,render:function(e){return"".concat(e/1e3," kbps")}},gop:{key:"gop",label:"GOP",labelTextKey:"GOP",value:e.gop,render:function(e){return"".concat(e," frames")}},resolution:{key:"resolution",label:"\u89c6\u9891\u5206\u8fa8\u7387",labelTextKey:"RESOLUTION",value:{width:e.width,height:e.height},render:function(e){return"".concat(e.width," * ").concat(e.height)}},encodeType:{key:"encodeType",label:"\u7f16\u7801\u65b9\u5f0f",labelTextKey:"ENCODETYPE",value:e.encodeType},bufferEnd:{key:"bufferEnd",label:"buffer\u6c34\u4f4d",labelTextKey:"BUFFEREND",value:e.bufferEnd},currentTime:{key:"currentTime",label:"\u64ad\u653e\u8fdb\u5ea6",labelTextKey:"CURRENTTIME",value:e.currentTime,render:function(e){return e?e.toFixed(6)+"s":""}}},e.isOpenSoftDecoding&&this.config.showH265Info?t:{})}},{key:"_init",value:function(){var e=this,t=this._initDom(this._getInfoListData());this._infoItems=new Proxy(t,{set:function(t,n,r){return e._updateDom(t[n].dom,r),Reflect.set(t,n,r)}}),this._tick()}},{key:"_getStats",value:function(){var e,t;return"flv"===this.streamType?null===(e=this.player.plugins.flv)||void 0===e?void 0:e.getStats():"hls"===this.streamType?null===(t=this.player.plugins.hls)||void 0===t?void 0:t.getStats():{}}},{key:"_getInfoListData",value:function(){var e=this._getStats()||{};return this._getDefaultInfo(Object.assign(e,{format:"".concat(this.streamType,"_live"),isOpenSoftDecoding:"live-video"==this.playerConfig.mediaType}))}},{key:"_initDom",value:function(e){var t=this,n=this.find(".veplayer-livepanel-container");return n.innerHTML="",Object.values(e).forEach((function(e){var r=util.createDom("veplayer-livepanel-div","",void 0,"veplayer-livepanel-container-row");"title"===e.type?t._updateTitle(r,e):t._updateDom(r,e),n.appendChild(r),e.dom=r})),e}},{key:"_updateTitle",value:function(e,t){e.innerHTML="";var n=util.createDom("veplayer-livepanel-span",t.label,void 0,"veplayer-livepanel-container-row-title");e.appendChild(n)}},{key:"_updateDom",value:function(e,t){e.innerHTML="";var n=util.createDom("veplayer-livepanel-span",this._renderLabel(t),void 0,"veplayer-livepanel-container-row-label");if(e.appendChild(n),"title"!==t.type){var r=util.createDom("veplayer-livepanel-span",this._renderValue(t));e.appendChild(r)}}},{key:"_renderLabel",value:function(e){return e.labelTextKey&&this.langText[e.labelTextKey]}},{key:"_renderValue",value:function(e){return e.render?e.render(e.value):e.value}},{key:"_handleDataChange",value:function(){var e=this,t=this._getInfoListData();Object.values(this._infoItems).forEach((function(n){"title"!==n.type&&e._renderValue(n)!==e._renderValue(t[n.key])&&(e._infoItems[n.key]=_objectSpread2$5(_objectSpread2$5({},n),t[n.key]))}))}},{key:"_tick",value:function(){var e=this;this._pollTimer=setTimeout((function(){clearTimeout(e._pollTimer),e._poll(),e._tick()}),500)}},{key:"_poll",value:function(){this._handleDataChange()}},{key:"destroy",value:function(){clearTimeout(this._pollTimer)}},{key:"_handleError",value:function(){this._close()}},{key:"_handleLoadedData",value:function(){this.config.visible&&this._open()}},{key:"_open",value:function(){var e=this.find(".veplayer-livepanel-container");util.removeClass(e,"veplayer-livepanel-hidden"),this._init()}},{key:"_close",value:function(){var e=this.find(".veplayer-livepanel-container");util.addClass(e,"veplayer-livepanel-hidden"),clearTimeout(this._pollTimer)}},{key:"open",value:function(){this._open(),this.config.visible=!0}},{key:"close",value:function(){this._close(),this.config.visible=!1}},{key:"render",value:function(){return'\n    <xg-livepanel class="xgplayer-livepanel">\n        <xg-livepanel-container class="veplayer-livepanel-container '.concat(!this.config.visible&&"veplayer-livepanel-hidden",'">\n    </xg-livepanel-container></xg-livepanel>\n    ')}}],[{key:"pluginName",get:function(){return"LiveInfoPanel"}},{key:"defaultConfig",get:function(){return{visible:!0,showH265Info:!1}}}]),n}(Plugin),VePlayerUmd=function(e){_inherits$5(n,e);var t=_createSuper$5(n);function n(){return _classCallCheck$5(this,n),t.apply(this,arguments)}return _createClass$6(n)}(VePlayer);return VePlayerUmd.Music=MusicPreset,VePlayerUmd.LiveSubtitlesIconPlugin=LiveSubtitlesIconPlugin,VePlayerUmd.LiveSubtitlesPlugin=LiveSubTitlesPlugin,VePlayerUmd.DefinitionDemotePlugin=DefinitionDemotePlugin,VePlayerUmd.TimeShiftPlugin=TimeShiftPlugin,VePlayerUmd.MirrorPlugin=MirrorPlugin,VePlayerUmd.MemoryPlay=MemoryPlay,VePlayerUmd.Subtitle=Subtitle,VePlayerUmd.Service=dist,VePlayerUmd.LiveInfoPanel=LiveInfoPanel,VePlayerUmd.Event=Event$2,VePlayerUmd.getI18N=getI18N,VePlayerUmd.BasePlugin=BasePlugin,VePlayerUmd.Plugin=Plugin,VePlayerUmd.Sniffer=sniffer$1,VePlayerUmd.Util=util,VePlayerUmd.STATE_CLASS=STATE_CLASS,VePlayerUmd.I18N=I18N,VePlayerUmd.STATES=STATES,VePlayerUmd},module.exports=t()}).call(this,__webpack_require__(20),__webpack_require__(309)(module))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return f}));n(11);var r=n(1),i=(n(18),n(28),n(51),n(74),n(24),n(16)),o=n(156),a=n(8),s=(n(13),n(114)),c=n(292);function l(e,t){return Object(a.b)().captureException(e,Object(c.a)(t))}function u(e,t){var n="string"===typeof t?t:void 0,r="string"!==typeof t?{captureContext:t}:void 0;return Object(a.b)().captureMessage(e,n,r)}function d(e,t){return Object(a.b)().captureEvent(e,t)}function h(){return Object(a.d)().lastEventId()}function f(e){var t=Object(a.a)(),n=Object(a.d)(),c=Object(a.b)(),l=t&&t.getOptions()||{},u=l.release,d=l.environment,h=void 0===d?o.a:d,f=(i.a.navigator||{}).userAgent,g=Object(s.b)(Object(r.a)(Object(r.a)({release:u,environment:h,user:c.getUser()||n.getUser()},f&&{userAgent:f}),e)),y=n.getSession();return y&&"ok"===y.status&&Object(s.c)(y,{status:"exited"}),p(),n.setSession(g),c.setSession(g),g}function p(){var e=Object(a.d)(),t=Object(a.b)(),n=t.getSession()||e.getSession();n&&Object(s.a)(n),g(),e.setSession(),t.setSession()}function g(){var e=Object(a.d)(),t=Object(a.b)(),n=Object(a.a)(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?p():g()}},,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAABIVJREFUeF7tnE9WFDEQxutbuHClnkA4gbJ1I5xAOIFyAuEEwgmEEwAnkBuIG7fKCYQTiCsXLsr3zUvPC03+dSZDd6c77/Fm0Znu5DeVrypVaSBzCxLAzCdMYAYUsZAZ0NABqeq2iLwTkdci8lNELgDwcxCtNwtS1eciciYiuw4S+wDOh0CoF0CqSmshHH762h6Ay74hPTogVaXFEA4tKNRuAGxOCpCqfhKRow6T3upbjx7FgiJ6E+K1A+CqA9DiXdcOKFFv/ojIM8fs6gaUqDfXIkJX/3tSgBL1hjHPB4JRVZ0EIKM3n0VkMfFAuxfrTAKQqm6IyJdIfEO92W57p+oBmS0D4YTim4XeALhrW1bVgFT1o4icRJbUUm9c/aoElKs3owNkJvres3EMGQY1h3++5tSbMQL6amKRkpGoV29GBch4nl8lyZicTszN33vkYDXIeB9aUKmWlcuZAiDqzW7u5jIXkKpSO7lVuQJwUepXbu6DQhb0jZEzgJvcAeYAUlWmTphCado5gP0VxkCH81JEbpu5hADtJD6Iia1sMM0zMgG59m+nAA4Sx77spqrUTCbymraQCi8gAGtPhdiT6ArIhCauDABv20kHHXB4jzsAL0YLiDNQVVoul4SrJUHywGnutzl2QMxvc//na8GUbQQOdWhj1ICMFbW1w4bFTTGzkg/qbBE4yx3A6AEZSG1v1oa0aWcQUuHwJlUAMpBYaGRM5Gq0IFrSXRc4VQEykFhoZBnbB+m05crtfs6NdTUWZAAxWccy0auAcLsuebMOVQHKhBRMyVQHyEDiloG646q1RZeV3aFKQAYSD0Z8F5GnnuX2V0TexErbNQMKxUcNs2jltkpAEVeeFEg2naoD1AFOw8AbbdcYB4WW1T8ReRILJNvXq7GglAhZRJgnikbb1XmxFDiNt1JVun9fIHkJYK8qQF3gJAaS99K2o15iXeE0lmGykbQkX7JtmbYdLaBIPS9a0TUn37hv80Xbo89Js9TjqudF4ViWxGjbB2ncOWljAT9abjkZjgUpFBpshco+/IWSGgDWxVZqXasaRnDptnmaje3WFC47v8bg0zJWdkoVDlld4Mn4zoOzfsmsM4pGcDdWebaB3U7bHgM4KgWIz2DIfpj7jkWOBa1kso4vmypzU8ZenM8uCah55AmAw66DHwIg15gJiMml0sdfSJ9L7sFZRB+4wQIy64/nC3nOsGSjHjGWSNKlQQOyPALXX+wtHBsi+4YS5LQgQoq+1jR4QLmmo6op1ncE4Dj0jGoBGetjsEVQoSQ5rYjW5NSlqgEZSAzbCcG3AWQ3ry5VD8hAoiYR0tvAcnLq0iQAWVFxZ12aFKAcXZocIEuXQjmXpS6JSHtnzmvRulWu90393trPIZrNZOxAAXXJFX/VD8jSpdD5Hd8POh1Ali7ZR21jlj6N18JtCgm54Kb7NYDQf2aIwS1yfe0a5Bploi71vrw49l4AReIl5pUPchNvRczGukmvgIwuMR/FvRy9GFO3rG6u/GpDKVC9Ayo1kXXdZwYUITsDmgGttvj+A6XaJsCWVCleAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAABn5JREFUeF7tnEvMnUMcxp9HYiEE3XRJGwsLCbq0oiIhUpdWwkbSEgni0logRFwWrguUittCFYlLUBELC1Fi0Y1og41EtAgLQVmQuD3yfJlznPOemXkv533P6XmdSZov6ZmZM/P7/reZ+f8/YtmyBLjkkyewBFQiIUtAhzMgSVcC2AHgqJF1fgHgHJLfHA7qPzcJkvQQgJsTEL4DcAbJr+cNaeaAJB0P4DVLScnm3yNZ1qdzfjMFJOkUAG8DWFtxZyfMW9VmBkjSJgAvFuxNGadLSL5R1qnLz2cCSNK9AG5vsJGtJB9rMK61IZ0CknQsgFcBnJtZ8Z8AtgF4ItJnG8nt0+w22Lw3AZwF4ACAjST3VZ2zM0CSTgbwDoCTMov5AcCFJPdK+gPAkYW+N5F8tOpmYv0kvR/gDD4+BGB9VUidAJJkiXkdwNGZzX0M4AKS37tPF4CC9PwcWYMlyJAMK9taByTpTgB3A8jN/QyAG0haalZaF4DCvEoQ2E1y48wASbK0vAxgQ+ZLDeQqki8U+3QIaA+AMxNrsj3anYPUigRJsp2xvbHdSTWrklXKqjXROgS0BoBV6rjI11rF1uZUbWpAks4GYC9hj5Vqe4MxtlGOtq4ABTWzB7OxjrXnSW5JrWsqQJJuBXAfgCMycHwYtTf6KyfKXQIKkGwX70qsYV3Kq1HSKgAOxi4GcEyZ0ar5+WaSu6qMkRQzplO7+dHvlmRVOy2ynj0k18fWaUDP2nBW2USNPt8Glfqk6pi6gCSdDuCRkQDwCpI2yMkWxqTWZLc/Md6AfgJgKWqrfQhgE8kf60zYAFCjAFDSTgCbI2uL2iIDSsUJdfY36PswgFtI/l13cB0blAkAS72SJHu1rxLrW1X0aG0B+h2ARfyVumAG/VsC5OlKA8CMFE3YvDYAfQTgWpKfNYUTvEwtIy2pcQCYsUX7SK4b3UcK0DUkn55mw3XH1pGgANQ3kz6dxwLAAySzl3IZj+bA0fOutIUFFCDlAkCrvA1ytEnyFYu9YLGNqdlCAwqQfB2yNbLRrBRljPVbJB0TLr4EVVC17GE0oWZjYBdeggKk1DEie86SlJK+oR3qC6CUwT5EMhkES/Ih9bmIeg6j6l4AClKUipCjR4gSI38PSUvlYnux0d98RhqyB97ESaKXgKxmsfvnMa9UVCdJPp4UY6kPSDqE6I8EBZWJXWcMNxsLiBIReW8BxY4fZYY6NuZ/BQgkkzen/zcJisZDS0DBuKQCvyWg/wBFr0CWgPKADpL0LWLqVB+7hxqGBr2JpIObdxzkeGi0lbn5GKBeBop+5Yi9WGwn6bufiSYpdZ80jL57I0GZC7DkxVlmTC8Pq5YeS1GxjV2hFs5vqQPu8HWjFxKUuYTfTzIGbYWTJD//FA34mFHvC6CUJOTsT8pmjV2yLTygkofAnHqlbhPHbFYfAKVsT9k1R0y9rHljr6ttPBw692cHyZdSwViV/6/7Nh9sSEoK/HGTm8QJqG0AGuz/SQA3luUBZSLaWlmukvw048StWCuTHqfdXRQZOBEStAnI32dp2lA3syNIQ11AKRX5xe5+9HW04NpTwaHHrYklL7Sd/uLcIOciVk7WDoAqv81nsjs8VdkddDFtZsAv6vEsQU8BuLqKnajR5zcAW0i6qqdSq2uDEv3L3sFyahn1eAbkw93jHaXgPUDytiqEGgAqXo7td7ZZKmM17NMeL3ayT4KdRRLnuwAuJflrDlTd7I6glpaIQQ3Gzlw6ryQ/EKayWZPx0lSAwiKrpAF/6YIWkv4ZbU0AVZHMsMbUC6o/Hl5txOabGlBYQJVEckuQJckSNdG6AlSSuHkweLxkzUYrgAKkKqUI/wC4g+T9RUIdAkqFA15CMpgcrK81QIMJJTlZ2/9yc7uK8HKSzm1caV0AKpGe5EF29JfXOqCwWRe0uLAlVw71OYDzSDpu6gpQKqM1ew3bOaCw4SoFdc6lduTdZUFd8aWj1O7MBFCAVKUk012v67gk04dahwOO7l3mOUzSLPOEnahYxAA/6ATzssVEPr+eZKyWtcFUzYbMBFCQpiZl4a5ndZ393NrMAAVI/sMCLrw7scKOXQ29ukpdaYW5GneZKaAAyWc/F/w6As+1XSRjRSeNN9tk4MwBDRYpyUnc0Qc9AHb9p5KMZYw12WfjMXMDFKTpslDMt3pkB58COH8QHzXeWUsD5wqopT10Os0SUAneJaAloOk08F+2FxyFypX8YQAAAABJRU5ErkJggg=="},function(e,t){e.exports="../static/media/logo.a98e6074.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAAXNSR0IArs4c6QAABohJREFUeF7tnE9aWkkQwKue+UDdjG4irqInGN0Jm8ETaBaB7KInCDlB8ARDTjC4C2ShOYFkA+5CTiBZQbKRbPxDxlfz9eOPygBdXf0a9PO5tet196+rqquru0CI/qwIoJV0JAwRQEsliABGAC0JWIpHGhgBtCRgKR5pYATQkoCl+Mw1sLn1eu0Z3rzwEdMAuEYEa6PnRHVEaHtElWeXv78t14/blnMPRXwmAJtbr9OI/g4A7gKOA6abH9WBoOIhHT6vfqrrWrv6/9QAnm/sLnUWY2+JcE8ObRwGqns+FJ6flg9dgRr3XecAB+AAcgC45HSCBA1EKq5UywdO+7nzcacAf25l3vgeFJyDG6ZF0CDC/dXTjxXXIJ0AVFp3vRA/AoS06wlM+j4CFGMX1+9cbjihAww2CM8/mrrWjSVJdQ9o39VGEyrA5tarPfS8f2apdWNCoLYHtO0CYmgAw4BHRF8QsU1A98ISBNwACMKdP+WLQ20k2F+plY/l3/i/ZCgApfCI4DsCHBPhMdfh/0hmdn2AXQTYBcQ/zGBQ6JpoDVACT2kakJfnQhsHSfUN6OUR4QUfZLgQrQD+TL3a8AFPuBuG0jgPKBe2GbWS2RwA5fkaSfX4RWc7jN3ZCmArlfkKXf+k/SOiw/nLTi6MQY/qTJ2p0SPl31h+UoU4K9XSvnbgmgZigM1UJo+A7zkDIN/fXz39VOS0tW3TTGaKiPiG8x0kemlrDSKAvdU+4wxymvD642klswVAeKsdH0Ejfnm9aWMVIoCtZPaEc8qYBbw+NK4mEtDBarWc18Ie08AYYPekQSfaDgk+JGqlnLadwwbNZKaCiH9N7oLa8YvOulQLjQG2UlnlqHc08/6WqJZYm4tDftA9k8caut3ZRguNAHJ9nwf+potjkwQ2L06ldqJaXpZ83whgEG8h/D2pIxWurNbKe5LBuJLhmLJ0RzYFeKbLJpOP66unHxuuYEi+y/Hb0oVnA+SYr3QQEiimMs1ktjH5yCczYwOA+lSV1AxMYUjac9yPxHfzAeoifKJfiVrZ7Z2HhFxPhmNBQPAuUSsVTLoxAaiLqT4nqqVdk86n3VZrxoLYlQ2wlcqcT8q62MRS0wKpi2FVmm21Vja6xzEAmKVJE33I/m9wvNMlQAgaiVpp3WRBWQCDiH4xfj4x/vNx2zZBajJwSVtOBilRLbGY9PtnNWbFUY8AoLoOIMSjSfAjgBPocBTBCcBu6t77+thNmBMLOgGowLVSkzcRegQmPDMfyAEoCUIlG4GNjC5T7TSMcRGE2sCQyOqyMo4B6rK7VE9Uy5uSiU1LRuuGBOl9VhijJsjxHw8xldVfHE4IIzkM8AFy7kIEh/FpaR/nkil+cb1sejfCBsjcSIyPQtMA2D1Jxc40LyhE9zimALUXSrO8yhy3GBz3I40ijABy/AjAw9pMmNoHUv9tBDAw42SmrbsmlK6mC3Pm+D4AEOcyjQGyzAHCfUImBcuzGFDaJ84kGQPkXlYrUw7rCZkEIPfpnSR4vjseY4DcmLDbyWwgcv1eMEIL7VPyIoABRO01YX+dpgsx0DzyVInFmJq7e/os9n1GCdVRJsTJrd3KuS016PdjVGJB9Ct+2VkzDZyHWYg10MyUA2NpA2E+USt9kPg0ncyPVOY9AbKfqUmObaPGYAWwa8q6JMNQtwQVIjwI6/4kKCdDzDNNtjeY8GJVa4C9CydVk8Z6mzzAqUpViYqSCkvV5+/52I45uNvFnPkb6bt6pSZ0tRBXBdEG5QaDTaat6n4BsDIHfv1fmvs+/DjpblE2EaY5r2N1Jt/bQa0fmltrYH+gYk3kzNRhG1tNDA2gmuNThBgqwL6i6O4eHCqUxadl8aoTgGoW3Zo2LMj8ogWH/j5L9MUDKBBAUZv8uN3ZjI+fzgD2TfpqMZbjFuTYYwMYLifrnkywYgLR5G7HKcA7J4Q1QD8vq7DkYe1Vfhbil9fF4dOFKUSTl2ZTAXhvp16Iq1/tUI/QzeLG8Rw/I1FRV7JlCpH7QmGqAO8yULEdwE0auj+4k+b6yqBUFlUQDvXYZadicpY1gch97jszgKMUSk3wxp8Lngl76C/55A1+nWj+6qpuAmucwnIhPngN5Hk2N60YENlprgelgW5wjf5qoO3kHQ+7DrUZAWGaW+vyZAEOTk4L8T0CCh7HI+DxqF180sI+aYBhaHwE0JJiBDACaEnAUjzSwAigJQFL8UgDI4CWBCzFIw20BPgf6Wl0fqB8At0AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/gif;base64,R0lGODlhQABqAIABAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ2RERBMTY5MUIxQjExRUVBOEQ0QjMyRTQ2NkQwNjRCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ2RERBMTZBMUIxQjExRUVBOEQ0QjMyRTQ2NkQwNjRCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDZEREExNjcxQjFCMTFFRUE4RDRCMzJFNDY2RDA2NEIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDZEREExNjgxQjFCMTFFRUE4RDRCMzJFNDY2RDA2NEIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQFBAABACwAAAAAQABqAAACW4yPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv1uLwAAIfkEBQQAAQAsAAAAAAEAAQAAAgJMAQAh+QQFBAABACwAAAAAAQABAAACAkwBACH5BAUEAAEALAAAAAABAAEAAAICTAEAIfkEBQQAAQAsDgANACQAFAAAAkUMHqnL7QcMjK5aOfPdKnvEWR82hY/XoWaqLeP6MvE2y+pVN7l74z3fCuV2viAJsgKWjqAk67N0KqHSE7VqNWJt0W02WQAAIfkEBQQAAQAsDQAMACYAFgAAAkyMYanLnfiimw4GZA/d8mXNTd9Vhc3YKeiGWq0JLt8b0vLJ2Yy+4xSfCpZ6N2LNF1PBkhLgcec0rYxLJas6zGKp1q2W6aVOwx7AuFEAACH5BAkEAAEALA0ADAAmAAUAAAIPTGCpy73oopy02osbzBkUACH5BAkEAAEALAAAAABAAGoAAAJzjI+py+0Po5y02ouz3rz7D4biSJbmiabqigCiGwKy7M10bd9arm98b/nBOkJMkYVMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CPlUAAAh+QQJBAABACwAAAAAQABqAAACzoyPqcvtD6OctNqLs968+w+G4kiW5omm6sp+wAu+QCjDXT27OIfnXu+7AGk9zFB0pCSRxcly9GxEoU3HlHQ1ZLHVxLYU/ZqW4tOxjAKiU+paC9IOvqXrd3cOl+H3/L7/DxgoOEhYaGhm85OoqHfjpvOocbdRp1CZtyM06ZiptMkYGXFZgTZqIWaq2bmQavTZmhH2ydYFy9Nkyxknx7fL2xdXqHY4Cxh6iJysvMzc7PwMHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+flAAACH5BAUEAAEALAAAAABAAGoAAAKfjI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfM5gEggoYAVKqnar1is5otd+P9WsLSDhlz/pDLk/U0LXFH4Q/5yN7A3+kKPclvAPjHFyBYgmdoIpd4ssaI4uhVE1l1Q5njuENoufWD5QQaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vLO1QAACH5BAkEAAEALA0AKgAmAAUAAAIPTGCpy73oopy02osbzBkUACH5BAkEAAEALAAAAABAAGoAAAJzjI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfM5gEggoYAVKqnar1is5otd+P9WsLSDhlzdqrX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CFlTAAAh+QQJBAABACwAAAAAQABqAAACy4yPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKYRAAVBAaFptGOlfrJaDVf6zXC7njHGLEJT1OmwhD2CN+Rx99x+oh/0JT3fJPeXZyeIglaYMoaoomiV00h2o9iDp+PohJmpucnZ6Tl0WTYFNooVanp6lkWaWrE48ZoQC1sJMbtWe7cKmKtwe1H4q7rLICyWa+xVmbzBxsxx2MsC2RpDHUkDuTPJI11T/RkuPk5ebn6O7lkAACH5BAUEAAEALAAAAABAAGoAAAKejI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8dDAEBkDpnXnnW67X5r4vINvW65n+F0jB6kt0cRqPY3QYhmCIE4wtjg2Ki4AElCaWBZKXmpieKIeYL42RnI2ULaR3PKZqOaQ7pTyhoHhEdme4ubq7urWwAAIfkECQQAAQAsEQBIAB4AFgAAAhxEjqnLxg+jnLTai7PevPsPhuJIluaJpiriOFIBACH5BAkEAAEALAAAAABAAGoAAAKcjI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fkEgDgOZvO6A17/c6w26Q5vWKHzy32u6jv9wColxcBGAhyiJigeNLY8Oh4yBCJUmlwaTl5kJny2KmiCLoi2ldTGndamiO6s+la6KNWRltre4ubS1sAACH5BAkEAAEALAAAAABAAGoAAAKYjI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8dkEeAMAKHTnzWb41bHN+53p2634EP7S59fpxdI8hdROHLYkIg46LBI2LjwWPI4aZJoeVKYidLHmYL3qRK6lkOaZxPaE7lTWvYKGys7S1vbUwAAIfkEBQQAAQAsAAAAAEAAagAAAluMj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9bi8AACH5BAUEAAEALAAAAAABAAEAAAICTAEAIfkEBQQAAQAsAAAAAAEAAQAAAgJMAQAh+QQFBAABACwAAAAAAQABAAACAkwBACH5BAUEAAEALAAAAAABAAEAAAICTAEAOw=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABMCAYAAAAx3tSzAAAAAXNSR0IArs4c6QAAA0hJREFUeF7tm82Lj1EUxz/fhfeFJcrKRslG2FJsLfwD8jKmoUw2GmZkFGVi420oRmOlRKywkIVCkpcIjShved8gMd6vzvQ8Gprf9Px+z/tzf6d+9Vvce8793PM8997n3HOEZyLPeGkCV93jTQ976WHn3BRgVvAbBzwHrkp6WfYJ+eeRds4Z5D5gcQ2wo8B2SU/KCv4X2Dm3FDgGTIwA0yWpJ0K7wjUZAnbOzQeuAGPqGOFdYKWkm3X0yb2pnHPjgUfA9AZG8xs4AHRK+txA/8y7GHAHsDOmZVvM1kg6E1NP6t0N+DowLyFLJ4F2SW8T0pe4GgP+AExOULPp2wj0SXIJ6k1ElQGnNajLwCpJtj4URtIENsjvwA6gR5L9z13SBg4BzcvLJF3Lmzgr4KHtHjgEdEj6lBd4lsAh4+tgJT+VB3QewCHnWWC1pDdZgucJbJz2aHfZaS2rLSxv4NC5N4JF7UHa3i4KsHH+AHYFn5/f0gIvEnDI+BhYLskOLolLEYFDyH5gg6T3SVIXGdg43wHrJR1PCrrowCHn+eBcHjumVhZgA7cAwxZgryQLPDQkZQIOAW8HW9i9RojLCGycP4HdwFZJg/WAlxU4ZHwGrJB0MSp02YFDziOSWqNAVwXYWO8ACyV9HA28SsDG2S+pxSdgY50r6VYt6Kp52DgPS2rzCfihpJk+AX+RNMkn4EFJNW9Aq/gOD0iye+4RpYrAFh9b5xPwbEn3fQHuldTuy8HDrn0XSPrqA/Coh43hE1D2Rcubz8NfQQCg24cAgDchHgvidQN7fAjiWZi2VZKlQMaSoi9aXgXivblq8eYyzavrUm8uxC3loRM46EPKgzdJLa+CtKXTsTbUBjtnuQ97lZg2EGTPVz710LJxwuRS23ZylzQf6UtASxHTh20RmZbg1FuCuCWQ9iWoMzFV5uELo9Qp1WuoFCUAa23jr5fsv/YvgDZJ52LqSb27eXgsYKvojAasWTbNfmBzacp4DNI5N8dqCwGrM4wq5SzUCumcc0uAE8CECMSbJMWtdYpgJvkmIxVb2iO6qIYpK7bcJulp8kPJRuOIBdPOuanDymntHa9mOW02c5yvlWZJfL7zn771pofTn+N8LXjn4T8Um4Fccs/neQAAAABJRU5ErkJggg=="},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(296),e.exports=n(948)},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(36),a=n.n(o),s=(n(239),n(11)),c=n.n(s),l=n(1),u=n(18),d=n(7),h=n(369),f=(n(453),n(6)),p=n(162),g=n(336),y=n(384),v=n.n(y),m=(n(454),n(940),n(540)),_=n.n(m),b=n(541),E=n.n(b),S=n(35),T=n.n(S),w=n(542),O=n.n(w),k=n(543),C=n.n(k),$=n(544),A=n.n($),P=(n(941),function(e){var t=e.data,n=Object(r.useState)({height:0}),o=Object(d.a)(n,2),a=o[0],s=o[1];return Object(r.useLayoutEffect)((function(){var e=function(){var e,t=window.innerHeight,n=t-((null===(e=document.getElementById("footer_box"))||void 0===e?void 0:e.offsetHeight)||0);console.log("%c [ innerHeight ]-153","font-size:13px; background:pink; color:#bf2c9f;",t),s({height:n})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"arrow_box",style:{height:a.height+"px"}},i.a.createElement("div",{className:"reelshort_icon"},i.a.createElement("img",{src:O.a,alt:""})),i.a.createElement("div",{className:"reelshort_name"},"ReelShort "),i.a.createElement("div",{className:"search-box"},i.a.createElement("div",{className:"search-title"},null===t||void 0===t?void 0:t.title),i.a.createElement("div",{className:"search-icon"},i.a.createElement("img",{src:C.a,alt:""}))),i.a.createElement("div",{className:"chepter-info"},"Click the button to watch more exciting content"),i.a.createElement("div",{className:"arrows"},i.a.createElement("img",{src:A.a,alt:""}))))});P.displayName="Arrow";var I=P,x=function(e){var t=e.data,n=e.isActivity,o=e.playReportHandle,a=(Object(r.useRef)(),Object(r.useRef)()),s=Object(r.useState)(!0),c=Object(d.a)(s,2),u=c[0],h=c[1],p=Object(r.useState)(!1),g=Object(d.a)(p,2),y=g[0],m=g[1],b=Object(r.useState)(!1),S=Object(d.a)(b,2),w=(S[0],S[1]),O=Object(r.useState)({width:540,height:950}),k=Object(d.a)(O,2),C=k[0],$=k[1],A=Object(r.useRef)();return Object(r.useEffect)((function(){var e,r;n?(m(!1),!a.current&&t?function(e){var t,n=Object(l.a)({url:"https://dev-v-mps.crazymaplestudios.com/vod-112d8b/c9023040a84f71edbfcc87c7361c0102/23d796323b9d473cb7ef7cc89802135c-2e5b48b35237213e4bafef865cade0cc-ld.m3u8",id:"video_pc",pip:!1,closeVideoStopPropagation:!0,streamType:"hls",lang:"en",autoplayMuted:!0,fullscreen:!1,volume:!1,autoplay:!0,PlaybackRateMobilePlugin:!1,playbackRate:!1,ignores:["playbackRate","pip"],sdkErrorPlugin:{errorTipsText:{en:"Network connection unavailable. Please check your network status."}},controls:!1},e);"dev"!==Object(f.c)()&&delete n.EncryptHlsPlugin,a.current=new v.a(n),a.current.on("player_create_finish",(function(){console.log("%c [ \u5f00\u59cb\u64ad\u653e ]-74","font-size:13px; background:pink; color:#bf2c9f;")})),a.current.on("loadstart",(function(){var e;console.timeEnd("myFunc"),null===(e=a.current)||void 0===e||e.player.play()})),a.current.on("play",(function(){var e;console.log("%c [ b-\u64ad\u653e ]-147","font-size:13px; background:pink; color:#bf2c9f;",null===(e=a.current)||void 0===e?void 0:e.player.play)})),a.current.on("pause",(function(){var e,t;console.log("%c [ \u6d4b\u8bd5-\u8fd9\u91cc\u6682\u505c\u4e86 ]-207","font-size:13px; background:red; color:#bf2c9f;");1===(null===(e=A.current)||void 0===e?void 0:e.is_lock)||Math.ceil(a.current.player._currentTime/(null===(t=A.current)||void 0===t?void 0:t.duration)*100)})),a.current.on("loadeddata",(function(){o()})),a.current.on("error",(function(e){console.log("%c [ error ]-144","font-size:13px; background:pink; color:#bf2c9f;",e)})),null===(t=a.current)||void 0===t||t.on("ended",(function(){console.log("%c [ \u64ad\u653e\u5b8c\u4e86 ]-135","font-size:13px; background:pink; color:#bf2c9f;"),a.current.player.pause(),m(!0)}))}({url:t.video_url,streamType:t.video_url.includes("mp4")?"mp4":"hls"}):null===(e=a.current)||void 0===e||e.player.replay()):null===(r=a.current)||void 0===r||r.player.pause()}),[t,n]),Object(r.useLayoutEffect)((function(){var e=function(){var e,t=window.innerHeight,n=t-((null===(e=document.getElementById("footer_box"))||void 0===e?void 0:e.offsetHeight)||0);console.log("%c [ innerHeight ]-153","font-size:13px; background:pink; color:#bf2c9f;",t),$({height:n,width:Math.floor(540/950*n)-3})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),i.a.createElement("div",{className:"video_container"},i.a.createElement("div",{className:T()("mute_module",{un_mute_module:!u}),onClick:function(){var e,t;(null===(e=a.current)||void 0===e||null===(t=e.player)||void 0===t?void 0:t.muted)?(h(!1),a.current.player.muted=!1):(h(!0),a.current.player.muted=!0)}},u?i.a.createElement("span",null,"Click here to unmute"):null,i.a.createElement("img",{src:u?_.a:E.a})),i.a.createElement("div",{onClick:function(){var e,t,n,r,i,o;(console.log("%c [ playerSdk.current ]-153","font-size:13px; background:pink; color:#bf2c9f;",a.current),null===(e=a.current)||void 0===e||null===(t=e.player)||void 0===t?void 0:t.play)?(null===(n=a.current)||void 0===n||null===(r=n.player)||void 0===r||r.pause(),w(!1)):(null===(i=a.current)||void 0===i||null===(o=i.player)||void 0===o||o.play(),w(!0))},id:"video_pc",style:{width:C.width,height:C.height,background:"#000",position:"relative",margin:"0 auto"}}),y?i.a.createElement(I,{data:t}):null)};x.displayName="VideoPlayerContainer";var R=x,D=n(545),L=n.n(D),M=n(316),N=n.n(M),j=function(e){var t,n=e.data,o=e.handleEvokeApp,a=e.ui_type,s=e.playReportHandle,c=Object(r.useState)({height:0}),l=Object(d.a)(c,2),u=l[0],h=l[1],f=Object(r.useState)(0),p=Object(d.a)(f,2),y=p[0],v=p[1],m=Object(r.useRef)(null);Object(r.useEffect)((function(){document.addEventListener("touchmove",(function(e){e.preventDefault()}),{passive:!1})}),[]),Object(r.useEffect)((function(){v(null===n||void 0===n?void 0:n.cover)}),[n]);var _=function(e){v(e)};return Object(r.useLayoutEffect)((function(){var e=function(){var e,t=window.innerHeight-((null===(e=document.getElementById("footer_box"))||void 0===e?void 0:e.offsetHeight)||0);console.log("%c [ innerHeight ]-153","font-size:13px; background:pink; color:#bf2c9f;",t),h({height:t})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:N.a.content_box},i.a.createElement("div",{className:N.a.video_box,id:"video-box",style:"3"===a?y===(null===n||void 0===n?void 0:n.cover)?{height:"".concat(u.height,"px")}:{visibility:"hidden",zIndex:-999,opacity:0}:{height:"".concat(u.height,"px")}},i.a.createElement(R,{data:n,isActivity:y===(null===n||void 0===n?void 0:n.cover),playReportHandle:s})),"3"===a&&y!==(null===n||void 0===n?void 0:n.cover)?i.a.createElement("div",{className:N.a.image_box},i.a.createElement("img",{src:null===n||void 0===n?void 0:n.image_urls[y],alt:"image"})):i.a.createElement(i.a.Fragment,null),i.a.createElement("div",{id:"footer_box",className:N.a.footer_box,style:"3"===a?{height:"179px"}:{height:"94px"}},"3"===a?i.a.createElement("div",{className:N.a.banner_box},i.a.createElement(g.a,{onAfterInit:function(e){m.current=e},slidesPerView:"auto",spaceBetween:16,touchMoveStopPropagation:!0},i.a.createElement(g.b,{key:null===n||void 0===n?void 0:n.cover},i.a.createElement("div",{className:"".concat(N.a.swiper_slide," ").concat(y===(null===n||void 0===n?void 0:n.cover)?N.a.swiper_active:""," "),onClick:function(){return _(null===n||void 0===n?void 0:n.cover)}},i.a.createElement("div",{className:N.a.play_btn},i.a.createElement("img",{src:L.a,alt:""})),i.a.createElement("img",{src:null===n||void 0===n?void 0:n.cover,alt:""}))),null===n||void 0===n||null===(t=n.image_urls)||void 0===t?void 0:t.map((function(e,t){return i.a.createElement(g.b,{key:e.key},i.a.createElement("div",{className:"".concat(N.a.swiper_slide," ").concat(y===t?N.a.swiper_active:""),onClick:function(){return _(t)}},i.a.createElement("img",{src:e,alt:""})))})))):i.a.createElement(i.a.Fragment,null),i.a.createElement("div",{className:N.a.is_footer_box},i.a.createElement("div",{className:"bottom-btn",onClick:function(){o()}},"Continue Watching",i.a.createElement("div",{className:"rounds"},i.a.createElement("div",{className:"finger"})))))))};j.displayName="VideoImageContainer";var B=j,U=(n(942),n(29)),G=n(47),F=n(347),V=n.n(F),H=function(e){var t,n=e.data;return i.a.createElement("div",{className:V.a.fall_ground_box3},i.a.createElement("div",{className:V.a.header},i.a.createElement("div",{className:V.a.header_icon}),i.a.createElement("div",{className:V.a.header_title},"ReelShort")),i.a.createElement("div",{className:V.a.cover},i.a.createElement("img",{src:(null===n||void 0===n||null===(t=n.image_urls)||void 0===t?void 0:t[0])||(null===n||void 0===n?void 0:n.cover)})),i.a.createElement("div",{className:V.a.title},null===n||void 0===n?void 0:n.title),i.a.createElement("div",{className:V.a.desc},null===n||void 0===n?void 0:n.desc))};H.displayName="FallGroundStatic";var z=H,K=n(344),W=n(130),Y=n(438),q=n(301),X={1:"fb",2:"tt",3:"gp",5:"sc",6:"tw",9:"pin"},J=function(){var e,t=Object(f.d)(),n=t.businessId,o=void 0===n?"64a3e325350e000040001eb5":n,a=t.campaign_id,s=t.ad_id,g=t.adset_id,y=t.ttclid,v=void 0===y?"":y,m=t.ui_type,_=void 0===m?"":m,b=t.gclid,E=void 0===b?"":b,S=t.gbraid,T=void 0===S?"":S,w=t.wbraid,O=void 0===w?"":w,k=t.book_type,C=void 0===k?"1":k,$=t.ad_type,A=void 0===$?"":$,P=t.push_type,I=void 0===P?"2":P,x=t.ScCid,R=void 0===x?"":x,D=t.twclid,L=void 0===D?"":D,M=t.epik,N=void 0===M?"":M,j=Number(I),F=Object(r.useRef)({pixel:""}),V=Object(f.f)(12),H=Object(f.g)().ios,J=Object(G.j)(),Z=(null===(e=localStorage)||void 0===e?void 0:e.getItem("uidNum"))||V+(new Date).getTime();localStorage.setItem("uidNum","".concat(Z));var Q=i.a.useRef({bookId:"",chapterId:"",uid:Z,scheme:"cmsvictor",isFromH5:2,pushType:j,businessId:o,book_type:Number(C),ad_type:A}),ee=Object(r.useState)(),te=Object(d.a)(ee,2),ne=te[0],re=te[1],ie=Object(r.useState)("fb"),oe=Object(d.a)(ie,2),ae=oe[0],se=oe[1],ce=function(e){var t=Object(W.b)({urlQueryParams:Q.current,offAfDp:!0,mediaType:ae});return"click"===e&&(J||Object(W.c)()||Object(W.d)())&&H?setTimeout((function(){location.href=t}),900):"send"!==e||J&&H||(location.href=t),t},le=Object(h.a)((function(e){return Object(p.b)()}),{manual:!0,pollingInterval:3e3,onSuccess:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,i,o,a,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n[0],i=r.time,o=r.lastIp,e.next=3,Object(q.b)();case 3:a=e.sent,0===t.code&&(s=t.data.ip,i<(new Date).getTime()&&de(),s!==o&&(de(),he(Object(l.a)({visitorId:Z,href:location.href,referrer:null===(u=document)||void 0===u?void 0:u.referrer,goto:JSON.stringify(Q.current),arg:{media_type:ae,pixelid:F.current.pixel,_fbc:Object(f.b)("_fbc"),_fbp:Object(f.b)("_fbp"),ttclid:v,ttp:Object(f.b)("_ttp"),gclid:E,gbraid:T,wbraid:O,sc_click_id:R,sc_cookie1:Object(f.b)("_scid"),twclid:L,epik:N},lastIp:o},a))));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),ue=le.run,de=le.cancel,he=Object(h.a)((function(e){return Object(p.c)(e)}),{manual:!0,onSuccess:function(e){if(0===e.code){de();var t=(new Date).getTime()+36e5;ue({lastIp:e.data.ip,time:t})}U.a.clickReport({eventName:"h5_w2a_link_stat",properties:{_action:"redirect",_story_id:Q.current.bookId,_chap_id:Q.current.chapterId||"",_chap_order_id:null===ne||void 0===ne?void 0:ne.chapter_index,h5_uid:Z,_url:location.href,pixel_id:F.current.pixel,campaign_id:a,adset_id:g,ad_id:s,ui_type:_,af_onelink:ce()}}),ce("send")}}).run,fe=Object(h.a)((function(){return Object(p.a)(o)}),{onSuccess:function(e){var t;if((null===(t=e.data)||void 0===t?void 0:t.forbid)>0)Y.c("IP \u7981\u6b62\u8bbf\u95ee",{contexts:{res:e,local:Object(G.h)()}});else if(0===e.code){var n,r,i;console.log("%c [  ]-147","font-size:13px; background:pink; color:#bf2c9f;",e.data),re(e.data);var c=e.data.pixel,u=X[e.data.channel];se(u),F.current.pixel=c,"fb"===u?(fbq("init",c),fbq("track","PageView"),document.querySelector("noscript").innerHTML="https://www.facebook.com/tr?id=".concat(c,"&ev=PageView&noscript=1")):"tt"===u?(ttq.load(c),ttq.page()):"sc"===u?(snaptr("init",c,{user_email:"__INSERT_USER_EMAIL__"}),snaptr("track","PAGE_VIEW")):"tw"===u&&twq("config",c);var d=document.styleSheets[0];d.insertRule(".page-ctr::before {\n          background: url(".concat((null===e||void 0===e||null===(n=e.data)||void 0===n||null===(r=n.image_urls)||void 0===r?void 0:r[0])||e.data.cover,");\n        }"),d.cssRules.length),Q.current=Object(l.a)(Object(l.a)({},Q.current),{},{bookId:e.data.book_id,chapterId:e.data.chapter_id,uid:Z,scheme:"cmsvictor",isFromH5:2,pushType:2,businessId:o}),U.a.clickReport({eventName:"h5_w2a_link_stat",properties:{_action:"show",_story_id:Q.current.bookId,_chap_id:Q.current.chapterId||"",_chap_order_id:null===(i=e.data)||void 0===i?void 0:i.chapter_index,h5_uid:Z,_url:location.href,pixel_id:c,campaign_id:a,adset_id:g,ad_id:s,ui_type:_}})}}}).loading,pe=function(){var e=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.b)();case 2:n=e.sent,U.a.clickReport({eventName:"h5_w2a_link_stat",properties:{_action:"continue_watch_click",_story_id:Q.current.bookId,_chap_id:Q.current.chapterId||"",_chap_order_id:null===ne||void 0===ne?void 0:ne.chapter_index,h5_uid:Z,_url:location.href,pixel_id:F.current.pixel,campaign_id:a,adset_id:g,ad_id:s,ui_type:_}}),Object(G.b)(JSON.stringify(Q.current)),he(Object(l.a)({visitorId:Z,href:location.href,referrer:null===(t=document)||void 0===t?void 0:t.referrer,goto:JSON.stringify(Q.current),arg:{media_type:ae,pixelid:F.current.pixel,_fbc:Object(f.b)("_fbc"),_fbp:Object(f.b)("_fbp"),ttclid:v,ttp:Object(f.b)("_ttp"),gclid:E,gbraid:T,wbraid:O,sc_click_id:R,sc_cookie1:Object(f.b)("_scid"),twclid:L,epik:N}},n)),ce("click");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){U.a.clickReport({eventName:"h5_w2a_link_stat",properties:{_action:"loading",_story_id:Q.current.bookId,_chap_id:Q.current.chapterId||"",_chap_order_id:null===ne||void 0===ne?void 0:ne.chapter_index,h5_uid:Z,_url:location.href,pixel_id:F.current.pixel,campaign_id:a,adset_id:g,ad_id:s,ui_type:_}})}),[]),Object(r.useEffect)((function(){if(console.log("[ ui_type ] >",_),"4"!==_){var e=document.body.style;e.position="fixed",e.top="0",e.left="0",e.width="100%",e.zIndex="99999"}}),[_]),fe?i.a.createElement(K.a,{style:{fontSize:40,lineHeight:"100vh",textAlign:"center"}}):ne?i.a.createElement("div",{className:"page-ctr",style:"4"!==_?{height:"100vh"}:{height:""}},"4"===_&&i.a.createElement(i.a.Fragment,null,i.a.createElement(z,{data:ne})," ",i.a.createElement("div",{className:"is_footer"},i.a.createElement("div",{className:"bottom-btn",onClick:function(){pe()}},"Continue Watching",i.a.createElement("div",{className:"rounds"},i.a.createElement("div",{className:"finger"}))))),("3"===_||"2"===_)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(B,{data:ne,handleEvokeApp:pe,ui_type:_,playReportHandle:function(){U.a.clickReport({eventName:"h5_w2a_link_stat",properties:{_action:"video_play",_story_id:Q.current.bookId,_chap_id:Q.current.chapterId||"",_chap_order_id:null===ne||void 0===ne?void 0:ne.chapter_index,h5_uid:Z,_url:location.href,pixel_id:F.current.pixel,campaign_id:a,adset_id:g,ad_id:s,ui_type:_}})}}))):i.a.createElement("div",{className:"page-ctr"})},Z=n(300);n(155),n(363);a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Z.a,null,i.a.createElement(J,null))),document.getElementById("root"))}]);
//# sourceMappingURL=videoAdvPageV3.f5e3d5bc.js.map